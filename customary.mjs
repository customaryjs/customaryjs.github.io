
function $parcel$exportWildcard(dest, source) {
  Object.keys(source).forEach(function(key) {
    if (key === 'default' || key === '__esModule' || Object.prototype.hasOwnProperty.call(dest, key)) {
      return;
    }

    Object.defineProperty(dest, key, {
      enumerable: true,
      get: function get() {
        return source[key];
      }
    });
  });

  return dest;
}

function $parcel$export(e, n, v, s) {
  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});
}
var $ea14babfe644be71$exports = {};

$parcel$export($ea14babfe644be71$exports, "Customary", () => $b7d50751d22c9c51$export$7d556906c4a5f4a7);
$parcel$export($ea14babfe644be71$exports, "CustomaryElement", () => $826f93dc66b3cf65$export$4a183080d2c522d7);
class $85578581f704d63b$export$2bcc17fb5433cbbf {
    document;
    globalThis;
    constructor(document, globalThis){
        this.document = document;
        this.globalThis = globalThis;
    }
    detect() {
        return this.detectElementNames().map((name)=>this.detectDeclaration(name));
    }
    detectElementNames() {
        const attribute = 'data-customary-name';
        const fromDocument = [
            ...this.document.querySelectorAll(`template[${attribute}]`)
        ].map((template)=>template.getAttribute(attribute));
        const prefix = 'customary:';
        const fromGlobalScope = Object.keys(this.globalThis).filter((name)=>name.startsWith(prefix)).map((name)=>name.substring(prefix.length));
        return [
            ...new Set([
                ...fromDocument,
                ...fromGlobalScope
            ])
        ];
    }
    detectDeclaration(name) {
        const fromGlobalScope = this.globalThis[`customary:${name}`];
        const config = fromGlobalScope?.config;
        const hooks = fromGlobalScope?.hooks;
        const values = fromGlobalScope?.values ?? this.detectValues(name);
        return {
            name: name,
            ...config ? {
                config: config
            } : {},
            ...hooks ? {
                hooks: hooks
            } : {},
            ...values ? {
                values: values
            } : {}
        };
    }
    detectValues(name) {
        const selectors = `script[type="application/json"][data-customary-name='${name}']`;
        const elements = this.document.querySelectorAll(selectors);
        if (elements.length === 0) return undefined;
        const result = {};
        for (const element of elements)if (element.textContent) {
            const qualifiedName = 'data-customary-value';
            const key = element.getAttribute(qualifiedName) ?? (()=>{
                throw Error(`Attribute "${qualifiedName}" is required for "${selectors}"`);
            })();
            result[key] = JSON.parse(element.textContent);
        }
        return result;
    }
}


function $182d5725a60cb319$export$3452ba782587c66f(constructor) {
    return $182d5725a60cb319$var$definition_property in constructor;
}
function $182d5725a60cb319$export$5c2b83001c88ec5b(constructor, definition) {
    constructor[$182d5725a60cb319$var$definition_property] = definition;
}
function $182d5725a60cb319$export$6dac8c184f86ad18(element) {
    const constructor = element.constructor;
    return constructor[$182d5725a60cb319$var$definition_property] ?? (()=>{
        throw new Error(`${constructor.name}: element never defined`);
    })();
}
const $182d5725a60cb319$var$definition_property = 'customary_definition';


class $01747c95a7b5a210$export$403d1949f253139e {
    fetchText;
    options;
    constructor(fetchText, options){
        this.fetchText = fetchText;
        this.options = options;
    }
    async loadHtml() {
        const location = this.resolveResourceLocation('html');
        return await this.fetchText.fetchText(location);
    }
    resolveResourceLocation(extension) {
        return $01747c95a7b5a210$export$de7ab7265d436fa0({
            import_meta: this.options.import_meta,
            name: this.options.name,
            extension: extension
        });
    }
}
function $01747c95a7b5a210$export$de7ab7265d436fa0(options) {
    return options.import_meta.resolve(`./${options.name}.${options.extension}`);
}


class $b3c66a46f5101323$var$FetchText_DOM {
    async fetchText(input) {
        const response = await fetch(input);
        if (response.ok) return await response.text();
        throw new Error(response.statusText, {
            cause: response
        });
    }
}
const $b3c66a46f5101323$export$d763ec234f19c958 = new $b3c66a46f5101323$var$FetchText_DOM();


class $f43e665aade76dee$export$600185c43209b69f {
    static encodeExpressionPlaceholder({ type: type, tag: tag, name: name, data: data }) {
        const prefix = $f43e665aade76dee$var$TYPE_x_PREFIX[this.toExpressionType(name, type)];
        tag.setAttribute(`${prefix}${name}`, data);
    }
    static decodeExpressionPlaceholders(htmlString) {
        Object.entries($f43e665aade76dee$var$SYMBOL_x_PREFIX).forEach(([symbol, prefix])=>{
            htmlString = htmlString.replaceAll(prefix, symbol);
        });
        return htmlString;
    }
    static toExpressionType(name, s) {
        if (!s) return 'property';
        if (s === 'boolean' || s === 'event') return s;
        throw new Error(`Unknown expression type "${s}" for attribute "${name}"`);
    }
}
// lowercase because setAttribute would lowercase it regardless
const $f43e665aade76dee$var$LIT_BOOLEAN_ATTRIBUTE_EXPRESSION_PREFIX = '____lit_boolean_attribute_expression_prefix____';
const $f43e665aade76dee$var$LIT_EVENT_EXPRESSION_PREFIX = '____lit_event_expression_prefix____';
const $f43e665aade76dee$var$LIT_PROPERTY_EXPRESSION_PREFIX = '____lit_property_expression_prefix____';
const $f43e665aade76dee$var$TYPE_x_PREFIX = {
    'boolean': $f43e665aade76dee$var$LIT_BOOLEAN_ATTRIBUTE_EXPRESSION_PREFIX,
    'event': $f43e665aade76dee$var$LIT_EVENT_EXPRESSION_PREFIX,
    'property': $f43e665aade76dee$var$LIT_PROPERTY_EXPRESSION_PREFIX
};
const $f43e665aade76dee$var$SYMBOL_x_PREFIX = {
    '?': $f43e665aade76dee$var$LIT_BOOLEAN_ATTRIBUTE_EXPRESSION_PREFIX,
    '@': $f43e665aade76dee$var$LIT_EVENT_EXPRESSION_PREFIX,
    '.': $f43e665aade76dee$var$LIT_PROPERTY_EXPRESSION_PREFIX
};


class $0b7f44b46581f639$export$416e73b0bcc4c4c3 {
    static encodeExpressionPlaceholders(template) {
        const tags = template.content.querySelectorAll(`[${$0b7f44b46581f639$export$ab01fe353da9eec0}]`);
        for (const tag of tags){
            const binding = tag.getAttribute($0b7f44b46581f639$export$ab01fe353da9eec0);
            const type = tag.getAttribute('type');
            if (type === 'checkbox') (0, $f43e665aade76dee$export$600185c43209b69f).encodeExpressionPlaceholder({
                tag: tag,
                type: 'boolean',
                name: 'checked',
                data: "${" + `this.${binding}` + " === 'true'}"
            });
            else (0, $f43e665aade76dee$export$600185c43209b69f).encodeExpressionPlaceholder({
                tag: tag,
                name: 'value',
                data: "${" + `this.${binding}` + ' ?? null}'
            });
        }
    }
}
const $0b7f44b46581f639$export$ab01fe353da9eec0 = 'data-customary-bind';



class $5624ab157a7497d2$export$13d98f3fe81ca8a4 {
    static encodeExpressionPlaceholders(template) {
        const tags = Array.from(template.content.querySelectorAll(`[${$5624ab157a7497d2$var$EXPRESSIONS_ATTRIBUTE}]`));
        for (const tag of tags){
            const attributeNames = tag.getAttributeNames();
            for (const attributeName of attributeNames)this.encodeExpressionPlaceholder(attributeName, tag);
            tag.removeAttribute($5624ab157a7497d2$var$EXPRESSIONS_ATTRIBUTE);
        }
    }
    static encodeExpressionPlaceholder(attributeName, tag) {
        if (!attributeName.startsWith($5624ab157a7497d2$var$EXPRESSION_NAME_ATTRIBUTE_PREFIX)) return;
        const ordinal = attributeName.substring($5624ab157a7497d2$var$EXPRESSION_NAME_ATTRIBUTE_PREFIX.length);
        const dataAttributeName = $5624ab157a7497d2$var$EXPRESSION_DATA_ATTRIBUTE_PREFIX + ordinal;
        const typeAttributeName = $5624ab157a7497d2$var$EXPRESSION_TYPE_ATTRIBUTE_PREFIX + ordinal;
        (0, $f43e665aade76dee$export$600185c43209b69f).encodeExpressionPlaceholder({
            tag: tag,
            name: tag.getAttribute(attributeName),
            data: tag.getAttribute(dataAttributeName),
            type: tag.getAttribute(typeAttributeName) ?? undefined
        });
        tag.removeAttribute(attributeName);
        tag.removeAttribute(dataAttributeName);
        tag.removeAttribute(typeAttributeName);
    }
}
const $5624ab157a7497d2$var$EXPRESSIONS_ATTRIBUTE = 'data-customary-expressions';
const $5624ab157a7497d2$var$EXPRESSION_NAME_ATTRIBUTE_PREFIX = 'data-customary-expression-name';
const $5624ab157a7497d2$var$EXPRESSION_DATA_ATTRIBUTE_PREFIX = 'data-customary-expression-data';
const $5624ab157a7497d2$var$EXPRESSION_TYPE_ATTRIBUTE_PREFIX = 'data-customary-expression-type';



function $1095e4fec24188a1$export$992aa6859e31245f(tag, value, template) {
    try {
        tag.outerHTML = value;
    } catch (error) {
        const chrome = "Failed to set the 'outerHTML' property on 'Element': This element's parent is of type '#document-fragment', which is not an element node.";
        if (error.message === chrome) template.innerHTML = template.innerHTML.replace(tag.outerHTML, value);
    }
}


function $943d45eed2450dd3$export$fef48429545ba792(markup) {
    return markup.replace(':', '\\:');
}



class $15f164e6b5a2d20f$export$8d09ee4c629fddff {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const tag = node.querySelector((0, $943d45eed2450dd3$export$fef48429545ba792)($15f164e6b5a2d20f$var$for_markup));
            if (!tag) return;
            this.hydrateTree(tag, template);
            const items_raw = tag.getAttribute('items') ?? (()=>{
                throw Error(`Attribute "items" is required for "${$15f164e6b5a2d20f$var$for_markup}" markup`);
            })();
            const items = (0, $8d35cfa2af2d67e0$export$d581b09daa9a8e0e)(items_raw);
            const value = tag.getAttribute('value') ?? 'value';
            const index = tag.getAttribute('index');
            const args = index ? `(${value}, ${index})` : value;
            const body = tag.innerHTML;
            const use_repeat_instead_of_map = true;
            const directive = use_repeat_instead_of_map ? `\${repeat(${items}??[], ${args} => customary_lit_html_track( html\`${body}\` ) )}` : `\${map(${items}, ${args} => customary_lit_html_track( html\`${body}\` ) )}`;
            (0, $1095e4fec24188a1$export$992aa6859e31245f)(tag, directive, template);
        }
    }
}
const $15f164e6b5a2d20f$var$for_markup = 'customary:for';





class $4b9549cefe5cc8d8$export$30142ff0bf8ef8b2 {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const tag = node.querySelector((0, $943d45eed2450dd3$export$fef48429545ba792)($4b9549cefe5cc8d8$var$if_markup));
            if (!tag) return;
            this.hydrateTree(tag, template);
            const condition = (0, $8d35cfa2af2d67e0$export$d581b09daa9a8e0e)(tag.getAttribute('condition') ?? (()=>{
                throw Error(`Attribute "condition" is required for "${$4b9549cefe5cc8d8$var$if_markup}" markup`);
            })());
            const trueElements = [
                ...tag.querySelectorAll(`:scope > ${(0, $943d45eed2450dd3$export$fef48429545ba792)($4b9549cefe5cc8d8$var$true_markup)}`)
            ];
            if (trueElements.length > 1) throw Error(`Only one "${$4b9549cefe5cc8d8$var$true_markup}" is allowed for "${$4b9549cefe5cc8d8$var$if_markup}" markup`);
            const trueElement = trueElements[0];
            const falseElements = [
                ...tag.querySelectorAll(`:scope > ${(0, $943d45eed2450dd3$export$fef48429545ba792)($4b9549cefe5cc8d8$var$false_markup)}`)
            ];
            if (falseElements.length > 1) throw Error(`Only one "${$4b9549cefe5cc8d8$var$false_markup}" is allowed for "${$4b9549cefe5cc8d8$var$if_markup}" markup`);
            const falseElement = falseElements[0];
            if (falseElement && !trueElement) throw Error(`One "${$4b9549cefe5cc8d8$var$true_markup}" is required if "${$4b9549cefe5cc8d8$var$false_markup}" present for "${$4b9549cefe5cc8d8$var$if_markup}" markup`);
            const trueCase = `() => customary_lit_html_track( html\`${trueElement?.innerHTML ?? tag.innerHTML}\` )`;
            const falseCase = falseElement ? `, () => customary_lit_html_track( html\`${falseElement.innerHTML}\` )` : '';
            const directive = `\${when(${condition}, ${trueCase}${falseCase})}`;
            (0, $1095e4fec24188a1$export$992aa6859e31245f)(tag, directive, template);
        }
    }
}
const $4b9549cefe5cc8d8$var$if_markup = 'customary:if';
const $4b9549cefe5cc8d8$var$false_markup = 'customary:false';
const $4b9549cefe5cc8d8$var$true_markup = 'customary:true';



class $e5145f09e0e0cb92$export$e8d2d0d808af9c0f {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const markup = node.querySelector((0, $943d45eed2450dd3$export$fef48429545ba792)($e5145f09e0e0cb92$var$inside_markup));
            if (!markup) return;
            this.hydrateTree(markup, template);
            const selectors = markup.getAttribute('target');
            if (!selectors) throw new Error(`Attribute "target" is required for "${$e5145f09e0e0cb92$var$inside_markup}" markup`);
            const target = node.querySelector(selectors);
            if (!target) throw new Error(`No element matching ${selectors}`);
            target.innerHTML = markup.innerHTML;
            markup.parentNode.removeChild(markup);
        }
    }
}
const $e5145f09e0e0cb92$var$inside_markup = 'customary:inside';


function $f32a1c3d02056bad$export$fef48429545ba792(markup) {
    return markup.replace(':', '\\:');
}



class $947f5bb51de99df2$export$9563c050217bc1e {
    static hydrate(template) {
        this.hydrateTree(template.content);
    }
    static hydrateTree(node) {
        while(true){
            const tag = node.querySelector((0, $f32a1c3d02056bad$export$fef48429545ba792)($947f5bb51de99df2$var$classMap_markup));
            if (!tag) return;
            this.hydrateTree(tag);
            const targetSelector = tag.getAttribute('target') ?? (()=>{
                throw Error(`Attribute "target" is required for "${$947f5bb51de99df2$var$classMap_markup}" markup`);
            })();
            const classInfo = (0, $8d35cfa2af2d67e0$export$d581b09daa9a8e0e)(tag.getAttribute('classInfo') ?? (()=>{
                throw Error(`Attribute "classInfo" is required for "${$947f5bb51de99df2$var$classMap_markup}" markup`);
            })());
            const target = node.querySelector(targetSelector);
            if (!target) throw Error(`Target element "${targetSelector}" not found for "${$947f5bb51de99df2$var$classMap_markup}" markup`);
            const existingClass = target.getAttribute('class');
            const classMapDirective = `\${classMap(${classInfo})}`;
            const newClass = (existingClass ? `${existingClass} ${classMapDirective}` : classMapDirective).trim();
            if (newClass) target.setAttribute('class', newClass);
            tag.remove();
        }
    }
}
const $947f5bb51de99df2$var$classMap_markup = 'customary:classMap';




class $71d147a9b2aefca3$export$f8685ff41f6a22c6 {
    static hydrate(template) {
        this.hydrateTree(template.content);
    }
    static hydrateTree(node) {
        while(true){
            const tag = node.querySelector((0, $f32a1c3d02056bad$export$fef48429545ba792)($71d147a9b2aefca3$var$styleMap_markup));
            if (!tag) return;
            this.hydrateTree(tag);
            const targetSelector = tag.getAttribute('target') ?? (()=>{
                throw Error(`Attribute "target" is required for "${$71d147a9b2aefca3$var$styleMap_markup}" markup`);
            })();
            const styleInfo = (0, $8d35cfa2af2d67e0$export$d581b09daa9a8e0e)(tag.getAttribute('styleInfo') ?? (()=>{
                throw Error(`Attribute "styleInfo" is required for "${$71d147a9b2aefca3$var$styleMap_markup}" markup`);
            })());
            const target = node.querySelector(targetSelector);
            if (!target) throw Error(`Target element "${targetSelector}" not found for "${$71d147a9b2aefca3$var$styleMap_markup}" markup`);
            const existingStyle = target.getAttribute('style');
            const styleMapDirective = `\${styleMap(${styleInfo})}`;
            const newStyle = (existingStyle ? `${existingStyle} ${styleMapDirective}` : styleMapDirective).trim();
            if (newStyle) target.setAttribute('style', newStyle);
            tag.remove();
        }
    }
}
const $71d147a9b2aefca3$var$styleMap_markup = 'customary:styleMap';





class $2d7739f4c20b8a8a$export$19c1ebc334082502 {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const tag = node.querySelector((0, $943d45eed2450dd3$export$fef48429545ba792)($2d7739f4c20b8a8a$var$switch_markup));
            if (!tag) return;
            this.hydrateTree(tag, template);
            const value = (0, $8d35cfa2af2d67e0$export$d581b09daa9a8e0e)(tag.getAttribute('value') ?? (()=>{
                throw Error(`Attribute "value" is required for "${$2d7739f4c20b8a8a$var$switch_markup}" markup`);
            })());
            const cases = this.toCases([
                ...tag.querySelectorAll(`:scope > ${(0, $943d45eed2450dd3$export$fef48429545ba792)($2d7739f4c20b8a8a$var$case_markup)}`)
            ]);
            const valueCases = cases.valueCases.join(',\n');
            const defaultCase = cases.defaultCase ? `,\n${cases.defaultCase}` : '';
            const directive = `\${choose(${value},\n[${valueCases}]${defaultCase})}`;
            (0, $1095e4fec24188a1$export$992aa6859e31245f)(tag, directive, template);
        }
    }
    static toCases(cases) {
        if (cases.length === 0) throw Error(`At least one "${$2d7739f4c20b8a8a$var$case_markup}" is required for "${$2d7739f4c20b8a8a$var$switch_markup}" markup`);
        const defaultElements = cases.filter((caseElement)=>!caseElement.hasAttribute('value'));
        if (defaultElements.length > 1) throw Error(`Only one default "${$2d7739f4c20b8a8a$var$case_markup}" is allowed for "${$2d7739f4c20b8a8a$var$switch_markup}" markup`);
        const defaultElement = defaultElements[0];
        const defaultCase = `() => customary_lit_html_track( html\`${defaultElement?.innerHTML}\` )`;
        const valueElements = cases.filter((caseElement)=>caseElement.hasAttribute('value'));
        const valueCases = valueElements.map((caseElement)=>{
            const value = caseElement.getAttribute('value');
            return `['${value}', () => customary_lit_html_track( html\`${caseElement.innerHTML}\` ) ]`;
        });
        return {
            valueCases: valueCases,
            defaultCase: defaultCase
        };
    }
}
const $2d7739f4c20b8a8a$var$switch_markup = 'customary:switch';
const $2d7739f4c20b8a8a$var$case_markup = 'customary:case';


class $8d35cfa2af2d67e0$export$f6cf41654e745300 {
    static getHtmlString(template) {
        $8d35cfa2af2d67e0$var$encodeExpressionPlaceholders(template);
        $8d35cfa2af2d67e0$var$hydrateMarkup(template);
        const s = template.innerHTML;
        const s1 = $8d35cfa2af2d67e0$var$decodeExpressionPlaceholders(s);
        const s2 = $8d35cfa2af2d67e0$var$restoreArrowFunctionsEncodedByTemplateInnerHtml(s1);
        return $8d35cfa2af2d67e0$var$expandStringInterpolation(s2);
    }
}
function $8d35cfa2af2d67e0$var$hydrateMarkup(template) {
    (0, $15f164e6b5a2d20f$export$8d09ee4c629fddff).hydrate(template);
    (0, $4b9549cefe5cc8d8$export$30142ff0bf8ef8b2).hydrate(template);
    (0, $2d7739f4c20b8a8a$export$19c1ebc334082502).hydrate(template);
    (0, $947f5bb51de99df2$export$9563c050217bc1e).hydrate(template);
    (0, $71d147a9b2aefca3$export$f8685ff41f6a22c6).hydrate(template);
    // must be last to accommodate all others
    (0, $e5145f09e0e0cb92$export$e8d2d0d808af9c0f).hydrate(template);
}
function $8d35cfa2af2d67e0$var$encodeExpressionPlaceholders(template) {
    (0, $5624ab157a7497d2$export$13d98f3fe81ca8a4).encodeExpressionPlaceholders(template);
    (0, $0b7f44b46581f639$export$416e73b0bcc4c4c3).encodeExpressionPlaceholders(template);
}
function $8d35cfa2af2d67e0$var$decodeExpressionPlaceholders(s1) {
    return (0, $f43e665aade76dee$export$600185c43209b69f).decodeExpressionPlaceholders(s1);
}
/**
 innerHTML encodes some characters used by lit directives,
 so we must decode them back into the HTML string.
 over time the need to do this should disappear,
 as we add directive markup for a larger number of lit directives.
 */ function $8d35cfa2af2d67e0$var$restoreArrowFunctionsEncodedByTemplateInnerHtml(htmlString) {
    // lit directives expressed as arrow functions
    return htmlString.replaceAll('=&gt;', '=>');
}
function $8d35cfa2af2d67e0$var$expandStringInterpolation(htmlString) {
    const curl_curley = /\{\{([a-zA-Z_][\w-]*(?:\.[a-zA-Z_][\w-]*)*)}}/g;
    const curl_square = /\{\[([a-zA-Z_][\w-]*(?:\.[a-zA-Z_][\w-]*)*)]}/g;
    return htmlString.replace(curl_curley, (_match, path)=>"${" + $8d35cfa2af2d67e0$var$expandThisInterpolation(path) + "}").replace(curl_square, (_match, path)=>"${" + $8d35cfa2af2d67e0$var$expandBareInterpolation(path) + "}");
}
function $8d35cfa2af2d67e0$export$d581b09daa9a8e0e(expression) {
    const curl_curley = /^\{\{([a-zA-Z_][\w-]*(?:\.[a-zA-Z_][\w-]*)*)}}$/;
    const curl_square = /^\{\[([a-zA-Z_][\w-]*(?:\.[a-zA-Z_][\w-]*)*)]}$/;
    const that = expression.match(curl_curley);
    if (that) return $8d35cfa2af2d67e0$var$expandThisInterpolation(that[1]);
    const bare = expression.match(curl_square);
    if (bare) return $8d35cfa2af2d67e0$var$expandBareInterpolation(bare[1]);
    throw new Error(`Interpolation required: ${expression}`);
}
function $8d35cfa2af2d67e0$var$expandThisInterpolation(path) {
    return "this" + path.split('.').map((p)=>"['" + p + "']").join('?.');
}
function $8d35cfa2af2d67e0$var$expandBareInterpolation(path) {
    const segments = path.split('.');
    return segments[0] + segments.slice(1).map((p)=>"['" + p + "']").join('?.');
}


function $39d578e3566a23f6$export$f531b3a8754a3eba({ config: config, template: template }) {
    const fromConfig = config?.attributes ?? [];
    const fromTemplate = template.getAttribute('data-customary-attributes')?.split(',').map((s)=>s.trim()) ?? [];
    return {
        attributes: [
            ...new Set([
                ...fromConfig,
                ...fromTemplate
            ])
        ]
    };
}


class $3bb36fafb1df46c1$export$d2f740e6c972cdb4 {
    static injectProperties(constructor, { propertyDeclaration: propertyDeclaration, names: names, skipExisting: skipExisting }) {
        if (!names.length) return;
        const properties = constructor.properties ??= {};
        for (const key of names){
            if (key in properties) {
                if (skipExisting) continue;
                throw new Error(`${key}: property already exists.`);
            }
            properties[key] = propertyDeclaration;
        }
    }
}


class $33394abde4ccbef2$export$5168145dca66f61b {
    static addProperties(constructor, attributesDefinition) {
        (0, $3bb36fafb1df46c1$export$d2f740e6c972cdb4).injectProperties(constructor, {
            propertyDeclaration: {
                reflect: true
            },
            names: attributesDefinition.attributes
        });
    }
}



class $8e1fa652917f6bda$export$a651989c4cc94404 {
    static addProperties(constructor, declaration) {
        const derive = declaration.hooks?.derive;
        if (!derive) return;
        const names = derive instanceof Array ? derive.map((entry)=>entry.name) : Object.keys(derive);
        (0, $3bb36fafb1df46c1$export$d2f740e6c972cdb4).injectProperties(constructor, {
            propertyDeclaration: {
                state: true
            },
            names: names
        });
    }
}



class $cd7d8a2459e5d20f$export$61ef374d05bfb1e {
    static addProperties(constructor, declaration) {
        const hooks = declaration.hooks?.properties;
        const hooksArray = hooks instanceof Array ? hooks : [];
        const hooksRecord = hooks && !(hooks instanceof Array) ? hooks : {};
        const fromArray = hooksArray.map((o)=>o.name);
        const fromRecord = Object.keys(hooksRecord);
        const names = [
            ...new Set([
                ...fromArray,
                ...fromRecord
            ])
        ];
        for (const key of names)(0, $3bb36fafb1df46c1$export$d2f740e6c972cdb4).injectProperties(constructor, {
            propertyDeclaration: hooksArray.find((value)=>value.name === key)?.propertyDeclaration ?? hooksRecord[key],
            names: [
                key
            ]
        });
    }
}



class $c070a5b8075fa2ec$export$a9f1901adeec51a7 {
    static addProperties(constructor, declaration) {
        const fromDeclaration = declaration.config?.state ?? [];
        const names = [
            ...new Set([
                ...fromDeclaration
            ])
        ];
        (0, $3bb36fafb1df46c1$export$d2f740e6c972cdb4).injectProperties(constructor, {
            propertyDeclaration: {
                state: true
            },
            names: names
        });
    }
}



class $f6b1260a8f520720$export$df5c7211ad410b7 {
    static addProperties(constructor, declaration) {
        const names = Object.keys(declaration.values ?? {});
        (0, $3bb36fafb1df46c1$export$d2f740e6c972cdb4).injectProperties(constructor, {
            propertyDeclaration: {
                state: true
            },
            names: names,
            skipExisting: true
        });
    }
}


class $3f0879bde25abb42$export$596149ab54c7bc70 {
    static addProperties(constructor, customaryDefinition) {
        (0, $33394abde4ccbef2$export$5168145dca66f61b).addProperties(constructor, customaryDefinition.attributes);
        (0, $8e1fa652917f6bda$export$a651989c4cc94404).addProperties(constructor, customaryDefinition.declaration);
        (0, $c070a5b8075fa2ec$export$a9f1901adeec51a7).addProperties(constructor, customaryDefinition.declaration);
        (0, $cd7d8a2459e5d20f$export$61ef374d05bfb1e).addProperties(constructor, customaryDefinition.declaration);
        (0, $f6b1260a8f520720$export$df5c7211ad410b7).addProperties(constructor, customaryDefinition.declaration);
    }
}


class $adba5314d6668aaa$export$1d2219be11768641 {
    declaration;
    async define(constructor) {
        return await this.buildDefinition(constructor);
    }
    async buildDefinition(constructor) {
        const { template: template, templateInDocument: templateInDocument } = await this.resolveHTMLTemplateElement(this.name);
        const attributes = (0, $39d578e3566a23f6$export$f531b3a8754a3eba)({
            config: this.declaration.config,
            template: template
        });
        const customaryDefinition = {
            declaration: this.declaration,
            attributes: attributes,
            templateInDocument: !!templateInDocument,
            immutable_htmlString: (0, $8d35cfa2af2d67e0$export$f6cf41654e745300).getHtmlString(template)
        };
        (0, $3f0879bde25abb42$export$596149ab54c7bc70).addProperties(constructor, customaryDefinition);
        return customaryDefinition;
    }
    async resolveHTMLTemplateElement(name) {
        try {
            const templateInDocument = $adba5314d6668aaa$var$findHTMLTemplateElement(name, document);
            if (templateInDocument) return {
                template: templateInDocument,
                templateInDocument: templateInDocument
            };
            const templateInExternalFile = await this.findHTMLTemplateElementInExternalFile(name);
            return {
                template: templateInExternalFile,
                templateInDocument: undefined
            };
        } catch (error) {
            const message = `${name}: template unresolvable from current page or external html`;
            async function unresolvable() {
                throw new Error(message, {
                    cause: error
                });
            }
            unresolvable();
            const templatePlaceholder = document.createElement('template');
            templatePlaceholder.innerHTML = `<span style="color: red; background: yellow">[${message}]</span>`;
            return {
                template: templatePlaceholder,
                templateInDocument: templatePlaceholder
            };
        }
    }
    async findHTMLTemplateElementInExternalFile(name) {
        const htmlString = await this.loadExternalHtml();
        const template = document.createElement('template');
        template.innerHTML = htmlString;
        return $adba5314d6668aaa$var$findHTMLTemplateElement(name, template.content) ?? template;
    }
    async loadExternalHtml() {
        try {
            return await (await this.externalLoader).loadHtml();
        } catch (error) {
            throw new Error('External html file out of reach.', {
                cause: error
            });
        }
    }
    constructor(declaration){
        this.declaration = declaration;
        this.name = declaration.name;
    }
    name;
    get externalLoader() {
        return this._externalLoader ??= $adba5314d6668aaa$var$createExternalLoader(this.fetchText, {
            name: this.name,
            import_meta: $adba5314d6668aaa$export$b822a0ad0f6e4c40(this.declaration)
        });
    }
    _externalLoader;
    get fetchText() {
        return this._fetchText ??= $adba5314d6668aaa$var$loadFetchText();
    }
    _fetchText;
}
async function $adba5314d6668aaa$var$createExternalLoader(fetchText, options) {
    return new (0, $01747c95a7b5a210$export$403d1949f253139e)(await fetchText, options);
}
async function $adba5314d6668aaa$var$loadFetchText() {
    return 0, $b3c66a46f5101323$export$d763ec234f19c958;
}
function $adba5314d6668aaa$var$findHTMLTemplateElement(name, node) {
    return node.querySelector(`template[data-customary-name='${name}']`) ?? undefined;
}
function $adba5314d6668aaa$export$b822a0ad0f6e4c40(declaration) {
    return declaration.hooks?.externalLoader?.import_meta ?? (()=>{
        throw new Error(`${declaration.name}: Customary needs "import.meta" if the custom element template ` + 'is to be loaded from an external file. ' + '(document did not have a named template element, and an html string was not provided.)');
    })();
}
function $adba5314d6668aaa$export$68c38d987afcbfba(declaration) {
    return ((a)=>a.length > 0 ? a : undefined)([
        declaration.config?.define?.fontLocation,
        ...declaration.config?.define?.fontLocations ?? []
    ].filter((location)=>location != undefined));
}


const $74af7c6039b335a7$var$WAIT_TO_DEFINE_EVERYTHING_IN_THE_END = false;
class $74af7c6039b335a7$export$d37a9068d840d1de {
    dom_customElementRegistry;
    static singleton() {
        return $74af7c6039b335a7$export$d37a9068d840d1de.CustomaryRegistry_singleton;
    }
    async declare(constructor, declaration) {
        if (!declaration.name) throw new Error('A name must be provided to define a custom element.');
        if (!$74af7c6039b335a7$var$WAIT_TO_DEFINE_EVERYTHING_IN_THE_END) {
            await this.define(constructor, declaration);
            return;
        }
        this.declarations.set(constructor, declaration);
    }
    async settle() {
        if (!$74af7c6039b335a7$var$WAIT_TO_DEFINE_EVERYTHING_IN_THE_END) return;
        const entries = [
            ...this.declarations.entries()
        ];
        const promises = entries.map((entry)=>{
            const [constructor, declaration] = entry;
            return this.define(constructor, declaration);
        });
        await Promise.all(promises);
    }
    async untilDefined(constructor) {
        const name = constructor.customary?.name;
        if (name === undefined) throw new Error('Class must have the "customary" declaration with a "name" property.');
        return await this.dom_customElementRegistry.whenDefined(name);
    }
    async define(constructor, declaration) {
        if ((0, $182d5725a60cb319$export$3452ba782587c66f)(constructor)) {
            console.debug(`${constructor.name}: element already defined, skipping...`);
            return;
        }
        const definition = await new (0, $adba5314d6668aaa$export$1d2219be11768641)(declaration).define(constructor);
        (0, $182d5725a60cb319$export$5c2b83001c88ec5b)(constructor, definition);
        this.dom_customElementRegistry.define(declaration.name, constructor, declaration.hooks?.dom?.define?.options);
    }
    constructor(dom_customElementRegistry){
        this.dom_customElementRegistry = dom_customElementRegistry;
        this.declarations = new Map();
    }
    declarations;
    static CustomaryRegistry_singleton = new $74af7c6039b335a7$export$d37a9068d840d1de(customElements);
}


var $22072648c2076599$exports = {};

$parcel$export($22072648c2076599$exports, "LitElement", () => $d8017b7d940aed31$export$3f2f9f5909897157);
$parcel$export($22072648c2076599$exports, "html", () => $043e8b6e2f4c6258$export$c0bb0b647f701bb5);
$parcel$export($22072648c2076599$exports, "choose", () => $7f435eda1ff690a6$export$7877a478dd30fd3d);
$parcel$export($22072648c2076599$exports, "classMap", () => $621f734394807554$export$56cc687933817664);
$parcel$export($22072648c2076599$exports, "styleMap", () => $b1556cd2d06749ac$export$1e5b4ce2fa884e6a);
$parcel$export($22072648c2076599$exports, "map", () => $2c561d96559b783f$export$871de8747c9eaa88);
$parcel$export($22072648c2076599$exports, "repeat", () => $640627e30f16b3eb$export$76d90c956114f2c2);
$parcel$export($22072648c2076599$exports, "when", () => $9929420fa4bc2e7a$export$a55877ca9db47377);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $eb7bbf91ef859ce5$var$t = globalThis, $eb7bbf91ef859ce5$export$b4d10f6001c083c2 = $eb7bbf91ef859ce5$var$t.ShadowRoot && (void 0 === $eb7bbf91ef859ce5$var$t.ShadyCSS || $eb7bbf91ef859ce5$var$t.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype, $eb7bbf91ef859ce5$var$s = Symbol(), $eb7bbf91ef859ce5$var$o = new WeakMap;
class $eb7bbf91ef859ce5$export$505d1e8739bad805 {
    constructor(t, e, o){
        if (this._$cssResult$ = !0, o !== $eb7bbf91ef859ce5$var$s) throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
        this.cssText = t, this.t = e;
    }
    get styleSheet() {
        let t = this.o;
        const s = this.t;
        if ($eb7bbf91ef859ce5$export$b4d10f6001c083c2 && void 0 === t) {
            const e = void 0 !== s && 1 === s.length;
            e && (t = $eb7bbf91ef859ce5$var$o.get(s)), void 0 === t && ((this.o = t = new CSSStyleSheet).replaceSync(this.cssText), e && $eb7bbf91ef859ce5$var$o.set(s, t));
        }
        return t;
    }
    toString() {
        return this.cssText;
    }
}
const $eb7bbf91ef859ce5$export$8d80f9cac07cdb3 = (t)=>new $eb7bbf91ef859ce5$export$505d1e8739bad805("string" == typeof t ? t : t + "", void 0, $eb7bbf91ef859ce5$var$s), $eb7bbf91ef859ce5$export$dbf350e5966cf602 = (t, ...e)=>{
    const o = 1 === t.length ? t[0] : e.reduce((e, s, o)=>e + ((t)=>{
            if (!0 === t._$cssResult$) return t.cssText;
            if ("number" == typeof t) return t;
            throw Error("Value passed to 'css' function must be a 'css' function result: " + t + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
        })(s) + t[o + 1], t[0]);
    return new $eb7bbf91ef859ce5$export$505d1e8739bad805(o, t, $eb7bbf91ef859ce5$var$s);
}, $eb7bbf91ef859ce5$export$2ca4a66ec4cecb90 = (s, o)=>{
    if ($eb7bbf91ef859ce5$export$b4d10f6001c083c2) s.adoptedStyleSheets = o.map((t)=>t instanceof CSSStyleSheet ? t : t.styleSheet);
    else for (const e of o){
        const o = document.createElement("style"), n = $eb7bbf91ef859ce5$var$t.litNonce;
        void 0 !== n && o.setAttribute("nonce", n), o.textContent = e.cssText, s.appendChild(o);
    }
}, $eb7bbf91ef859ce5$export$ee69dfd951e24778 = $eb7bbf91ef859ce5$export$b4d10f6001c083c2 ? (t)=>t : (t)=>t instanceof CSSStyleSheet ? ((t)=>{
        let e = "";
        for (const s of t.cssRules)e += s.cssText;
        return $eb7bbf91ef859ce5$export$8d80f9cac07cdb3(e);
    })(t) : t;


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const { is: $9956f07b39314456$var$i, defineProperty: $9956f07b39314456$var$e, getOwnPropertyDescriptor: $9956f07b39314456$var$h, getOwnPropertyNames: $9956f07b39314456$var$r, getOwnPropertySymbols: $9956f07b39314456$var$o, getPrototypeOf: $9956f07b39314456$var$n } = Object, $9956f07b39314456$var$a = globalThis, $9956f07b39314456$var$c = $9956f07b39314456$var$a.trustedTypes, $9956f07b39314456$var$l = $9956f07b39314456$var$c ? $9956f07b39314456$var$c.emptyScript : "", $9956f07b39314456$var$p = $9956f07b39314456$var$a.reactiveElementPolyfillSupport, $9956f07b39314456$var$d = (t, s)=>t, $9956f07b39314456$export$7312b35fbf521afb = {
    toAttribute (t, s) {
        switch(s){
            case Boolean:
                t = t ? $9956f07b39314456$var$l : null;
                break;
            case Object:
            case Array:
                t = null == t ? t : JSON.stringify(t);
        }
        return t;
    },
    fromAttribute (t, s) {
        let i = t;
        switch(s){
            case Boolean:
                i = null !== t;
                break;
            case Number:
                i = null === t ? null : Number(t);
                break;
            case Object:
            case Array:
                try {
                    i = JSON.parse(t);
                } catch (t) {
                    i = null;
                }
        }
        return i;
    }
}, $9956f07b39314456$export$53a6892c50694894 = (t, s)=>!$9956f07b39314456$var$i(t, s), $9956f07b39314456$var$b = {
    attribute: !0,
    type: String,
    converter: $9956f07b39314456$export$7312b35fbf521afb,
    reflect: !1,
    useDefault: !1,
    hasChanged: $9956f07b39314456$export$53a6892c50694894
};
Symbol.metadata ??= Symbol("metadata"), $9956f07b39314456$var$a.litPropertyMetadata ??= new WeakMap;
class $9956f07b39314456$export$c7c07a37856565d extends HTMLElement {
    static addInitializer(t) {
        this._$Ei(), (this.l ??= []).push(t);
    }
    static get observedAttributes() {
        return this.finalize(), this._$Eh && [
            ...this._$Eh.keys()
        ];
    }
    static createProperty(t, s = $9956f07b39314456$var$b) {
        if (s.state && (s.attribute = !1), this._$Ei(), this.prototype.hasOwnProperty(t) && ((s = Object.create(s)).wrapped = !0), this.elementProperties.set(t, s), !s.noAccessor) {
            const i = Symbol(), h = this.getPropertyDescriptor(t, i, s);
            void 0 !== h && $9956f07b39314456$var$e(this.prototype, t, h);
        }
    }
    static getPropertyDescriptor(t, s, i) {
        const { get: e, set: r } = $9956f07b39314456$var$h(this.prototype, t) ?? {
            get () {
                return this[s];
            },
            set (t) {
                this[s] = t;
            }
        };
        return {
            get: e,
            set (s) {
                const h = e?.call(this);
                r?.call(this, s), this.requestUpdate(t, h, i);
            },
            configurable: !0,
            enumerable: !0
        };
    }
    static getPropertyOptions(t) {
        return this.elementProperties.get(t) ?? $9956f07b39314456$var$b;
    }
    static _$Ei() {
        if (this.hasOwnProperty($9956f07b39314456$var$d("elementProperties"))) return;
        const t = $9956f07b39314456$var$n(this);
        t.finalize(), void 0 !== t.l && (this.l = [
            ...t.l
        ]), this.elementProperties = new Map(t.elementProperties);
    }
    static finalize() {
        if (this.hasOwnProperty($9956f07b39314456$var$d("finalized"))) return;
        if (this.finalized = !0, this._$Ei(), this.hasOwnProperty($9956f07b39314456$var$d("properties"))) {
            const t = this.properties, s = [
                ...$9956f07b39314456$var$r(t),
                ...$9956f07b39314456$var$o(t)
            ];
            for (const i of s)this.createProperty(i, t[i]);
        }
        const t = this[Symbol.metadata];
        if (null !== t) {
            const s = litPropertyMetadata.get(t);
            if (void 0 !== s) for (const [t, i] of s)this.elementProperties.set(t, i);
        }
        this._$Eh = new Map;
        for (const [t, s] of this.elementProperties){
            const i = this._$Eu(t, s);
            void 0 !== i && this._$Eh.set(i, t);
        }
        this.elementStyles = this.finalizeStyles(this.styles);
    }
    static finalizeStyles(s) {
        const i = [];
        if (Array.isArray(s)) {
            const e = new Set(s.flat(1 / 0).reverse());
            for (const s of e)i.unshift((0, $eb7bbf91ef859ce5$export$ee69dfd951e24778)(s));
        } else void 0 !== s && i.push((0, $eb7bbf91ef859ce5$export$ee69dfd951e24778)(s));
        return i;
    }
    static _$Eu(t, s) {
        const i = s.attribute;
        return !1 === i ? void 0 : "string" == typeof i ? i : "string" == typeof t ? t.toLowerCase() : void 0;
    }
    constructor(){
        super(), this._$Ep = void 0, this.isUpdatePending = !1, this.hasUpdated = !1, this._$Em = null, this._$Ev();
    }
    _$Ev() {
        this._$ES = new Promise((t)=>this.enableUpdating = t), this._$AL = new Map, this._$E_(), this.requestUpdate(), this.constructor.l?.forEach((t)=>t(this));
    }
    addController(t) {
        (this._$EO ??= new Set).add(t), void 0 !== this.renderRoot && this.isConnected && t.hostConnected?.();
    }
    removeController(t) {
        this._$EO?.delete(t);
    }
    _$E_() {
        const t = new Map, s = this.constructor.elementProperties;
        for (const i of s.keys())this.hasOwnProperty(i) && (t.set(i, this[i]), delete this[i]);
        t.size > 0 && (this._$Ep = t);
    }
    createRenderRoot() {
        const t = this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
        return (0, $eb7bbf91ef859ce5$export$2ca4a66ec4cecb90)(t, this.constructor.elementStyles), t;
    }
    connectedCallback() {
        this.renderRoot ??= this.createRenderRoot(), this.enableUpdating(!0), this._$EO?.forEach((t)=>t.hostConnected?.());
    }
    enableUpdating(t) {}
    disconnectedCallback() {
        this._$EO?.forEach((t)=>t.hostDisconnected?.());
    }
    attributeChangedCallback(t, s, i) {
        this._$AK(t, i);
    }
    _$ET(t, s) {
        const i = this.constructor.elementProperties.get(t), e = this.constructor._$Eu(t, i);
        if (void 0 !== e && !0 === i.reflect) {
            const h = (void 0 !== i.converter?.toAttribute ? i.converter : $9956f07b39314456$export$7312b35fbf521afb).toAttribute(s, i.type);
            this._$Em = t, null == h ? this.removeAttribute(e) : this.setAttribute(e, h), this._$Em = null;
        }
    }
    _$AK(t, s) {
        const i = this.constructor, e = i._$Eh.get(t);
        if (void 0 !== e && this._$Em !== e) {
            const t = i.getPropertyOptions(e), h = "function" == typeof t.converter ? {
                fromAttribute: t.converter
            } : void 0 !== t.converter?.fromAttribute ? t.converter : $9956f07b39314456$export$7312b35fbf521afb;
            this._$Em = e, this[e] = h.fromAttribute(s, t.type) ?? this._$Ej?.get(e) ?? null, this._$Em = null;
        }
    }
    requestUpdate(t, s, i) {
        if (void 0 !== t) {
            const e = this.constructor, h = this[t];
            if (i ??= e.getPropertyOptions(t), !((i.hasChanged ?? $9956f07b39314456$export$53a6892c50694894)(h, s) || i.useDefault && i.reflect && h === this._$Ej?.get(t) && !this.hasAttribute(e._$Eu(t, i)))) return;
            this.C(t, s, i);
        }
        !1 === this.isUpdatePending && (this._$ES = this._$EP());
    }
    C(t, s, { useDefault: i, reflect: e, wrapped: h }, r) {
        i && !(this._$Ej ??= new Map).has(t) && (this._$Ej.set(t, r ?? s ?? this[t]), !0 !== h || void 0 !== r) || (this._$AL.has(t) || (this.hasUpdated || i || (s = void 0), this._$AL.set(t, s)), !0 === e && this._$Em !== t && (this._$Eq ??= new Set).add(t));
    }
    async _$EP() {
        this.isUpdatePending = !0;
        try {
            await this._$ES;
        } catch (t) {
            Promise.reject(t);
        }
        const t = this.scheduleUpdate();
        return null != t && await t, !this.isUpdatePending;
    }
    scheduleUpdate() {
        return this.performUpdate();
    }
    performUpdate() {
        if (!this.isUpdatePending) return;
        if (!this.hasUpdated) {
            if (this.renderRoot ??= this.createRenderRoot(), this._$Ep) {
                for (const [t, s] of this._$Ep)this[t] = s;
                this._$Ep = void 0;
            }
            const t = this.constructor.elementProperties;
            if (t.size > 0) for (const [s, i] of t){
                const { wrapped: t } = i, e = this[s];
                !0 !== t || this._$AL.has(s) || void 0 === e || this.C(s, void 0, i, e);
            }
        }
        let t = !1;
        const s = this._$AL;
        try {
            t = this.shouldUpdate(s), t ? (this.willUpdate(s), this._$EO?.forEach((t)=>t.hostUpdate?.()), this.update(s)) : this._$EM();
        } catch (s) {
            throw t = !1, this._$EM(), s;
        }
        t && this._$AE(s);
    }
    willUpdate(t) {}
    _$AE(t) {
        this._$EO?.forEach((t)=>t.hostUpdated?.()), this.hasUpdated || (this.hasUpdated = !0, this.firstUpdated(t)), this.updated(t);
    }
    _$EM() {
        this._$AL = new Map, this.isUpdatePending = !1;
    }
    get updateComplete() {
        return this.getUpdateComplete();
    }
    getUpdateComplete() {
        return this._$ES;
    }
    shouldUpdate(t) {
        return !0;
    }
    update(t) {
        this._$Eq &&= this._$Eq.forEach((t)=>this._$ET(t, this[t])), this._$EM();
    }
    updated(t) {}
    firstUpdated(t) {}
}
$9956f07b39314456$export$c7c07a37856565d.elementStyles = [], $9956f07b39314456$export$c7c07a37856565d.shadowRootOptions = {
    mode: "open"
}, $9956f07b39314456$export$c7c07a37856565d[$9956f07b39314456$var$d("elementProperties")] = new Map, $9956f07b39314456$export$c7c07a37856565d[$9956f07b39314456$var$d("finalized")] = new Map, $9956f07b39314456$var$p?.({
    ReactiveElement: $9956f07b39314456$export$c7c07a37856565d
}), ($9956f07b39314456$var$a.reactiveElementVersions ??= []).push("2.1.0");


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $043e8b6e2f4c6258$var$t = globalThis, $043e8b6e2f4c6258$var$i = $043e8b6e2f4c6258$var$t.trustedTypes, $043e8b6e2f4c6258$var$s = $043e8b6e2f4c6258$var$i ? $043e8b6e2f4c6258$var$i.createPolicy("lit-html", {
    createHTML: (t)=>t
}) : void 0, $043e8b6e2f4c6258$var$e = "$lit$", $043e8b6e2f4c6258$var$h = `lit$${Math.random().toFixed(9).slice(2)}$`, $043e8b6e2f4c6258$var$o = "?" + $043e8b6e2f4c6258$var$h, $043e8b6e2f4c6258$var$n = `<${$043e8b6e2f4c6258$var$o}>`, $043e8b6e2f4c6258$var$r = document, $043e8b6e2f4c6258$var$l = ()=>$043e8b6e2f4c6258$var$r.createComment(""), $043e8b6e2f4c6258$var$c = (t)=>null === t || "object" != typeof t && "function" != typeof t, $043e8b6e2f4c6258$var$a = Array.isArray, $043e8b6e2f4c6258$var$u = (t)=>$043e8b6e2f4c6258$var$a(t) || "function" == typeof t?.[Symbol.iterator], $043e8b6e2f4c6258$var$d = "[ \t\n\f\r]", $043e8b6e2f4c6258$var$f = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g, $043e8b6e2f4c6258$var$v = /-->/g, $043e8b6e2f4c6258$var$_ = />/g, $043e8b6e2f4c6258$var$m = RegExp(`>|${$043e8b6e2f4c6258$var$d}(?:([^\\s"'>=/]+)(${$043e8b6e2f4c6258$var$d}*=${$043e8b6e2f4c6258$var$d}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`, "g"), $043e8b6e2f4c6258$var$p = /'/g, $043e8b6e2f4c6258$var$g = /"/g, $043e8b6e2f4c6258$var$$ = /^(?:script|style|textarea|title)$/i, $043e8b6e2f4c6258$var$y = (t)=>(i, ...s)=>({
            _$litType$: t,
            strings: i,
            values: s
        }), $043e8b6e2f4c6258$export$c0bb0b647f701bb5 = $043e8b6e2f4c6258$var$y(1), $043e8b6e2f4c6258$export$7ed1367e7fa1ad68 = $043e8b6e2f4c6258$var$y(2), $043e8b6e2f4c6258$export$47d5b44d225be5b4 = $043e8b6e2f4c6258$var$y(3), $043e8b6e2f4c6258$export$9c068ae9cc5db4e8 = Symbol.for("lit-noChange"), $043e8b6e2f4c6258$export$45b790e32b2810ee = Symbol.for("lit-nothing"), $043e8b6e2f4c6258$var$A = new WeakMap, $043e8b6e2f4c6258$var$C = $043e8b6e2f4c6258$var$r.createTreeWalker($043e8b6e2f4c6258$var$r, 129);
function $043e8b6e2f4c6258$var$P(t, i) {
    if (!$043e8b6e2f4c6258$var$a(t) || !t.hasOwnProperty("raw")) throw Error("invalid template strings array");
    return void 0 !== $043e8b6e2f4c6258$var$s ? $043e8b6e2f4c6258$var$s.createHTML(i) : i;
}
const $043e8b6e2f4c6258$var$V = (t, i)=>{
    const s = t.length - 1, o = [];
    let r, l = 2 === i ? "<svg>" : 3 === i ? "<math>" : "", c = $043e8b6e2f4c6258$var$f;
    for(let i = 0; i < s; i++){
        const s = t[i];
        let a, u, d = -1, y = 0;
        for(; y < s.length && (c.lastIndex = y, u = c.exec(s), null !== u);)y = c.lastIndex, c === $043e8b6e2f4c6258$var$f ? "!--" === u[1] ? c = $043e8b6e2f4c6258$var$v : void 0 !== u[1] ? c = $043e8b6e2f4c6258$var$_ : void 0 !== u[2] ? ($043e8b6e2f4c6258$var$$.test(u[2]) && (r = RegExp("</" + u[2], "g")), c = $043e8b6e2f4c6258$var$m) : void 0 !== u[3] && (c = $043e8b6e2f4c6258$var$m) : c === $043e8b6e2f4c6258$var$m ? ">" === u[0] ? (c = r ?? $043e8b6e2f4c6258$var$f, d = -1) : void 0 === u[1] ? d = -2 : (d = c.lastIndex - u[2].length, a = u[1], c = void 0 === u[3] ? $043e8b6e2f4c6258$var$m : '"' === u[3] ? $043e8b6e2f4c6258$var$g : $043e8b6e2f4c6258$var$p) : c === $043e8b6e2f4c6258$var$g || c === $043e8b6e2f4c6258$var$p ? c = $043e8b6e2f4c6258$var$m : c === $043e8b6e2f4c6258$var$v || c === $043e8b6e2f4c6258$var$_ ? c = $043e8b6e2f4c6258$var$f : (c = $043e8b6e2f4c6258$var$m, r = void 0);
        const x = c === $043e8b6e2f4c6258$var$m && t[i + 1].startsWith("/>") ? " " : "";
        l += c === $043e8b6e2f4c6258$var$f ? s + $043e8b6e2f4c6258$var$n : d >= 0 ? (o.push(a), s.slice(0, d) + $043e8b6e2f4c6258$var$e + s.slice(d) + $043e8b6e2f4c6258$var$h + x) : s + $043e8b6e2f4c6258$var$h + (-2 === d ? i : x);
    }
    return [
        $043e8b6e2f4c6258$var$P(t, l + (t[s] || "<?>") + (2 === i ? "</svg>" : 3 === i ? "</math>" : "")),
        o
    ];
};
class $043e8b6e2f4c6258$var$N {
    constructor({ strings: t, _$litType$: s }, n){
        let r;
        this.parts = [];
        let c = 0, a = 0;
        const u = t.length - 1, d = this.parts, [f, v] = $043e8b6e2f4c6258$var$V(t, s);
        if (this.el = $043e8b6e2f4c6258$var$N.createElement(f, n), $043e8b6e2f4c6258$var$C.currentNode = this.el.content, 2 === s || 3 === s) {
            const t = this.el.content.firstChild;
            t.replaceWith(...t.childNodes);
        }
        for(; null !== (r = $043e8b6e2f4c6258$var$C.nextNode()) && d.length < u;){
            if (1 === r.nodeType) {
                if (r.hasAttributes()) for (const t of r.getAttributeNames())if (t.endsWith($043e8b6e2f4c6258$var$e)) {
                    const i = v[a++], s = r.getAttribute(t).split($043e8b6e2f4c6258$var$h), e = /([.?@])?(.*)/.exec(i);
                    d.push({
                        type: 1,
                        index: c,
                        name: e[2],
                        strings: s,
                        ctor: "." === e[1] ? $043e8b6e2f4c6258$var$H : "?" === e[1] ? $043e8b6e2f4c6258$var$I : "@" === e[1] ? $043e8b6e2f4c6258$var$L : $043e8b6e2f4c6258$var$k
                    }), r.removeAttribute(t);
                } else t.startsWith($043e8b6e2f4c6258$var$h) && (d.push({
                    type: 6,
                    index: c
                }), r.removeAttribute(t));
                if ($043e8b6e2f4c6258$var$$.test(r.tagName)) {
                    const t = r.textContent.split($043e8b6e2f4c6258$var$h), s = t.length - 1;
                    if (s > 0) {
                        r.textContent = $043e8b6e2f4c6258$var$i ? $043e8b6e2f4c6258$var$i.emptyScript : "";
                        for(let i = 0; i < s; i++)r.append(t[i], $043e8b6e2f4c6258$var$l()), $043e8b6e2f4c6258$var$C.nextNode(), d.push({
                            type: 2,
                            index: ++c
                        });
                        r.append(t[s], $043e8b6e2f4c6258$var$l());
                    }
                }
            } else if (8 === r.nodeType) {
                if (r.data === $043e8b6e2f4c6258$var$o) d.push({
                    type: 2,
                    index: c
                });
                else {
                    let t = -1;
                    for(; -1 !== (t = r.data.indexOf($043e8b6e2f4c6258$var$h, t + 1));)d.push({
                        type: 7,
                        index: c
                    }), t += $043e8b6e2f4c6258$var$h.length - 1;
                }
            }
            c++;
        }
    }
    static createElement(t, i) {
        const s = $043e8b6e2f4c6258$var$r.createElement("template");
        return s.innerHTML = t, s;
    }
}
function $043e8b6e2f4c6258$var$S(t, i, s = t, e) {
    if (i === $043e8b6e2f4c6258$export$9c068ae9cc5db4e8) return i;
    let h = void 0 !== e ? s._$Co?.[e] : s._$Cl;
    const o = $043e8b6e2f4c6258$var$c(i) ? void 0 : i._$litDirective$;
    return h?.constructor !== o && (h?._$AO?.(!1), void 0 === o ? h = void 0 : (h = new o(t), h._$AT(t, s, e)), void 0 !== e ? (s._$Co ??= [])[e] = h : s._$Cl = h), void 0 !== h && (i = $043e8b6e2f4c6258$var$S(t, h._$AS(t, i.values), h, e)), i;
}
class $043e8b6e2f4c6258$var$M {
    constructor(t, i){
        this._$AV = [], this._$AN = void 0, this._$AD = t, this._$AM = i;
    }
    get parentNode() {
        return this._$AM.parentNode;
    }
    get _$AU() {
        return this._$AM._$AU;
    }
    u(t) {
        const { el: { content: i }, parts: s } = this._$AD, e = (t?.creationScope ?? $043e8b6e2f4c6258$var$r).importNode(i, !0);
        $043e8b6e2f4c6258$var$C.currentNode = e;
        let h = $043e8b6e2f4c6258$var$C.nextNode(), o = 0, n = 0, l = s[0];
        for(; void 0 !== l;){
            if (o === l.index) {
                let i;
                2 === l.type ? i = new $043e8b6e2f4c6258$var$R(h, h.nextSibling, this, t) : 1 === l.type ? i = new l.ctor(h, l.name, l.strings, this, t) : 6 === l.type && (i = new $043e8b6e2f4c6258$var$z(h, this, t)), this._$AV.push(i), l = s[++n];
            }
            o !== l?.index && (h = $043e8b6e2f4c6258$var$C.nextNode(), o++);
        }
        return $043e8b6e2f4c6258$var$C.currentNode = $043e8b6e2f4c6258$var$r, e;
    }
    p(t) {
        let i = 0;
        for (const s of this._$AV)void 0 !== s && (void 0 !== s.strings ? (s._$AI(t, s, i), i += s.strings.length - 2) : s._$AI(t[i])), i++;
    }
}
class $043e8b6e2f4c6258$var$R {
    get _$AU() {
        return this._$AM?._$AU ?? this._$Cv;
    }
    constructor(t, i, s, e){
        this.type = 2, this._$AH = $043e8b6e2f4c6258$export$45b790e32b2810ee, this._$AN = void 0, this._$AA = t, this._$AB = i, this._$AM = s, this.options = e, this._$Cv = e?.isConnected ?? !0;
    }
    get parentNode() {
        let t = this._$AA.parentNode;
        const i = this._$AM;
        return void 0 !== i && 11 === t?.nodeType && (t = i.parentNode), t;
    }
    get startNode() {
        return this._$AA;
    }
    get endNode() {
        return this._$AB;
    }
    _$AI(t, i = this) {
        t = $043e8b6e2f4c6258$var$S(this, t, i), $043e8b6e2f4c6258$var$c(t) ? t === $043e8b6e2f4c6258$export$45b790e32b2810ee || null == t || "" === t ? (this._$AH !== $043e8b6e2f4c6258$export$45b790e32b2810ee && this._$AR(), this._$AH = $043e8b6e2f4c6258$export$45b790e32b2810ee) : t !== this._$AH && t !== $043e8b6e2f4c6258$export$9c068ae9cc5db4e8 && this._(t) : void 0 !== t._$litType$ ? this.$(t) : void 0 !== t.nodeType ? this.T(t) : $043e8b6e2f4c6258$var$u(t) ? this.k(t) : this._(t);
    }
    O(t) {
        return this._$AA.parentNode.insertBefore(t, this._$AB);
    }
    T(t) {
        this._$AH !== t && (this._$AR(), this._$AH = this.O(t));
    }
    _(t) {
        this._$AH !== $043e8b6e2f4c6258$export$45b790e32b2810ee && $043e8b6e2f4c6258$var$c(this._$AH) ? this._$AA.nextSibling.data = t : this.T($043e8b6e2f4c6258$var$r.createTextNode(t)), this._$AH = t;
    }
    $(t) {
        const { values: i, _$litType$: s } = t, e = "number" == typeof s ? this._$AC(t) : (void 0 === s.el && (s.el = $043e8b6e2f4c6258$var$N.createElement($043e8b6e2f4c6258$var$P(s.h, s.h[0]), this.options)), s);
        if (this._$AH?._$AD === e) this._$AH.p(i);
        else {
            const t = new $043e8b6e2f4c6258$var$M(e, this), s = t.u(this.options);
            t.p(i), this.T(s), this._$AH = t;
        }
    }
    _$AC(t) {
        let i = $043e8b6e2f4c6258$var$A.get(t.strings);
        return void 0 === i && $043e8b6e2f4c6258$var$A.set(t.strings, i = new $043e8b6e2f4c6258$var$N(t)), i;
    }
    k(t) {
        $043e8b6e2f4c6258$var$a(this._$AH) || (this._$AH = [], this._$AR());
        const i = this._$AH;
        let s, e = 0;
        for (const h of t)e === i.length ? i.push(s = new $043e8b6e2f4c6258$var$R(this.O($043e8b6e2f4c6258$var$l()), this.O($043e8b6e2f4c6258$var$l()), this, this.options)) : s = i[e], s._$AI(h), e++;
        e < i.length && (this._$AR(s && s._$AB.nextSibling, e), i.length = e);
    }
    _$AR(t = this._$AA.nextSibling, i) {
        for(this._$AP?.(!1, !0, i); t && t !== this._$AB;){
            const i = t.nextSibling;
            t.remove(), t = i;
        }
    }
    setConnected(t) {
        void 0 === this._$AM && (this._$Cv = t, this._$AP?.(t));
    }
}
class $043e8b6e2f4c6258$var$k {
    get tagName() {
        return this.element.tagName;
    }
    get _$AU() {
        return this._$AM._$AU;
    }
    constructor(t, i, s, e, h){
        this.type = 1, this._$AH = $043e8b6e2f4c6258$export$45b790e32b2810ee, this._$AN = void 0, this.element = t, this.name = i, this._$AM = e, this.options = h, s.length > 2 || "" !== s[0] || "" !== s[1] ? (this._$AH = Array(s.length - 1).fill(new String), this.strings = s) : this._$AH = $043e8b6e2f4c6258$export$45b790e32b2810ee;
    }
    _$AI(t, i = this, s, e) {
        const h = this.strings;
        let o = !1;
        if (void 0 === h) t = $043e8b6e2f4c6258$var$S(this, t, i, 0), o = !$043e8b6e2f4c6258$var$c(t) || t !== this._$AH && t !== $043e8b6e2f4c6258$export$9c068ae9cc5db4e8, o && (this._$AH = t);
        else {
            const e = t;
            let n, r;
            for(t = h[0], n = 0; n < h.length - 1; n++)r = $043e8b6e2f4c6258$var$S(this, e[s + n], i, n), r === $043e8b6e2f4c6258$export$9c068ae9cc5db4e8 && (r = this._$AH[n]), o ||= !$043e8b6e2f4c6258$var$c(r) || r !== this._$AH[n], r === $043e8b6e2f4c6258$export$45b790e32b2810ee ? t = $043e8b6e2f4c6258$export$45b790e32b2810ee : t !== $043e8b6e2f4c6258$export$45b790e32b2810ee && (t += (r ?? "") + h[n + 1]), this._$AH[n] = r;
        }
        o && !e && this.j(t);
    }
    j(t) {
        t === $043e8b6e2f4c6258$export$45b790e32b2810ee ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t ?? "");
    }
}
class $043e8b6e2f4c6258$var$H extends $043e8b6e2f4c6258$var$k {
    constructor(){
        super(...arguments), this.type = 3;
    }
    j(t) {
        this.element[this.name] = t === $043e8b6e2f4c6258$export$45b790e32b2810ee ? void 0 : t;
    }
}
class $043e8b6e2f4c6258$var$I extends $043e8b6e2f4c6258$var$k {
    constructor(){
        super(...arguments), this.type = 4;
    }
    j(t) {
        this.element.toggleAttribute(this.name, !!t && t !== $043e8b6e2f4c6258$export$45b790e32b2810ee);
    }
}
class $043e8b6e2f4c6258$var$L extends $043e8b6e2f4c6258$var$k {
    constructor(t, i, s, e, h){
        super(t, i, s, e, h), this.type = 5;
    }
    _$AI(t, i = this) {
        if ((t = $043e8b6e2f4c6258$var$S(this, t, i, 0) ?? $043e8b6e2f4c6258$export$45b790e32b2810ee) === $043e8b6e2f4c6258$export$9c068ae9cc5db4e8) return;
        const s = this._$AH, e = t === $043e8b6e2f4c6258$export$45b790e32b2810ee && s !== $043e8b6e2f4c6258$export$45b790e32b2810ee || t.capture !== s.capture || t.once !== s.once || t.passive !== s.passive, h = t !== $043e8b6e2f4c6258$export$45b790e32b2810ee && (s === $043e8b6e2f4c6258$export$45b790e32b2810ee || e);
        e && this.element.removeEventListener(this.name, this, s), h && this.element.addEventListener(this.name, this, t), this._$AH = t;
    }
    handleEvent(t) {
        "function" == typeof this._$AH ? this._$AH.call(this.options?.host ?? this.element, t) : this._$AH.handleEvent(t);
    }
}
class $043e8b6e2f4c6258$var$z {
    constructor(t, i, s){
        this.element = t, this.type = 6, this._$AN = void 0, this._$AM = i, this.options = s;
    }
    get _$AU() {
        return this._$AM._$AU;
    }
    _$AI(t) {
        $043e8b6e2f4c6258$var$S(this, t);
    }
}
const $043e8b6e2f4c6258$export$8613d1ca9052b22e = {
    M: $043e8b6e2f4c6258$var$e,
    P: $043e8b6e2f4c6258$var$h,
    A: $043e8b6e2f4c6258$var$o,
    C: 1,
    L: $043e8b6e2f4c6258$var$V,
    R: $043e8b6e2f4c6258$var$M,
    D: $043e8b6e2f4c6258$var$u,
    V: $043e8b6e2f4c6258$var$S,
    I: $043e8b6e2f4c6258$var$R,
    H: $043e8b6e2f4c6258$var$k,
    N: $043e8b6e2f4c6258$var$I,
    U: $043e8b6e2f4c6258$var$L,
    B: $043e8b6e2f4c6258$var$H,
    F: $043e8b6e2f4c6258$var$z
}, $043e8b6e2f4c6258$var$j = $043e8b6e2f4c6258$var$t.litHtmlPolyfillSupport;
$043e8b6e2f4c6258$var$j?.($043e8b6e2f4c6258$var$N, $043e8b6e2f4c6258$var$R), ($043e8b6e2f4c6258$var$t.litHtmlVersions ??= []).push("3.3.0");
const $043e8b6e2f4c6258$export$b3890eb0ae9dca99 = (t, i, s)=>{
    const e = s?.renderBefore ?? i;
    let h = e._$litPart$;
    if (void 0 === h) {
        const t = s?.renderBefore ?? null;
        e._$litPart$ = h = new $043e8b6e2f4c6258$var$R(i.insertBefore($043e8b6e2f4c6258$var$l(), t), t, void 0, s ?? {});
    }
    return h._$AI(t), h;
};


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $d8017b7d940aed31$var$s = globalThis;
class $d8017b7d940aed31$export$3f2f9f5909897157 extends (0, $9956f07b39314456$export$c7c07a37856565d) {
    constructor(){
        super(...arguments), this.renderOptions = {
            host: this
        }, this._$Do = void 0;
    }
    createRenderRoot() {
        const t = super.createRenderRoot();
        return this.renderOptions.renderBefore ??= t.firstChild, t;
    }
    update(t) {
        const r = this.render();
        this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t), this._$Do = (0, $043e8b6e2f4c6258$export$b3890eb0ae9dca99)(r, this.renderRoot, this.renderOptions);
    }
    connectedCallback() {
        super.connectedCallback(), this._$Do?.setConnected(!0);
    }
    disconnectedCallback() {
        super.disconnectedCallback(), this._$Do?.setConnected(!1);
    }
    render() {
        return 0, $043e8b6e2f4c6258$export$9c068ae9cc5db4e8;
    }
}
$d8017b7d940aed31$export$3f2f9f5909897157._$litElement$ = !0, $d8017b7d940aed31$export$3f2f9f5909897157["finalized"] = !0, $d8017b7d940aed31$var$s.litElementHydrateSupport?.({
    LitElement: $d8017b7d940aed31$export$3f2f9f5909897157
});
const $d8017b7d940aed31$var$o = $d8017b7d940aed31$var$s.litElementPolyfillSupport;
$d8017b7d940aed31$var$o?.({
    LitElement: $d8017b7d940aed31$export$3f2f9f5909897157
});
const $d8017b7d940aed31$export$f5c524615a7708d6 = {
    _$AK: (t, e, r)=>{
        t._$AK(e, r);
    },
    _$AL: (t)=>t._$AL
};
($d8017b7d940aed31$var$s.litElementVersions ??= []).push("4.2.0");



/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $7f435eda1ff690a6$export$7877a478dd30fd3d = (r, o, t)=>{
    for (const t of o)if (t[0] === r) return (0, t[1])();
    return t?.();
};



/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $0fe4d4ee1d37c783$export$9ba3b3f20a85bfa = {
    ATTRIBUTE: 1,
    CHILD: 2,
    PROPERTY: 3,
    BOOLEAN_ATTRIBUTE: 4,
    EVENT: 5,
    ELEMENT: 6
}, $0fe4d4ee1d37c783$export$99b43ad1ed32e735 = (t)=>(...e)=>({
            _$litDirective$: t,
            values: e
        });
class $0fe4d4ee1d37c783$export$befdefbdce210f91 {
    constructor(t){}
    get _$AU() {
        return this._$AM._$AU;
    }
    _$AT(t, e, i) {
        this._$Ct = t, this._$AM = e, this._$Ci = i;
    }
    _$AS(t, e) {
        return this.update(t, e);
    }
    update(t, e) {
        return this.render(...e);
    }
}


/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $621f734394807554$export$56cc687933817664 = (0, $0fe4d4ee1d37c783$export$99b43ad1ed32e735)(class extends (0, $0fe4d4ee1d37c783$export$befdefbdce210f91) {
    constructor(t){
        if (super(t), t.type !== (0, $0fe4d4ee1d37c783$export$9ba3b3f20a85bfa).ATTRIBUTE || "class" !== t.name || t.strings?.length > 2) throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");
    }
    render(t) {
        return " " + Object.keys(t).filter((s)=>t[s]).join(" ") + " ";
    }
    update(s, [i]) {
        if (void 0 === this.st) {
            this.st = new Set, void 0 !== s.strings && (this.nt = new Set(s.strings.join(" ").split(/\s/).filter((t)=>"" !== t)));
            for(const t in i)i[t] && !this.nt?.has(t) && this.st.add(t);
            return this.render(i);
        }
        const r = s.element.classList;
        for (const t of this.st)t in i || (r.remove(t), this.st.delete(t));
        for(const t in i){
            const s = !!i[t];
            s === this.st.has(t) || this.nt?.has(t) || (s ? (r.add(t), this.st.add(t)) : (r.remove(t), this.st.delete(t)));
        }
        return 0, $043e8b6e2f4c6258$export$9c068ae9cc5db4e8;
    }
});




/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $b1556cd2d06749ac$var$n = "important", $b1556cd2d06749ac$var$i = " !" + $b1556cd2d06749ac$var$n, $b1556cd2d06749ac$export$1e5b4ce2fa884e6a = (0, $0fe4d4ee1d37c783$export$99b43ad1ed32e735)(class extends (0, $0fe4d4ee1d37c783$export$befdefbdce210f91) {
    constructor(t){
        if (super(t), t.type !== (0, $0fe4d4ee1d37c783$export$9ba3b3f20a85bfa).ATTRIBUTE || "style" !== t.name || t.strings?.length > 2) throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
    }
    render(t) {
        return Object.keys(t).reduce((e, r)=>{
            const s = t[r];
            return null == s ? e : e + `${r = r.includes("-") ? r : r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${s};`;
        }, "");
    }
    update(e, [r]) {
        const { style: s } = e.element;
        if (void 0 === this.ft) return this.ft = new Set(Object.keys(r)), this.render(r);
        for (const t of this.ft)null == r[t] && (this.ft.delete(t), t.includes("-") ? s.removeProperty(t) : s[t] = null);
        for(const t in r){
            const e = r[t];
            if (null != e) {
                this.ft.add(t);
                const r = "string" == typeof e && e.endsWith($b1556cd2d06749ac$var$i);
                t.includes("-") || r ? s.setProperty(t, r ? e.slice(0, -11) : e, r ? $b1556cd2d06749ac$var$n : "") : s[t] = e;
            }
        }
        return 0, $043e8b6e2f4c6258$export$9c068ae9cc5db4e8;
    }
});


/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ function* $2c561d96559b783f$export$871de8747c9eaa88(o, f) {
    if (void 0 !== o) {
        let i = 0;
        for (const t of o)yield f(t, i++);
    }
}





/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const { I: $99ba6495ab3926af$var$t } = (0, $043e8b6e2f4c6258$export$8613d1ca9052b22e), $99ba6495ab3926af$export$c3825b437cbdea5c = (o)=>null === o || "object" != typeof o && "function" != typeof o, $99ba6495ab3926af$export$80c36ae3cab9881d = {
    HTML: 1,
    SVG: 2,
    MATHML: 3
}, $99ba6495ab3926af$export$6b6d145ec2a44ca9 = (o, t)=>void 0 === t ? void 0 !== o?._$litType$ : o?._$litType$ === t, $99ba6495ab3926af$export$6a0e8de894d2fcca = (o)=>null != o?._$litType$?.h, $99ba6495ab3926af$export$2f448fec17d50a3e = (o)=>void 0 !== o?._$litDirective$, $99ba6495ab3926af$export$f28e31de6a6eaf32 = (o)=>o?._$litDirective$, $99ba6495ab3926af$export$7f431ad0fff82fd9 = (o)=>void 0 === o.strings, $99ba6495ab3926af$var$s = ()=>document.createComment(""), $99ba6495ab3926af$export$291b2338ad9b0b30 = (o, i, n)=>{
    const e = o._$AA.parentNode, l = void 0 === i ? o._$AB : i._$AA;
    if (void 0 === n) {
        const i = e.insertBefore($99ba6495ab3926af$var$s(), l), c = e.insertBefore($99ba6495ab3926af$var$s(), l);
        n = new $99ba6495ab3926af$var$t(i, c, o, o.options);
    } else {
        const t = n._$AB.nextSibling, i = n._$AM, c = i !== o;
        if (c) {
            let t;
            n._$AQ?.(o), n._$AM = o, void 0 !== n._$AP && (t = o._$AU) !== i._$AU && n._$AP(t);
        }
        if (t !== l || c) {
            let o = n._$AA;
            for(; o !== t;){
                const t = o.nextSibling;
                e.insertBefore(o, l), o = t;
            }
        }
    }
    return n;
}, $99ba6495ab3926af$export$cb8bf9562088e9f4 = (o, t, i = o)=>(o._$AI(t, i), o), $99ba6495ab3926af$var$u = {}, $99ba6495ab3926af$export$ea70d9dd5965b1c8 = (o, t = $99ba6495ab3926af$var$u)=>o._$AH = t, $99ba6495ab3926af$export$59e9bce518cde500 = (o)=>o._$AH, $99ba6495ab3926af$export$3133b3144bbba267 = (o)=>{
    o._$AP?.(!1, !0);
    let t = o._$AA;
    const i = o._$AB.nextSibling;
    for(; t !== i;){
        const o = t.nextSibling;
        t.remove(), t = o;
    }
}, $99ba6495ab3926af$export$7f600b8138c094dc = (o)=>{
    o._$AR();
};


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $640627e30f16b3eb$var$u = (e, s, t)=>{
    const r = new Map;
    for(let l = s; l <= t; l++)r.set(e[l], l);
    return r;
}, $640627e30f16b3eb$export$76d90c956114f2c2 = (0, $0fe4d4ee1d37c783$export$99b43ad1ed32e735)(class extends (0, $0fe4d4ee1d37c783$export$befdefbdce210f91) {
    constructor(e){
        if (super(e), e.type !== (0, $0fe4d4ee1d37c783$export$9ba3b3f20a85bfa).CHILD) throw Error("repeat() can only be used in text expressions");
    }
    dt(e, s, t) {
        let r;
        void 0 === t ? t = s : void 0 !== s && (r = s);
        const l = [], o = [];
        let i = 0;
        for (const s of e)l[i] = r ? r(s, i) : i, o[i] = t(s, i), i++;
        return {
            values: o,
            keys: l
        };
    }
    render(e, s, t) {
        return this.dt(e, s, t).values;
    }
    update(s, [t, r, c]) {
        const d = (0, $99ba6495ab3926af$export$59e9bce518cde500)(s), { values: p, keys: a } = this.dt(t, r, c);
        if (!Array.isArray(d)) return this.ut = a, p;
        const h = this.ut ??= [], v = [];
        let m, y, x = 0, j = d.length - 1, k = 0, w = p.length - 1;
        for(; x <= j && k <= w;)if (null === d[x]) x++;
        else if (null === d[j]) j--;
        else if (h[x] === a[k]) v[k] = (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(d[x], p[k]), x++, k++;
        else if (h[j] === a[w]) v[w] = (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(d[j], p[w]), j--, w--;
        else if (h[x] === a[w]) v[w] = (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(d[x], p[w]), (0, $99ba6495ab3926af$export$291b2338ad9b0b30)(s, v[w + 1], d[x]), x++, w--;
        else if (h[j] === a[k]) v[k] = (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(d[j], p[k]), (0, $99ba6495ab3926af$export$291b2338ad9b0b30)(s, d[x], d[j]), j--, k++;
        else if (void 0 === m && (m = $640627e30f16b3eb$var$u(a, k, w), y = $640627e30f16b3eb$var$u(h, x, j)), m.has(h[x])) {
            if (m.has(h[j])) {
                const e = y.get(a[k]), t = void 0 !== e ? d[e] : null;
                if (null === t) {
                    const e = (0, $99ba6495ab3926af$export$291b2338ad9b0b30)(s, d[x]);
                    (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(e, p[k]), v[k] = e;
                } else v[k] = (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(t, p[k]), (0, $99ba6495ab3926af$export$291b2338ad9b0b30)(s, d[x], t), d[e] = null;
                k++;
            } else (0, $99ba6495ab3926af$export$3133b3144bbba267)(d[j]), j--;
        } else (0, $99ba6495ab3926af$export$3133b3144bbba267)(d[x]), x++;
        for(; k <= w;){
            const e = (0, $99ba6495ab3926af$export$291b2338ad9b0b30)(s, v[w + 1]);
            (0, $99ba6495ab3926af$export$cb8bf9562088e9f4)(e, p[k]), v[k++] = e;
        }
        for(; x <= j;){
            const e = d[x++];
            null !== e && (0, $99ba6495ab3926af$export$3133b3144bbba267)(e);
        }
        return this.ut = a, (0, $99ba6495ab3926af$export$ea70d9dd5965b1c8)(s, v), $043e8b6e2f4c6258$export$9c068ae9cc5db4e8;
    }
});


/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ function $9929420fa4bc2e7a$export$a55877ca9db47377(n, r, t) {
    return n ? r(n) : t?.(n);
}





class $199476e5eede90cb$export$7e07316e524f5d42 {
    options;
    constructor(options){
        this.options = options;
    }
    execute() {
        const { customElement: customElement, listener: listener } = this.options;
        const selector = this.options.selector;
        const type = this.options.type ?? $199476e5eede90cb$var$DEFAULT_EVENT_TYPE;
        if (!selector) {
            customElement.addEventListener(type, (event)=>listener(customElement, event, event.target));
            return;
        }
        customElement.addEventListener(type, (event)=>this.doIfEventDelegationMatches(event, selector, listener, customElement));
    }
    doIfEventDelegationMatches(event, selector, listener, customElement) {
        const composedPath = event.composedPath();
        const target = composedPath[0];
        const matchesEventDelegation = target instanceof Element ? !!target.closest(selector) : false;
        if (matchesEventDelegation) listener(customElement, event, target);
    }
}
const $199476e5eede90cb$var$DEFAULT_EVENT_TYPE = 'click';


class $65a61713cba56ade$export$de8a7fa2e48da3db {
    constructor(customElement){
        this.customElement = customElement;
    }
    customElement;
    installEventListenersForBindings(attributes) {
        for (const attribute of attributes)new (0, $199476e5eede90cb$export$7e07316e524f5d42)({
            customElement: this.customElement,
            selector: `[${(0, $0b7f44b46581f639$export$ab01fe353da9eec0)}="${attribute}"]`,
            type: 'input',
            listener: (el, e)=>this.matchAttributeToInput(el, attribute, e)
        }).execute();
    }
    matchAttributeToInput(element, attribute, e) {
        const input = e.composedPath()[0];
        element[attribute] = input.type === 'checkbox' ? input.checked ? 'true' : 'false' : input.value;
    }
}


class $1ee694273c1a3b38$export$6142b9bb50865ebc {
    constructor(element, hooks){
        this.element = element;
        this.hooks = hooks;
    }
    element;
    hooks;
    execute_hooks_changes_firstUpdated(changedProperties) {
        const changes = this.hooks?.changes;
        if (!(changes instanceof Array)) return;
        for (const change of changes){
            const { name: name, firstUpdated: firstUpdated } = change;
            if (firstUpdated && changedProperties.has(name)) firstUpdated(this.element, this.element[name], changedProperties.get(name));
        }
    }
}


class $b106b47d7b00c2b8$export$b8cad281913fb315 {
    constructor(element, hooks){
        this.element = element;
        this.hooks = hooks;
    }
    element;
    hooks;
    execute_hooks_changes_updated(changedProperties) {
        const changes = this.hooks?.changes;
        if (!(changes instanceof Array)) return;
        for (const change of changes){
            const { name: name, updated: updated } = change;
            if (updated && changedProperties.has(name)) updated(this.element, this.element[name], changedProperties.get(name));
        }
    }
}


class $aa90755de5885da0$export$40b6742a337a4f8c {
    constructor(element, hooks){
        this.element = element;
        this.hooks = hooks;
    }
    element;
    hooks;
    execute_hooks_changes_willUpdate(changedProperties) {
        const changes = this.hooks?.changes;
        if (!changes) return;
        const changesArray = changes instanceof Array ? changes : Object.entries(changes).map(([name, willUpdate])=>({
                name: name,
                willUpdate: willUpdate
            }));
        for (const change of changesArray){
            const { name: name, willUpdate: willUpdate } = change;
            if (willUpdate && changedProperties.has(name)) willUpdate(this.element, this.element[name], changedProperties.get(name));
        }
    }
}



class $2173d40de4534ea4$export$9b82f6a402d0aced {
    constructor(element, hooks){
        this.element = element;
        this.hooks = hooks;
    }
    element;
    hooks;
    execute_hooks_derive() {
        const derive = this.hooks?.derive;
        if (!derive) return;
        const deriveArray = derive instanceof Array ? derive : Object.entries(derive).map(([name, willUpdate])=>({
                name: name,
                willUpdate: willUpdate
            }));
        for (const { name: name, willUpdate: willUpdate } of deriveArray)this.element[name] = willUpdate(this.element);
    }
}



class $daf44920e263b012$export$b9ba81a4e0ca1589 {
    constructor(customElement, hooks){
        this.customElement = customElement;
        this.hooks = hooks;
    }
    customElement;
    hooks;
    installEventListeners() {
        const events = this.hooks?.events;
        if (!events) return;
        const ops = events instanceof Array ? this.eventsArrayToOps(events) : this.eventsRecordToOps(events);
        for (const op of ops)op.execute();
    }
    eventsArrayToOps(events) {
        return events.map((customaryEvent)=>new (0, $199476e5eede90cb$export$7e07316e524f5d42)({
                customElement: this.customElement,
                selector: customaryEvent.selector,
                type: customaryEvent.type,
                listener: customaryEvent.listener
            }));
    }
    eventsRecordToOps(events) {
        return Object.entries(events).map(([selector, listener])=>new (0, $199476e5eede90cb$export$7e07316e524f5d42)({
                customElement: this.customElement,
                selector: selector,
                type: undefined,
                listener: listener
            }));
    }
}



/**
 * https://github.com/lit/lit/blob/43c6168acc4a30d70091ee30c307f692a02387d5/packages/lit-html/src/lit-html.ts#L688
 * https://github.com/lit/lit/blob/43c6168acc4a30d70091ee30c307f692a02387d5/packages/lit-html/src/test/lit-html_test.ts#L3200-L3218
 * https://github.com/lit/lit/pull/3987/files#diff-bead45bb43cda474d916704550a1b26322667aa42b814c48300b05be79b9a7ebR595
 * https://github.com/lit/lit/pull/2307/files#diff-91d82786d99da1716b8b2e02534f0e967e9b7f2f539acb7b712f6900094b6263
 */ const $7c0f520d9cef3176$var$KEY = '__customary__immutable_TemplateStringsArray_instances';
function $7c0f520d9cef3176$export$75299ef9530cddf3(element, template) {
    const immutables = element[$7c0f520d9cef3176$var$KEY];
    if (!immutables) {
        element[$7c0f520d9cef3176$var$KEY] = [
            template.strings
        ];
        return;
    }
    const existing = immutables.find((strings)=>$7c0f520d9cef3176$var$areReadonlyArraysEqual(strings, template.strings));
    if (!existing) immutables.push(template.strings);
    else // reuse the original array instance, otherwise the template will rerender
    template.strings = existing;
}
function $7c0f520d9cef3176$var$areReadonlyArraysEqual(a, b) {
    if (a.length !== b.length) return false;
    for(let i = 0; i < a.length; i++){
        if (a[i] !== b[i]) return false;
    }
    return true;
}


class $97132244c8f0a344$export$8c2a42c430f1cdb5 {
    constructor(element){
        this.element = element;
    }
    element;
    render_lit_html_TemplateResult({ htmlString: htmlString }) {
        return $97132244c8f0a344$var$render_lit_html_TemplateResult(this.element, htmlString);
    }
}
/**
 lit "html" is a tag function.
 at runtime, the tagged template comes from htmlString.
 only JS compilation can parse the tagged template into a proper function call,
 so we need JS compilation to happen at runtime.
 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates
 */ function $97132244c8f0a344$var$render_lit_html_TemplateResult(element, htmlString) {
    function customary_lit_html_track(html_output) {
        (0, $7c0f520d9cef3176$export$75299ef9530cddf3)(element, html_output);
        return html_output;
    }
    const thisArg = element;
    const fn = new Function('customary_lit_html_track', 'html', 'choose', 'classMap', 'map', 'repeat', 'styleMap', 'when', '"use strict"; return customary_lit_html_track( html\`' + htmlString + '\`' + ' )');
    return fn.call(thisArg, customary_lit_html_track, (0, $043e8b6e2f4c6258$export$c0bb0b647f701bb5), (0, $7f435eda1ff690a6$export$7877a478dd30fd3d), (0, $621f734394807554$export$56cc687933817664), (0, $2c561d96559b783f$export$871de8747c9eaa88), (0, $640627e30f16b3eb$export$76d90c956114f2c2), (0, $b1556cd2d06749ac$export$1e5b4ce2fa884e6a), (0, $9929420fa4bc2e7a$export$a55877ca9db47377));
}


class $5c383a37cf068b94$export$be3e25e94cb596b2 {
    constructor(element, hooks){
        this.element = element;
        this.hooks = hooks;
    }
    element;
    hooks;
    install_slotchange() {
        const slotchange = this.hooks?.slots?.slotchange;
        if (!slotchange) return;
        // on the first render, execute once for the first time without an event
        slotchange(this.element);
        /*
        https://stackoverflow.com/questions/67332635/slots-does-not-work-on-a-html-web-component-without-shadow-dom
        */ this.element.shadowRoot.addEventListener('slotchange', (event)=>slotchange(this.element, event));
    }
}




class $064054b972934547$export$1fd3bd540a83af2c {
    constructor(element){
        this.element = element;
    }
    element;
    link_external_css_and_link_fonts(definition) {
        $064054b972934547$var$link_external_css(definition, this.element);
        $064054b972934547$var$link_fonts(definition);
    }
}
function $064054b972934547$var$link_external_css(definition, element) {
    if (definition.templateInDocument) return;
    const declaration = definition.declaration;
    if (declaration.hooks?.externalLoader?.css_dont) return;
    const import_meta = (0, $adba5314d6668aaa$export$b822a0ad0f6e4c40)(declaration);
    const name = declaration.name;
    const location = (0, $01747c95a7b5a210$export$de7ab7265d436fa0)({
        import_meta: import_meta,
        name: name,
        extension: 'css'
    });
    const shadowRoot = $064054b972934547$var$findNearestShadowRoot(element);
    $064054b972934547$var$appendLinkElement(shadowRoot || document, {
        href: location,
        id: name
    });
}
/**
 * adopter of font stylesheets can only be the root document dom, not the shadow dom.
 * @see https://github.com/microsoft/vscode/issues/159877#issuecomment-1262843952
 * @see https://github.com/mdn/interactive-examples/issues/887#issuecomment-432606925
 */ function $064054b972934547$var$link_fonts(definition) {
    const declaration = definition.declaration;
    const locations = (0, $adba5314d6668aaa$export$68c38d987afcbfba)(declaration);
    if (!locations) return;
    for (const location of locations)$064054b972934547$var$appendLinkElement(document, {
        href: location,
        id: `customary-fontLocation-${location}`
    });
}
function $064054b972934547$var$appendLinkElement(host, options) {
    const id = options.id;
    const exists = host instanceof ShadowRoot ? host.getElementById(id) : host.getElementById(id);
    if (exists) return;
    const node = host instanceof ShadowRoot ? host : host.head;
    const linkElement = document.createElement('link');
    linkElement.href = options.href;
    linkElement.id = id;
    linkElement.rel = 'stylesheet';
    linkElement.type = 'text/css';
    node.appendChild(linkElement);
}
function $064054b972934547$var$findNearestShadowRoot(element) {
    if (element.shadowRoot) return element.shadowRoot;
    let parentNode = element.parentNode;
    while(parentNode){
        if (parentNode instanceof ShadowRoot) return parentNode;
        parentNode = parentNode.parentNode;
    }
    return null;
}


class $e789e6c3c06be629$export$3aa38d356bafaf9d {
    constructor(element){
        this.element = element;
    }
    element;
    install_values(definition) {
        if (definition.declaration.values) Object.assign(this.element, definition.declaration.values);
    }
}


class $826f93dc66b3cf65$export$4a183080d2c522d7 extends (0, $d8017b7d940aed31$export$3f2f9f5909897157) {
    constructor(){
        try {
            super();
        } catch (error) {
            if (error instanceof TypeError) {
                if (error.message.startsWith("Illegal constructor")) throw new Error("Custom element must be fully defined before you can instantiate it. Try this:\n    await Customary.untilDefined(MyCustomElement);\n    const element = new MyCustomElement();", {
                    cause: error
                });
            }
            throw error;
        }
        const definition = (0, $182d5725a60cb319$export$6dac8c184f86ad18)(this);
        this._definition = definition;
        const hooks = definition.declaration.hooks;
        this.bind = new (0, $65a61713cba56ade$export$de8a7fa2e48da3db)(this);
        this.changes_firstUpdated = new (0, $1ee694273c1a3b38$export$6142b9bb50865ebc)(this, hooks);
        this.changes_updated = new (0, $b106b47d7b00c2b8$export$b8cad281913fb315)(this, hooks);
        this.changes_willUpdate = new (0, $aa90755de5885da0$export$40b6742a337a4f8c)(this, hooks);
        this.derive = new (0, $2173d40de4534ea4$export$9b82f6a402d0aced)(this, hooks);
        this.events = new (0, $daf44920e263b012$export$b9ba81a4e0ca1589)(this, hooks);
        this._render = new (0, $97132244c8f0a344$export$8c2a42c430f1cdb5)(this);
        this.slots = new (0, $5c383a37cf068b94$export$be3e25e94cb596b2)(this, hooks);
        this.stylesheets = new (0, $064054b972934547$export$1fd3bd540a83af2c)(this);
        this.values = new (0, $e789e6c3c06be629$export$3aa38d356bafaf9d)(this);
        this.hooks = hooks;
        this.values.install_values(this._definition);
    }
    _definition;
    changes_firstUpdated;
    bind;
    changes_updated;
    changes_willUpdate;
    derive;
    events;
    hooks;
    _render;
    slots;
    stylesheets;
    values;
    attributeChangedCallback(name, oldValue, newValue) {
        super.attributeChangedCallback(name, oldValue, newValue);
        this.hooks?.dom?.attributeChangedCallback?.(this, name, oldValue, newValue);
    }
    createRenderRoot() {
        if (this._definition.declaration.config?.construct?.shadowRootDont) return this;
        return super.createRenderRoot();
    }
    connectedCallback() {
        super.connectedCallback();
        this.stylesheets.link_external_css_and_link_fonts(this._definition);
        this.events.installEventListeners();
        this.bind.installEventListenersForBindings(this._definition.attributes.attributes);
        this.hooks?.lifecycle?.connected?.(this);
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        this.hooks?.lifecycle?.disconnected?.(this);
    }
    firstUpdated(changedProperties) {
        super.firstUpdated(changedProperties);
        this.hooks?.lifecycle?.firstUpdated?.(this, changedProperties);
        this.changes_firstUpdated.execute_hooks_changes_firstUpdated(changedProperties);
        this.slots.install_slotchange();
    }
    render() {
        return this._render.render_lit_html_TemplateResult({
            htmlString: this._definition.immutable_htmlString
        });
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        this.hooks?.lifecycle?.updated?.(this, changedProperties);
        this.changes_updated.execute_hooks_changes_updated(changedProperties);
    }
    willUpdate(changedProperties) {
        super.willUpdate(changedProperties);
        this.hooks?.lifecycle?.willUpdate?.(this, changedProperties);
        this.derive.execute_hooks_derive();
        this.changes_willUpdate.execute_hooks_changes_willUpdate(changedProperties);
    }
}


class $b7d50751d22c9c51$export$7d556906c4a5f4a7 {
    // noinspection JSUnusedGlobalSymbols
    static async autodetect() {
        await this.detect();
        const customaryRegistry = (0, $74af7c6039b335a7$export$d37a9068d840d1de).singleton();
        await customaryRegistry.settle();
    }
    // noinspection JSUnusedGlobalSymbols
    static declare(constructor) {
        const customaryRegistry = (0, $74af7c6039b335a7$export$d37a9068d840d1de).singleton();
        customaryRegistry.declare(constructor, constructor?.customary);
    }
    // noinspection JSUnusedGlobalSymbols
    static async untilDefined(constructor) {
        const customaryRegistry = (0, $74af7c6039b335a7$export$d37a9068d840d1de).singleton();
        return await customaryRegistry.untilDefined(constructor);
    }
    static async detect() {
        const customaryRegistry = (0, $74af7c6039b335a7$export$d37a9068d840d1de).singleton();
        const detector = new (0, $85578581f704d63b$export$2bcc17fb5433cbbf)(document, globalThis);
        const declarations = detector.detect();
        const promises = declarations.map((declaration)=>customaryRegistry.declare(class EphemeralCustomaryElement extends (0, $826f93dc66b3cf65$export$4a183080d2c522d7) {
            }, declaration));
        await Promise.all(promises);
    }
}




$parcel$exportWildcard($ea14babfe644be71$exports, $22072648c2076599$exports);


document.addEventListener("DOMContentLoaded", (event)=>{
    if (!globalThis[`customary-options:autodetect-dont`]) (0, $b7d50751d22c9c51$export$7d556906c4a5f4a7).autodetect();
});


export {$b7d50751d22c9c51$export$7d556906c4a5f4a7 as Customary, $826f93dc66b3cf65$export$4a183080d2c522d7 as CustomaryElement, $d8017b7d940aed31$export$3f2f9f5909897157 as LitElement, $043e8b6e2f4c6258$export$c0bb0b647f701bb5 as html, $7f435eda1ff690a6$export$7877a478dd30fd3d as choose, $621f734394807554$export$56cc687933817664 as classMap, $b1556cd2d06749ac$export$1e5b4ce2fa884e6a as styleMap, $2c561d96559b783f$export$871de8747c9eaa88 as map, $640627e30f16b3eb$export$76d90c956114f2c2 as repeat, $9929420fa4bc2e7a$export$a55877ca9db47377 as when};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWdCLEVBQUUsU0FBUztRQUNoRCxrQkFBa0IsT0FBTyxDQUM1QixhQUNDLGFBQXFCO0lBRXpCO0lBRUEscUNBQXFDO0lBQ3JDLGFBQWEsYUFBYSxXQUFxQyxFQUFxQztRQUNuRyxNQUFNLG9CQUFvQixDQUFBLEdBQUEseUNBQWdCLEVBQUUsU0FBUztRQUNyRCxPQUFPLE1BQU0sa0JBQWtCLFlBQVksQ0FBQztJQUM3QztJQUVBLGFBQXFCLFNBQXdCO1FBQzVDLE1BQU0sb0JBQW9CLENBQUEsR0FBQSx5Q0FBZ0IsRUFBRSxTQUFTO1FBQ3JELE1BQU0sV0FBVyxJQUFJLENBQUEsR0FBQSx5Q0FBZ0IsRUFBRSxVQUFVO1FBQ2pELE1BQU0sZUFBNEMsU0FBUyxNQUFNO1FBQ2pFLE1BQU0sV0FBVyxhQUFhLEdBQUcsQ0FBQyxDQUFBLGNBQ2hDLGtCQUFrQixPQUFPLENBQ3ZCLE1BQU0sa0NBQWtDLENBQUEsR0FBQSx5Q0FBZTtZQUFHLEdBQzFEO1FBR0osTUFBTSxRQUFRLEdBQUcsQ0FBQztJQUNuQjtBQUNEOzs7Ozs7OztBRnpDQSxTQUFTLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDO0lBQzlDLElBQUksQ0FBQyxBQUFDLFVBQWtCLENBQUMsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDLEVBQ3ZELENBQUEsR0FBQSx5Q0FBUSxFQUFFLFVBQVU7QUFFM0IiLCJzb3VyY2VzIjpbInNyYy9ub3cudHMiLCJzcmMvaW5kZXgudHMiLCJzcmMvQ3VzdG9tYXJ5LnRzIiwic3JjL0N1c3RvbWFyeURldGVjdG9yLnRzIiwic3JjL3JlZ2lzdHJ5L0N1c3RvbWFyeVJlZ2lzdHJ5LnRzIiwic3JjL0N1c3RvbWFyeURlZmluaXRpb24udHMiLCJzcmMvQ3VzdG9tYXJ5RGVmaW5lLnRzIiwic3JjL2V4dGVybmFsL0V4dGVybmFsTG9hZGVyLnRzIiwic3JjL2ZldGNoL0ZldGNoVGV4dC50cyIsInNyYy9odG1sL0N1c3RvbWFyeUh0bWwudHMiLCJzcmMvYmluZC9BdHRyaWJ1dGVfYmluZC50cyIsInNyYy9leHByZXNzaW9ucy9FeHByZXNzaW9uc19yZWNvZGUudHMiLCJzcmMvZXhwcmVzc2lvbnMvRXhwcmVzc2lvbkF0dHJpYnV0ZXMudHMiLCJzcmMvbWFya3VwL01hcmt1cF9mb3IudHMiLCJzcmMvbWFya3VwL3NldF9vdXRlckhUTUwuanMiLCJzcmMvbWFya3VwL3NldF9vdXRlckhUTUwudHMiLCJzcmMvbWFya3VwL3RvU2VsZWN0b3IudHMiLCJzcmMvbWFya3VwL01hcmt1cF9pZi50cyIsInNyYy9tYXJrdXAvTWFya3VwX2luc2lkZS50cyIsInNyYy9tYXJrdXAvTWFya3VwX2NsYXNzTWFwLnRzIiwic3JjL21hcmt1cC90b1NlbGVjdG9yLmpzIiwic3JjL21hcmt1cC9NYXJrdXBfc3R5bGVNYXAudHMiLCJzcmMvbWFya3VwL01hcmt1cF9zd2l0Y2gudHMiLCJzcmMvYXR0cmlidXRlcy9BdHRyaWJ1dGVzRGVmaW5pdGlvbi50cyIsInNyYy9DdXN0b21hcnlQcm9wZXJ0aWVzLnRzIiwic3JjL2F0dHJpYnV0ZXMvQXR0cmlidXRlUHJvcGVydGllcy50cyIsInNyYy9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNJbmplY3Rvci50cyIsInNyYy9kZXJpdmUvRGVyaXZlUHJvcGVydGllcy50cyIsInNyYy9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNQcm9wZXJ0aWVzLnRzIiwic3JjL3N0YXRlL1N0YXRlUHJvcGVydGllcy50cyIsInNyYy92YWx1ZXMvVmFsdWVzUHJvcGVydGllcy50cyIsInNyYy9DdXN0b21hcnlFbGVtZW50LnRzIiwic3JjL2xpdC9pbmRleC50cyIsIm5vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saXQtZWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9zcmMvbGl0LWVsZW1lbnQudHMiLCJub2RlX21vZHVsZXMvQGxpdC9yZWFjdGl2ZS1lbGVtZW50L3JlYWN0aXZlLWVsZW1lbnQuanMiLCJub2RlX21vZHVsZXMvQGxpdC9yZWFjdGl2ZS1lbGVtZW50L3NyYy9yZWFjdGl2ZS1lbGVtZW50LnRzIiwibm9kZV9tb2R1bGVzL0BsaXQvcmVhY3RpdmUtZWxlbWVudC9jc3MtdGFnLmpzIiwibm9kZV9tb2R1bGVzL0BsaXQvcmVhY3RpdmUtZWxlbWVudC9zcmMvY3NzLXRhZy50cyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvbGl0LWh0bWwudHMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvZGlyZWN0aXZlcy9jaG9vc2UuanMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZXMvY2hvb3NlLnRzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwLmpzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9kaXJlY3RpdmVzL2NsYXNzLW1hcC50cyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmUuanMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZS50cyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcC5qcyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvZGlyZWN0aXZlcy9zdHlsZS1tYXAudHMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvZGlyZWN0aXZlcy9tYXAuanMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZXMvbWFwLnRzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL2RpcmVjdGl2ZXMvcmVwZWF0LmpzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9kaXJlY3RpdmVzL3JlcGVhdC50cyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmUtaGVscGVycy5qcyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvZGlyZWN0aXZlLWhlbHBlcnMudHMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvZGlyZWN0aXZlcy93aGVuLmpzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9kaXJlY3RpdmVzL3doZW4udHMiLCJzcmMvYmluZC9DdXN0b21hcnlCaW5kLnRzIiwic3JjL2V2ZW50cy9BZGRFdmVudExpc3RlbmVyLnRzIiwic3JjL2NoYW5nZXMvQ3VzdG9tYXJ5Q2hhbmdlc19maXJzdFVwZGF0ZWQudHMiLCJzcmMvY2hhbmdlcy9DdXN0b21hcnlDaGFuZ2VzX3VwZGF0ZWQudHMiLCJzcmMvY2hhbmdlcy9DdXN0b21hcnlDaGFuZ2VzX3dpbGxVcGRhdGUudHMiLCJzcmMvZGVyaXZlL0N1c3RvbWFyeURlcml2ZS50cyIsInNyYy9ldmVudHMvQ3VzdG9tYXJ5RXZlbnRzLnRzIiwic3JjL3JlbmRlci9DdXN0b21hcnlSZW5kZXIudHMiLCJzcmMvcmVuZGVyL3JldXNlX2ltbXV0YWJsZV9UZW1wbGF0ZVN0cmluZ3NBcnJheS50cyIsInNyYy9zbG90cy9DdXN0b21hcnlTbG90cy50cyIsInNyYy9zdHlsZS9DdXN0b21hcnlTdHlsZXNoZWV0cy50cyIsInNyYy92YWx1ZXMvQ3VzdG9tYXJ5VmFsdWVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3VzdG9tYXJ5fSBmcm9tIFwiI2N1c3RvbWFyeS9pbmRleC5qc1wiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoZXZlbnQpID0+IHtcblx0aWYgKCEoZ2xvYmFsVGhpcyBhcyBhbnkpW2BjdXN0b21hcnktb3B0aW9uczphdXRvZGV0ZWN0LWRvbnRgXSkge1xuXHRcdHZvaWQgQ3VzdG9tYXJ5LmF1dG9kZXRlY3QoKTtcblx0fVxufSk7XG5cbmV4cG9ydCAqIGZyb20gJyNjdXN0b21hcnkvaW5kZXguanMnO1xuIiwiaW1wb3J0IHtDdXN0b21hcnl9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeS5qc1wiO1xuaW1wb3J0IHR5cGUge0N1c3RvbWFyeURlY2xhcmF0aW9uIGFzIEN9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uXCI7XG5pbXBvcnQge0N1c3RvbWFyeUVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeUVsZW1lbnQuanNcIjtcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3BhcmNlbC1idW5kbGVyL3BhcmNlbC9pc3N1ZXMvNDc5NiNpc3N1ZWNvbW1lbnQtNjYwMzU2MDYyXG4vLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5leHBvcnQgdHlwZSBDdXN0b21hcnlEZWNsYXJhdGlvbjxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+ID0gQzxUPjtcblxuZXhwb3J0ICogZnJvbSBcIiNjdXN0b21hcnkvbGl0XCI7XG5leHBvcnQge0N1c3RvbWFyeSwgQ3VzdG9tYXJ5RWxlbWVudH07XG4iLCJpbXBvcnQge0N1c3RvbWFyeURldGVjdG9yfSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZXRlY3Rvci5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb24uanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5UmVnaXN0cnl9IGZyb20gXCIjY3VzdG9tYXJ5L3JlZ2lzdHJ5L0N1c3RvbWFyeVJlZ2lzdHJ5LmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeUVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeVxue1xuXHQvLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5cdHN0YXRpYyBhc3luYyBhdXRvZGV0ZWN0KCkge1xuXHRcdGF3YWl0IHRoaXMuZGV0ZWN0KCk7XG5cblx0XHRjb25zdCBjdXN0b21hcnlSZWdpc3RyeSA9IEN1c3RvbWFyeVJlZ2lzdHJ5LnNpbmdsZXRvbigpO1xuXHRcdGF3YWl0IGN1c3RvbWFyeVJlZ2lzdHJ5LnNldHRsZSgpO1xuXHR9XG5cblx0Ly8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuXHRzdGF0aWMgZGVjbGFyZTxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50Q29uc3RydWN0b3IpXG5cdHtcblx0XHRjb25zdCBjdXN0b21hcnlSZWdpc3RyeSA9IEN1c3RvbWFyeVJlZ2lzdHJ5LnNpbmdsZXRvbigpO1xuXHRcdHZvaWQgY3VzdG9tYXJ5UmVnaXN0cnkuZGVjbGFyZShcblx0XHRcdFx0Y29uc3RydWN0b3IsXG5cdFx0XHRcdChjb25zdHJ1Y3RvciBhcyBhbnkpPy5jdXN0b21hcnkgYXMgQ3VzdG9tYXJ5RGVjbGFyYXRpb248VD5cblx0XHQpO1xuXHR9XG5cblx0Ly8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuXHRzdGF0aWMgYXN5bmMgdW50aWxEZWZpbmVkKGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50Q29uc3RydWN0b3IpOiBQcm9taXNlPEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3Rvcj4ge1xuXHRcdGNvbnN0IGN1c3RvbWFyeVJlZ2lzdHJ5ID0gQ3VzdG9tYXJ5UmVnaXN0cnkuc2luZ2xldG9uKCk7XG5cdFx0cmV0dXJuIGF3YWl0IGN1c3RvbWFyeVJlZ2lzdHJ5LnVudGlsRGVmaW5lZChjb25zdHJ1Y3Rvcik7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBhc3luYyBkZXRlY3QoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgY3VzdG9tYXJ5UmVnaXN0cnkgPSBDdXN0b21hcnlSZWdpc3RyeS5zaW5nbGV0b24oKTtcblx0XHRjb25zdCBkZXRlY3RvciA9IG5ldyBDdXN0b21hcnlEZXRlY3Rvcihkb2N1bWVudCwgZ2xvYmFsVGhpcyk7XG5cdFx0Y29uc3QgZGVjbGFyYXRpb25zOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+W10gPSBkZXRlY3Rvci5kZXRlY3QoKTtcblx0XHRjb25zdCBwcm9taXNlcyA9IGRlY2xhcmF0aW9ucy5tYXAoZGVjbGFyYXRpb24gPT5cblx0XHRcdFx0Y3VzdG9tYXJ5UmVnaXN0cnkuZGVjbGFyZShcblx0XHRcdFx0XHRcdGNsYXNzIEVwaGVtZXJhbEN1c3RvbWFyeUVsZW1lbnQgZXh0ZW5kcyBDdXN0b21hcnlFbGVtZW50IHt9LFxuXHRcdFx0XHRcdFx0ZGVjbGFyYXRpb25cblx0XHRcdFx0KVxuXHRcdCk7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXHR9XG59XG4iLCJpbXBvcnQge0N1c3RvbWFyeURlY2xhcmF0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWNsYXJhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tYXJ5RGV0ZWN0b3Ige1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRcdHByaXZhdGUgcmVhZG9ubHkgZG9jdW1lbnQ6IERvY3VtZW50LFxuXHRcdFx0cHJpdmF0ZSByZWFkb25seSBnbG9iYWxUaGlzOiBhbnlcblx0KSB7fVxuXG5cdGRldGVjdCgpOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+W10ge1xuXHRcdHJldHVybiB0aGlzLmRldGVjdEVsZW1lbnROYW1lcygpLm1hcChuYW1lID0+IHRoaXMuZGV0ZWN0RGVjbGFyYXRpb24obmFtZSkpO1xuXHR9XG5cblx0cHJpdmF0ZSBkZXRlY3RFbGVtZW50TmFtZXMoKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IGF0dHJpYnV0ZSA9ICdkYXRhLWN1c3RvbWFyeS1uYW1lJztcblx0XHRjb25zdCBmcm9tRG9jdW1lbnQgPSBbLi4udGhpcy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGB0ZW1wbGF0ZVske2F0dHJpYnV0ZX1dYCldXG5cdFx0XHRcdC5tYXAodGVtcGxhdGUgPT4gdGVtcGxhdGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkhKTtcblxuXHRcdGNvbnN0IHByZWZpeCA9ICdjdXN0b21hcnk6Jztcblx0XHRjb25zdCBmcm9tR2xvYmFsU2NvcGUgPSBPYmplY3Qua2V5cyh0aGlzLmdsb2JhbFRoaXMpXG5cdFx0XHRcdC5maWx0ZXIobmFtZSA9PiBuYW1lLnN0YXJ0c1dpdGgocHJlZml4KSlcblx0XHRcdFx0Lm1hcChuYW1lID0+IG5hbWUuc3Vic3RyaW5nKHByZWZpeC5sZW5ndGgpKTtcblxuXHRcdHJldHVybiBbLi4ubmV3IFNldChbLi4uZnJvbURvY3VtZW50LCAuLi5mcm9tR2xvYmFsU2NvcGVdKV07XG5cdH1cblxuXHRwcml2YXRlIGRldGVjdERlY2xhcmF0aW9uKG5hbWU6IHN0cmluZyk6IEN1c3RvbWFyeURlY2xhcmF0aW9uPGFueT4ge1xuXHRcdGNvbnN0IGZyb21HbG9iYWxTY29wZTogUGFydGlhbDxDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+PiA9IHRoaXMuZ2xvYmFsVGhpc1tgY3VzdG9tYXJ5OiR7bmFtZX1gXTtcblxuXHRcdGNvbnN0IGNvbmZpZyA9IGZyb21HbG9iYWxTY29wZT8uY29uZmlnO1xuXHRcdGNvbnN0IGhvb2tzID0gZnJvbUdsb2JhbFNjb3BlPy5ob29rcztcblx0XHRjb25zdCB2YWx1ZXMgPSBmcm9tR2xvYmFsU2NvcGU/LnZhbHVlcyA/PyB0aGlzLmRldGVjdFZhbHVlcyhuYW1lKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lLFxuXHRcdFx0Li4uKGNvbmZpZyA/IHtjb25maWd9IDoge30pLFxuXHRcdFx0Li4uKGhvb2tzID8ge2hvb2tzfSA6IHt9KSxcblx0XHRcdC4uLih2YWx1ZXMgPyB7dmFsdWVzfSA6IHt9KSxcblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSBkZXRlY3RWYWx1ZXMobmFtZTogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgb2JqZWN0IHwgb2JqZWN0W10+IHwgdW5kZWZpbmVkIHtcblx0XHRjb25zdCBzZWxlY3RvcnMgPSBgc2NyaXB0W3R5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCJdW2RhdGEtY3VzdG9tYXJ5LW5hbWU9JyR7bmFtZX0nXWA7XG5cdFx0Y29uc3QgZWxlbWVudHMgPSB0aGlzLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzKTtcblx0XHRpZiAoZWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIG9iamVjdCB8IG9iamVjdFtdPiA9IHt9O1xuXHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuXHRcdFx0aWYgKGVsZW1lbnQudGV4dENvbnRlbnQpIHtcblx0XHRcdFx0Y29uc3QgcXVhbGlmaWVkTmFtZSA9ICdkYXRhLWN1c3RvbWFyeS12YWx1ZSc7XG5cdFx0XHRcdGNvbnN0IGtleSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHF1YWxpZmllZE5hbWUpID8/XG5cdFx0XHRcdFx0KCgpID0+IHtcblx0XHRcdFx0XHRcdHRocm93IEVycm9yKGBBdHRyaWJ1dGUgXCIke3F1YWxpZmllZE5hbWV9XCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtzZWxlY3RvcnN9XCJgKVxuXHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdHJlc3VsdFtrZXldID0gSlNPTi5wYXJzZShlbGVtZW50LnRleHRDb250ZW50KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxufVxuIiwiaW1wb3J0IHtDdXN0b21hcnlEZWZpbml0aW9uLCBoYXNEZWZpbml0aW9uLCBzZXREZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeURlY2xhcmF0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWNsYXJhdGlvbi5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWZpbmV9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluZS5qc1wiO1xuXG5jb25zdCBXQUlUX1RPX0RFRklORV9FVkVSWVRISU5HX0lOX1RIRV9FTkQgPSBmYWxzZTtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeVJlZ2lzdHJ5XG57XG4gICAgc3RhdGljIHNpbmdsZXRvbigpOiBDdXN0b21hcnlSZWdpc3RyeSB7XG4gICAgICAgIHJldHVybiBDdXN0b21hcnlSZWdpc3RyeS5DdXN0b21hcnlSZWdpc3RyeV9zaW5nbGV0b25cbiAgICB9XG5cbiAgICBhc3luYyBkZWNsYXJlKFxuICAgICAgICBjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yLFxuICAgICAgICBkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55PlxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRlY2xhcmF0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSBuYW1lIG11c3QgYmUgcHJvdmlkZWQgdG8gZGVmaW5lIGEgY3VzdG9tIGVsZW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIVdBSVRfVE9fREVGSU5FX0VWRVJZVEhJTkdfSU5fVEhFX0VORCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWZpbmUoY29uc3RydWN0b3IsIGRlY2xhcmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGVjbGFyYXRpb25zLnNldChjb25zdHJ1Y3RvciwgZGVjbGFyYXRpb24pO1xuICAgIH1cblxuICAgIGFzeW5jIHNldHRsZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFXQUlUX1RPX0RFRklORV9FVkVSWVRISU5HX0lOX1RIRV9FTkQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBbLi4udGhpcy5kZWNsYXJhdGlvbnMuZW50cmllcygpXTtcblxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IGVudHJpZXMubWFwKFxuICAgICAgICAgICAgZW50cnkgPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3IsIGRlY2xhcmF0aW9uXG4gICAgICAgICAgICAgICAgXTogW1xuICAgICAgICAgICAgICAgIEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvciwgQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55PlxuICAgICAgICAgICAgXSA9IGVudHJ5O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmluZShjb25zdHJ1Y3RvciwgZGVjbGFyYXRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cblxuICAgIGFzeW5jIHVudGlsRGVmaW5lZChjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yKTogUHJvbWlzZTxDdXN0b21FbGVtZW50Q29uc3RydWN0b3I+IHtcbiAgICAgICAgY29uc3QgbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gKGNvbnN0cnVjdG9yIGFzIGFueSkuY3VzdG9tYXJ5Py5uYW1lO1xuXG4gICAgICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xhc3MgbXVzdCBoYXZlIHRoZSBcImN1c3RvbWFyeVwiIGRlY2xhcmF0aW9uIHdpdGggYSBcIm5hbWVcIiBwcm9wZXJ0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRvbV9jdXN0b21FbGVtZW50UmVnaXN0cnkud2hlbkRlZmluZWQobmFtZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBkZWZpbmU8VCBleHRlbmRzIEhUTUxFbGVtZW50PihcbiAgICAgICAgY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvcixcbiAgICAgICAgZGVjbGFyYXRpb246IEN1c3RvbWFyeURlY2xhcmF0aW9uPGFueT5cbiAgICApOiBQcm9taXNlPHZvaWQ+XG4gICAge1xuICAgICAgICBpZiAoaGFzRGVmaW5pdGlvbihjb25zdHJ1Y3RvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYCR7Y29uc3RydWN0b3IubmFtZX06IGVsZW1lbnQgYWxyZWFkeSBkZWZpbmVkLCBza2lwcGluZy4uLmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbjogQ3VzdG9tYXJ5RGVmaW5pdGlvbjxUPiA9XG4gICAgICAgICAgICBhd2FpdCBuZXcgQ3VzdG9tYXJ5RGVmaW5lKGRlY2xhcmF0aW9uKS5kZWZpbmUoY29uc3RydWN0b3IpO1xuXG4gICAgICAgIHNldERlZmluaXRpb24oY29uc3RydWN0b3IsIGRlZmluaXRpb24pO1xuXG4gICAgICAgIHRoaXMuZG9tX2N1c3RvbUVsZW1lbnRSZWdpc3RyeS5kZWZpbmUoXG4gICAgICAgICAgICBkZWNsYXJhdGlvbi5uYW1lISwgY29uc3RydWN0b3IsXG4gICAgICAgICAgICBkZWNsYXJhdGlvbi5ob29rcz8uZG9tPy5kZWZpbmU/Lm9wdGlvbnNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRvbV9jdXN0b21FbGVtZW50UmVnaXN0cnk6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSkge31cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGVjbGFyYXRpb25zOiBNYXA8Q3VzdG9tRWxlbWVudENvbnN0cnVjdG9yLCBDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+PiA9IG5ldyBNYXAoKTtcblxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEN1c3RvbWFyeVJlZ2lzdHJ5X3NpbmdsZXRvbjogQ3VzdG9tYXJ5UmVnaXN0cnkgPSBuZXcgQ3VzdG9tYXJ5UmVnaXN0cnkoY3VzdG9tRWxlbWVudHMpO1xufVxuIiwiaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb24uanNcIjtcbmltcG9ydCB7QXR0cmlidXRlc0RlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L2F0dHJpYnV0ZXMvQXR0cmlidXRlc0RlZmluaXRpb24uanNcIjtcblxuZXhwb3J0IHR5cGUgQ3VzdG9tYXJ5RGVmaW5pdGlvbjxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+ID1cbntcbiAgICByZWFkb25seSBkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248VD47XG4gICAgcmVhZG9ubHkgYXR0cmlidXRlczogQXR0cmlidXRlc0RlZmluaXRpb247XG4gICAgcmVhZG9ubHkgdGVtcGxhdGVJbkRvY3VtZW50OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGltbXV0YWJsZV9odG1sU3RyaW5nOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNEZWZpbml0aW9uKFxuICAgIGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50Q29uc3RydWN0b3JcbilcbntcbiAgICByZXR1cm4gZGVmaW5pdGlvbl9wcm9wZXJ0eSBpbiBjb25zdHJ1Y3Rvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmluaXRpb248VCBleHRlbmRzIEhUTUxFbGVtZW50PihcbiAgICBjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yLCBkZWZpbml0aW9uOiBDdXN0b21hcnlEZWZpbml0aW9uPFQ+XG4pXG57XG4gICAgKGNvbnN0cnVjdG9yIGFzIGFueSlbZGVmaW5pdGlvbl9wcm9wZXJ0eV0gPSBkZWZpbml0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmaW5pdGlvbjxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGVsZW1lbnQ6IFQpOiBDdXN0b21hcnlEZWZpbml0aW9uPFQ+XG57XG4gICAgY29uc3QgY29uc3RydWN0b3IgPSBlbGVtZW50LmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiAoY29uc3RydWN0b3IgYXMgYW55KVtkZWZpbml0aW9uX3Byb3BlcnR5XSA/PyAoKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29uc3RydWN0b3IubmFtZX06IGVsZW1lbnQgbmV2ZXIgZGVmaW5lZGApXG4gICAgfSkoKTtcbn1cblxuY29uc3QgZGVmaW5pdGlvbl9wcm9wZXJ0eSA9ICdjdXN0b21hcnlfZGVmaW5pdGlvbic7XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeURlY2xhcmF0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWNsYXJhdGlvbi5qc1wiO1xuaW1wb3J0IHtFeHRlcm5hbExvYWRlcn0gZnJvbSBcIiNjdXN0b21hcnkvZXh0ZXJuYWwvRXh0ZXJuYWxMb2FkZXIuanNcIjtcbmltcG9ydCB7RmV0Y2hUZXh0LCBGZXRjaFRleHRfRE9NX3NpbmdsZXRvbn0gZnJvbSBcIiNjdXN0b21hcnkvZmV0Y2gvRmV0Y2hUZXh0LmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeUh0bWx9IGZyb20gXCIjY3VzdG9tYXJ5L2h0bWwvQ3VzdG9tYXJ5SHRtbC5qc1wiO1xuaW1wb3J0IHtBdHRyaWJ1dGVzRGVmaW5pdGlvbiwgZGV0ZWN0QXR0cmlidXRlc30gZnJvbSBcIiNjdXN0b21hcnkvYXR0cmlidXRlcy9BdHRyaWJ1dGVzRGVmaW5pdGlvbi5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlQcm9wZXJ0aWVzfSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlQcm9wZXJ0aWVzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlEZWZpbmU8VCBleHRlbmRzIEhUTUxFbGVtZW50PiB7XG5cblx0YXN5bmMgZGVmaW5lKGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50Q29uc3RydWN0b3IpOiBQcm9taXNlPEN1c3RvbWFyeURlZmluaXRpb248VD4+IHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5idWlsZERlZmluaXRpb24oY29uc3RydWN0b3IpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBidWlsZERlZmluaXRpb24oXG5cdFx0XHRjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yXG5cdCk6IFByb21pc2U8Q3VzdG9tYXJ5RGVmaW5pdGlvbjxUPj5cblx0e1xuXHRcdGNvbnN0IHt0ZW1wbGF0ZSwgdGVtcGxhdGVJbkRvY3VtZW50fSA9XG5cdFx0XHRcdGF3YWl0IHRoaXMucmVzb2x2ZUhUTUxUZW1wbGF0ZUVsZW1lbnQodGhpcy5uYW1lKTtcblxuXHRcdGNvbnN0IGF0dHJpYnV0ZXM6IEF0dHJpYnV0ZXNEZWZpbml0aW9uID1cblx0XHRcdGRldGVjdEF0dHJpYnV0ZXMoe2NvbmZpZzogdGhpcy5kZWNsYXJhdGlvbi5jb25maWcsIHRlbXBsYXRlfSk7XG5cblx0XHRjb25zdCBjdXN0b21hcnlEZWZpbml0aW9uOiBDdXN0b21hcnlEZWZpbml0aW9uPFQ+ID0ge1xuXHRcdFx0ZGVjbGFyYXRpb246IHRoaXMuZGVjbGFyYXRpb24sXG5cdFx0XHRhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuXHRcdFx0dGVtcGxhdGVJbkRvY3VtZW50OiAhIXRlbXBsYXRlSW5Eb2N1bWVudCxcblx0XHRcdGltbXV0YWJsZV9odG1sU3RyaW5nOiBDdXN0b21hcnlIdG1sLmdldEh0bWxTdHJpbmcodGVtcGxhdGUpLFxuXHRcdH07XG5cblx0XHRDdXN0b21hcnlQcm9wZXJ0aWVzLmFkZFByb3BlcnRpZXMoY29uc3RydWN0b3IgYXMgdHlwZW9mIExpdEVsZW1lbnQsIGN1c3RvbWFyeURlZmluaXRpb24pO1xuXG5cdFx0cmV0dXJuIGN1c3RvbWFyeURlZmluaXRpb247XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlc29sdmVIVE1MVGVtcGxhdGVFbGVtZW50KFxuXHRcdFx0bmFtZTogc3RyaW5nXG5cdCk6IFByb21pc2U8e1xuXHRcdHRlbXBsYXRlSW5Eb2N1bWVudDogSFRNTFRlbXBsYXRlRWxlbWVudCB8IHVuZGVmaW5lZDtcblx0XHR0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcblx0fT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB0ZW1wbGF0ZUluRG9jdW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQgfCB1bmRlZmluZWQgPVxuXHRcdFx0XHRcdGZpbmRIVE1MVGVtcGxhdGVFbGVtZW50KG5hbWUsIGRvY3VtZW50KTtcblxuXHRcdFx0aWYgKHRlbXBsYXRlSW5Eb2N1bWVudCkgcmV0dXJuIHtcblx0XHRcdFx0dGVtcGxhdGU6IHRlbXBsYXRlSW5Eb2N1bWVudCxcblx0XHRcdFx0dGVtcGxhdGVJbkRvY3VtZW50LFxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgdGVtcGxhdGVJbkV4dGVybmFsRmlsZTogSFRNTFRlbXBsYXRlRWxlbWVudCA9XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maW5kSFRNTFRlbXBsYXRlRWxlbWVudEluRXh0ZXJuYWxGaWxlKG5hbWUpO1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0ZW1wbGF0ZTogdGVtcGxhdGVJbkV4dGVybmFsRmlsZSxcblx0XHRcdFx0dGVtcGxhdGVJbkRvY3VtZW50OiB1bmRlZmluZWQsXG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGAke25hbWV9OiB0ZW1wbGF0ZSB1bnJlc29sdmFibGUgZnJvbSBjdXJyZW50IHBhZ2Ugb3IgZXh0ZXJuYWwgaHRtbGA7XG4gICAgICAgICAgICBhc3luYyBmdW5jdGlvbiB1bnJlc29sdmFibGUoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UsIHtjYXVzZTogZXJyb3J9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZvaWQgdW5yZXNvbHZhYmxlKCk7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZVBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgICAgIHRlbXBsYXRlUGxhY2Vob2xkZXIuaW5uZXJIVE1MID0gYDxzcGFuIHN0eWxlPVwiY29sb3I6IHJlZDsgYmFja2dyb3VuZDogeWVsbG93XCI+WyR7bWVzc2FnZX1dPC9zcGFuPmA7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZVBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlSW5Eb2N1bWVudDogdGVtcGxhdGVQbGFjZWhvbGRlcixcbiAgICAgICAgICAgIH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGZpbmRIVE1MVGVtcGxhdGVFbGVtZW50SW5FeHRlcm5hbEZpbGUoXG5cdFx0XHRuYW1lOiBzdHJpbmdcblx0KTogUHJvbWlzZTxIVE1MVGVtcGxhdGVFbGVtZW50PiB7XG5cdFx0Y29uc3QgaHRtbFN0cmluZyA9IGF3YWl0IHRoaXMubG9hZEV4dGVybmFsSHRtbCgpO1xuXHRcdGNvbnN0IHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblx0XHR0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sU3RyaW5nO1xuXHRcdHJldHVybiBmaW5kSFRNTFRlbXBsYXRlRWxlbWVudChuYW1lLCB0ZW1wbGF0ZS5jb250ZW50KSA/PyB0ZW1wbGF0ZTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgbG9hZEV4dGVybmFsSHRtbCgpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IHRoaXMuZXh0ZXJuYWxMb2FkZXIpLmxvYWRIdG1sKCk7XG5cdFx0fVxuXHRcdGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFeHRlcm5hbCBodG1sIGZpbGUgb3V0IG9mIHJlYWNoLicsIHtjYXVzZTogZXJyb3J9KTtcblx0XHR9XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRlY2xhcmF0aW9uOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+KVxuXHR7XG5cdFx0dGhpcy5uYW1lID0gZGVjbGFyYXRpb24ubmFtZSE7XG5cdH1cblx0cHJpdmF0ZSByZWFkb25seSBuYW1lOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBnZXQgZXh0ZXJuYWxMb2FkZXIoKTogUHJvbWlzZTxFeHRlcm5hbExvYWRlcj4ge1xuXHRcdHJldHVybiB0aGlzLl9leHRlcm5hbExvYWRlciA/Pz0gY3JlYXRlRXh0ZXJuYWxMb2FkZXIoXG5cdFx0XHRcdHRoaXMuZmV0Y2hUZXh0LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogdGhpcy5uYW1lLFxuXHRcdFx0XHRcdGltcG9ydF9tZXRhOiBnZXRfaW1wb3J0X21ldGEodGhpcy5kZWNsYXJhdGlvbiksXG5cdFx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBfZXh0ZXJuYWxMb2FkZXI6IFByb21pc2U8RXh0ZXJuYWxMb2FkZXI+IHwgdW5kZWZpbmVkO1xuXG5cdHByaXZhdGUgZ2V0IGZldGNoVGV4dCgpOiBQcm9taXNlPEZldGNoVGV4dD4ge1xuXHRcdHJldHVybiB0aGlzLl9mZXRjaFRleHQgPz89IGxvYWRGZXRjaFRleHQoKTtcblx0fVxuXG5cdHByaXZhdGUgX2ZldGNoVGV4dDogUHJvbWlzZTxGZXRjaFRleHQ+IHwgdW5kZWZpbmVkO1xuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUV4dGVybmFsTG9hZGVyKFxuXHRcdGZldGNoVGV4dDogUHJvbWlzZTxGZXRjaFRleHQ+LFxuXHRcdG9wdGlvbnM6IHtcblx0XHRcdG5hbWU6IHN0cmluZyxcblx0XHRcdGltcG9ydF9tZXRhOiBJbXBvcnRNZXRhO1xuXHRcdH1cbik6IFByb21pc2U8RXh0ZXJuYWxMb2FkZXI+IHtcblx0cmV0dXJuIG5ldyBFeHRlcm5hbExvYWRlcihcblx0XHRcdGF3YWl0IGZldGNoVGV4dCxcblx0XHRcdG9wdGlvbnNcblx0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9hZEZldGNoVGV4dCgpOiBQcm9taXNlPEZldGNoVGV4dD4ge1xuXHRyZXR1cm4gRmV0Y2hUZXh0X0RPTV9zaW5nbGV0b247XG59XG5cbmZ1bmN0aW9uIGZpbmRIVE1MVGVtcGxhdGVFbGVtZW50KG5hbWU6IHN0cmluZywgbm9kZTogUGFyZW50Tm9kZSk6IEhUTUxUZW1wbGF0ZUVsZW1lbnQgfCB1bmRlZmluZWQge1xuXHRyZXR1cm4gbm9kZS5xdWVyeVNlbGVjdG9yKGB0ZW1wbGF0ZVtkYXRhLWN1c3RvbWFyeS1uYW1lPScke25hbWV9J11gKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50ID8/IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldF9pbXBvcnRfbWV0YShkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55Pikge1xuXHRyZXR1cm4gZGVjbGFyYXRpb24uaG9va3M/LmV4dGVybmFsTG9hZGVyPy5pbXBvcnRfbWV0YSA/PyAoKCkgPT4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihgJHtkZWNsYXJhdGlvbi5uYW1lfTogQ3VzdG9tYXJ5IG5lZWRzIFwiaW1wb3J0Lm1ldGFcIiBpZiB0aGUgY3VzdG9tIGVsZW1lbnQgdGVtcGxhdGUgYCArXG5cdFx0XHQnaXMgdG8gYmUgbG9hZGVkIGZyb20gYW4gZXh0ZXJuYWwgZmlsZS4gJyArXG5cdFx0XHQnKGRvY3VtZW50IGRpZCBub3QgaGF2ZSBhIG5hbWVkIHRlbXBsYXRlIGVsZW1lbnQsIGFuZCBhbiBodG1sIHN0cmluZyB3YXMgbm90IHByb3ZpZGVkLiknKVxuXHR9KSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdF9mb250X2xvY2F0aW9ucyhkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55Pik6IHN0cmluZ1tdIHwgdW5kZWZpbmVkIHtcblx0cmV0dXJuICgoYTogc3RyaW5nW10pID0+IGEubGVuZ3RoID4gMCA/IGEgOiB1bmRlZmluZWQpKFxuXHRcdFtcblx0XHRcdGRlY2xhcmF0aW9uLmNvbmZpZz8uZGVmaW5lPy5mb250TG9jYXRpb24sXG5cdFx0XHQuLi4oZGVjbGFyYXRpb24uY29uZmlnPy5kZWZpbmU/LmZvbnRMb2NhdGlvbnMgPz8gW10pLFxuXHRcdF1cblx0XHRcdC5maWx0ZXIobG9jYXRpb24gPT4gbG9jYXRpb24gIT0gdW5kZWZpbmVkKVxuXHQpO1xufVxuIiwiaW1wb3J0IHtGZXRjaFRleHR9IGZyb20gXCIjY3VzdG9tYXJ5L2ZldGNoL0ZldGNoVGV4dC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRXh0ZXJuYWxMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGZldGNoVGV4dDogRmV0Y2hUZXh0LFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgICAgIGltcG9ydF9tZXRhOiBJbXBvcnRNZXRhO1xuICAgICAgICB9XG4gICAgKSB7fVxuXG4gICAgYXN5bmMgbG9hZEh0bWwoKTogUHJvbWlzZTxzdHJpbmc+XG4gICAge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMucmVzb2x2ZVJlc291cmNlTG9jYXRpb24oJ2h0bWwnKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2hUZXh0LmZldGNoVGV4dChsb2NhdGlvbik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNvbHZlUmVzb3VyY2VMb2NhdGlvbihleHRlbnNpb246IHN0cmluZyk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVMb2NhdGlvbih7XG4gICAgICAgICAgICBpbXBvcnRfbWV0YTogdGhpcy5vcHRpb25zLmltcG9ydF9tZXRhLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5vcHRpb25zLm5hbWUsXG4gICAgICAgICAgICBleHRlbnNpb24sXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUxvY2F0aW9uKFxuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgaW1wb3J0X21ldGE6IEltcG9ydE1ldGE7XG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgZXh0ZW5zaW9uOiBzdHJpbmcsXG4gICAgfVxuKTogc3RyaW5nXG57XG4gICAgcmV0dXJuIG9wdGlvbnMuaW1wb3J0X21ldGEucmVzb2x2ZShgLi8ke29wdGlvbnMubmFtZX0uJHtvcHRpb25zLmV4dGVuc2lvbn1gKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgRmV0Y2hUZXh0IHtcbiAgICBmZXRjaFRleHQoaW5wdXQ6IFJlcXVlc3RJbmZvIHwgVVJMKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5jbGFzcyBGZXRjaFRleHRfRE9NIGltcGxlbWVudHMgRmV0Y2hUZXh0IHtcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hUZXh0KGlucHV0OiBSZXF1ZXN0SW5mbyB8IFVSTCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW5wdXQpO1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQsIHtjYXVzZTogcmVzcG9uc2V9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBGZXRjaFRleHRfRE9NX3NpbmdsZXRvbiA9IG5ldyBGZXRjaFRleHRfRE9NKCk7XG4iLCJpbXBvcnQge0F0dHJpYnV0ZV9iaW5kfSBmcm9tIFwiI2N1c3RvbWFyeS9iaW5kL0F0dHJpYnV0ZV9iaW5kLmpzXCI7XG5pbXBvcnQge0V4cHJlc3Npb25BdHRyaWJ1dGVzfSBmcm9tIFwiI2N1c3RvbWFyeS9leHByZXNzaW9ucy9FeHByZXNzaW9uQXR0cmlidXRlcy5qc1wiO1xuaW1wb3J0IHtFeHByZXNzaW9uc19yZWNvZGV9IGZyb20gXCIjY3VzdG9tYXJ5L2V4cHJlc3Npb25zL0V4cHJlc3Npb25zX3JlY29kZS5qc1wiO1xuaW1wb3J0IHtNYXJrdXBfZm9yfSBmcm9tIFwiI2N1c3RvbWFyeS9tYXJrdXAvTWFya3VwX2Zvci5qc1wiO1xuaW1wb3J0IHtNYXJrdXBfaWZ9IGZyb20gXCIjY3VzdG9tYXJ5L21hcmt1cC9NYXJrdXBfaWYuanNcIjtcbmltcG9ydCB7TWFya3VwX2luc2lkZX0gZnJvbSBcIiNjdXN0b21hcnkvbWFya3VwL01hcmt1cF9pbnNpZGUuanNcIjtcbmltcG9ydCB7TWFya3VwX2NsYXNzTWFwfSBmcm9tIFwiI2N1c3RvbWFyeS9tYXJrdXAvTWFya3VwX2NsYXNzTWFwLmpzXCI7XG5pbXBvcnQge01hcmt1cF9zdHlsZU1hcH0gZnJvbSBcIiNjdXN0b21hcnkvbWFya3VwL01hcmt1cF9zdHlsZU1hcC5qc1wiO1xuaW1wb3J0IHtNYXJrdXBfc3dpdGNofSBmcm9tIFwiI2N1c3RvbWFyeS9tYXJrdXAvTWFya3VwX3N3aXRjaC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tYXJ5SHRtbCB7XG4gICAgc3RhdGljIGdldEh0bWxTdHJpbmcodGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIGVuY29kZUV4cHJlc3Npb25QbGFjZWhvbGRlcnModGVtcGxhdGUpO1xuICAgICAgICBoeWRyYXRlTWFya3VwKHRlbXBsYXRlKTtcblxuICAgICAgICBjb25zdCBzID0gdGVtcGxhdGUuaW5uZXJIVE1MO1xuXG4gICAgICAgIGNvbnN0IHMxID0gZGVjb2RlRXhwcmVzc2lvblBsYWNlaG9sZGVycyhzKTtcbiAgICAgICAgY29uc3QgczIgPSByZXN0b3JlQXJyb3dGdW5jdGlvbnNFbmNvZGVkQnlUZW1wbGF0ZUlubmVySHRtbChzMSk7XG4gICAgICAgIHJldHVybiBleHBhbmRTdHJpbmdJbnRlcnBvbGF0aW9uKHMyKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGh5ZHJhdGVNYXJrdXAodGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICBNYXJrdXBfZm9yLmh5ZHJhdGUodGVtcGxhdGUpO1xuICAgIE1hcmt1cF9pZi5oeWRyYXRlKHRlbXBsYXRlKTtcbiAgICBNYXJrdXBfc3dpdGNoLmh5ZHJhdGUodGVtcGxhdGUpO1xuICAgIE1hcmt1cF9jbGFzc01hcC5oeWRyYXRlKHRlbXBsYXRlKTtcbiAgICBNYXJrdXBfc3R5bGVNYXAuaHlkcmF0ZSh0ZW1wbGF0ZSk7XG5cbiAgICAvLyBtdXN0IGJlIGxhc3QgdG8gYWNjb21tb2RhdGUgYWxsIG90aGVyc1xuICAgIE1hcmt1cF9pbnNpZGUuaHlkcmF0ZSh0ZW1wbGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGVuY29kZUV4cHJlc3Npb25QbGFjZWhvbGRlcnModGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICBFeHByZXNzaW9uQXR0cmlidXRlcy5lbmNvZGVFeHByZXNzaW9uUGxhY2Vob2xkZXJzKHRlbXBsYXRlKTtcbiAgICBBdHRyaWJ1dGVfYmluZC5lbmNvZGVFeHByZXNzaW9uUGxhY2Vob2xkZXJzKHRlbXBsYXRlKTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlRXhwcmVzc2lvblBsYWNlaG9sZGVycyhzMTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIEV4cHJlc3Npb25zX3JlY29kZS5kZWNvZGVFeHByZXNzaW9uUGxhY2Vob2xkZXJzKHMxKTtcbn1cblxuLyoqXG4gaW5uZXJIVE1MIGVuY29kZXMgc29tZSBjaGFyYWN0ZXJzIHVzZWQgYnkgbGl0IGRpcmVjdGl2ZXMsXG4gc28gd2UgbXVzdCBkZWNvZGUgdGhlbSBiYWNrIGludG8gdGhlIEhUTUwgc3RyaW5nLlxuIG92ZXIgdGltZSB0aGUgbmVlZCB0byBkbyB0aGlzIHNob3VsZCBkaXNhcHBlYXIsXG4gYXMgd2UgYWRkIGRpcmVjdGl2ZSBtYXJrdXAgZm9yIGEgbGFyZ2VyIG51bWJlciBvZiBsaXQgZGlyZWN0aXZlcy5cbiAqL1xuZnVuY3Rpb24gcmVzdG9yZUFycm93RnVuY3Rpb25zRW5jb2RlZEJ5VGVtcGxhdGVJbm5lckh0bWwoaHRtbFN0cmluZzogc3RyaW5nKSB7XG4gICAgLy8gbGl0IGRpcmVjdGl2ZXMgZXhwcmVzc2VkIGFzIGFycm93IGZ1bmN0aW9uc1xuICAgIHJldHVybiBodG1sU3RyaW5nLnJlcGxhY2VBbGwoJz0mZ3Q7JywgJz0+Jyk7XG59XG5cbmZ1bmN0aW9uIGV4cGFuZFN0cmluZ0ludGVycG9sYXRpb24oaHRtbFN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXJsX2N1cmxleSA9IC9cXHtcXHsoW2EtekEtWl9dW1xcdy1dKig/OlxcLlthLXpBLVpfXVtcXHctXSopKil9fS9nO1xuICAgIGNvbnN0IGN1cmxfc3F1YXJlID0gL1xce1xcWyhbYS16QS1aX11bXFx3LV0qKD86XFwuW2EtekEtWl9dW1xcdy1dKikqKV19L2c7XG5cbiAgICByZXR1cm4gaHRtbFN0cmluZ1xuICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgIGN1cmxfY3VybGV5LFxuICAgICAgICAgICAgKF9tYXRjaCwgcGF0aCkgPT4gXCIke1wiICsgZXhwYW5kVGhpc0ludGVycG9sYXRpb24ocGF0aCkgKyBcIn1cIlxuICAgICAgICApXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgY3VybF9zcXVhcmUsXG4gICAgICAgICAgICAoX21hdGNoLCBwYXRoKSA9PiBcIiR7XCIgKyBleHBhbmRCYXJlSW50ZXJwb2xhdGlvbihwYXRoKSArIFwifVwiXG4gICAgICAgICk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZE1hcmt1cEV4cHJlc3Npb24oZXhwcmVzc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXJsX2N1cmxleSA9IC9eXFx7XFx7KFthLXpBLVpfXVtcXHctXSooPzpcXC5bYS16QS1aX11bXFx3LV0qKSopfX0kLztcbiAgICBjb25zdCBjdXJsX3NxdWFyZSA9IC9eXFx7XFxbKFthLXpBLVpfXVtcXHctXSooPzpcXC5bYS16QS1aX11bXFx3LV0qKSopXX0kLztcblxuICAgIGNvbnN0IHRoYXQgPSBleHByZXNzaW9uLm1hdGNoKGN1cmxfY3VybGV5KTtcbiAgICBpZiAodGhhdCkge1xuICAgICAgICByZXR1cm4gZXhwYW5kVGhpc0ludGVycG9sYXRpb24odGhhdFsxXSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmFyZSA9IGV4cHJlc3Npb24ubWF0Y2goY3VybF9zcXVhcmUpO1xuICAgIGlmIChiYXJlKSB7XG4gICAgICAgIHJldHVybiBleHBhbmRCYXJlSW50ZXJwb2xhdGlvbihiYXJlWzFdKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVycG9sYXRpb24gcmVxdWlyZWQ6ICR7ZXhwcmVzc2lvbn1gKTtcbn1cblxuZnVuY3Rpb24gZXhwYW5kVGhpc0ludGVycG9sYXRpb24ocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJ0aGlzXCIgK1xuICAgICAgICBwYXRoLnNwbGl0KCcuJylcbiAgICAgICAgICAgIC5tYXAocCA9PiBcIlsnXCIgKyBwICsgXCInXVwiKVxuICAgICAgICAgICAgLmpvaW4oJz8uJyk7XG59XG5cbmZ1bmN0aW9uIGV4cGFuZEJhcmVJbnRlcnBvbGF0aW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7XG5cbiAgICByZXR1cm4gc2VnbWVudHNbMF0gK1xuICAgICAgICBzZWdtZW50cy5zbGljZSgxKVxuICAgICAgICAgICAgLm1hcChwID0+IFwiWydcIiArIHAgKyBcIiddXCIpXG4gICAgICAgICAgICAuam9pbignPy4nKTtcbn1cbiIsImltcG9ydCB7RXhwcmVzc2lvbnNfcmVjb2RlfSBmcm9tIFwiI2N1c3RvbWFyeS9leHByZXNzaW9ucy9FeHByZXNzaW9uc19yZWNvZGUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZV9iaW5kIHtcbiAgICBzdGF0aWMgZW5jb2RlRXhwcmVzc2lvblBsYWNlaG9sZGVycyh0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudClcbiAgICB7XG4gICAgICAgIGNvbnN0IHRhZ3MgPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFske0JJTkRfQVRUUklCVVRFfV1gKTtcbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgY29uc3QgYmluZGluZyA9IHRhZy5nZXRBdHRyaWJ1dGUoQklORF9BVFRSSUJVVEUpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHRhZy5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgRXhwcmVzc2lvbnNfcmVjb2RlLmVuY29kZUV4cHJlc3Npb25QbGFjZWhvbGRlcih7XG4gICAgICAgICAgICAgICAgICAgIHRhZyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2hlY2tlZCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICckJyArJ3snICsgYHRoaXMuJHtiaW5kaW5nfWAgKyBcIiA9PT0gJ3RydWUnfVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgRXhwcmVzc2lvbnNfcmVjb2RlLmVuY29kZUV4cHJlc3Npb25QbGFjZWhvbGRlcih7XG4gICAgICAgICAgICAgICAgICAgIHRhZyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbHVlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogJyQnICsgJ3snICsgYHRoaXMuJHtiaW5kaW5nfWAgKyAnID8/IG51bGx9J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IEJJTkRfQVRUUklCVVRFID0gJ2RhdGEtY3VzdG9tYXJ5LWJpbmQnO1xuIiwidHlwZSBFeHByZXNzaW9uVHlwZSA9ICdib29sZWFuJyB8ICdldmVudCcgfCAncHJvcGVydHknO1xuXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbnNfcmVjb2RlXG57XG4gICAgc3RhdGljIGVuY29kZUV4cHJlc3Npb25QbGFjZWhvbGRlcihcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZSwgdGFnLCBuYW1lLCBkYXRhLFxuICAgICAgICB9OntcbiAgICAgICAgICAgIHR5cGU/OiBzdHJpbmcsIHRhZzogRWxlbWVudCwgbmFtZTogc3RyaW5nLCBkYXRhOiBzdHJpbmdcbiAgICAgICAgfVxuICAgICkge1xuICAgICAgICBjb25zdCBwcmVmaXggPSBUWVBFX3hfUFJFRklYW3RoaXMudG9FeHByZXNzaW9uVHlwZShuYW1lLCB0eXBlKV07XG4gICAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoYCR7cHJlZml4fSR7bmFtZX1gLCBkYXRhKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVjb2RlRXhwcmVzc2lvblBsYWNlaG9sZGVycyhodG1sU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoU1lNQk9MX3hfUFJFRklYKS5mb3JFYWNoKChbc3ltYm9sLCBwcmVmaXhdKSA9PiB7XG4gICAgICAgICAgICBodG1sU3RyaW5nID0gaHRtbFN0cmluZy5yZXBsYWNlQWxsKHByZWZpeCwgc3ltYm9sKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBodG1sU3RyaW5nO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHRvRXhwcmVzc2lvblR5cGUobmFtZTogc3RyaW5nLCBzPzogc3RyaW5nKTogRXhwcmVzc2lvblR5cGUge1xuICAgICAgICBpZiAoIXMpIHJldHVybiAncHJvcGVydHknO1xuICAgICAgICBpZiAocyA9PT0gJ2Jvb2xlYW4nIHx8IHMgPT09ICdldmVudCcpIHJldHVybiBzO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZXhwcmVzc2lvbiB0eXBlIFwiJHtzfVwiIGZvciBhdHRyaWJ1dGUgXCIke25hbWV9XCJgKTtcbiAgICB9XG59XG5cbi8vIGxvd2VyY2FzZSBiZWNhdXNlIHNldEF0dHJpYnV0ZSB3b3VsZCBsb3dlcmNhc2UgaXQgcmVnYXJkbGVzc1xuY29uc3QgTElUX0JPT0xFQU5fQVRUUklCVVRFX0VYUFJFU1NJT05fUFJFRklYID1cbiAgICAnX19fX2xpdF9ib29sZWFuX2F0dHJpYnV0ZV9leHByZXNzaW9uX3ByZWZpeF9fX18nO1xuY29uc3QgTElUX0VWRU5UX0VYUFJFU1NJT05fUFJFRklYID1cbiAgICAnX19fX2xpdF9ldmVudF9leHByZXNzaW9uX3ByZWZpeF9fX18nO1xuY29uc3QgTElUX1BST1BFUlRZX0VYUFJFU1NJT05fUFJFRklYID1cbiAgICAnX19fX2xpdF9wcm9wZXJ0eV9leHByZXNzaW9uX3ByZWZpeF9fX18nO1xuXG5jb25zdCBUWVBFX3hfUFJFRklYOiBSZWNvcmQ8RXhwcmVzc2lvblR5cGUsIHN0cmluZz4gPSB7XG4gICAgJ2Jvb2xlYW4nOiBMSVRfQk9PTEVBTl9BVFRSSUJVVEVfRVhQUkVTU0lPTl9QUkVGSVgsXG4gICAgJ2V2ZW50JzogTElUX0VWRU5UX0VYUFJFU1NJT05fUFJFRklYLFxuICAgICdwcm9wZXJ0eSc6IExJVF9QUk9QRVJUWV9FWFBSRVNTSU9OX1BSRUZJWCxcbn1cblxuY29uc3QgU1lNQk9MX3hfUFJFRklYID0ge1xuICAgICc/JzogTElUX0JPT0xFQU5fQVRUUklCVVRFX0VYUFJFU1NJT05fUFJFRklYLFxuICAgICdAJzogTElUX0VWRU5UX0VYUFJFU1NJT05fUFJFRklYLFxuICAgICcuJzogTElUX1BST1BFUlRZX0VYUFJFU1NJT05fUFJFRklYLFxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uc19yZWNvZGV9IGZyb20gXCIjY3VzdG9tYXJ5L2V4cHJlc3Npb25zL0V4cHJlc3Npb25zX3JlY29kZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbkF0dHJpYnV0ZXNcbntcbiAgICBzdGF0aWMgZW5jb2RlRXhwcmVzc2lvblBsYWNlaG9sZGVycyh0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuZnJvbSh0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFske0VYUFJFU1NJT05TX0FUVFJJQlVURX1dYCkpO1xuICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lcyA9IHRhZy5nZXRBdHRyaWJ1dGVOYW1lcygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGVOYW1lIG9mIGF0dHJpYnV0ZU5hbWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVFeHByZXNzaW9uUGxhY2Vob2xkZXIoYXR0cmlidXRlTmFtZSwgdGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhZy5yZW1vdmVBdHRyaWJ1dGUoRVhQUkVTU0lPTlNfQVRUUklCVVRFKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGVuY29kZUV4cHJlc3Npb25QbGFjZWhvbGRlcihhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIHRhZzogRWxlbWVudCkge1xuICAgICAgICBpZiAoIWF0dHJpYnV0ZU5hbWUuc3RhcnRzV2l0aChFWFBSRVNTSU9OX05BTUVfQVRUUklCVVRFX1BSRUZJWCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmRpbmFsID0gYXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoRVhQUkVTU0lPTl9OQU1FX0FUVFJJQlVURV9QUkVGSVgubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZGF0YUF0dHJpYnV0ZU5hbWUgPSBFWFBSRVNTSU9OX0RBVEFfQVRUUklCVVRFX1BSRUZJWCArIG9yZGluYWw7XG4gICAgICAgIGNvbnN0IHR5cGVBdHRyaWJ1dGVOYW1lID0gRVhQUkVTU0lPTl9UWVBFX0FUVFJJQlVURV9QUkVGSVggKyBvcmRpbmFsO1xuXG4gICAgICAgIEV4cHJlc3Npb25zX3JlY29kZS5lbmNvZGVFeHByZXNzaW9uUGxhY2Vob2xkZXIoe1xuICAgICAgICAgICAgdGFnLFxuICAgICAgICAgICAgbmFtZTogdGFnLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSEsXG4gICAgICAgICAgICBkYXRhOiB0YWcuZ2V0QXR0cmlidXRlKGRhdGFBdHRyaWJ1dGVOYW1lKSEsXG4gICAgICAgICAgICB0eXBlOiB0YWcuZ2V0QXR0cmlidXRlKHR5cGVBdHRyaWJ1dGVOYW1lKSA/PyB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgICB0YWcucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICB0YWcucmVtb3ZlQXR0cmlidXRlKGRhdGFBdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgdGFnLnJlbW92ZUF0dHJpYnV0ZSh0eXBlQXR0cmlidXRlTmFtZSk7XG4gICAgfVxufVxuXG5jb25zdCBFWFBSRVNTSU9OU19BVFRSSUJVVEUgPSAnZGF0YS1jdXN0b21hcnktZXhwcmVzc2lvbnMnO1xuY29uc3QgRVhQUkVTU0lPTl9OQU1FX0FUVFJJQlVURV9QUkVGSVggPSAnZGF0YS1jdXN0b21hcnktZXhwcmVzc2lvbi1uYW1lJztcbmNvbnN0IEVYUFJFU1NJT05fREFUQV9BVFRSSUJVVEVfUFJFRklYID0gJ2RhdGEtY3VzdG9tYXJ5LWV4cHJlc3Npb24tZGF0YSc7XG5jb25zdCBFWFBSRVNTSU9OX1RZUEVfQVRUUklCVVRFX1BSRUZJWCA9ICdkYXRhLWN1c3RvbWFyeS1leHByZXNzaW9uLXR5cGUnO1xuIiwiaW1wb3J0IHtzZXRfb3V0ZXJIVE1MfSBmcm9tIFwiLi9zZXRfb3V0ZXJIVE1MLmpzXCI7XG5pbXBvcnQge3RvU2VsZWN0b3J9IGZyb20gXCIjY3VzdG9tYXJ5L21hcmt1cC90b1NlbGVjdG9yLmpzXCI7XG5pbXBvcnQge2V4cGFuZE1hcmt1cEV4cHJlc3Npb259IGZyb20gXCIjY3VzdG9tYXJ5L2h0bWwvQ3VzdG9tYXJ5SHRtbC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTWFya3VwX2Zvclxue1xuXHRzdGF0aWMgaHlkcmF0ZSh0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuXHRcdHRoaXMuaHlkcmF0ZVRyZWUodGVtcGxhdGUuY29udGVudCwgdGVtcGxhdGUpO1xuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgaHlkcmF0ZVRyZWUobm9kZTogUGFyZW50Tm9kZSwgdGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpXG5cdHtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0Y29uc3QgdGFnID0gbm9kZS5xdWVyeVNlbGVjdG9yKHRvU2VsZWN0b3IoZm9yX21hcmt1cCkpO1xuXHRcdFx0aWYgKCF0YWcpIHJldHVybjtcblxuXHRcdFx0dGhpcy5oeWRyYXRlVHJlZSh0YWcsIHRlbXBsYXRlKTtcblxuXHRcdFx0Y29uc3QgaXRlbXNfcmF3ID0gdGFnLmdldEF0dHJpYnV0ZSgnaXRlbXMnKSA/P1xuXHRcdFx0XHRcdCgoKT0+e1xuXHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoYEF0dHJpYnV0ZSBcIml0ZW1zXCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtmb3JfbWFya3VwfVwiIG1hcmt1cGApXG5cdFx0XHRcdFx0fSkoKTtcblxuXHRcdFx0Y29uc3QgaXRlbXMgPSBleHBhbmRNYXJrdXBFeHByZXNzaW9uKGl0ZW1zX3Jhdyk7XG5cblx0XHRcdGNvbnN0IHZhbHVlID0gdGFnLmdldEF0dHJpYnV0ZSgndmFsdWUnKSA/PyAndmFsdWUnO1xuXG5cdFx0XHRjb25zdCBpbmRleCA9IHRhZy5nZXRBdHRyaWJ1dGUoJ2luZGV4Jyk7XG5cdFx0XHRjb25zdCBhcmdzID0gaW5kZXggPyBgKCR7dmFsdWV9LCAke2luZGV4fSlgIDogdmFsdWU7XG5cblx0XHRcdGNvbnN0IGJvZHkgPSB0YWcuaW5uZXJIVE1MO1xuXG5cdFx0XHRjb25zdCB1c2VfcmVwZWF0X2luc3RlYWRfb2ZfbWFwID0gdHJ1ZTtcblx0XHRcdGNvbnN0IGRpcmVjdGl2ZSA9IHVzZV9yZXBlYXRfaW5zdGVhZF9vZl9tYXBcblx0XHRcdFx0PyBgXFwke3JlcGVhdCgke2l0ZW1zfT8/W10sICR7YXJnc30gPT4gY3VzdG9tYXJ5X2xpdF9odG1sX3RyYWNrKCBodG1sXFxgJHtib2R5fVxcYCApICl9YFxuXHRcdFx0XHQ6IGBcXCR7bWFwKCR7aXRlbXN9LCAke2FyZ3N9ID0+IGN1c3RvbWFyeV9saXRfaHRtbF90cmFjayggaHRtbFxcYCR7Ym9keX1cXGAgKSApfWBcblx0XHRcdDtcblxuXHRcdFx0c2V0X291dGVySFRNTCh0YWcsIGRpcmVjdGl2ZSwgdGVtcGxhdGUpO1xuXHRcdH1cblx0fVxufVxuY29uc3QgZm9yX21hcmt1cCA9ICdjdXN0b21hcnk6Zm9yJztcblxuXG4iLCJleHBvcnQgZnVuY3Rpb24gc2V0X291dGVySFRNTCh0YWcsIHZhbHVlLCB0ZW1wbGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICAgIHRhZy5vdXRlckhUTUwgPSB2YWx1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IGNocm9tZSA9IFwiRmFpbGVkIHRvIHNldCB0aGUgJ291dGVySFRNTCcgcHJvcGVydHkgb24gJ0VsZW1lbnQnOiBcIiArXG4gICAgICAgICAgICBcIlRoaXMgZWxlbWVudCdzIHBhcmVudCBpcyBvZiB0eXBlICcjZG9jdW1lbnQtZnJhZ21lbnQnLCB3aGljaCBpcyBub3QgYW4gZWxlbWVudCBub2RlLlwiO1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gY2hyb21lKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0ZW1wbGF0ZS5pbm5lckhUTUwucmVwbGFjZSh0YWcub3V0ZXJIVE1MLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXRfb3V0ZXJIVE1MLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBzZXRfb3V0ZXJIVE1MKFxuXHRcdHRhZzogRWxlbWVudCwgdmFsdWU6IHN0cmluZywgdGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnRcbikge1xuXHR0cnkge1xuXHRcdHRhZy5vdXRlckhUTUwgPSB2YWx1ZTtcblx0fVxuXHRjYXRjaCAoZXJyb3I6IGFueSkge1xuXHRcdGNvbnN0IGNocm9tZSA9XG5cdFx0XHRcdFwiRmFpbGVkIHRvIHNldCB0aGUgJ291dGVySFRNTCcgcHJvcGVydHkgb24gJ0VsZW1lbnQnOiBcIiArXG5cdFx0XHRcdFwiVGhpcyBlbGVtZW50J3MgcGFyZW50IGlzIG9mIHR5cGUgJyNkb2N1bWVudC1mcmFnbWVudCcsIHdoaWNoIGlzIG5vdCBhbiBlbGVtZW50IG5vZGUuXCI7XG5cdFx0aWYgKGVycm9yLm1lc3NhZ2UgPT09IGNocm9tZSkge1xuXHRcdFx0dGVtcGxhdGUuaW5uZXJIVE1MID0gdGVtcGxhdGUuaW5uZXJIVE1MLnJlcGxhY2UodGFnLm91dGVySFRNTCwgdmFsdWUpO1xuXHRcdH1cblx0fVxufSIsImV4cG9ydCBmdW5jdGlvbiB0b1NlbGVjdG9yKG1hcmt1cDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbWFya3VwLnJlcGxhY2UoJzonLCAnXFxcXDonKTtcbn1cbiIsImltcG9ydCB7c2V0X291dGVySFRNTH0gZnJvbSBcIi4vc2V0X291dGVySFRNTC5qc1wiO1xuaW1wb3J0IHt0b1NlbGVjdG9yfSBmcm9tIFwiI2N1c3RvbWFyeS9tYXJrdXAvdG9TZWxlY3Rvci5qc1wiO1xuaW1wb3J0IHtleHBhbmRNYXJrdXBFeHByZXNzaW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9odG1sL0N1c3RvbWFyeUh0bWwuanNcIjtcblxuZXhwb3J0IGNsYXNzIE1hcmt1cF9pZlxue1xuXHRzdGF0aWMgaHlkcmF0ZSh0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuXHRcdHRoaXMuaHlkcmF0ZVRyZWUodGVtcGxhdGUuY29udGVudCwgdGVtcGxhdGUpO1xuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgaHlkcmF0ZVRyZWUobm9kZTogUGFyZW50Tm9kZSwgdGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpXG5cdHtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0Y29uc3QgdGFnID0gbm9kZS5xdWVyeVNlbGVjdG9yKHRvU2VsZWN0b3IoaWZfbWFya3VwKSk7XG5cdFx0XHRpZiAoIXRhZykgcmV0dXJuO1xuXG5cdFx0XHR0aGlzLmh5ZHJhdGVUcmVlKHRhZywgdGVtcGxhdGUpO1xuXG5cdFx0XHRjb25zdCBjb25kaXRpb24gPSBleHBhbmRNYXJrdXBFeHByZXNzaW9uKHRhZy5nZXRBdHRyaWJ1dGUoJ2NvbmRpdGlvbicpID8/XG5cdFx0XHRcdFx0KCgpPT57XG5cdFx0XHRcdFx0XHR0aHJvdyBFcnJvcihgQXR0cmlidXRlIFwiY29uZGl0aW9uXCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtpZl9tYXJrdXB9XCIgbWFya3VwYClcblx0XHRcdFx0XHR9KSgpKTtcblxuXHRcdFx0Y29uc3QgdHJ1ZUVsZW1lbnRzID0gWy4uLnRhZy5xdWVyeVNlbGVjdG9yQWxsKGA6c2NvcGUgPiAke3RvU2VsZWN0b3IodHJ1ZV9tYXJrdXApfWApXTtcblx0XHRcdGlmICh0cnVlRWxlbWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcihgT25seSBvbmUgXCIke3RydWVfbWFya3VwfVwiIGlzIGFsbG93ZWQgZm9yIFwiJHtpZl9tYXJrdXB9XCIgbWFya3VwYCk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB0cnVlRWxlbWVudDogRWxlbWVudCB8IHVuZGVmaW5lZCA9IHRydWVFbGVtZW50c1swXTtcblxuXHRcdFx0Y29uc3QgZmFsc2VFbGVtZW50cyA9IFsuLi50YWcucXVlcnlTZWxlY3RvckFsbChgOnNjb3BlID4gJHt0b1NlbGVjdG9yKGZhbHNlX21hcmt1cCl9YCldO1xuXHRcdFx0aWYgKGZhbHNlRWxlbWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcihgT25seSBvbmUgXCIke2ZhbHNlX21hcmt1cH1cIiBpcyBhbGxvd2VkIGZvciBcIiR7aWZfbWFya3VwfVwiIG1hcmt1cGApO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZmFsc2VFbGVtZW50OiBFbGVtZW50IHwgdW5kZWZpbmVkID0gZmFsc2VFbGVtZW50c1swXTtcblxuXHRcdFx0aWYgKGZhbHNlRWxlbWVudCAmJiAhdHJ1ZUVsZW1lbnQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoYE9uZSBcIiR7dHJ1ZV9tYXJrdXB9XCIgaXMgcmVxdWlyZWQgaWYgXCIke2ZhbHNlX21hcmt1cH1cIiBwcmVzZW50IGZvciBcIiR7aWZfbWFya3VwfVwiIG1hcmt1cGApO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB0cnVlQ2FzZSA9IGAoKSA9PiBjdXN0b21hcnlfbGl0X2h0bWxfdHJhY2soIGh0bWxcXGAke3RydWVFbGVtZW50Py5pbm5lckhUTUwgPz8gdGFnLmlubmVySFRNTH1cXGAgKWA7XG5cblx0XHRcdGNvbnN0IGZhbHNlQ2FzZSA9IGZhbHNlRWxlbWVudCA/IGAsICgpID0+IGN1c3RvbWFyeV9saXRfaHRtbF90cmFjayggaHRtbFxcYCR7ZmFsc2VFbGVtZW50LmlubmVySFRNTH1cXGAgKWAgOiAnJztcblxuXHRcdFx0Y29uc3QgZGlyZWN0aXZlID0gYFxcJHt3aGVuKCR7Y29uZGl0aW9ufSwgJHt0cnVlQ2FzZX0ke2ZhbHNlQ2FzZX0pfWA7XG5cblx0XHRcdHNldF9vdXRlckhUTUwodGFnLCBkaXJlY3RpdmUsIHRlbXBsYXRlKTtcblx0XHR9XG5cdH1cbn1cbmNvbnN0IGlmX21hcmt1cCA9ICdjdXN0b21hcnk6aWYnO1xuY29uc3QgZmFsc2VfbWFya3VwID0gJ2N1c3RvbWFyeTpmYWxzZSc7XG5jb25zdCB0cnVlX21hcmt1cCA9ICdjdXN0b21hcnk6dHJ1ZSc7XG4iLCJpbXBvcnQge3RvU2VsZWN0b3J9IGZyb20gXCIjY3VzdG9tYXJ5L21hcmt1cC90b1NlbGVjdG9yLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNYXJrdXBfaW5zaWRlXG57XG5cdHN0YXRpYyBoeWRyYXRlKHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG5cdFx0dGhpcy5oeWRyYXRlVHJlZSh0ZW1wbGF0ZS5jb250ZW50LCB0ZW1wbGF0ZSk7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBoeWRyYXRlVHJlZShub2RlOiBQYXJlbnROb2RlLCB0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudClcblx0e1xuXHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRjb25zdCBtYXJrdXAgPSBub2RlLnF1ZXJ5U2VsZWN0b3IodG9TZWxlY3RvcihpbnNpZGVfbWFya3VwKSk7XG5cdFx0XHRpZiAoIW1hcmt1cCkgcmV0dXJuO1xuXG5cdFx0XHR0aGlzLmh5ZHJhdGVUcmVlKG1hcmt1cCwgdGVtcGxhdGUpO1xuXG5cdFx0XHRjb25zdCBzZWxlY3RvcnMgPSBtYXJrdXAuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcblx0XHRcdGlmICghc2VsZWN0b3JzKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgQXR0cmlidXRlIFwidGFyZ2V0XCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtpbnNpZGVfbWFya3VwfVwiIG1hcmt1cGApO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB0YXJnZXQgPSBub2RlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzKTtcblx0XHRcdGlmICghdGFyZ2V0KSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgTm8gZWxlbWVudCBtYXRjaGluZyAke3NlbGVjdG9yc31gKTtcblx0XHRcdH1cblxuXHRcdFx0dGFyZ2V0LmlubmVySFRNTCA9IG1hcmt1cC5pbm5lckhUTUw7XG5cblx0XHRcdG1hcmt1cC5wYXJlbnROb2RlIS5yZW1vdmVDaGlsZChtYXJrdXApO1xuXHRcdH1cblx0fVxufVxuY29uc3QgaW5zaWRlX21hcmt1cCA9ICdjdXN0b21hcnk6aW5zaWRlJztcbiIsImltcG9ydCB7dG9TZWxlY3Rvcn0gZnJvbSBcIi4vdG9TZWxlY3Rvci5qc1wiO1xuaW1wb3J0IHtleHBhbmRNYXJrdXBFeHByZXNzaW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9odG1sL0N1c3RvbWFyeUh0bWwuanNcIjtcblxuZXhwb3J0IGNsYXNzIE1hcmt1cF9jbGFzc01hcFxue1xuICAgIHN0YXRpYyBoeWRyYXRlKHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaHlkcmF0ZVRyZWUodGVtcGxhdGUuY29udGVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgaHlkcmF0ZVRyZWUobm9kZTogUGFyZW50Tm9kZSlcbiAgICB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSBub2RlLnF1ZXJ5U2VsZWN0b3IodG9TZWxlY3RvcihjbGFzc01hcF9tYXJrdXApKTtcbiAgICAgICAgICAgIGlmICghdGFnKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuaHlkcmF0ZVRyZWUodGFnKTtcblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSB0YWcuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSA/P1xuICAgICAgICAgICAgICAgICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBBdHRyaWJ1dGUgXCJ0YXJnZXRcIiBpcyByZXF1aXJlZCBmb3IgXCIke2NsYXNzTWFwX21hcmt1cH1cIiBtYXJrdXBgKVxuICAgICAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNsYXNzSW5mbyA9IGV4cGFuZE1hcmt1cEV4cHJlc3Npb24odGFnLmdldEF0dHJpYnV0ZSgnY2xhc3NJbmZvJykgPz9cbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgQXR0cmlidXRlIFwiY2xhc3NJbmZvXCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtjbGFzc01hcF9tYXJrdXB9XCIgbWFya3VwYClcbiAgICAgICAgICAgICAgICB9KSgpKTtcblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbm9kZS5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFRhcmdldCBlbGVtZW50IFwiJHt0YXJnZXRTZWxlY3Rvcn1cIiBub3QgZm91bmQgZm9yIFwiJHtjbGFzc01hcF9tYXJrdXB9XCIgbWFya3VwYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ2xhc3MgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xuICAgICAgICAgICAgY29uc3QgY2xhc3NNYXBEaXJlY3RpdmUgPSBgXFwke2NsYXNzTWFwKCR7Y2xhc3NJbmZvfSl9YDtcblxuICAgICAgICAgICAgY29uc3QgbmV3Q2xhc3MgPVxuICAgICAgICAgICAgICAgIChleGlzdGluZ0NsYXNzID8gYCR7ZXhpc3RpbmdDbGFzc30gJHtjbGFzc01hcERpcmVjdGl2ZX1gIDogY2xhc3NNYXBEaXJlY3RpdmUpLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKG5ld0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBuZXdDbGFzcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhZy5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IGNsYXNzTWFwX21hcmt1cCA9ICdjdXN0b21hcnk6Y2xhc3NNYXAnO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHRvU2VsZWN0b3IobWFya3VwKSB7XG4gICAgcmV0dXJuIG1hcmt1cC5yZXBsYWNlKCc6JywgJ1xcXFw6Jyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1NlbGVjdG9yLmpzLm1hcCIsImltcG9ydCB7dG9TZWxlY3Rvcn0gZnJvbSBcIi4vdG9TZWxlY3Rvci5qc1wiO1xuaW1wb3J0IHtleHBhbmRNYXJrdXBFeHByZXNzaW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9odG1sL0N1c3RvbWFyeUh0bWwuanNcIjtcblxuZXhwb3J0IGNsYXNzIE1hcmt1cF9zdHlsZU1hcFxue1xuICAgIHN0YXRpYyBoeWRyYXRlKHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaHlkcmF0ZVRyZWUodGVtcGxhdGUuY29udGVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgaHlkcmF0ZVRyZWUobm9kZTogUGFyZW50Tm9kZSlcbiAgICB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSBub2RlLnF1ZXJ5U2VsZWN0b3IodG9TZWxlY3RvcihzdHlsZU1hcF9tYXJrdXApKTtcbiAgICAgICAgICAgIGlmICghdGFnKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuaHlkcmF0ZVRyZWUodGFnKTtcblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSB0YWcuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSA/P1xuICAgICAgICAgICAgICAgICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBBdHRyaWJ1dGUgXCJ0YXJnZXRcIiBpcyByZXF1aXJlZCBmb3IgXCIke3N0eWxlTWFwX21hcmt1cH1cIiBtYXJrdXBgKVxuICAgICAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlSW5mbyA9IGV4cGFuZE1hcmt1cEV4cHJlc3Npb24odGFnLmdldEF0dHJpYnV0ZSgnc3R5bGVJbmZvJykgPz9cbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgQXR0cmlidXRlIFwic3R5bGVJbmZvXCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtzdHlsZU1hcF9tYXJrdXB9XCIgbWFya3VwYClcbiAgICAgICAgICAgICAgICB9KSgpKTtcblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbm9kZS5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFRhcmdldCBlbGVtZW50IFwiJHt0YXJnZXRTZWxlY3Rvcn1cIiBub3QgZm91bmQgZm9yIFwiJHtzdHlsZU1hcF9tYXJrdXB9XCIgbWFya3VwYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU3R5bGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVNYXBEaXJlY3RpdmUgPSBgXFwke3N0eWxlTWFwKCR7c3R5bGVJbmZvfSl9YDtcblxuICAgICAgICAgICAgY29uc3QgbmV3U3R5bGUgPVxuICAgICAgICAgICAgICAgIChleGlzdGluZ1N0eWxlID8gYCR7ZXhpc3RpbmdTdHlsZX0gJHtzdHlsZU1hcERpcmVjdGl2ZX1gIDogc3R5bGVNYXBEaXJlY3RpdmUpLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKG5ld1N0eWxlKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBuZXdTdHlsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhZy5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IHN0eWxlTWFwX21hcmt1cCA9ICdjdXN0b21hcnk6c3R5bGVNYXAnO1xuIiwiaW1wb3J0IHtzZXRfb3V0ZXJIVE1MfSBmcm9tIFwiLi9zZXRfb3V0ZXJIVE1MLmpzXCI7XG5pbXBvcnQge3RvU2VsZWN0b3J9IGZyb20gXCIjY3VzdG9tYXJ5L21hcmt1cC90b1NlbGVjdG9yLmpzXCI7XG5pbXBvcnQge2V4cGFuZE1hcmt1cEV4cHJlc3Npb259IGZyb20gXCIjY3VzdG9tYXJ5L2h0bWwvQ3VzdG9tYXJ5SHRtbC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTWFya3VwX3N3aXRjaFxue1xuXHRzdGF0aWMgaHlkcmF0ZSh0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudClcblx0e1xuXHRcdHRoaXMuaHlkcmF0ZVRyZWUodGVtcGxhdGUuY29udGVudCwgdGVtcGxhdGUpO1xuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgaHlkcmF0ZVRyZWUobm9kZTogUGFyZW50Tm9kZSwgdGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpXG5cdHtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0Y29uc3QgdGFnID0gbm9kZS5xdWVyeVNlbGVjdG9yKHRvU2VsZWN0b3Ioc3dpdGNoX21hcmt1cCkpO1xuXHRcdFx0aWYgKCF0YWcpIHJldHVybjtcblxuXHRcdFx0dGhpcy5oeWRyYXRlVHJlZSh0YWcsIHRlbXBsYXRlKTtcblxuXHRcdFx0Y29uc3QgdmFsdWUgPSBleHBhbmRNYXJrdXBFeHByZXNzaW9uKHRhZy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPz9cblx0XHRcdFx0XHQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoYEF0dHJpYnV0ZSBcInZhbHVlXCIgaXMgcmVxdWlyZWQgZm9yIFwiJHtzd2l0Y2hfbWFya3VwfVwiIG1hcmt1cGApXG5cdFx0XHRcdFx0fSkoKSk7XG5cblx0XHRcdGNvbnN0IGNhc2VzID0gdGhpcy50b0Nhc2VzKFsuLi50YWcucXVlcnlTZWxlY3RvckFsbChgOnNjb3BlID4gJHt0b1NlbGVjdG9yKGNhc2VfbWFya3VwKX1gKV0pO1xuXG5cdFx0XHRjb25zdCB2YWx1ZUNhc2VzID0gY2FzZXMudmFsdWVDYXNlcy5qb2luKCcsXFxuJyk7XG5cblx0XHRcdGNvbnN0IGRlZmF1bHRDYXNlID0gY2FzZXMuZGVmYXVsdENhc2UgPyBgLFxcbiR7Y2FzZXMuZGVmYXVsdENhc2V9YCA6ICcnO1xuXG5cdFx0XHRjb25zdCBkaXJlY3RpdmUgPSBgXFwke2Nob29zZSgke3ZhbHVlfSxcXG5bJHt2YWx1ZUNhc2VzfV0ke2RlZmF1bHRDYXNlfSl9YDtcblxuXHRcdFx0c2V0X291dGVySFRNTCh0YWcsIGRpcmVjdGl2ZSwgdGVtcGxhdGUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIHRvQ2FzZXMoY2FzZXM6IEVsZW1lbnRbXSk6IHtcblx0XHR2YWx1ZUNhc2VzOiBzdHJpbmdbXTtcblx0XHRkZWZhdWx0Q2FzZT86IHN0cmluZ1xuXHR9IHtcblx0XHRpZiAoY2FzZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBFcnJvcihgQXQgbGVhc3Qgb25lIFwiJHtjYXNlX21hcmt1cH1cIiBpcyByZXF1aXJlZCBmb3IgXCIke3N3aXRjaF9tYXJrdXB9XCIgbWFya3VwYCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVmYXVsdEVsZW1lbnRzID1cblx0XHRcdFx0Y2FzZXMuZmlsdGVyKGNhc2VFbGVtZW50ID0+ICFjYXNlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuXHRcdGlmIChkZWZhdWx0RWxlbWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0dGhyb3cgRXJyb3IoYE9ubHkgb25lIGRlZmF1bHQgXCIke2Nhc2VfbWFya3VwfVwiIGlzIGFsbG93ZWQgZm9yIFwiJHtzd2l0Y2hfbWFya3VwfVwiIG1hcmt1cGApO1xuXHRcdH1cblx0XHRjb25zdCBkZWZhdWx0RWxlbWVudCA9IGRlZmF1bHRFbGVtZW50c1swXTtcblx0XHRjb25zdCBkZWZhdWx0Q2FzZSA9IGAoKSA9PiBjdXN0b21hcnlfbGl0X2h0bWxfdHJhY2soIGh0bWxcXGAke2RlZmF1bHRFbGVtZW50Py5pbm5lckhUTUx9XFxgIClgO1xuXG5cdFx0Y29uc3QgdmFsdWVFbGVtZW50cyA9XG5cdFx0XHRcdGNhc2VzLmZpbHRlcihjYXNlRWxlbWVudCA9PiBjYXNlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuXHRcdGNvbnN0IHZhbHVlQ2FzZXMgPSB2YWx1ZUVsZW1lbnRzLm1hcChjYXNlRWxlbWVudCA9PiB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGNhc2VFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSE7XG5cdFx0XHRyZXR1cm4gYFsnJHt2YWx1ZX0nLCAoKSA9PiBjdXN0b21hcnlfbGl0X2h0bWxfdHJhY2soIGh0bWxcXGAke2Nhc2VFbGVtZW50LmlubmVySFRNTH1cXGAgKSBdYDtcblx0XHR9KVxuXG5cdFx0cmV0dXJuIHt2YWx1ZUNhc2VzLCBkZWZhdWx0Q2FzZX07XG5cdH1cbn1cbmNvbnN0IHN3aXRjaF9tYXJrdXAgPSAnY3VzdG9tYXJ5OnN3aXRjaCc7XG5jb25zdCBjYXNlX21hcmt1cCA9ICdjdXN0b21hcnk6Y2FzZSc7XG4iLCJpbXBvcnQge0N1c3RvbWFyeUNvbmZpZ30gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5Q29uZmlnLmpzXCI7XG5cbmV4cG9ydCB0eXBlIEF0dHJpYnV0ZXNEZWZpbml0aW9uID0ge1xuICAgIHJlYWRvbmx5IGF0dHJpYnV0ZXM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0QXR0cmlidXRlcyhcbiAgICB7Y29uZmlnLCB0ZW1wbGF0ZX06IHtcbiAgICAgICAgY29uZmlnOiBDdXN0b21hcnlDb25maWcgfCB1bmRlZmluZWQsXG4gICAgICAgIHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50XG4gICAgfVxuKTogQXR0cmlidXRlc0RlZmluaXRpb24ge1xuICAgIGNvbnN0IGZyb21Db25maWcgPSBjb25maWc/LmF0dHJpYnV0ZXMgPz8gW107XG4gICAgY29uc3QgZnJvbVRlbXBsYXRlID1cbiAgICAgICAgdGVtcGxhdGUuZ2V0QXR0cmlidXRlKCdkYXRhLWN1c3RvbWFyeS1hdHRyaWJ1dGVzJyk/LlxuICAgICAgICBzcGxpdCgnLCcpLm1hcChzID0+IHMudHJpbSgpKSA/PyBbXTtcbiAgICByZXR1cm4ge2F0dHJpYnV0ZXM6IFsuLi5uZXcgU2V0KFsuLi5mcm9tQ29uZmlnLCAuLi5mcm9tVGVtcGxhdGVdKV19O1xufSIsImltcG9ydCB7TGl0RWxlbWVudH0gZnJvbSBcIiNjdXN0b21hcnkvbGl0XCI7XG5pbXBvcnQge0N1c3RvbWFyeURlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcbmltcG9ydCB7QXR0cmlidXRlUHJvcGVydGllc30gZnJvbSBcIiNjdXN0b21hcnkvYXR0cmlidXRlcy9BdHRyaWJ1dGVQcm9wZXJ0aWVzLmpzXCI7XG5pbXBvcnQge0Rlcml2ZVByb3BlcnRpZXN9IGZyb20gXCIjY3VzdG9tYXJ5L2Rlcml2ZS9EZXJpdmVQcm9wZXJ0aWVzLmpzXCI7XG5pbXBvcnQge1Byb3BlcnRpZXNQcm9wZXJ0aWVzfSBmcm9tIFwiI2N1c3RvbWFyeS9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNQcm9wZXJ0aWVzLmpzXCI7XG5pbXBvcnQge1N0YXRlUHJvcGVydGllc30gZnJvbSBcIiNjdXN0b21hcnkvc3RhdGUvU3RhdGVQcm9wZXJ0aWVzLmpzXCI7XG5pbXBvcnQge1ZhbHVlc1Byb3BlcnRpZXN9IGZyb20gXCIjY3VzdG9tYXJ5L3ZhbHVlcy9WYWx1ZXNQcm9wZXJ0aWVzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlQcm9wZXJ0aWVzIHtcbiAgICBzdGF0aWMgYWRkUHJvcGVydGllczxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KFxuICAgICAgICBjb25zdHJ1Y3RvcjogdHlwZW9mIExpdEVsZW1lbnQsXG4gICAgICAgIGN1c3RvbWFyeURlZmluaXRpb246IEN1c3RvbWFyeURlZmluaXRpb248VD4sXG4gICAgKVxuICAgIHtcbiAgICAgICAgQXR0cmlidXRlUHJvcGVydGllcy5hZGRQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLCBjdXN0b21hcnlEZWZpbml0aW9uLmF0dHJpYnV0ZXMpO1xuICAgICAgICBEZXJpdmVQcm9wZXJ0aWVzLmFkZFByb3BlcnRpZXMoY29uc3RydWN0b3IsIGN1c3RvbWFyeURlZmluaXRpb24uZGVjbGFyYXRpb24pO1xuICAgICAgICBTdGF0ZVByb3BlcnRpZXMuYWRkUHJvcGVydGllcyhjb25zdHJ1Y3RvciwgY3VzdG9tYXJ5RGVmaW5pdGlvbi5kZWNsYXJhdGlvbik7XG4gICAgICAgIFByb3BlcnRpZXNQcm9wZXJ0aWVzLmFkZFByb3BlcnRpZXMoY29uc3RydWN0b3IsIGN1c3RvbWFyeURlZmluaXRpb24uZGVjbGFyYXRpb24pO1xuICAgICAgICBWYWx1ZXNQcm9wZXJ0aWVzLmFkZFByb3BlcnRpZXMoY29uc3RydWN0b3IsIGN1c3RvbWFyeURlZmluaXRpb24uZGVjbGFyYXRpb24pO1xuICAgIH1cbn0iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuaW1wb3J0IHtQcm9wZXJ0aWVzSW5qZWN0b3J9IGZyb20gXCIjY3VzdG9tYXJ5L3Byb3BlcnRpZXMvUHJvcGVydGllc0luamVjdG9yLmpzXCI7XG5pbXBvcnQge0F0dHJpYnV0ZXNEZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9hdHRyaWJ1dGVzL0F0dHJpYnV0ZXNEZWZpbml0aW9uLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVQcm9wZXJ0aWVzXG57XG5cdHN0YXRpYyBhZGRQcm9wZXJ0aWVzKFxuXHRcdFx0Y29uc3RydWN0b3I6IHR5cGVvZiBMaXRFbGVtZW50LFxuXHRcdFx0YXR0cmlidXRlc0RlZmluaXRpb246IEF0dHJpYnV0ZXNEZWZpbml0aW9uLFxuXHQpXG5cdHtcblx0XHRQcm9wZXJ0aWVzSW5qZWN0b3IuaW5qZWN0UHJvcGVydGllcyhjb25zdHJ1Y3Rvcixcblx0XHRcdHsgcHJvcGVydHlEZWNsYXJhdGlvbjoge3JlZmxlY3Q6IHRydWV9LCBuYW1lczogYXR0cmlidXRlc0RlZmluaXRpb24uYXR0cmlidXRlcyB9KTtcblx0fVxufVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcbmltcG9ydCB7UHJvcGVydHlEZWNsYXJhdGlvbiwgUHJvcGVydHlEZWNsYXJhdGlvbnN9IGZyb20gXCJAbGl0L3JlYWN0aXZlLWVsZW1lbnRcIjtcblxuZXhwb3J0IGNsYXNzIFByb3BlcnRpZXNJbmplY3RvciB7XG5cdHN0YXRpYyBpbmplY3RQcm9wZXJ0aWVzKFxuXHRcdFx0Y29uc3RydWN0b3I6IHR5cGVvZiBMaXRFbGVtZW50LFxuXHRcdFx0e3Byb3BlcnR5RGVjbGFyYXRpb24sIG5hbWVzLCBza2lwRXhpc3Rpbmd9OiB7XG5cdFx0XHRcdHByb3BlcnR5RGVjbGFyYXRpb246IFByb3BlcnR5RGVjbGFyYXRpb24sXG5cdFx0XHRcdG5hbWVzOiBzdHJpbmdbXSxcblx0XHRcdFx0c2tpcEV4aXN0aW5nPzogYm9vbGVhbixcblx0XHRcdH1cblx0KSB7XG5cdFx0aWYgKCFuYW1lcy5sZW5ndGgpIHJldHVybjtcblx0XHRjb25zdCBwcm9wZXJ0aWVzOiBXcml0YWJsZTxQcm9wZXJ0eURlY2xhcmF0aW9ucz4gPSBjb25zdHJ1Y3Rvci5wcm9wZXJ0aWVzID8/PSB7fTtcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBuYW1lcykge1xuXHRcdFx0aWYgKGtleSBpbiBwcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdGlmIChza2lwRXhpc3RpbmcpIGNvbnRpbnVlO1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYCR7a2V5fTogcHJvcGVydHkgYWxyZWFkeSBleGlzdHMuYCk7XG5cdFx0XHR9XG5cdFx0XHRwcm9wZXJ0aWVzW2tleV0gPSBwcm9wZXJ0eURlY2xhcmF0aW9uO1xuXHRcdH1cblx0fVxufVxuXG50eXBlIFdyaXRhYmxlPFQ+ID0gey1yZWFkb25seSBbUCBpbiBrZXlvZiBUXTogVFtQXX07XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuaW1wb3J0IHtQcm9wZXJ0aWVzSW5qZWN0b3J9IGZyb20gXCIjY3VzdG9tYXJ5L3Byb3BlcnRpZXMvUHJvcGVydGllc0luamVjdG9yLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeURlY2xhcmF0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWNsYXJhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGVyaXZlUHJvcGVydGllcyB7XG5cblx0c3RhdGljIGFkZFByb3BlcnRpZXM8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihcblx0XHRcdGNvbnN0cnVjdG9yOiB0eXBlb2YgTGl0RWxlbWVudCxcblx0XHRcdGRlY2xhcmF0aW9uOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxUPlxuXHQpXG5cdHtcblx0XHRjb25zdCBkZXJpdmUgPSBkZWNsYXJhdGlvbi5ob29rcz8uZGVyaXZlO1xuXHRcdGlmICghZGVyaXZlKSByZXR1cm47XG5cblx0XHRjb25zdCBuYW1lcyA9IGRlcml2ZSBpbnN0YW5jZW9mIEFycmF5ID9cblx0XHRcdGRlcml2ZS5tYXAoZW50cnkgPT4gZW50cnkubmFtZSlcblx0XHRcdDogT2JqZWN0LmtleXMoZGVyaXZlKTtcblxuXHRcdFByb3BlcnRpZXNJbmplY3Rvci5pbmplY3RQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLFxuXHRcdFx0eyBwcm9wZXJ0eURlY2xhcmF0aW9uOiB7c3RhdGU6IHRydWV9LCBuYW1lcyB9KTtcblx0fVxuXG59XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQge1Byb3BlcnRpZXNJbmplY3Rvcn0gZnJvbSBcIiNjdXN0b21hcnkvcHJvcGVydGllcy9Qcm9wZXJ0aWVzSW5qZWN0b3IuanNcIjtcbmltcG9ydCB7UHJvcGVydHlEZWNsYXJhdGlvbn0gZnJvbSBcIkBsaXQvcmVhY3RpdmUtZWxlbWVudFwiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIFByb3BlcnRpZXNQcm9wZXJ0aWVzXG57XG5cdHN0YXRpYyBhZGRQcm9wZXJ0aWVzPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXG5cdFx0XHRjb25zdHJ1Y3RvcjogdHlwZW9mIExpdEVsZW1lbnQsXG5cdFx0XHRkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248VD5cblx0KSB7XG5cdFx0Y29uc3QgaG9va3MgPSBkZWNsYXJhdGlvbi5ob29rcz8ucHJvcGVydGllcztcblx0XHRjb25zdCBob29rc0FycmF5OiBBdHRyaWJbXSA9IGhvb2tzIGluc3RhbmNlb2YgQXJyYXkgPyBob29rcyBhcyBBdHRyaWJbXSA6IFtdO1xuXHRcdGNvbnN0IGhvb2tzUmVjb3JkID0gaG9va3MgJiYgIShob29rcyBpbnN0YW5jZW9mIEFycmF5KSA/IGhvb2tzIDoge307XG5cblx0XHRjb25zdCBmcm9tQXJyYXk6IHN0cmluZ1tdID0gaG9va3NBcnJheS5tYXAobyA9PiBvLm5hbWUpO1xuXHRcdGNvbnN0IGZyb21SZWNvcmQ6IHN0cmluZ1tdID0gT2JqZWN0LmtleXMoaG9va3NSZWNvcmQpO1xuXG5cdFx0Y29uc3QgbmFtZXMgPSBbLi4ubmV3IFNldChbLi4uZnJvbUFycmF5LCAuLi5mcm9tUmVjb3JkXSldO1xuXG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgbmFtZXMpIHtcblx0XHRcdFByb3BlcnRpZXNJbmplY3Rvci5pbmplY3RQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cHJvcGVydHlEZWNsYXJhdGlvbjpcblx0XHRcdFx0XHRcdGhvb2tzQXJyYXkuZmluZCh2YWx1ZSA9PiB2YWx1ZS5uYW1lID09PSBrZXkpPy5wcm9wZXJ0eURlY2xhcmF0aW9uXG5cdFx0XHRcdFx0XHRcdD8/IGhvb2tzUmVjb3JkW2tleV0sXG5cdFx0XHRcdFx0bmFtZXM6IFtrZXldXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fVxuXHR9XG59XG5cbnR5cGUgQXR0cmliID0ge25hbWU6IHN0cmluZywgcHJvcGVydHlEZWNsYXJhdGlvbjogUHJvcGVydHlEZWNsYXJhdGlvbn07XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQge1Byb3BlcnRpZXNJbmplY3Rvcn0gZnJvbSBcIiNjdXN0b21hcnkvcHJvcGVydGllcy9Qcm9wZXJ0aWVzSW5qZWN0b3IuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVjbGFyYXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZVByb3BlcnRpZXMge1xuXG5cdHN0YXRpYyBhZGRQcm9wZXJ0aWVzPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXG5cdFx0XHRjb25zdHJ1Y3RvcjogdHlwZW9mIExpdEVsZW1lbnQsXG5cdFx0XHRkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248VD5cblx0KVxuXHR7XG5cdFx0Y29uc3QgZnJvbURlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24uY29uZmlnPy5zdGF0ZSA/PyBbXTtcblx0XHRjb25zdCBuYW1lcyA9IFsuLi5uZXcgU2V0KFsuLi5mcm9tRGVjbGFyYXRpb25dKV07XG5cdFx0UHJvcGVydGllc0luamVjdG9yLmluamVjdFByb3BlcnRpZXMoY29uc3RydWN0b3IsXG5cdFx0XHR7IHByb3BlcnR5RGVjbGFyYXRpb246IHtzdGF0ZTogdHJ1ZX0sIG5hbWVzIH0pO1xuXHR9XG5cbn1cbiIsImltcG9ydCB7TGl0RWxlbWVudH0gZnJvbSBcIiNjdXN0b21hcnkvbGl0XCI7XG5pbXBvcnQge1Byb3BlcnRpZXNJbmplY3Rvcn0gZnJvbSBcIiNjdXN0b21hcnkvcHJvcGVydGllcy9Qcm9wZXJ0aWVzSW5qZWN0b3IuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVjbGFyYXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBWYWx1ZXNQcm9wZXJ0aWVzXG57XG5cdHN0YXRpYyBhZGRQcm9wZXJ0aWVzPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXG5cdFx0XHRjb25zdHJ1Y3RvcjogdHlwZW9mIExpdEVsZW1lbnQsXG5cdFx0XHRkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248VD5cblx0KVxuXHR7XG5cdFx0Y29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhkZWNsYXJhdGlvbi52YWx1ZXMgPz8ge30pO1xuXHRcdFByb3BlcnRpZXNJbmplY3Rvci5pbmplY3RQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLFxuXHRcdFx0eyBwcm9wZXJ0eURlY2xhcmF0aW9uOiB7c3RhdGU6IHRydWV9LCBuYW1lcywgc2tpcEV4aXN0aW5nOiB0cnVlIH0pO1xuXHR9XG59XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuaW1wb3J0IHtDdXN0b21hcnlCaW5kfSBmcm9tIFwiI2N1c3RvbWFyeS9iaW5kL0N1c3RvbWFyeUJpbmQuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5Q2hhbmdlc19maXJzdFVwZGF0ZWR9IGZyb20gXCIjY3VzdG9tYXJ5L2NoYW5nZXMvQ3VzdG9tYXJ5Q2hhbmdlc19maXJzdFVwZGF0ZWQuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5Q2hhbmdlc191cGRhdGVkfSBmcm9tIFwiI2N1c3RvbWFyeS9jaGFuZ2VzL0N1c3RvbWFyeUNoYW5nZXNfdXBkYXRlZC5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlDaGFuZ2VzX3dpbGxVcGRhdGV9IGZyb20gXCIjY3VzdG9tYXJ5L2NoYW5nZXMvQ3VzdG9tYXJ5Q2hhbmdlc193aWxsVXBkYXRlLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeURlZmluaXRpb24sIGdldERlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVyaXZlfSBmcm9tIFwiI2N1c3RvbWFyeS9kZXJpdmUvQ3VzdG9tYXJ5RGVyaXZlLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeUV2ZW50c30gZnJvbSBcIiNjdXN0b21hcnkvZXZlbnRzL0N1c3RvbWFyeUV2ZW50cy5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlIb29rc30gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5SG9va3MuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5UmVuZGVyfSBmcm9tIFwiI2N1c3RvbWFyeS9yZW5kZXIvQ3VzdG9tYXJ5UmVuZGVyLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeVNsb3RzfSBmcm9tIFwiI2N1c3RvbWFyeS9zbG90cy9DdXN0b21hcnlTbG90cy5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlTdHlsZXNoZWV0c30gZnJvbSBcIiNjdXN0b21hcnkvc3R5bGUvQ3VzdG9tYXJ5U3R5bGVzaGVldHMuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5VmFsdWVzfSBmcm9tIFwiI2N1c3RvbWFyeS92YWx1ZXMvQ3VzdG9tYXJ5VmFsdWVzLmpzXCI7XG5pbXBvcnQge1Byb3BlcnR5VmFsdWVzfSBmcm9tIFwiI2N1c3RvbWFyeS9saWZlY3ljbGUvY2hhbmdlZFByb3BlcnRpZXMvUHJvcGVydHlWYWx1ZXMuanNcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHN1cGVyKCk7XG5cdFx0fVxuXHRcdGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG5cdFx0XHRcdGlmIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJJbGxlZ2FsIGNvbnN0cnVjdG9yXCIpKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0XHRcIkN1c3RvbSBlbGVtZW50IG11c3QgYmUgZnVsbHkgZGVmaW5lZCBiZWZvcmUgeW91IGNhbiBpbnN0YW50aWF0ZSBpdC4gVHJ5IHRoaXM6XFxuXCIgK1xuXHRcdFx0XHRcdFx0XHRcIiAgICBhd2FpdCBDdXN0b21hcnkudW50aWxEZWZpbmVkKE15Q3VzdG9tRWxlbWVudCk7XFxuXCIgK1xuXHRcdFx0XHRcdFx0XHRcIiAgICBjb25zdCBlbGVtZW50ID0gbmV3IE15Q3VzdG9tRWxlbWVudCgpO1wiLFxuXHRcdFx0XHRcdFx0XHR7Y2F1c2U6IGVycm9yfVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblxuXHRcdGNvbnN0IGRlZmluaXRpb24gPSBnZXREZWZpbml0aW9uKHRoaXMpO1xuXG5cdFx0dGhpcy5fZGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG5cblx0XHRjb25zdCBob29rcyA9IGRlZmluaXRpb24uZGVjbGFyYXRpb24uaG9va3M7XG5cblx0XHR0aGlzLmJpbmQgPSBuZXcgQ3VzdG9tYXJ5QmluZCh0aGlzKTtcblx0XHR0aGlzLmNoYW5nZXNfZmlyc3RVcGRhdGVkID0gbmV3IEN1c3RvbWFyeUNoYW5nZXNfZmlyc3RVcGRhdGVkKHRoaXMsIGhvb2tzKTtcblx0XHR0aGlzLmNoYW5nZXNfdXBkYXRlZCA9IG5ldyBDdXN0b21hcnlDaGFuZ2VzX3VwZGF0ZWQodGhpcywgaG9va3MpO1xuXHRcdHRoaXMuY2hhbmdlc193aWxsVXBkYXRlID0gbmV3IEN1c3RvbWFyeUNoYW5nZXNfd2lsbFVwZGF0ZSh0aGlzLCBob29rcyk7XG5cdFx0dGhpcy5kZXJpdmUgPSBuZXcgQ3VzdG9tYXJ5RGVyaXZlKHRoaXMsIGhvb2tzKTtcblx0XHR0aGlzLmV2ZW50cyA9IG5ldyBDdXN0b21hcnlFdmVudHModGhpcywgaG9va3MpO1xuXHRcdHRoaXMuX3JlbmRlciA9IG5ldyBDdXN0b21hcnlSZW5kZXIodGhpcyk7XG5cdFx0dGhpcy5zbG90cyA9IG5ldyBDdXN0b21hcnlTbG90cyh0aGlzLCBob29rcyk7XG5cdFx0dGhpcy5zdHlsZXNoZWV0cyA9IG5ldyBDdXN0b21hcnlTdHlsZXNoZWV0cyh0aGlzKTtcblx0XHR0aGlzLnZhbHVlcyA9IG5ldyBDdXN0b21hcnlWYWx1ZXModGhpcyk7XG5cblx0XHR0aGlzLmhvb2tzID0gaG9va3M7XG5cblx0XHR0aGlzLnZhbHVlcy5pbnN0YWxsX3ZhbHVlcyh0aGlzLl9kZWZpbml0aW9uKTtcblx0fVxuXHRwcml2YXRlIHJlYWRvbmx5IF9kZWZpbml0aW9uOiBDdXN0b21hcnlEZWZpbml0aW9uPHRoaXM+O1xuXHRwcml2YXRlIHJlYWRvbmx5IGNoYW5nZXNfZmlyc3RVcGRhdGVkOiBDdXN0b21hcnlDaGFuZ2VzX2ZpcnN0VXBkYXRlZDtcblx0cHJpdmF0ZSByZWFkb25seSBiaW5kOiBDdXN0b21hcnlCaW5kO1xuXHRwcml2YXRlIHJlYWRvbmx5IGNoYW5nZXNfdXBkYXRlZDogQ3VzdG9tYXJ5Q2hhbmdlc191cGRhdGVkO1xuXHRwcml2YXRlIHJlYWRvbmx5IGNoYW5nZXNfd2lsbFVwZGF0ZTogQ3VzdG9tYXJ5Q2hhbmdlc193aWxsVXBkYXRlO1xuXHRwcml2YXRlIHJlYWRvbmx5IGRlcml2ZTogQ3VzdG9tYXJ5RGVyaXZlO1xuXHRwcml2YXRlIHJlYWRvbmx5IGV2ZW50czogQ3VzdG9tYXJ5RXZlbnRzO1xuXHRwcml2YXRlIHJlYWRvbmx5IGhvb2tzOiBDdXN0b21hcnlIb29rczx0aGlzPiB8IHVuZGVmaW5lZDtcblx0cHJpdmF0ZSByZWFkb25seSBfcmVuZGVyOiBDdXN0b21hcnlSZW5kZXI7XG5cdHByaXZhdGUgcmVhZG9ubHkgc2xvdHM6IEN1c3RvbWFyeVNsb3RzO1xuXHRwcml2YXRlIHJlYWRvbmx5IHN0eWxlc2hlZXRzOiBDdXN0b21hcnlTdHlsZXNoZWV0cztcblx0cHJpdmF0ZSByZWFkb25seSB2YWx1ZXM6IEN1c3RvbWFyeVZhbHVlcztcblxuXHRvdmVycmlkZSBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZTogc3RyaW5nLCBvbGRWYWx1ZTogc3RyaW5nIHwgbnVsbCwgbmV3VmFsdWU6IHN0cmluZyB8IG51bGwpIHtcblx0XHRzdXBlci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcblxuXHRcdHRoaXMuaG9va3M/LmRvbT8uYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrPy4odGhpcywgbmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcblx0fVxuXG5cdG92ZXJyaWRlIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG5cdFx0aWYgKHRoaXMuX2RlZmluaXRpb24uZGVjbGFyYXRpb24uY29uZmlnPy5jb25zdHJ1Y3Q/LnNoYWRvd1Jvb3REb250KSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRyZXR1cm4gc3VwZXIuY3JlYXRlUmVuZGVyUm9vdCgpO1xuXHR9XG5cbiAgICBvdmVycmlkZSBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcblxuXHRcdHRoaXMuc3R5bGVzaGVldHMubGlua19leHRlcm5hbF9jc3NfYW5kX2xpbmtfZm9udHModGhpcy5fZGVmaW5pdGlvbik7XG5cblx0XHR0aGlzLmV2ZW50cy5pbnN0YWxsRXZlbnRMaXN0ZW5lcnMoKTtcblxuXHRcdHRoaXMuYmluZC5pbnN0YWxsRXZlbnRMaXN0ZW5lcnNGb3JCaW5kaW5ncyh0aGlzLl9kZWZpbml0aW9uLmF0dHJpYnV0ZXMuYXR0cmlidXRlcyk7XG5cblx0XHR0aGlzLmhvb2tzPy5saWZlY3ljbGU/LmNvbm5lY3RlZD8uKHRoaXMpO1xuICAgIH1cblxuXHRvdmVycmlkZSBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcblx0XHRzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuXG5cdFx0dGhpcy5ob29rcz8ubGlmZWN5Y2xlPy5kaXNjb25uZWN0ZWQ/Lih0aGlzKTtcblx0fVxuXG5cdHByb3RlY3RlZCBvdmVycmlkZSBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG5cdFx0c3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdHRoaXMuaG9va3M/LmxpZmVjeWNsZT8uZmlyc3RVcGRhdGVkPy4odGhpcywgY2hhbmdlZFByb3BlcnRpZXMpO1xuXG5cdFx0dGhpcy5jaGFuZ2VzX2ZpcnN0VXBkYXRlZC5leGVjdXRlX2hvb2tzX2NoYW5nZXNfZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdHRoaXMuc2xvdHMuaW5zdGFsbF9zbG90Y2hhbmdlKCk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgb3ZlcnJpZGUgcmVuZGVyKCk6IHVua25vd24ge1xuXHRcdHJldHVybiB0aGlzLl9yZW5kZXIucmVuZGVyX2xpdF9odG1sX1RlbXBsYXRlUmVzdWx0KFxuXHRcdFx0e2h0bWxTdHJpbmc6IHRoaXMuX2RlZmluaXRpb24uaW1tdXRhYmxlX2h0bWxTdHJpbmd9XG5cdFx0KTtcblx0fVxuXG5cdHByb3RlY3RlZCBvdmVycmlkZSB1cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuXHRcdHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuXG5cdFx0dGhpcy5ob29rcz8ubGlmZWN5Y2xlPy51cGRhdGVkPy4odGhpcywgY2hhbmdlZFByb3BlcnRpZXMpO1xuXG5cdFx0dGhpcy5jaGFuZ2VzX3VwZGF0ZWQuZXhlY3V0ZV9ob29rc19jaGFuZ2VzX3VwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuXHR9XG5cblx0cHJvdGVjdGVkIG92ZXJyaWRlIHdpbGxVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG5cdFx0c3VwZXIud2lsbFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG5cblx0XHR0aGlzLmhvb2tzPy5saWZlY3ljbGU/LndpbGxVcGRhdGU/Lih0aGlzLCBjaGFuZ2VkUHJvcGVydGllcyk7XG5cblx0XHR0aGlzLmRlcml2ZS5leGVjdXRlX2hvb2tzX2Rlcml2ZSgpO1xuXG5cdFx0dGhpcy5jaGFuZ2VzX3dpbGxVcGRhdGUuZXhlY3V0ZV9ob29rc19jaGFuZ2VzX3dpbGxVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuXHR9XG59XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gXCJsaXQtZWxlbWVudC9saXQtZWxlbWVudC5qc1wiO1xuaW1wb3J0IHtodG1sfSBmcm9tIFwibGl0LWh0bWxcIjtcbmltcG9ydCB7Y2hvb3NlfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL2Nob29zZS5qcyc7XG5pbXBvcnQge2NsYXNzTWFwfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcC5qcyc7XG5pbXBvcnQge3N0eWxlTWFwfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcC5qcyc7XG5pbXBvcnQge21hcH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9tYXAuanMnO1xuaW1wb3J0IHtyZXBlYXR9IGZyb20gJ2xpdC1odG1sL2RpcmVjdGl2ZXMvcmVwZWF0LmpzJztcbmltcG9ydCB7d2hlbn0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy93aGVuLmpzJztcblxuZXhwb3J0IHtMaXRFbGVtZW50LCBodG1sLCBjaG9vc2UsIGNsYXNzTWFwLCBzdHlsZU1hcCwgbWFwLCByZXBlYXQsIHdoZW59O1xuIiwiaW1wb3J0e1JlYWN0aXZlRWxlbWVudCBhcyB0fWZyb21cIkBsaXQvcmVhY3RpdmUtZWxlbWVudFwiO2V4cG9ydCpmcm9tXCJAbGl0L3JlYWN0aXZlLWVsZW1lbnRcIjtpbXBvcnR7cmVuZGVyIGFzIGUsbm9DaGFuZ2UgYXMgcn1mcm9tXCJsaXQtaHRtbFwiO2V4cG9ydCpmcm9tXCJsaXQtaHRtbFwiO1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovY29uc3Qgcz1nbG9iYWxUaGlzO2NsYXNzIGkgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnJlbmRlck9wdGlvbnM9e2hvc3Q6dGhpc30sdGhpcy5fJERvPXZvaWQgMH1jcmVhdGVSZW5kZXJSb290KCl7Y29uc3QgdD1zdXBlci5jcmVhdGVSZW5kZXJSb290KCk7cmV0dXJuIHRoaXMucmVuZGVyT3B0aW9ucy5yZW5kZXJCZWZvcmU/Pz10LmZpcnN0Q2hpbGQsdH11cGRhdGUodCl7Y29uc3Qgcj10aGlzLnJlbmRlcigpO3RoaXMuaGFzVXBkYXRlZHx8KHRoaXMucmVuZGVyT3B0aW9ucy5pc0Nvbm5lY3RlZD10aGlzLmlzQ29ubmVjdGVkKSxzdXBlci51cGRhdGUodCksdGhpcy5fJERvPWUocix0aGlzLnJlbmRlclJvb3QsdGhpcy5yZW5kZXJPcHRpb25zKX1jb25uZWN0ZWRDYWxsYmFjaygpe3N1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCksdGhpcy5fJERvPy5zZXRDb25uZWN0ZWQoITApfWRpc2Nvbm5lY3RlZENhbGxiYWNrKCl7c3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKSx0aGlzLl8kRG8/LnNldENvbm5lY3RlZCghMSl9cmVuZGVyKCl7cmV0dXJuIHJ9fWkuXyRsaXRFbGVtZW50JD0hMCxpW1wiZmluYWxpemVkXCJdPSEwLHMubGl0RWxlbWVudEh5ZHJhdGVTdXBwb3J0Py4oe0xpdEVsZW1lbnQ6aX0pO2NvbnN0IG89cy5saXRFbGVtZW50UG9seWZpbGxTdXBwb3J0O28/Lih7TGl0RWxlbWVudDppfSk7Y29uc3Qgbj17XyRBSzoodCxlLHIpPT57dC5fJEFLKGUscil9LF8kQUw6dD0+dC5fJEFMfTsocy5saXRFbGVtZW50VmVyc2lvbnM/Pz1bXSkucHVzaChcIjQuMi4wXCIpO2V4cG9ydHtpIGFzIExpdEVsZW1lbnQsbiBhcyBfJExFfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdC1lbGVtZW50LmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogVGhlIG1haW4gTGl0RWxlbWVudCBtb2R1bGUsIHdoaWNoIGRlZmluZXMgdGhlIHtAbGlua2NvZGUgTGl0RWxlbWVudH0gYmFzZVxuICogY2xhc3MgYW5kIHJlbGF0ZWQgQVBJcy5cbiAqXG4gKiBMaXRFbGVtZW50IGNvbXBvbmVudHMgY2FuIGRlZmluZSBhIHRlbXBsYXRlIGFuZCBhIHNldCBvZiBvYnNlcnZlZFxuICogcHJvcGVydGllcy4gQ2hhbmdpbmcgYW4gb2JzZXJ2ZWQgcHJvcGVydHkgdHJpZ2dlcnMgYSByZS1yZW5kZXIgb2YgdGhlXG4gKiBlbGVtZW50LlxuICpcbiAqIEltcG9ydCB7QGxpbmtjb2RlIExpdEVsZW1lbnR9IGFuZCB7QGxpbmtjb2RlIGh0bWx9IGZyb20gdGhpcyBtb2R1bGUgdG9cbiAqIGNyZWF0ZSBhIGNvbXBvbmVudDpcbiAqXG4gKiAgYGBganNcbiAqIGltcG9ydCB7TGl0RWxlbWVudCwgaHRtbH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuICpcbiAqIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICpcbiAqICAgLy8gRGVjbGFyZSBvYnNlcnZlZCBwcm9wZXJ0aWVzXG4gKiAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgYWRqZWN0aXZlOiB7fVxuICogICAgIH1cbiAqICAgfVxuICpcbiAqICAgY29uc3RydWN0b3IoKSB7XG4gKiAgICAgdGhpcy5hZGplY3RpdmUgPSAnYXdlc29tZSc7XG4gKiAgIH1cbiAqXG4gKiAgIC8vIERlZmluZSB0aGUgZWxlbWVudCdzIHRlbXBsYXRlXG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICByZXR1cm4gaHRtbGA8cD55b3VyICR7YWRqZWN0aXZlfSB0ZW1wbGF0ZSBoZXJlPC9wPmA7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWVsZW1lbnQnLCBNeUVsZW1lbnQpO1xuICogYGBgXG4gKlxuICogYExpdEVsZW1lbnRgIGV4dGVuZHMge0BsaW5rY29kZSBSZWFjdGl2ZUVsZW1lbnR9IGFuZCBhZGRzIGxpdC1odG1sXG4gKiB0ZW1wbGF0aW5nLiBUaGUgYFJlYWN0aXZlRWxlbWVudGAgY2xhc3MgaXMgcHJvdmlkZWQgZm9yIHVzZXJzIHRoYXQgd2FudCB0b1xuICogYnVpbGQgdGhlaXIgb3duIGN1c3RvbSBlbGVtZW50IGJhc2UgY2xhc3NlcyB0aGF0IGRvbid0IHVzZSBsaXQtaHRtbC5cbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuaW1wb3J0IHtQcm9wZXJ0eVZhbHVlcywgUmVhY3RpdmVFbGVtZW50fSBmcm9tICdAbGl0L3JlYWN0aXZlLWVsZW1lbnQnO1xuaW1wb3J0IHtyZW5kZXIsIFJlbmRlck9wdGlvbnMsIG5vQ2hhbmdlLCBSb290UGFydH0gZnJvbSAnbGl0LWh0bWwnO1xuZXhwb3J0ICogZnJvbSAnQGxpdC9yZWFjdGl2ZS1lbGVtZW50JztcbmV4cG9ydCAqIGZyb20gJ2xpdC1odG1sJztcblxuaW1wb3J0IHtMaXRVbnN0YWJsZX0gZnJvbSAnbGl0LWh0bWwnO1xuaW1wb3J0IHtSZWFjdGl2ZVVuc3RhYmxlfSBmcm9tICdAbGl0L3JlYWN0aXZlLWVsZW1lbnQnO1xuXG4vKipcbiAqIENvbnRhaW5zIHR5cGVzIHRoYXQgYXJlIHBhcnQgb2YgdGhlIHVuc3RhYmxlIGRlYnVnIEFQSS5cbiAqXG4gKiBFdmVyeXRoaW5nIGluIHRoaXMgQVBJIGlzIG5vdCBzdGFibGUgYW5kIG1heSBjaGFuZ2Ugb3IgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLFxuICogZXZlbiBvbiBwYXRjaCByZWxlYXNlcy5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgVW5zdGFibGUge1xuICAvKipcbiAgICogV2hlbiBMaXQgaXMgcnVubmluZyBpbiBkZXYgbW9kZSBhbmQgYHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHNgIGlzIHRydWUsXG4gICAqIHdlIHdpbGwgZW1pdCAnbGl0LWRlYnVnJyBldmVudHMgdG8gd2luZG93LCB3aXRoIGxpdmUgZGV0YWlscyBhYm91dCB0aGUgdXBkYXRlIGFuZCByZW5kZXJcbiAgICogbGlmZWN5Y2xlLiBUaGVzZSBjYW4gYmUgdXNlZnVsIGZvciB3cml0aW5nIGRlYnVnIHRvb2xpbmcgYW5kIHZpc3VhbGl6YXRpb25zLlxuICAgKlxuICAgKiBQbGVhc2UgYmUgYXdhcmUgdGhhdCBydW5uaW5nIHdpdGggd2luZG93LmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cyBoYXMgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQsXG4gICAqIG1ha2luZyBjZXJ0YWluIG9wZXJhdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgdmVyeSBjaGVhcCAobGlrZSBhIG5vLW9wIHJlbmRlcikgbXVjaCBzbG93ZXIsXG4gICAqIGJlY2F1c2Ugd2UgbXVzdCBjb3B5IGRhdGEgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gIGV4cG9ydCBuYW1lc3BhY2UgRGVidWdMb2cge1xuICAgIGV4cG9ydCB0eXBlIEVudHJ5ID1cbiAgICAgIHwgTGl0VW5zdGFibGUuRGVidWdMb2cuRW50cnlcbiAgICAgIHwgUmVhY3RpdmVVbnN0YWJsZS5EZWJ1Z0xvZy5FbnRyeTtcbiAgfVxufVxuLypcbiAqIFdoZW4gdXNpbmcgQ2xvc3VyZSBDb21waWxlciwgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eShwcm9wZXJ0eSwgb2JqZWN0KSBpc1xuICogcmVwbGFjZWQgYXQgY29tcGlsZSB0aW1lIGJ5IHRoZSBtdW5nZWQgbmFtZSBmb3Igb2JqZWN0W3Byb3BlcnR5XS4gV2UgY2Fubm90XG4gKiBhbGlhcyB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBoYXZlIHRvIHVzZSBhIHNtYWxsIHNoaW0gdGhhdCBoYXMgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqL1xuLypAX19JTkxJTkVfXyovXG5jb25zdCBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5ID0gPFAgZXh0ZW5kcyBQcm9wZXJ0eUtleT4oXG4gIHByb3A6IFAsXG4gIF9vYmo6IHVua25vd25cbik6IFAgPT4gcHJvcDtcblxuY29uc3QgREVWX01PREUgPSB0cnVlO1xuLy8gQWxsb3dzIG1pbmlmaWVycyB0byByZW5hbWUgcmVmZXJlbmNlcyB0byBnbG9iYWxUaGlzXG5jb25zdCBnbG9iYWwgPSBnbG9iYWxUaGlzO1xuXG5sZXQgaXNzdWVXYXJuaW5nOiAoY29kZTogc3RyaW5nLCB3YXJuaW5nOiBzdHJpbmcpID0+IHZvaWQ7XG5cbmlmIChERVZfTU9ERSkge1xuICAvLyBFbnN1cmUgd2FybmluZ3MgYXJlIGlzc3VlZCBvbmx5IDF4LCBldmVuIGlmIG11bHRpcGxlIHZlcnNpb25zIG9mIExpdFxuICAvLyBhcmUgbG9hZGVkLlxuICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gYCBTZWUgaHR0cHM6Ly9saXQuZGV2L21zZy8ke2NvZGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLmA7XG4gICAgaWYgKFxuICAgICAgIWdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuaGFzKHdhcm5pbmcpICYmXG4gICAgICAhZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5oYXMoY29kZSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbiAgICAgIGdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuYWRkKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBCYXNlIGVsZW1lbnQgY2xhc3MgdGhhdCBtYW5hZ2VzIGVsZW1lbnQgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcywgYW5kXG4gKiByZW5kZXJzIGEgbGl0LWh0bWwgdGVtcGxhdGUuXG4gKlxuICogVG8gZGVmaW5lIGEgY29tcG9uZW50LCBzdWJjbGFzcyBgTGl0RWxlbWVudGAgYW5kIGltcGxlbWVudCBhXG4gKiBgcmVuZGVyYCBtZXRob2QgdG8gcHJvdmlkZSB0aGUgY29tcG9uZW50J3MgdGVtcGxhdGUuIERlZmluZSBwcm9wZXJ0aWVzXG4gKiB1c2luZyB0aGUge0BsaW5rY29kZSBMaXRFbGVtZW50LnByb3BlcnRpZXMgcHJvcGVydGllc30gcHJvcGVydHkgb3IgdGhlXG4gKiB7QGxpbmtjb2RlIHByb3BlcnR5fSBkZWNvcmF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaXRFbGVtZW50IGV4dGVuZHMgUmVhY3RpdmVFbGVtZW50IHtcbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgc3RhdGljIFsnXyRsaXRFbGVtZW50JCddID0gdHJ1ZTtcblxuICAvKipcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcmVhZG9ubHkgcmVuZGVyT3B0aW9uczogUmVuZGVyT3B0aW9ucyA9IHtob3N0OiB0aGlzfTtcblxuICBwcml2YXRlIF9fY2hpbGRQYXJ0OiBSb290UGFydCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgY29uc3QgcmVuZGVyUm9vdCA9IHN1cGVyLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAvLyBXaGVuIGFkb3B0ZWRTdHlsZVNoZWV0cyBhcmUgc2hpbW1lZCwgdGhleSBhcmUgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAvLyBzaGFkb3dSb290IGJ5IGNyZWF0ZVJlbmRlclJvb3QuIEFkanVzdCB0aGUgcmVuZGVyQmVmb3JlIG5vZGUgc28gdGhhdFxuICAgIC8vIGFueSBzdHlsZXMgaW4gTGl0IGNvbnRlbnQgcmVuZGVyIGJlZm9yZSBhZG9wdGVkU3R5bGVTaGVldHMuIFRoaXMgaXNcbiAgICAvLyBpbXBvcnRhbnQgc28gdGhhdCBhZG9wdGVkU3R5bGVTaGVldHMgaGF2ZSBwcmVjZWRlbmNlIG92ZXIgc3R5bGVzIGluXG4gICAgLy8gdGhlIHNoYWRvd1Jvb3QuXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zLnJlbmRlckJlZm9yZSA/Pz0gcmVuZGVyUm9vdCEuZmlyc3RDaGlsZCBhcyBDaGlsZE5vZGU7XG4gICAgcmV0dXJuIHJlbmRlclJvb3Q7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXNcbiAgICogYW5kIGNhbGxzIGByZW5kZXJgIHRvIHJlbmRlciBET00gdmlhIGxpdC1odG1sLiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlXG4gICAqIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlciBhbm90aGVyIHVwZGF0ZS5cbiAgICogQHBhcmFtIGNoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIC8vIFNldHRpbmcgcHJvcGVydGllcyBpbiBgcmVuZGVyYCBzaG91bGQgbm90IHRyaWdnZXIgYW4gdXBkYXRlLiBTaW5jZVxuICAgIC8vIHVwZGF0ZXMgYXJlIGFsbG93ZWQgYWZ0ZXIgc3VwZXIudXBkYXRlLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGByZW5kZXJgXG4gICAgLy8gYmVmb3JlIHRoYXQuXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnJlbmRlcigpO1xuICAgIGlmICghdGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLnJlbmRlck9wdGlvbnMuaXNDb25uZWN0ZWQgPSB0aGlzLmlzQ29ubmVjdGVkO1xuICAgIH1cbiAgICBzdXBlci51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgIHRoaXMuX19jaGlsZFBhcnQgPSByZW5kZXIodmFsdWUsIHRoaXMucmVuZGVyUm9vdCwgdGhpcy5yZW5kZXJPcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhZGRlZCB0byB0aGUgZG9jdW1lbnQncyBET00uXG4gICAqXG4gICAqIEluIGBjb25uZWN0ZWRDYWxsYmFjaygpYCB5b3Ugc2hvdWxkIHNldHVwIHRhc2tzIHRoYXQgc2hvdWxkIG9ubHkgb2NjdXIgd2hlblxuICAgKiB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gdGhlIGRvY3VtZW50LiBUaGUgbW9zdCBjb21tb24gb2YgdGhlc2UgaXNcbiAgICogYWRkaW5nIGV2ZW50IGxpc3RlbmVycyB0byBub2RlcyBleHRlcm5hbCB0byB0aGUgZWxlbWVudCwgbGlrZSBhIGtleWRvd25cbiAgICogZXZlbnQgaGFuZGxlciBhZGRlZCB0byB0aGUgd2luZG93LlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICogICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgKiAgIGFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogVHlwaWNhbGx5LCBhbnl0aGluZyBkb25lIGluIGBjb25uZWN0ZWRDYWxsYmFjaygpYCBzaG91bGQgYmUgdW5kb25lIHdoZW4gdGhlXG4gICAqIGVsZW1lbnQgaXMgZGlzY29ubmVjdGVkLCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAuXG4gICAqXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIG92ZXJyaWRlIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fX2NoaWxkUGFydD8uc2V0Q29ubmVjdGVkKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgZG9jdW1lbnQncyBET00uXG4gICAqXG4gICAqIFRoaXMgY2FsbGJhY2sgaXMgdGhlIG1haW4gc2lnbmFsIHRvIHRoZSBlbGVtZW50IHRoYXQgaXQgbWF5IG5vIGxvbmdlciBiZVxuICAgKiB1c2VkLiBgZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAgc2hvdWxkIGVuc3VyZSB0aGF0IG5vdGhpbmcgaXMgaG9sZGluZyBhXG4gICAqIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudCAoc3VjaCBhcyBldmVudCBsaXN0ZW5lcnMgYWRkZWQgdG8gbm9kZXMgZXh0ZXJuYWxcbiAgICogdG8gdGhlIGVsZW1lbnQpLCBzbyB0aGF0IGl0IGlzIGZyZWUgdG8gYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgKiAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAqICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQW4gZWxlbWVudCBtYXkgYmUgcmUtY29ubmVjdGVkIGFmdGVyIGJlaW5nIGRpc2Nvbm5lY3RlZC5cbiAgICpcbiAgICogQGNhdGVnb3J5IGxpZmVjeWNsZVxuICAgKi9cbiAgb3ZlcnJpZGUgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9fY2hpbGRQYXJ0Py5zZXRDb25uZWN0ZWQoZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgb24gZWFjaCB1cGRhdGUgdG8gcGVyZm9ybSByZW5kZXJpbmcgdGFza3MuIFRoaXMgbWV0aG9kIG1heSByZXR1cm5cbiAgICogYW55IHZhbHVlIHJlbmRlcmFibGUgYnkgbGl0LWh0bWwncyBgQ2hpbGRQYXJ0YCAtIHR5cGljYWxseSBhXG4gICAqIGBUZW1wbGF0ZVJlc3VsdGAuIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyXG4gICAqIHRoZSBlbGVtZW50IHRvIHVwZGF0ZS5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB1bmtub3duIHtcbiAgICByZXR1cm4gbm9DaGFuZ2U7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgdGhpcyBjbGFzcyBpcyBtYXJrZWQgYXMgYGZpbmFsaXplZGAgYXMgYW4gb3B0aW1pemF0aW9uIGVuc3VyaW5nXG4gKiBpdCB3aWxsIG5vdCBuZWVkbGVzc2x5IHRyeSB0byBgZmluYWxpemVgLlxuICpcbiAqIE5vdGUgdGhpcyBwcm9wZXJ0eSBuYW1lIGlzIGEgc3RyaW5nIHRvIHByZXZlbnQgYnJlYWtpbmcgQ2xvc3VyZSBKUyBDb21waWxlclxuICogb3B0aW1pemF0aW9ucy4gU2VlIEBsaXQvcmVhY3RpdmUtZWxlbWVudCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuKExpdEVsZW1lbnQgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilbXG4gIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2ZpbmFsaXplZCcsIExpdEVsZW1lbnQpXG5dID0gdHJ1ZTtcblxuLy8gSW5zdGFsbCBoeWRyYXRpb24gaWYgYXZhaWxhYmxlXG5nbG9iYWwubGl0RWxlbWVudEh5ZHJhdGVTdXBwb3J0Py4oe0xpdEVsZW1lbnR9KTtcblxuLy8gQXBwbHkgcG9seWZpbGxzIGlmIGF2YWlsYWJsZVxuY29uc3QgcG9seWZpbGxTdXBwb3J0ID0gREVWX01PREVcbiAgPyBnbG9iYWwubGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydERldk1vZGVcbiAgOiBnbG9iYWwubGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydDtcbnBvbHlmaWxsU3VwcG9ydD8uKHtMaXRFbGVtZW50fSk7XG5cbi8qKlxuICogRU5EIFVTRVJTIFNIT1VMRCBOT1QgUkVMWSBPTiBUSElTIE9CSkVDVC5cbiAqXG4gKiBQcml2YXRlIGV4cG9ydHMgZm9yIHVzZSBieSBvdGhlciBMaXQgcGFja2FnZXMsIG5vdCBpbnRlbmRlZCBmb3IgdXNlIGJ5XG4gKiBleHRlcm5hbCB1c2Vycy5cbiAqXG4gKiBXZSBjdXJyZW50bHkgZG8gbm90IG1ha2UgYSBtYW5nbGVkIHJvbGx1cCBidWlsZCBvZiB0aGUgbGl0LXNzciBjb2RlLiBJbiBvcmRlclxuICogdG8ga2VlcCBhIG51bWJlciBvZiAob3RoZXJ3aXNlIHByaXZhdGUpIHRvcC1sZXZlbCBleHBvcnRzICBtYW5nbGVkIGluIHRoZVxuICogY2xpZW50IHNpZGUgY29kZSwgd2UgZXhwb3J0IGEgXyRMRSBvYmplY3QgY29udGFpbmluZyB0aG9zZSBtZW1iZXJzIChvclxuICogaGVscGVyIG1ldGhvZHMgZm9yIGFjY2Vzc2luZyBwcml2YXRlIGZpZWxkcyBvZiB0aG9zZSBtZW1iZXJzKSwgYW5kIHRoZW5cbiAqIHJlLWV4cG9ydCB0aGVtIGZvciB1c2UgaW4gbGl0LXNzci4gVGhpcyBrZWVwcyBsaXQtc3NyIGFnbm9zdGljIHRvIHdoZXRoZXIgdGhlXG4gKiBjbGllbnQtc2lkZSBjb2RlIGlzIGJlaW5nIHVzZWQgaW4gYGRldmAgbW9kZSBvciBgcHJvZGAgbW9kZS5cbiAqXG4gKiBUaGlzIGhhcyBhIHVuaXF1ZSBuYW1lLCB0byBkaXNhbWJpZ3VhdGUgaXQgZnJvbSBwcml2YXRlIGV4cG9ydHMgaW5cbiAqIGxpdC1odG1sLCBzaW5jZSB0aGlzIG1vZHVsZSByZS1leHBvcnRzIGFsbCBvZiBsaXQtaHRtbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgXyRMRSA9IHtcbiAgXyRhdHRyaWJ1dGVUb1Byb3BlcnR5OiAoXG4gICAgZWw6IExpdEVsZW1lbnQsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCBudWxsXG4gICkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIChlbCBhcyBhbnkpLl8kYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gIH0sXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBfJGNoYW5nZWRQcm9wZXJ0aWVzOiAoZWw6IExpdEVsZW1lbnQpID0+IChlbCBhcyBhbnkpLl8kY2hhbmdlZFByb3BlcnRpZXMsXG59O1xuXG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIExpdEVsZW1lbnQgdXNhZ2UuXG4oZ2xvYmFsLmxpdEVsZW1lbnRWZXJzaW9ucyA/Pz0gW10pLnB1c2goJzQuMi4wJyk7XG5pZiAoREVWX01PREUgJiYgZ2xvYmFsLmxpdEVsZW1lbnRWZXJzaW9ucy5sZW5ndGggPiAxKSB7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc3N1ZVdhcm5pbmchKFxuICAgICAgJ211bHRpcGxlLXZlcnNpb25zJyxcbiAgICAgIGBNdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXQgbG9hZGVkLiBMb2FkaW5nIG11bHRpcGxlIHZlcnNpb25zIGAgK1xuICAgICAgICBgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgICApO1xuICB9KTtcbn1cbiIsImltcG9ydHtnZXRDb21wYXRpYmxlU3R5bGUgYXMgdCxhZG9wdFN0eWxlcyBhcyBzfWZyb21cIi4vY3NzLXRhZy5qc1wiO2V4cG9ydHtDU1NSZXN1bHQsY3NzLHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyx1bnNhZmVDU1N9ZnJvbVwiLi9jc3MtdGFnLmpzXCI7XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9jb25zdHtpczppLGRlZmluZVByb3BlcnR5OmUsZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmgsZ2V0T3duUHJvcGVydHlOYW1lczpyLGdldE93blByb3BlcnR5U3ltYm9sczpvLGdldFByb3RvdHlwZU9mOm59PU9iamVjdCxhPWdsb2JhbFRoaXMsYz1hLnRydXN0ZWRUeXBlcyxsPWM/Yy5lbXB0eVNjcmlwdDpcIlwiLHA9YS5yZWFjdGl2ZUVsZW1lbnRQb2x5ZmlsbFN1cHBvcnQsZD0odCxzKT0+dCx1PXt0b0F0dHJpYnV0ZSh0LHMpe3N3aXRjaChzKXtjYXNlIEJvb2xlYW46dD10P2w6bnVsbDticmVhaztjYXNlIE9iamVjdDpjYXNlIEFycmF5OnQ9bnVsbD09dD90OkpTT04uc3RyaW5naWZ5KHQpfXJldHVybiB0fSxmcm9tQXR0cmlidXRlKHQscyl7bGV0IGk9dDtzd2l0Y2gocyl7Y2FzZSBCb29sZWFuOmk9bnVsbCE9PXQ7YnJlYWs7Y2FzZSBOdW1iZXI6aT1udWxsPT09dD9udWxsOk51bWJlcih0KTticmVhaztjYXNlIE9iamVjdDpjYXNlIEFycmF5OnRyeXtpPUpTT04ucGFyc2UodCl9Y2F0Y2godCl7aT1udWxsfX1yZXR1cm4gaX19LGY9KHQscyk9PiFpKHQscyksYj17YXR0cmlidXRlOiEwLHR5cGU6U3RyaW5nLGNvbnZlcnRlcjp1LHJlZmxlY3Q6ITEsdXNlRGVmYXVsdDohMSxoYXNDaGFuZ2VkOmZ9O1N5bWJvbC5tZXRhZGF0YT8/PVN5bWJvbChcIm1ldGFkYXRhXCIpLGEubGl0UHJvcGVydHlNZXRhZGF0YT8/PW5ldyBXZWFrTWFwO2NsYXNzIHkgZXh0ZW5kcyBIVE1MRWxlbWVudHtzdGF0aWMgYWRkSW5pdGlhbGl6ZXIodCl7dGhpcy5fJEVpKCksKHRoaXMubD8/PVtdKS5wdXNoKHQpfXN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCl7cmV0dXJuIHRoaXMuZmluYWxpemUoKSx0aGlzLl8kRWgmJlsuLi50aGlzLl8kRWgua2V5cygpXX1zdGF0aWMgY3JlYXRlUHJvcGVydHkodCxzPWIpe2lmKHMuc3RhdGUmJihzLmF0dHJpYnV0ZT0hMSksdGhpcy5fJEVpKCksdGhpcy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkodCkmJigocz1PYmplY3QuY3JlYXRlKHMpKS53cmFwcGVkPSEwKSx0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLnNldCh0LHMpLCFzLm5vQWNjZXNzb3Ipe2NvbnN0IGk9U3ltYm9sKCksaD10aGlzLmdldFByb3BlcnR5RGVzY3JpcHRvcih0LGkscyk7dm9pZCAwIT09aCYmZSh0aGlzLnByb3RvdHlwZSx0LGgpfX1zdGF0aWMgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKHQscyxpKXtjb25zdHtnZXQ6ZSxzZXQ6cn09aCh0aGlzLnByb3RvdHlwZSx0KT8/e2dldCgpe3JldHVybiB0aGlzW3NdfSxzZXQodCl7dGhpc1tzXT10fX07cmV0dXJue2dldDplLHNldChzKXtjb25zdCBoPWU/LmNhbGwodGhpcyk7cj8uY2FsbCh0aGlzLHMpLHRoaXMucmVxdWVzdFVwZGF0ZSh0LGgsaSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfX1zdGF0aWMgZ2V0UHJvcGVydHlPcHRpb25zKHQpe3JldHVybiB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLmdldCh0KT8/Yn1zdGF0aWMgXyRFaSgpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoZChcImVsZW1lbnRQcm9wZXJ0aWVzXCIpKSlyZXR1cm47Y29uc3QgdD1uKHRoaXMpO3QuZmluYWxpemUoKSx2b2lkIDAhPT10LmwmJih0aGlzLmw9Wy4uLnQubF0pLHRoaXMuZWxlbWVudFByb3BlcnRpZXM9bmV3IE1hcCh0LmVsZW1lbnRQcm9wZXJ0aWVzKX1zdGF0aWMgZmluYWxpemUoKXtpZih0aGlzLmhhc093blByb3BlcnR5KGQoXCJmaW5hbGl6ZWRcIikpKXJldHVybjtpZih0aGlzLmZpbmFsaXplZD0hMCx0aGlzLl8kRWkoKSx0aGlzLmhhc093blByb3BlcnR5KGQoXCJwcm9wZXJ0aWVzXCIpKSl7Y29uc3QgdD10aGlzLnByb3BlcnRpZXMscz1bLi4ucih0KSwuLi5vKHQpXTtmb3IoY29uc3QgaSBvZiBzKXRoaXMuY3JlYXRlUHJvcGVydHkoaSx0W2ldKX1jb25zdCB0PXRoaXNbU3ltYm9sLm1ldGFkYXRhXTtpZihudWxsIT09dCl7Y29uc3Qgcz1saXRQcm9wZXJ0eU1ldGFkYXRhLmdldCh0KTtpZih2b2lkIDAhPT1zKWZvcihjb25zdFt0LGldb2Ygcyl0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLnNldCh0LGkpfXRoaXMuXyRFaD1uZXcgTWFwO2Zvcihjb25zdFt0LHNdb2YgdGhpcy5lbGVtZW50UHJvcGVydGllcyl7Y29uc3QgaT10aGlzLl8kRXUodCxzKTt2b2lkIDAhPT1pJiZ0aGlzLl8kRWguc2V0KGksdCl9dGhpcy5lbGVtZW50U3R5bGVzPXRoaXMuZmluYWxpemVTdHlsZXModGhpcy5zdHlsZXMpfXN0YXRpYyBmaW5hbGl6ZVN0eWxlcyhzKXtjb25zdCBpPVtdO2lmKEFycmF5LmlzQXJyYXkocykpe2NvbnN0IGU9bmV3IFNldChzLmZsYXQoMS8wKS5yZXZlcnNlKCkpO2Zvcihjb25zdCBzIG9mIGUpaS51bnNoaWZ0KHQocykpfWVsc2Ugdm9pZCAwIT09cyYmaS5wdXNoKHQocykpO3JldHVybiBpfXN0YXRpYyBfJEV1KHQscyl7Y29uc3QgaT1zLmF0dHJpYnV0ZTtyZXR1cm4hMT09PWk/dm9pZCAwOlwic3RyaW5nXCI9PXR5cGVvZiBpP2k6XCJzdHJpbmdcIj09dHlwZW9mIHQ/dC50b0xvd2VyQ2FzZSgpOnZvaWQgMH1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5fJEVwPXZvaWQgMCx0aGlzLmlzVXBkYXRlUGVuZGluZz0hMSx0aGlzLmhhc1VwZGF0ZWQ9ITEsdGhpcy5fJEVtPW51bGwsdGhpcy5fJEV2KCl9XyRFdigpe3RoaXMuXyRFUz1uZXcgUHJvbWlzZSgodD0+dGhpcy5lbmFibGVVcGRhdGluZz10KSksdGhpcy5fJEFMPW5ldyBNYXAsdGhpcy5fJEVfKCksdGhpcy5yZXF1ZXN0VXBkYXRlKCksdGhpcy5jb25zdHJ1Y3Rvci5sPy5mb3JFYWNoKCh0PT50KHRoaXMpKSl9YWRkQ29udHJvbGxlcih0KXsodGhpcy5fJEVPPz89bmV3IFNldCkuYWRkKHQpLHZvaWQgMCE9PXRoaXMucmVuZGVyUm9vdCYmdGhpcy5pc0Nvbm5lY3RlZCYmdC5ob3N0Q29ubmVjdGVkPy4oKX1yZW1vdmVDb250cm9sbGVyKHQpe3RoaXMuXyRFTz8uZGVsZXRlKHQpfV8kRV8oKXtjb25zdCB0PW5ldyBNYXAscz10aGlzLmNvbnN0cnVjdG9yLmVsZW1lbnRQcm9wZXJ0aWVzO2Zvcihjb25zdCBpIG9mIHMua2V5cygpKXRoaXMuaGFzT3duUHJvcGVydHkoaSkmJih0LnNldChpLHRoaXNbaV0pLGRlbGV0ZSB0aGlzW2ldKTt0LnNpemU+MCYmKHRoaXMuXyRFcD10KX1jcmVhdGVSZW5kZXJSb290KCl7Y29uc3QgdD10aGlzLnNoYWRvd1Jvb3Q/P3RoaXMuYXR0YWNoU2hhZG93KHRoaXMuY29uc3RydWN0b3Iuc2hhZG93Um9vdE9wdGlvbnMpO3JldHVybiBzKHQsdGhpcy5jb25zdHJ1Y3Rvci5lbGVtZW50U3R5bGVzKSx0fWNvbm5lY3RlZENhbGxiYWNrKCl7dGhpcy5yZW5kZXJSb290Pz89dGhpcy5jcmVhdGVSZW5kZXJSb290KCksdGhpcy5lbmFibGVVcGRhdGluZyghMCksdGhpcy5fJEVPPy5mb3JFYWNoKCh0PT50Lmhvc3RDb25uZWN0ZWQ/LigpKSl9ZW5hYmxlVXBkYXRpbmcodCl7fWRpc2Nvbm5lY3RlZENhbGxiYWNrKCl7dGhpcy5fJEVPPy5mb3JFYWNoKCh0PT50Lmhvc3REaXNjb25uZWN0ZWQ/LigpKSl9YXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHQscyxpKXt0aGlzLl8kQUsodCxpKX1fJEVUKHQscyl7Y29uc3QgaT10aGlzLmNvbnN0cnVjdG9yLmVsZW1lbnRQcm9wZXJ0aWVzLmdldCh0KSxlPXRoaXMuY29uc3RydWN0b3IuXyRFdSh0LGkpO2lmKHZvaWQgMCE9PWUmJiEwPT09aS5yZWZsZWN0KXtjb25zdCBoPSh2b2lkIDAhPT1pLmNvbnZlcnRlcj8udG9BdHRyaWJ1dGU/aS5jb252ZXJ0ZXI6dSkudG9BdHRyaWJ1dGUocyxpLnR5cGUpO3RoaXMuXyRFbT10LG51bGw9PWg/dGhpcy5yZW1vdmVBdHRyaWJ1dGUoZSk6dGhpcy5zZXRBdHRyaWJ1dGUoZSxoKSx0aGlzLl8kRW09bnVsbH19XyRBSyh0LHMpe2NvbnN0IGk9dGhpcy5jb25zdHJ1Y3RvcixlPWkuXyRFaC5nZXQodCk7aWYodm9pZCAwIT09ZSYmdGhpcy5fJEVtIT09ZSl7Y29uc3QgdD1pLmdldFByb3BlcnR5T3B0aW9ucyhlKSxoPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29udmVydGVyP3tmcm9tQXR0cmlidXRlOnQuY29udmVydGVyfTp2b2lkIDAhPT10LmNvbnZlcnRlcj8uZnJvbUF0dHJpYnV0ZT90LmNvbnZlcnRlcjp1O3RoaXMuXyRFbT1lLHRoaXNbZV09aC5mcm9tQXR0cmlidXRlKHMsdC50eXBlKT8/dGhpcy5fJEVqPy5nZXQoZSk/P251bGwsdGhpcy5fJEVtPW51bGx9fXJlcXVlc3RVcGRhdGUodCxzLGkpe2lmKHZvaWQgMCE9PXQpe2NvbnN0IGU9dGhpcy5jb25zdHJ1Y3RvcixoPXRoaXNbdF07aWYoaT8/PWUuZ2V0UHJvcGVydHlPcHRpb25zKHQpLCEoKGkuaGFzQ2hhbmdlZD8/ZikoaCxzKXx8aS51c2VEZWZhdWx0JiZpLnJlZmxlY3QmJmg9PT10aGlzLl8kRWo/LmdldCh0KSYmIXRoaXMuaGFzQXR0cmlidXRlKGUuXyRFdSh0LGkpKSkpcmV0dXJuO3RoaXMuQyh0LHMsaSl9ITE9PT10aGlzLmlzVXBkYXRlUGVuZGluZyYmKHRoaXMuXyRFUz10aGlzLl8kRVAoKSl9Qyh0LHMse3VzZURlZmF1bHQ6aSxyZWZsZWN0OmUsd3JhcHBlZDpofSxyKXtpJiYhKHRoaXMuXyRFaj8/PW5ldyBNYXApLmhhcyh0KSYmKHRoaXMuXyRFai5zZXQodCxyPz9zPz90aGlzW3RdKSwhMCE9PWh8fHZvaWQgMCE9PXIpfHwodGhpcy5fJEFMLmhhcyh0KXx8KHRoaXMuaGFzVXBkYXRlZHx8aXx8KHM9dm9pZCAwKSx0aGlzLl8kQUwuc2V0KHQscykpLCEwPT09ZSYmdGhpcy5fJEVtIT09dCYmKHRoaXMuXyRFcT8/PW5ldyBTZXQpLmFkZCh0KSl9YXN5bmMgXyRFUCgpe3RoaXMuaXNVcGRhdGVQZW5kaW5nPSEwO3RyeXthd2FpdCB0aGlzLl8kRVN9Y2F0Y2godCl7UHJvbWlzZS5yZWplY3QodCl9Y29uc3QgdD10aGlzLnNjaGVkdWxlVXBkYXRlKCk7cmV0dXJuIG51bGwhPXQmJmF3YWl0IHQsIXRoaXMuaXNVcGRhdGVQZW5kaW5nfXNjaGVkdWxlVXBkYXRlKCl7cmV0dXJuIHRoaXMucGVyZm9ybVVwZGF0ZSgpfXBlcmZvcm1VcGRhdGUoKXtpZighdGhpcy5pc1VwZGF0ZVBlbmRpbmcpcmV0dXJuO2lmKCF0aGlzLmhhc1VwZGF0ZWQpe2lmKHRoaXMucmVuZGVyUm9vdD8/PXRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpLHRoaXMuXyRFcCl7Zm9yKGNvbnN0W3Qsc11vZiB0aGlzLl8kRXApdGhpc1t0XT1zO3RoaXMuXyRFcD12b2lkIDB9Y29uc3QgdD10aGlzLmNvbnN0cnVjdG9yLmVsZW1lbnRQcm9wZXJ0aWVzO2lmKHQuc2l6ZT4wKWZvcihjb25zdFtzLGldb2YgdCl7Y29uc3R7d3JhcHBlZDp0fT1pLGU9dGhpc1tzXTshMCE9PXR8fHRoaXMuXyRBTC5oYXMocyl8fHZvaWQgMD09PWV8fHRoaXMuQyhzLHZvaWQgMCxpLGUpfX1sZXQgdD0hMTtjb25zdCBzPXRoaXMuXyRBTDt0cnl7dD10aGlzLnNob3VsZFVwZGF0ZShzKSx0Pyh0aGlzLndpbGxVcGRhdGUocyksdGhpcy5fJEVPPy5mb3JFYWNoKCh0PT50Lmhvc3RVcGRhdGU/LigpKSksdGhpcy51cGRhdGUocykpOnRoaXMuXyRFTSgpfWNhdGNoKHMpe3Rocm93IHQ9ITEsdGhpcy5fJEVNKCksc310JiZ0aGlzLl8kQUUocyl9d2lsbFVwZGF0ZSh0KXt9XyRBRSh0KXt0aGlzLl8kRU8/LmZvckVhY2goKHQ9PnQuaG9zdFVwZGF0ZWQ/LigpKSksdGhpcy5oYXNVcGRhdGVkfHwodGhpcy5oYXNVcGRhdGVkPSEwLHRoaXMuZmlyc3RVcGRhdGVkKHQpKSx0aGlzLnVwZGF0ZWQodCl9XyRFTSgpe3RoaXMuXyRBTD1uZXcgTWFwLHRoaXMuaXNVcGRhdGVQZW5kaW5nPSExfWdldCB1cGRhdGVDb21wbGV0ZSgpe3JldHVybiB0aGlzLmdldFVwZGF0ZUNvbXBsZXRlKCl9Z2V0VXBkYXRlQ29tcGxldGUoKXtyZXR1cm4gdGhpcy5fJEVTfXNob3VsZFVwZGF0ZSh0KXtyZXR1cm4hMH11cGRhdGUodCl7dGhpcy5fJEVxJiY9dGhpcy5fJEVxLmZvckVhY2goKHQ9PnRoaXMuXyRFVCh0LHRoaXNbdF0pKSksdGhpcy5fJEVNKCl9dXBkYXRlZCh0KXt9Zmlyc3RVcGRhdGVkKHQpe319eS5lbGVtZW50U3R5bGVzPVtdLHkuc2hhZG93Um9vdE9wdGlvbnM9e21vZGU6XCJvcGVuXCJ9LHlbZChcImVsZW1lbnRQcm9wZXJ0aWVzXCIpXT1uZXcgTWFwLHlbZChcImZpbmFsaXplZFwiKV09bmV3IE1hcCxwPy4oe1JlYWN0aXZlRWxlbWVudDp5fSksKGEucmVhY3RpdmVFbGVtZW50VmVyc2lvbnM/Pz1bXSkucHVzaChcIjIuMS4wXCIpO2V4cG9ydHt5IGFzIFJlYWN0aXZlRWxlbWVudCxzIGFzIGFkb3B0U3R5bGVzLHUgYXMgZGVmYXVsdENvbnZlcnRlcix0IGFzIGdldENvbXBhdGlibGVTdHlsZSxmIGFzIG5vdEVxdWFsfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0aXZlLWVsZW1lbnQuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuLyoqXG4gKiBVc2UgdGhpcyBtb2R1bGUgaWYgeW91IHdhbnQgdG8gY3JlYXRlIHlvdXIgb3duIGJhc2UgY2xhc3MgZXh0ZW5kaW5nXG4gKiB7QGxpbmsgUmVhY3RpdmVFbGVtZW50fS5cbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7XG4gIGdldENvbXBhdGlibGVTdHlsZSxcbiAgYWRvcHRTdHlsZXMsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBDU1NSZXN1bHRPck5hdGl2ZSxcbn0gZnJvbSAnLi9jc3MtdGFnLmpzJztcbmltcG9ydCB0eXBlIHtcbiAgUmVhY3RpdmVDb250cm9sbGVyLFxuICBSZWFjdGl2ZUNvbnRyb2xsZXJIb3N0LFxufSBmcm9tICcuL3JlYWN0aXZlLWNvbnRyb2xsZXIuanMnO1xuXG4vLyBJbiB0aGUgTm9kZSBidWlsZCwgdGhpcyBpbXBvcnQgd2lsbCBiZSBpbmplY3RlZCBieSBSb2xsdXA6XG4vLyBpbXBvcnQge0hUTUxFbGVtZW50LCBjdXN0b21FbGVtZW50c30gZnJvbSAnQGxpdC1sYWJzL3Nzci1kb20tc2hpbSc7XG5cbmV4cG9ydCAqIGZyb20gJy4vY3NzLXRhZy5qcyc7XG5leHBvcnQgdHlwZSB7XG4gIFJlYWN0aXZlQ29udHJvbGxlcixcbiAgUmVhY3RpdmVDb250cm9sbGVySG9zdCxcbn0gZnJvbSAnLi9yZWFjdGl2ZS1jb250cm9sbGVyLmpzJztcblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBgcmVhZG9ubHlgIG1vZGlmaWVyIGZyb20gcHJvcGVydGllcyBpbiB0aGUgdW5pb24gSy5cbiAqXG4gKiBUaGlzIGlzIGEgc2FmZXIgd2F5IHRvIGNhc3QgYSB2YWx1ZSB0byBhIHR5cGUgd2l0aCBhIG11dGFibGUgdmVyc2lvbiBvZiBhXG4gKiByZWFkb25seSBmaWVsZCwgdGhhbiBjYXN0aW5nIHRvIGFuIGludGVyZmFjZSB3aXRoIHRoZSBmaWVsZCByZS1kZWNsYXJlZFxuICogYmVjYXVzZSBpdCBwcmVzZXJ2ZXMgdGhlIHR5cGUgb2YgYWxsIHRoZSBmaWVsZHMgYW5kIHdhcm5zIG9uIHR5cG9zLlxuICovXG50eXBlIE11dGFibGU8VCwgSyBleHRlbmRzIGtleW9mIFQ+ID0gT21pdDxULCBLPiAmIHtcbiAgLXJlYWRvbmx5IFtQIGluIGtleW9mIFBpY2s8VCwgSz5dOiBQIGV4dGVuZHMgSyA/IFRbUF0gOiBuZXZlcjtcbn07XG5cbi8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBBZGQgYGhhc093bmAgaGVyZSB3aGVuIHdlIHNoaXAgRVMyMDIyXG5jb25zdCB7XG4gIGlzLFxuICBkZWZpbmVQcm9wZXJ0eSxcbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICBnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMsXG4gIGdldFByb3RvdHlwZU9mLFxufSA9IE9iamVjdDtcblxuY29uc3QgTk9ERV9NT0RFID0gZmFsc2U7XG5cbi8vIExldHMgYSBtaW5pZmllciByZXBsYWNlIGdsb2JhbFRoaXMgcmVmZXJlbmNlcyB3aXRoIGEgbWluaWZpZWQgbmFtZVxuY29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblxuaWYgKE5PREVfTU9ERSkge1xuICBnbG9iYWwuY3VzdG9tRWxlbWVudHMgPz89IGN1c3RvbUVsZW1lbnRzO1xufVxuXG5jb25zdCBERVZfTU9ERSA9IHRydWU7XG5cbmxldCBpc3N1ZVdhcm5pbmc6IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4gdm9pZDtcblxuY29uc3QgdHJ1c3RlZFR5cGVzID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIHt0cnVzdGVkVHlwZXM/OiB7ZW1wdHlTY3JpcHQ6ICcnfX0pXG4gIC50cnVzdGVkVHlwZXM7XG5cbi8vIFRlbXBvcmFyeSB3b3JrYXJvdW5kIGZvciBodHRwczovL2NyYnVnLmNvbS85OTMyNjhcbi8vIEN1cnJlbnRseSwgYW55IGF0dHJpYnV0ZSBzdGFydGluZyB3aXRoIFwib25cIiBpcyBjb25zaWRlcmVkIHRvIGJlIGFcbi8vIFRydXN0ZWRTY3JpcHQgc291cmNlLiBTdWNoIGJvb2xlYW4gYXR0cmlidXRlcyBtdXN0IGJlIHNldCB0byB0aGUgZXF1aXZhbGVudFxuLy8gdHJ1c3RlZCBlbXB0eVNjcmlwdCB2YWx1ZS5cbmNvbnN0IGVtcHR5U3RyaW5nRm9yQm9vbGVhbkF0dHJpYnV0ZSA9IHRydXN0ZWRUeXBlc1xuICA/ICh0cnVzdGVkVHlwZXMuZW1wdHlTY3JpcHQgYXMgdW5rbm93biBhcyAnJylcbiAgOiAnJztcblxuY29uc3QgcG9seWZpbGxTdXBwb3J0ID0gREVWX01PREVcbiAgPyBnbG9iYWwucmVhY3RpdmVFbGVtZW50UG9seWZpbGxTdXBwb3J0RGV2TW9kZVxuICA6IGdsb2JhbC5yZWFjdGl2ZUVsZW1lbnRQb2x5ZmlsbFN1cHBvcnQ7XG5cbmlmIChERVZfTU9ERSkge1xuICAvLyBFbnN1cmUgd2FybmluZ3MgYXJlIGlzc3VlZCBvbmx5IDF4LCBldmVuIGlmIG11bHRpcGxlIHZlcnNpb25zIG9mIExpdFxuICAvLyBhcmUgbG9hZGVkLlxuICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gYCBTZWUgaHR0cHM6Ly9saXQuZGV2L21zZy8ke2NvZGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLmA7XG4gICAgaWYgKFxuICAgICAgIWdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuaGFzKHdhcm5pbmcpICYmXG4gICAgICAhZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5oYXMoY29kZSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbiAgICAgIGdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuYWRkKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcblxuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgaXNzdWVXYXJuaW5nKFxuICAgICAgJ2Rldi1tb2RlJyxcbiAgICAgIGBMaXQgaXMgaW4gZGV2IG1vZGUuIE5vdCByZWNvbW1lbmRlZCBmb3IgcHJvZHVjdGlvbiFgXG4gICAgKTtcblxuICAgIC8vIElzc3VlIHBvbHlmaWxsIHN1cHBvcnQgd2FybmluZy5cbiAgICBpZiAoZ2xvYmFsLlNoYWR5RE9NPy5pblVzZSAmJiBwb2x5ZmlsbFN1cHBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAncG9seWZpbGwtc3VwcG9ydC1taXNzaW5nJyxcbiAgICAgICAgYFNoYWRvdyBET00gaXMgYmVpbmcgcG9seWZpbGxlZCB2aWEgXFxgU2hhZHlET01cXGAgYnV0IGAgK1xuICAgICAgICAgIGB0aGUgXFxgcG9seWZpbGwtc3VwcG9ydFxcYCBtb2R1bGUgaGFzIG5vdCBiZWVuIGxvYWRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQ29udGFpbnMgdHlwZXMgdGhhdCBhcmUgcGFydCBvZiB0aGUgdW5zdGFibGUgZGVidWcgQVBJLlxuICpcbiAqIEV2ZXJ5dGhpbmcgaW4gdGhpcyBBUEkgaXMgbm90IHN0YWJsZSBhbmQgbWF5IGNoYW5nZSBvciBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUsXG4gKiBldmVuIG9uIHBhdGNoIHJlbGVhc2VzLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBSZWFjdGl2ZVVuc3RhYmxlIHtcbiAgLyoqXG4gICAqIFdoZW4gTGl0IGlzIHJ1bm5pbmcgaW4gZGV2IG1vZGUgYW5kIGB3aW5kb3cuZW1pdExpdERlYnVnTG9nRXZlbnRzYCBpcyB0cnVlLFxuICAgKiB3ZSB3aWxsIGVtaXQgJ2xpdC1kZWJ1ZycgZXZlbnRzIHRvIHdpbmRvdywgd2l0aCBsaXZlIGRldGFpbHMgYWJvdXQgdGhlIHVwZGF0ZSBhbmQgcmVuZGVyXG4gICAqIGxpZmVjeWNsZS4gVGhlc2UgY2FuIGJlIHVzZWZ1bCBmb3Igd3JpdGluZyBkZWJ1ZyB0b29saW5nIGFuZCB2aXN1YWxpemF0aW9ucy5cbiAgICpcbiAgICogUGxlYXNlIGJlIGF3YXJlIHRoYXQgcnVubmluZyB3aXRoIHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHMgaGFzIHBlcmZvcm1hbmNlIG92ZXJoZWFkLFxuICAgKiBtYWtpbmcgY2VydGFpbiBvcGVyYXRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHZlcnkgY2hlYXAgKGxpa2UgYSBuby1vcCByZW5kZXIpIG11Y2ggc2xvd2VyLFxuICAgKiBiZWNhdXNlIHdlIG11c3QgY29weSBkYXRhIGFuZCBkaXNwYXRjaCBldmVudHMuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuICBleHBvcnQgbmFtZXNwYWNlIERlYnVnTG9nIHtcbiAgICBleHBvcnQgdHlwZSBFbnRyeSA9IFVwZGF0ZTtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFVwZGF0ZSB7XG4gICAgICBraW5kOiAndXBkYXRlJztcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIERlYnVnTG9nZ2luZ1dpbmRvdyB7XG4gIC8vIEV2ZW4gaW4gZGV2IG1vZGUsIHdlIGdlbmVyYWxseSBkb24ndCB3YW50IHRvIGVtaXQgdGhlc2UgZXZlbnRzLCBhcyB0aGF0J3NcbiAgLy8gYW5vdGhlciBsZXZlbCBvZiBjb3N0LCBzbyBvbmx5IGVtaXQgdGhlbSB3aGVuIERFVl9NT0RFIGlzIHRydWUgX2FuZF8gd2hlblxuICAvLyB3aW5kb3cuZW1pdExpdERlYnVnRXZlbnRzIGlzIHRydWUuXG4gIGVtaXRMaXREZWJ1Z0xvZ0V2ZW50cz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVXNlZnVsIGZvciB2aXN1YWxpemluZyBhbmQgbG9nZ2luZyBpbnNpZ2h0cyBpbnRvIHdoYXQgdGhlIExpdCB0ZW1wbGF0ZSBzeXN0ZW0gaXMgZG9pbmcuXG4gKlxuICogQ29tcGlsZWQgb3V0IG9mIHByb2QgbW9kZSBidWlsZHMuXG4gKi9cbmNvbnN0IGRlYnVnTG9nRXZlbnQgPSBERVZfTU9ERVxuICA/IChldmVudDogUmVhY3RpdmVVbnN0YWJsZS5EZWJ1Z0xvZy5FbnRyeSkgPT4ge1xuICAgICAgY29uc3Qgc2hvdWxkRW1pdCA9IChnbG9iYWwgYXMgdW5rbm93biBhcyBEZWJ1Z0xvZ2dpbmdXaW5kb3cpXG4gICAgICAgIC5lbWl0TGl0RGVidWdMb2dFdmVudHM7XG4gICAgICBpZiAoIXNob3VsZEVtaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZ2xvYmFsLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDdXN0b21FdmVudDxSZWFjdGl2ZVVuc3RhYmxlLkRlYnVnTG9nLkVudHJ5PignbGl0LWRlYnVnJywge1xuICAgICAgICAgIGRldGFpbDogZXZlbnQsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgOiB1bmRlZmluZWQ7XG5cbi8qXG4gKiBXaGVuIHVzaW5nIENsb3N1cmUgQ29tcGlsZXIsIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkocHJvcGVydHksIG9iamVjdCkgaXNcbiAqIHJlcGxhY2VkIGF0IGNvbXBpbGUgdGltZSBieSB0aGUgbXVuZ2VkIG5hbWUgZm9yIG9iamVjdFtwcm9wZXJ0eV0uIFdlIGNhbm5vdFxuICogYWxpYXMgdGhpcyBmdW5jdGlvbiwgc28gd2UgaGF2ZSB0byB1c2UgYSBzbWFsbCBzaGltIHRoYXQgaGFzIHRoZSBzYW1lXG4gKiBiZWhhdmlvciB3aGVuIG5vdCBjb21waWxpbmcuXG4gKi9cbi8qQF9fSU5MSU5FX18qL1xuY29uc3QgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9IDxQIGV4dGVuZHMgUHJvcGVydHlLZXk+KFxuICBwcm9wOiBQLFxuICBfb2JqOiB1bmtub3duXG4pOiBQID0+IHByb3A7XG5cbi8qKlxuICogQ29udmVydHMgcHJvcGVydHkgdmFsdWVzIHRvIGFuZCBmcm9tIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxleEF0dHJpYnV0ZUNvbnZlcnRlcjxUeXBlID0gdW5rbm93biwgVHlwZUhpbnQgPSB1bmtub3duPiB7XG4gIC8qKlxuICAgKiBDYWxsZWQgdG8gY29udmVydCBhbiBhdHRyaWJ1dGUgdmFsdWUgdG8gYSBwcm9wZXJ0eVxuICAgKiB2YWx1ZS5cbiAgICovXG4gIGZyb21BdHRyaWJ1dGU/KHZhbHVlOiBzdHJpbmcgfCBudWxsLCB0eXBlPzogVHlwZUhpbnQpOiBUeXBlO1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgdG8gY29udmVydCBhIHByb3BlcnR5IHZhbHVlIHRvIGFuIGF0dHJpYnV0ZVxuICAgKiB2YWx1ZS5cbiAgICpcbiAgICogSXQgcmV0dXJucyB1bmtub3duIGluc3RlYWQgb2Ygc3RyaW5nLCB0byBiZSBjb21wYXRpYmxlIHdpdGhcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvdHJ1c3RlZC10eXBlcyAoYW5kIHNpbWlsYXIgZWZmb3J0cykuXG4gICAqL1xuICB0b0F0dHJpYnV0ZT8odmFsdWU6IFR5cGUsIHR5cGU/OiBUeXBlSGludCk6IHVua25vd247XG59XG5cbnR5cGUgQXR0cmlidXRlQ29udmVydGVyPFR5cGUgPSB1bmtub3duLCBUeXBlSGludCA9IHVua25vd24+ID1cbiAgfCBDb21wbGV4QXR0cmlidXRlQ29udmVydGVyPFR5cGU+XG4gIHwgKCh2YWx1ZTogc3RyaW5nIHwgbnVsbCwgdHlwZT86IFR5cGVIaW50KSA9PiBUeXBlKTtcblxuLyoqXG4gKiBEZWZpbmVzIG9wdGlvbnMgZm9yIGEgcHJvcGVydHkgYWNjZXNzb3IuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlEZWNsYXJhdGlvbjxUeXBlID0gdW5rbm93biwgVHlwZUhpbnQgPSB1bmtub3duPiB7XG4gIC8qKlxuICAgKiBXaGVuIHNldCB0byBgdHJ1ZWAsIGluZGljYXRlcyB0aGUgcHJvcGVydHkgaXMgaW50ZXJuYWwgcHJpdmF0ZSBzdGF0ZS4gVGhlXG4gICAqIHByb3BlcnR5IHNob3VsZCBub3QgYmUgc2V0IGJ5IHVzZXJzLiBXaGVuIHVzaW5nIFR5cGVTY3JpcHQsIHRoaXMgcHJvcGVydHlcbiAgICogc2hvdWxkIGJlIG1hcmtlZCBhcyBgcHJpdmF0ZWAgb3IgYHByb3RlY3RlZGAsIGFuZCBpdCBpcyBhbHNvIGEgY29tbW9uXG4gICAqIHByYWN0aWNlIHRvIHVzZSBhIGxlYWRpbmcgYF9gIGluIHRoZSBuYW1lLiBUaGUgcHJvcGVydHkgaXMgbm90IGFkZGVkIHRvXG4gICAqIGBvYnNlcnZlZEF0dHJpYnV0ZXNgLlxuICAgKi9cbiAgcmVhZG9ubHkgc3RhdGU/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaG93IGFuZCB3aGV0aGVyIHRoZSBwcm9wZXJ0eSBiZWNvbWVzIGFuIG9ic2VydmVkIGF0dHJpYnV0ZS5cbiAgICogSWYgdGhlIHZhbHVlIGlzIGBmYWxzZWAsIHRoZSBwcm9wZXJ0eSBpcyBub3QgYWRkZWQgdG8gYG9ic2VydmVkQXR0cmlidXRlc2AuXG4gICAqIElmIHRydWUgb3IgYWJzZW50LCB0aGUgbG93ZXJjYXNlZCBwcm9wZXJ0eSBuYW1lIGlzIG9ic2VydmVkIChlLmcuIGBmb29CYXJgXG4gICAqIGJlY29tZXMgYGZvb2JhcmApLiBJZiBhIHN0cmluZywgdGhlIHN0cmluZyB2YWx1ZSBpcyBvYnNlcnZlZCAoZS5nXG4gICAqIGBhdHRyaWJ1dGU6ICdmb28tYmFyJ2ApLlxuICAgKi9cbiAgcmVhZG9ubHkgYXR0cmlidXRlPzogYm9vbGVhbiB8IHN0cmluZztcblxuICAvKipcbiAgICogSW5kaWNhdGVzIHRoZSB0eXBlIG9mIHRoZSBwcm9wZXJ0eS4gVGhpcyBpcyB1c2VkIG9ubHkgYXMgYSBoaW50IGZvciB0aGVcbiAgICogYGNvbnZlcnRlcmAgdG8gZGV0ZXJtaW5lIGhvdyB0byBjb252ZXJ0IHRoZSBhdHRyaWJ1dGVcbiAgICogdG8vZnJvbSBhIHByb3BlcnR5LlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZT86IFR5cGVIaW50O1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaG93IHRvIGNvbnZlcnQgdGhlIGF0dHJpYnV0ZSB0by9mcm9tIGEgcHJvcGVydHkuIElmIHRoaXMgdmFsdWVcbiAgICogaXMgYSBmdW5jdGlvbiwgaXQgaXMgdXNlZCB0byBjb252ZXJ0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgYSB0aGUgcHJvcGVydHlcbiAgICogdmFsdWUuIElmIGl0J3MgYW4gb2JqZWN0LCBpdCBjYW4gaGF2ZSBrZXlzIGZvciBgZnJvbUF0dHJpYnV0ZWAgYW5kXG4gICAqIGB0b0F0dHJpYnV0ZWAuIElmIG5vIGB0b0F0dHJpYnV0ZWAgZnVuY3Rpb24gaXMgcHJvdmlkZWQgYW5kXG4gICAqIGByZWZsZWN0YCBpcyBzZXQgdG8gYHRydWVgLCB0aGUgcHJvcGVydHkgdmFsdWUgaXMgc2V0IGRpcmVjdGx5IHRvIHRoZVxuICAgKiBhdHRyaWJ1dGUuIEEgZGVmYXVsdCBgY29udmVydGVyYCBpcyB1c2VkIGlmIG5vbmUgaXMgcHJvdmlkZWQ7IGl0IHN1cHBvcnRzXG4gICAqIGBCb29sZWFuYCwgYFN0cmluZ2AsIGBOdW1iZXJgLCBgT2JqZWN0YCwgYW5kIGBBcnJheWAuIE5vdGUsXG4gICAqIHdoZW4gYSBwcm9wZXJ0eSBjaGFuZ2VzIGFuZCB0aGUgY29udmVydGVyIGlzIHVzZWQgdG8gdXBkYXRlIHRoZSBhdHRyaWJ1dGUsXG4gICAqIHRoZSBwcm9wZXJ0eSBpcyBuZXZlciB1cGRhdGVkIGFnYWluIGFzIGEgcmVzdWx0IG9mIHRoZSBhdHRyaWJ1dGUgY2hhbmdpbmcsXG4gICAqIGFuZCB2aWNlIHZlcnNhLlxuICAgKi9cbiAgcmVhZG9ubHkgY29udmVydGVyPzogQXR0cmlidXRlQ29udmVydGVyPFR5cGUsIFR5cGVIaW50PjtcblxuICAvKipcbiAgICogSW5kaWNhdGVzIGlmIHRoZSBwcm9wZXJ0eSBzaG91bGQgcmVmbGVjdCB0byBhbiBhdHRyaWJ1dGUuXG4gICAqIElmIGB0cnVlYCwgd2hlbiB0aGUgcHJvcGVydHkgaXMgc2V0LCB0aGUgYXR0cmlidXRlIGlzIHNldCB1c2luZyB0aGVcbiAgICogYXR0cmlidXRlIG5hbWUgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIGZvciB0aGUgYGF0dHJpYnV0ZWBcbiAgICogcHJvcGVydHkgb3B0aW9uIGFuZCB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IGNvbnZlcnRlZCB1c2luZyB0aGUgcnVsZXNcbiAgICogZnJvbSB0aGUgYGNvbnZlcnRlcmAgcHJvcGVydHkgb3B0aW9uLlxuICAgKi9cbiAgcmVhZG9ubHkgcmVmbGVjdD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCBpbmRpY2F0ZXMgaWYgYSBwcm9wZXJ0eSBzaG91bGQgYmUgY29uc2lkZXJlZCBjaGFuZ2VkIHdoZW5cbiAgICogaXQgaXMgc2V0LiBUaGUgZnVuY3Rpb24gc2hvdWxkIHRha2UgdGhlIGBuZXdWYWx1ZWAgYW5kIGBvbGRWYWx1ZWAgYW5kXG4gICAqIHJldHVybiBgdHJ1ZWAgaWYgYW4gdXBkYXRlIHNob3VsZCBiZSByZXF1ZXN0ZWQuXG4gICAqL1xuICBoYXNDaGFuZ2VkPyh2YWx1ZTogVHlwZSwgb2xkVmFsdWU6IFR5cGUpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciBhbiBhY2Nlc3NvciB3aWxsIGJlIGNyZWF0ZWQgZm9yIHRoaXMgcHJvcGVydHkuIEJ5XG4gICAqIGRlZmF1bHQsIGFuIGFjY2Vzc29yIHdpbGwgYmUgZ2VuZXJhdGVkIGZvciB0aGlzIHByb3BlcnR5IHRoYXQgcmVxdWVzdHMgYW5cbiAgICogdXBkYXRlIHdoZW4gc2V0LiBJZiB0aGlzIGZsYWcgaXMgYHRydWVgLCBubyBhY2Nlc3NvciB3aWxsIGJlIGNyZWF0ZWQsIGFuZFxuICAgKiBpdCB3aWxsIGJlIHRoZSB1c2VyJ3MgcmVzcG9uc2liaWxpdHkgdG8gY2FsbFxuICAgKiBgdGhpcy5yZXF1ZXN0VXBkYXRlKHByb3BlcnR5TmFtZSwgb2xkVmFsdWUpYCB0byByZXF1ZXN0IGFuIHVwZGF0ZSB3aGVuXG4gICAqIHRoZSBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgbm9BY2Nlc3Nvcj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBwcm9wZXJ0eSBpcyB3cmFwcGluZyBhY2Nlc3NvcnMuIFRoaXMgaXMgc2V0IGJ5IGBAcHJvcGVydHlgXG4gICAqIHRvIGNvbnRyb2wgdGhlIGluaXRpYWwgdmFsdWUgY2hhbmdlIGFuZCByZWZsZWN0aW9uIGxvZ2ljLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHdyYXBwZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGVuIGB0cnVlYCwgdXNlcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgYXMgdGhlIGRlZmF1bHQgdmFsdWUsXG4gICAqIHdoaWNoIGNoYW5nZXMgaG93IGF0dHJpYnV0ZXMgYXJlIGhhbmRsZWQ6XG4gICAqICAtIFRoZSBpbml0aWFsIHZhbHVlIGRvZXMgKm5vdCogcmVmbGVjdCwgZXZlbiBpZiB0aGUgYHJlZmxlY3RgIG9wdGlvbiBpcyBgdHJ1ZWAuXG4gICAqICAgIFN1YnNlcXVlbnQgY2hhbmdlcyB0byB0aGUgcHJvcGVydHkgd2lsbCByZWZsZWN0LCBldmVuIGlmIHRoZXkgYXJlIGVxdWFsIHRvIHRoZVxuICAgKiAgICAgZGVmYXVsdCB2YWx1ZS5cbiAgICogIC0gV2hlbiB0aGUgYXR0cmlidXRlIGlzIHJlbW92ZWQsIHRoZSBwcm9wZXJ0eSBpcyBzZXQgdG8gdGhlIGRlZmF1bHQgdmFsdWVcbiAgICogIC0gVGhlIGluaXRpYWwgdmFsdWUgd2lsbCBub3QgdHJpZ2dlciBhbiBvbGQgdmFsdWUgaW4gdGhlIGBjaGFuZ2VkUHJvcGVydGllc2AgbWFwXG4gICAqICAgIGFyZ3VtZW50IHRvIHVwZGF0ZSBsaWZlY3ljbGUgbWV0aG9kcy5cbiAgICpcbiAgICogV2hlbiBzZXQsIHByb3BlcnRpZXMgbXVzdCBiZSBpbml0aWFsaXplZCwgZWl0aGVyIHdpdGggYSBmaWVsZCBpbml0aWFsaXplciwgb3IgYW5cbiAgICogYXNzaWdubWVudCBpbiB0aGUgY29uc3RydWN0b3IuIE5vdCBpbml0aWFsaXppbmcgdGhlIHByb3BlcnR5IG1heSBsZWFkIHRvXG4gICAqIGltcHJvcGVyIGhhbmRsaW5nIG9mIHN1YnNlcXVlbnQgcHJvcGVydHkgYXNzaWdubWVudHMuXG4gICAqXG4gICAqIFdoaWxlIHRoaXMgYmVoYXZpb3IgaXMgb3B0LWluLCBtb3N0IHByb3BlcnRpZXMgdGhhdCByZWZsZWN0IHRvIGF0dHJpYnV0ZXMgc2hvdWxkXG4gICAqIHVzZSBgdXNlRGVmYXVsdDogdHJ1ZWAgc28gdGhhdCB0aGVpciBpbml0aWFsIHZhbHVlcyBkbyBub3QgcmVmbGVjdC5cbiAgICovXG4gIHVzZURlZmF1bHQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIE1hcCBvZiBwcm9wZXJ0aWVzIHRvIFByb3BlcnR5RGVjbGFyYXRpb24gb3B0aW9ucy4gRm9yIGVhY2ggcHJvcGVydHkgYW5cbiAqIGFjY2Vzc29yIGlzIG1hZGUsIGFuZCB0aGUgcHJvcGVydHkgaXMgcHJvY2Vzc2VkIGFjY29yZGluZyB0byB0aGVcbiAqIFByb3BlcnR5RGVjbGFyYXRpb24gb3B0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eURlY2xhcmF0aW9ucyB7XG4gIHJlYWRvbmx5IFtrZXk6IHN0cmluZ106IFByb3BlcnR5RGVjbGFyYXRpb247XG59XG5cbnR5cGUgUHJvcGVydHlEZWNsYXJhdGlvbk1hcCA9IE1hcDxQcm9wZXJ0eUtleSwgUHJvcGVydHlEZWNsYXJhdGlvbj47XG5cbnR5cGUgQXR0cmlidXRlTWFwID0gTWFwPHN0cmluZywgUHJvcGVydHlLZXk+O1xuXG4vKipcbiAqIEEgTWFwIG9mIHByb3BlcnR5IGtleXMgdG8gdmFsdWVzLlxuICpcbiAqIFRha2VzIGFuIG9wdGlvbmFsIHR5cGUgcGFyYW1ldGVyIFQsIHdoaWNoIHdoZW4gc3BlY2lmaWVkIGFzIGEgbm9uLWFueSxcbiAqIG5vbi11bmtub3duIHR5cGUsIHdpbGwgbWFrZSB0aGUgTWFwIG1vcmUgc3Ryb25nbHktdHlwZWQsIGFzc29jaWF0aW5nIHRoZSBtYXBcbiAqIGtleXMgd2l0aCB0aGVpciBjb3JyZXNwb25kaW5nIHZhbHVlIHR5cGUgb24gVC5cbiAqXG4gKiBVc2UgYFByb3BlcnR5VmFsdWVzPHRoaXM+YCB3aGVuIG92ZXJyaWRpbmcgUmVhY3RpdmVFbGVtZW50LnVwZGF0ZSgpIGFuZFxuICogb3RoZXIgbGlmZWN5Y2xlIG1ldGhvZHMgaW4gb3JkZXIgdG8gZ2V0IHN0cm9uZ2VyIHR5cGUtY2hlY2tpbmcgb24ga2V5c1xuICogYW5kIHZhbHVlcy5cbiAqL1xuLy8gVGhpcyB0eXBlIGlzIGNvbmRpdGlvbmFsIHNvIHRoYXQgaWYgdGhlIHBhcmFtZXRlciBUIGlzIG5vdCBzcGVjaWZpZWQsIG9yXG4vLyBpcyBgYW55YCwgdGhlIHR5cGUgd2lsbCBpbmNsdWRlIGBNYXA8UHJvcGVydHlLZXksIHVua25vd24+YC4gU2luY2UgVCBpcyBub3Rcbi8vIGdpdmVuIGluIHRoZSB1c2VzIG9mIFByb3BlcnR5VmFsdWVzIGluIHRoaXMgZmlsZSwgYWxsIHVzZXMgaGVyZSBmYWxsYmFjayB0b1xuLy8gbWVhbmluZyBgTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPmAsIGJ1dCBpZiBhIGRldmVsb3BlciB1c2VzXG4vLyBgUHJvcGVydHlWYWx1ZXM8dGhpcz5gIChvciBhbnkgb3RoZXIgdmFsdWUgZm9yIFQpIHRoZXkgd2lsbCBnZXQgYVxuLy8gc3Ryb25nbHktdHlwZWQgTWFwIHR5cGUuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IHR5cGUgUHJvcGVydHlWYWx1ZXM8VCA9IGFueT4gPSBUIGV4dGVuZHMgb2JqZWN0XG4gID8gUHJvcGVydHlWYWx1ZU1hcDxUPlxuICA6IE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj47XG5cbi8qKlxuICogRG8gbm90IHVzZSwgaW5zdGVhZCBwcmVmZXIge0BsaW5rY29kZSBQcm9wZXJ0eVZhbHVlc30uXG4gKi9cbi8vIFRoaXMgdHlwZSBtdXN0IGJlIGV4cG9ydGVkIHN1Y2ggdGhhdCBKYXZhU2NyaXB0IGdlbmVyYXRlZCBieSB0aGUgR29vZ2xlXG4vLyBDbG9zdXJlIENvbXBpbGVyIGNhbiBpbXBvcnQgYSB0eXBlIHJlZmVyZW5jZS5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlWYWx1ZU1hcDxUPiBleHRlbmRzIE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj4ge1xuICBnZXQ8SyBleHRlbmRzIGtleW9mIFQ+KGs6IEspOiBUW0tdIHwgdW5kZWZpbmVkO1xuICBzZXQ8SyBleHRlbmRzIGtleW9mIFQ+KGtleTogSywgdmFsdWU6IFRbS10pOiB0aGlzO1xuICBoYXM8SyBleHRlbmRzIGtleW9mIFQ+KGs6IEspOiBib29sZWFuO1xuICBkZWxldGU8SyBleHRlbmRzIGtleW9mIFQ+KGs6IEspOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbnZlcnRlcjogQ29tcGxleEF0dHJpYnV0ZUNvbnZlcnRlciA9IHtcbiAgdG9BdHRyaWJ1dGUodmFsdWU6IHVua25vd24sIHR5cGU/OiB1bmtub3duKTogdW5rbm93biB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgIHZhbHVlID0gdmFsdWUgPyBlbXB0eVN0cmluZ0ZvckJvb2xlYW5BdHRyaWJ1dGUgOiBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgLy8gaWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCBwYXNzIHRoaXMgdGhyb3VnaFxuICAgICAgICAvLyB0byBhbGxvdyByZW1vdmluZy9ubyBjaGFuZ2UgYmVoYXZpb3IuXG4gICAgICAgIHZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIGZyb21BdHRyaWJ1dGUodmFsdWU6IHN0cmluZyB8IG51bGwsIHR5cGU/OiB1bmtub3duKSB7XG4gICAgbGV0IGZyb21WYWx1ZTogdW5rbm93biA9IHZhbHVlO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICBmcm9tVmFsdWUgPSB2YWx1ZSAhPT0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgZnJvbVZhbHVlID0gdmFsdWUgPT09IG51bGwgPyBudWxsIDogTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9iamVjdDpcbiAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgIC8vIERvICpub3QqIGdlbmVyYXRlIGV4Y2VwdGlvbiB3aGVuIGludmFsaWQgSlNPTiBpcyBzZXQgYXMgZWxlbWVudHNcbiAgICAgICAgLy8gZG9uJ3Qgbm9ybWFsbHkgY29tcGxhaW4gb24gYmVpbmcgbWlzLWNvbmZpZ3VyZWQuXG4gICAgICAgIC8vIFRPRE8oc29ydmVsbCk6IERvIGdlbmVyYXRlIGV4Y2VwdGlvbiBpbiAqZGV2IG1vZGUqLlxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEFzc2VydCB0byBhZGhlcmUgdG8gQmF6ZWwncyBcIm11c3QgdHlwZSBhc3NlcnQgSlNPTiBwYXJzZVwiIHJ1bGUuXG4gICAgICAgICAgZnJvbVZhbHVlID0gSlNPTi5wYXJzZSh2YWx1ZSEpIGFzIHVua25vd247XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBmcm9tVmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbVZhbHVlO1xuICB9LFxufTtcblxuZXhwb3J0IGludGVyZmFjZSBIYXNDaGFuZ2VkIHtcbiAgKHZhbHVlOiB1bmtub3duLCBvbGQ6IHVua25vd24pOiBib29sZWFuO1xufVxuXG4vKipcbiAqIENoYW5nZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGRpZmZlcmVudCBmcm9tIGBvbGRWYWx1ZWAuXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IGZvciBhIHByb3BlcnR5J3MgYGhhc0NoYW5nZWRgIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgY29uc3Qgbm90RXF1YWw6IEhhc0NoYW5nZWQgPSAodmFsdWU6IHVua25vd24sIG9sZDogdW5rbm93bik6IGJvb2xlYW4gPT5cbiAgIWlzKHZhbHVlLCBvbGQpO1xuXG5jb25zdCBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjogUHJvcGVydHlEZWNsYXJhdGlvbiA9IHtcbiAgYXR0cmlidXRlOiB0cnVlLFxuICB0eXBlOiBTdHJpbmcsXG4gIGNvbnZlcnRlcjogZGVmYXVsdENvbnZlcnRlcixcbiAgcmVmbGVjdDogZmFsc2UsXG4gIHVzZURlZmF1bHQ6IGZhbHNlLFxuICBoYXNDaGFuZ2VkOiBub3RFcXVhbCxcbn07XG5cbi8qKlxuICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIG9uZSBvZiB0aGUgc3VwcG9ydGVkIGRldiBtb2RlIHdhcm5pbmcgY2F0ZWdvcmllcy5cbiAqL1xuZXhwb3J0IHR5cGUgV2FybmluZ0tpbmQgPVxuICB8ICdjaGFuZ2UtaW4tdXBkYXRlJ1xuICB8ICdtaWdyYXRpb24nXG4gIHwgJ2FzeW5jLXBlcmZvcm0tdXBkYXRlJztcblxuZXhwb3J0IHR5cGUgSW5pdGlhbGl6ZXIgPSAoZWxlbWVudDogUmVhY3RpdmVFbGVtZW50KSA9PiB2b2lkO1xuXG4vLyBUZW1wb3JhcnksIHVudGlsIGdvb2dsZTMgaXMgb24gVHlwZVNjcmlwdCA1LjJcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFN5bWJvbENvbnN0cnVjdG9yIHtcbiAgICByZWFkb25seSBtZXRhZGF0YTogdW5pcXVlIHN5bWJvbDtcbiAgfVxufVxuXG4vLyBFbnN1cmUgbWV0YWRhdGEgaXMgZW5hYmxlZC4gVHlwZVNjcmlwdCBkb2VzIG5vdCBwb2x5ZmlsbFxuLy8gU3ltYm9sLm1ldGFkYXRhLCBzbyB3ZSBtdXN0IGVuc3VyZSB0aGF0IGl0IGV4aXN0cy5cbihTeW1ib2wgYXMge21ldGFkYXRhOiBzeW1ib2x9KS5tZXRhZGF0YSA/Pz0gU3ltYm9sKCdtZXRhZGF0YScpO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIFRoaXMgaXMgcHVibGljIGdsb2JhbCBBUEksIGRvIG5vdCBjaGFuZ2UhXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbiAgdmFyIGxpdFByb3BlcnR5TWV0YWRhdGE6IFdlYWtNYXA8XG4gICAgb2JqZWN0LFxuICAgIE1hcDxQcm9wZXJ0eUtleSwgUHJvcGVydHlEZWNsYXJhdGlvbj5cbiAgPjtcbn1cblxuLy8gTWFwIGZyb20gYSBjbGFzcydzIG1ldGFkYXRhIG9iamVjdCB0byBwcm9wZXJ0eSBvcHRpb25zXG4vLyBOb3RlIHRoYXQgd2UgbXVzdCB1c2UgbnVsbGlzaC1jb2FsZXNjaW5nIGFzc2lnbm1lbnQgc28gdGhhdCB3ZSBvbmx5IHVzZSBvbmVcbi8vIG1hcCBldmVuIGlmIHdlIGxvYWQgbXVsdGlwbGUgdmVyc2lvbiBvZiB0aGlzIG1vZHVsZS5cbmdsb2JhbC5saXRQcm9wZXJ0eU1ldGFkYXRhID8/PSBuZXcgV2Vha01hcDxcbiAgb2JqZWN0LFxuICBNYXA8UHJvcGVydHlLZXksIFByb3BlcnR5RGVjbGFyYXRpb24+XG4+KCk7XG5cbi8qKlxuICogQmFzZSBlbGVtZW50IGNsYXNzIHdoaWNoIG1hbmFnZXMgZWxlbWVudCBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzLiBXaGVuXG4gKiBwcm9wZXJ0aWVzIGNoYW5nZSwgdGhlIGB1cGRhdGVgIG1ldGhvZCBpcyBhc3luY2hyb25vdXNseSBjYWxsZWQuIFRoaXMgbWV0aG9kXG4gKiBzaG91bGQgYmUgc3VwcGxpZWQgYnkgc3ViY2xhc3NlcyB0byByZW5kZXIgdXBkYXRlcyBhcyBkZXNpcmVkLlxuICogQG5vSW5oZXJpdERvY1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVhY3RpdmVFbGVtZW50XG4gIC8vIEluIHRoZSBOb2RlIGJ1aWxkLCB0aGlzIGBleHRlbmRzYCBjbGF1c2Ugd2lsbCBiZSBzdWJzdGl0dXRlZCB3aXRoXG4gIC8vIGAoZ2xvYmFsVGhpcy5IVE1MRWxlbWVudCA/PyBIVE1MRWxlbWVudClgLlxuICAvL1xuICAvLyBUaGlzIHdheSwgd2Ugd2lsbCBmaXJzdCBwcmVmZXIgYW55IGdsb2JhbCBgSFRNTEVsZW1lbnRgIHBvbHlmaWxsIHRoYXQgdGhlXG4gIC8vIHVzZXIgaGFzIGFzc2lnbmVkLCBhbmQgdGhlbiBmYWxsIGJhY2sgdG8gdGhlIGBIVE1MRWxlbWVudGAgc2hpbSB3aGljaCBoYXNcbiAgLy8gYmVlbiBpbXBvcnRlZCAoc2VlIG5vdGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUgYWJvdXQgaG93IHRoaXMgaW1wb3J0IGlzXG4gIC8vIGdlbmVyYXRlZCBieSBSb2xsdXApLiBOb3RlIHRoYXQgdGhlIGBIVE1MRWxlbWVudGAgdmFyaWFibGUgaGFzIGJlZW5cbiAgLy8gc2hhZG93ZWQgYnkgdGhpcyBpbXBvcnQsIHNvIGl0IG5vIGxvbmdlciByZWZlcnMgdG8gdGhlIGdsb2JhbC5cbiAgZXh0ZW5kcyBIVE1MRWxlbWVudFxuICBpbXBsZW1lbnRzIFJlYWN0aXZlQ29udHJvbGxlckhvc3RcbntcbiAgLy8gTm90ZTogdGhlc2UgYXJlIHBhdGNoZWQgaW4gb25seSBpbiBERVZfTU9ERS5cbiAgLyoqXG4gICAqIFJlYWQgb3Igc2V0IGFsbCB0aGUgZW5hYmxlZCB3YXJuaW5nIGNhdGVnb3JpZXMgZm9yIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgb25seSB1c2VkIGluIGRldmVsb3BtZW50IGJ1aWxkcy5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IGRldi1tb2RlXG4gICAqL1xuICBzdGF0aWMgZW5hYmxlZFdhcm5pbmdzPzogV2FybmluZ0tpbmRbXTtcblxuICAvKipcbiAgICogRW5hYmxlIHRoZSBnaXZlbiB3YXJuaW5nIGNhdGVnb3J5IGZvciB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBvbmx5IGV4aXN0cyBpbiBkZXZlbG9wbWVudCBidWlsZHMsIHNvIGl0IHNob3VsZCBiZSBhY2Nlc3NlZFxuICAgKiB3aXRoIGEgZ3VhcmQgbGlrZTpcbiAgICpcbiAgICogYGBgdHNcbiAgICogLy8gRW5hYmxlIGZvciBhbGwgUmVhY3RpdmVFbGVtZW50IHN1YmNsYXNzZXNcbiAgICogUmVhY3RpdmVFbGVtZW50LmVuYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqXG4gICAqIC8vIEVuYWJsZSBmb3Igb25seSBNeUVsZW1lbnQgYW5kIHN1YmNsYXNzZXNcbiAgICogTXlFbGVtZW50LmVuYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgZGV2LW1vZGVcbiAgICovXG4gIHN0YXRpYyBlbmFibGVXYXJuaW5nPzogKHdhcm5pbmdLaW5kOiBXYXJuaW5nS2luZCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogRGlzYWJsZSB0aGUgZ2l2ZW4gd2FybmluZyBjYXRlZ29yeSBmb3IgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgb25seSBleGlzdHMgaW4gZGV2ZWxvcG1lbnQgYnVpbGRzLCBzbyBpdCBzaG91bGQgYmUgYWNjZXNzZWRcbiAgICogd2l0aCBhIGd1YXJkIGxpa2U6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIC8vIERpc2FibGUgZm9yIGFsbCBSZWFjdGl2ZUVsZW1lbnQgc3ViY2xhc3Nlc1xuICAgKiBSZWFjdGl2ZUVsZW1lbnQuZGlzYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqXG4gICAqIC8vIERpc2FibGUgZm9yIG9ubHkgTXlFbGVtZW50IGFuZCBzdWJjbGFzc2VzXG4gICAqIE15RWxlbWVudC5kaXNhYmxlV2FybmluZz8uKCdtaWdyYXRpb24nKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBkZXYtbW9kZVxuICAgKi9cbiAgc3RhdGljIGRpc2FibGVXYXJuaW5nPzogKHdhcm5pbmdLaW5kOiBXYXJuaW5nS2luZCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQWRkcyBhbiBpbml0aWFsaXplciBmdW5jdGlvbiB0byB0aGUgY2xhc3MgdGhhdCBpcyBjYWxsZWQgZHVyaW5nIGluc3RhbmNlXG4gICAqIGNvbnN0cnVjdGlvbi5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGNvZGUgdGhhdCBydW5zIGFnYWluc3QgYSBgUmVhY3RpdmVFbGVtZW50YFxuICAgKiBzdWJjbGFzcywgc3VjaCBhcyBhIGRlY29yYXRvciwgdGhhdCBuZWVkcyB0byBkbyB3b3JrIGZvciBlYWNoXG4gICAqIGluc3RhbmNlLCBzdWNoIGFzIHNldHRpbmcgdXAgYSBgUmVhY3RpdmVDb250cm9sbGVyYC5cbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgbXlEZWNvcmF0b3IgPSAodGFyZ2V0OiB0eXBlb2YgUmVhY3RpdmVFbGVtZW50LCBrZXk6IHN0cmluZykgPT4ge1xuICAgKiAgIHRhcmdldC5hZGRJbml0aWFsaXplcigoaW5zdGFuY2U6IFJlYWN0aXZlRWxlbWVudCkgPT4ge1xuICAgKiAgICAgLy8gVGhpcyBpcyBydW4gZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiB0aGUgZWxlbWVudFxuICAgKiAgICAgbmV3IE15Q29udHJvbGxlcihpbnN0YW5jZSk7XG4gICAqICAgfSk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIERlY29yYXRpbmcgYSBmaWVsZCB3aWxsIHRoZW4gY2F1c2UgZWFjaCBpbnN0YW5jZSB0byBydW4gYW4gaW5pdGlhbGl6ZXJcbiAgICogdGhhdCBhZGRzIGEgY29udHJvbGxlcjpcbiAgICpcbiAgICogYGBgdHNcbiAgICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAqICAgQG15RGVjb3JhdG9yIGZvbztcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogSW5pdGlhbGl6ZXJzIGFyZSBzdG9yZWQgcGVyLWNvbnN0cnVjdG9yLiBBZGRpbmcgYW4gaW5pdGlhbGl6ZXIgdG8gYVxuICAgKiBzdWJjbGFzcyBkb2VzIG5vdCBhZGQgaXQgdG8gYSBzdXBlcmNsYXNzLiBTaW5jZSBpbml0aWFsaXplcnMgYXJlIHJ1biBpblxuICAgKiBjb25zdHJ1Y3RvcnMsIGluaXRpYWxpemVycyB3aWxsIHJ1biBpbiBvcmRlciBvZiB0aGUgY2xhc3MgaGllcmFyY2h5LFxuICAgKiBzdGFydGluZyB3aXRoIHN1cGVyY2xhc3NlcyBhbmQgcHJvZ3Jlc3NpbmcgdG8gdGhlIGluc3RhbmNlJ3MgY2xhc3MuXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBzdGF0aWMgYWRkSW5pdGlhbGl6ZXIoaW5pdGlhbGl6ZXI6IEluaXRpYWxpemVyKSB7XG4gICAgdGhpcy5fX3ByZXBhcmUoKTtcbiAgICAodGhpcy5faW5pdGlhbGl6ZXJzID8/PSBbXSkucHVzaChpbml0aWFsaXplcik7XG4gIH1cblxuICBzdGF0aWMgX2luaXRpYWxpemVycz86IEluaXRpYWxpemVyW107XG5cbiAgLypcbiAgICogRHVlIHRvIGNsb3N1cmUgY29tcGlsZXIgRVM2IGNvbXBpbGF0aW9uIGJ1Z3MsIEBub2NvbGxhcHNlIGlzIHJlcXVpcmVkIG9uXG4gICAqIGFsbCBzdGF0aWMgbWV0aG9kcyBhbmQgcHJvcGVydGllcyB3aXRoIGluaXRpYWxpemVycy4gIFJlZmVyZW5jZTpcbiAgICogLSBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzE3NzZcbiAgICovXG5cbiAgLyoqXG4gICAqIE1hcHMgYXR0cmlidXRlIG5hbWVzIHRvIHByb3BlcnRpZXM7IGZvciBleGFtcGxlIGBmb29iYXJgIGF0dHJpYnV0ZSB0b1xuICAgKiBgZm9vQmFyYCBwcm9wZXJ0eS4gQ3JlYXRlZCBsYXppbHkgb24gdXNlciBzdWJjbGFzc2VzIHdoZW4gZmluYWxpemluZyB0aGVcbiAgICogY2xhc3MuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBfX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXA6IEF0dHJpYnV0ZU1hcDtcblxuICAvKipcbiAgICogTWFya3MgY2xhc3MgYXMgaGF2aW5nIGJlZW4gZmluYWxpemVkLCB3aGljaCBpbmNsdWRlcyBjcmVhdGluZyBwcm9wZXJ0aWVzXG4gICAqIGZyb20gYHN0YXRpYyBwcm9wZXJ0aWVzYCwgYnV0IGRvZXMgKm5vdCogaW5jbHVkZSBhbGwgcHJvcGVydGllcyBjcmVhdGVkXG4gICAqIGZyb20gZGVjb3JhdG9ycy5cbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgZmluYWxpemVkOiB0cnVlIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBNZW1vaXplZCBsaXN0IG9mIGFsbCBlbGVtZW50IHByb3BlcnRpZXMsIGluY2x1ZGluZyBhbnkgc3VwZXJjbGFzc1xuICAgKiBwcm9wZXJ0aWVzLiBDcmVhdGVkIGxhemlseSBvbiB1c2VyIHN1YmNsYXNzZXMgd2hlbiBmaW5hbGl6aW5nIHRoZSBjbGFzcy5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHByb3BlcnRpZXNcbiAgICovXG4gIHN0YXRpYyBlbGVtZW50UHJvcGVydGllczogUHJvcGVydHlEZWNsYXJhdGlvbk1hcDtcblxuICAvKipcbiAgICogVXNlci1zdXBwbGllZCBvYmplY3QgdGhhdCBtYXBzIHByb3BlcnR5IG5hbWVzIHRvIGBQcm9wZXJ0eURlY2xhcmF0aW9uYFxuICAgKiBvYmplY3RzIGNvbnRhaW5pbmcgb3B0aW9ucyBmb3IgY29uZmlndXJpbmcgcmVhY3RpdmUgcHJvcGVydGllcy4gV2hlblxuICAgKiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCB0aGUgZWxlbWVudCB3aWxsIHVwZGF0ZSBhbmQgcmVuZGVyLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IHByb3BlcnRpZXMgYXJlIHB1YmxpYyBmaWVsZHMsIGFuZCBhcyBzdWNoLCB0aGV5IHNob3VsZCBiZVxuICAgKiBjb25zaWRlcmVkIGFzIHByaW1hcmlseSBzZXR0YWJsZSBieSBlbGVtZW50IHVzZXJzLCBlaXRoZXIgdmlhIGF0dHJpYnV0ZSBvclxuICAgKiB0aGUgcHJvcGVydHkgaXRzZWxmLlxuICAgKlxuICAgKiBHZW5lcmFsbHksIHByb3BlcnRpZXMgdGhhdCBhcmUgY2hhbmdlZCBieSB0aGUgZWxlbWVudCBzaG91bGQgYmUgcHJpdmF0ZSBvclxuICAgKiBwcm90ZWN0ZWQgZmllbGRzIGFuZCBzaG91bGQgdXNlIHRoZSBgc3RhdGU6IHRydWVgIG9wdGlvbi4gUHJvcGVydGllc1xuICAgKiBtYXJrZWQgYXMgYHN0YXRlYCBkbyBub3QgcmVmbGVjdCBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZVxuICAgKlxuICAgKiBIb3dldmVyLCBzb21ldGltZXMgZWxlbWVudCBjb2RlIGRvZXMgbmVlZCB0byBzZXQgYSBwdWJsaWMgcHJvcGVydHkuIFRoaXNcbiAgICogc2hvdWxkIHR5cGljYWxseSBvbmx5IGJlIGRvbmUgaW4gcmVzcG9uc2UgdG8gdXNlciBpbnRlcmFjdGlvbiwgYW5kIGFuIGV2ZW50XG4gICAqIHNob3VsZCBiZSBmaXJlZCBpbmZvcm1pbmcgdGhlIHVzZXI7IGZvciBleGFtcGxlLCBhIGNoZWNrYm94IHNldHMgaXRzXG4gICAqIGBjaGVja2VkYCBwcm9wZXJ0eSB3aGVuIGNsaWNrZWQgYW5kIGZpcmVzIGEgYGNoYW5nZWRgIGV2ZW50LiBNdXRhdGluZ1xuICAgKiBwdWJsaWMgcHJvcGVydGllcyBzaG91bGQgdHlwaWNhbGx5IG5vdCBiZSBkb25lIGZvciBub24tcHJpbWl0aXZlIChvYmplY3Qgb3JcbiAgICogYXJyYXkpIHByb3BlcnRpZXMuIEluIG90aGVyIGNhc2VzIHdoZW4gYW4gZWxlbWVudCBuZWVkcyB0byBtYW5hZ2Ugc3RhdGUsIGFcbiAgICogcHJpdmF0ZSBwcm9wZXJ0eSBzZXQgd2l0aCB0aGUgYHN0YXRlOiB0cnVlYCBvcHRpb24gc2hvdWxkIGJlIHVzZWQuIFdoZW5cbiAgICogbmVlZGVkLCBzdGF0ZSBwcm9wZXJ0aWVzIGNhbiBiZSBpbml0aWFsaXplZCB2aWEgcHVibGljIHByb3BlcnRpZXMgdG9cbiAgICogZmFjaWxpdGF0ZSBjb21wbGV4IGludGVyYWN0aW9ucy5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHByb3BlcnRpZXNcbiAgICovXG4gIHN0YXRpYyBwcm9wZXJ0aWVzOiBQcm9wZXJ0eURlY2xhcmF0aW9ucztcblxuICAvKipcbiAgICogTWVtb2l6ZWQgbGlzdCBvZiBhbGwgZWxlbWVudCBzdHlsZXMuXG4gICAqIENyZWF0ZWQgbGF6aWx5IG9uIHVzZXIgc3ViY2xhc3NlcyB3aGVuIGZpbmFsaXppbmcgdGhlIGNsYXNzLlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgc3R5bGVzXG4gICAqL1xuICBzdGF0aWMgZWxlbWVudFN0eWxlczogQXJyYXk8Q1NTUmVzdWx0T3JOYXRpdmU+ID0gW107XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC4gVGhlIHN0eWxlcyBzaG91bGQgYmUgZGVmaW5lZFxuICAgKiB1c2luZyB0aGUge0BsaW5rY29kZSBjc3N9IHRhZyBmdW5jdGlvbiwgdmlhIGNvbnN0cnVjdGlibGUgc3R5bGVzaGVldHMsIG9yXG4gICAqIGltcG9ydGVkIGZyb20gbmF0aXZlIENTUyBtb2R1bGUgc2NyaXB0cy5cbiAgICpcbiAgICogTm90ZSBvbiBDb250ZW50IFNlY3VyaXR5IFBvbGljeTpcbiAgICpcbiAgICogRWxlbWVudCBzdHlsZXMgYXJlIGltcGxlbWVudGVkIHdpdGggYDxzdHlsZT5gIHRhZ3Mgd2hlbiB0aGUgYnJvd3NlciBkb2Vzbid0XG4gICAqIHN1cHBvcnQgYWRvcHRlZCBTdHlsZVNoZWV0cy4gVG8gdXNlIHN1Y2ggYDxzdHlsZT5gIHRhZ3Mgd2l0aCB0aGUgc3R5bGUtc3JjXG4gICAqIENTUCBkaXJlY3RpdmUsIHRoZSBzdHlsZS1zcmMgdmFsdWUgbXVzdCBlaXRoZXIgaW5jbHVkZSAndW5zYWZlLWlubGluZScgb3JcbiAgICogYG5vbmNlLTxiYXNlNjQtdmFsdWU+YCB3aXRoIGA8YmFzZTY0LXZhbHVlPmAgcmVwbGFjZWQgYmUgYSBzZXJ2ZXItZ2VuZXJhdGVkXG4gICAqIG5vbmNlLlxuICAgKlxuICAgKiBUbyBwcm92aWRlIGEgbm9uY2UgdG8gdXNlIG9uIGdlbmVyYXRlZCBgPHN0eWxlPmAgZWxlbWVudHMsIHNldFxuICAgKiBgd2luZG93LmxpdE5vbmNlYCB0byBhIHNlcnZlci1nZW5lcmF0ZWQgbm9uY2UgaW4geW91ciBwYWdlJ3MgSFRNTCwgYmVmb3JlXG4gICAqIGxvYWRpbmcgYXBwbGljYXRpb24gY29kZTpcbiAgICpcbiAgICogYGBgaHRtbFxuICAgKiA8c2NyaXB0PlxuICAgKiAgIC8vIEdlbmVyYXRlZCBhbmQgdW5pcXVlIHBlciByZXF1ZXN0OlxuICAgKiAgIHdpbmRvdy5saXROb25jZSA9ICdhMWIyYzNkNCc7XG4gICAqIDwvc2NyaXB0PlxuICAgKiBgYGBcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHN0eWxlc1xuICAgKi9cbiAgc3RhdGljIHN0eWxlcz86IENTU1Jlc3VsdEdyb3VwO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IGF0dHJpYnV0ZXNcbiAgICovXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIC8vIEVuc3VyZSB3ZSd2ZSBjcmVhdGVkIGFsbCBwcm9wZXJ0aWVzXG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIC8vIHRoaXMuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIGlzIG9ubHkgdW5kZWZpbmVkIGFmdGVyIGZpbmFsaXplKCkgaW5cbiAgICAvLyBSZWFjdGl2ZUVsZW1lbnQgaXRzZWxmLiBSZWFjdGl2ZUVsZW1lbnQub2JzZXJ2ZWRBdHRyaWJ1dGVzIGlzIG9ubHlcbiAgICAvLyBhY2Nlc3NlZCB3aXRoIFJlYWN0aXZlRWxlbWVudCBhcyB0aGUgcmVjZWl2ZXIgd2hlbiBhIHN1YmNsYXNzIG9yIG1peGluXG4gICAgLy8gY2FsbHMgc3VwZXIub2JzZXJ2ZWRBdHRyaWJ1dGVzXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwICYmIFsuLi50aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcC5rZXlzKCldXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX19pbnN0YW5jZVByb3BlcnRpZXM/OiBQcm9wZXJ0eVZhbHVlcyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHByb3BlcnR5IGFjY2Vzc29yIG9uIHRoZSBlbGVtZW50IHByb3RvdHlwZSBpZiBvbmUgZG9lcyBub3QgZXhpc3RcbiAgICogYW5kIHN0b3JlcyBhIHtAbGlua2NvZGUgUHJvcGVydHlEZWNsYXJhdGlvbn0gZm9yIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZVxuICAgKiBnaXZlbiBvcHRpb25zLiBUaGUgcHJvcGVydHkgc2V0dGVyIGNhbGxzIHRoZSBwcm9wZXJ0eSdzIGBoYXNDaGFuZ2VkYFxuICAgKiBwcm9wZXJ0eSBvcHRpb24gb3IgdXNlcyBhIHN0cmljdCBpZGVudGl0eSBjaGVjayB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3RcbiAgICogdG8gcmVxdWVzdCBhbiB1cGRhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIG1heSBiZSBvdmVycmlkZGVuIHRvIGN1c3RvbWl6ZSBwcm9wZXJ0aWVzOyBob3dldmVyLFxuICAgKiB3aGVuIGRvaW5nIHNvLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGBzdXBlci5jcmVhdGVQcm9wZXJ0eWAgdG8gZW5zdXJlXG4gICAqIHRoZSBwcm9wZXJ0eSBpcyBzZXR1cCBjb3JyZWN0bHkuIFRoaXMgbWV0aG9kIGNhbGxzXG4gICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgIGludGVybmFsbHkgdG8gZ2V0IGEgZGVzY3JpcHRvciB0byBpbnN0YWxsLlxuICAgKiBUbyBjdXN0b21pemUgd2hhdCBwcm9wZXJ0aWVzIGRvIHdoZW4gdGhleSBhcmUgZ2V0IG9yIHNldCwgb3ZlcnJpZGVcbiAgICogYGdldFByb3BlcnR5RGVzY3JpcHRvcmAuIFRvIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBwcm9wZXJ0eSxcbiAgICogaW1wbGVtZW50IGBjcmVhdGVQcm9wZXJ0eWAgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBzdGF0aWMgY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucykge1xuICAgKiAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtteU9wdGlvbjogdHJ1ZX0pO1xuICAgKiAgIHN1cGVyLmNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgcHJvcGVydGllc1xuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVByb3BlcnR5KFxuICAgIG5hbWU6IFByb3BlcnR5S2V5LFxuICAgIG9wdGlvbnM6IFByb3BlcnR5RGVjbGFyYXRpb24gPSBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvblxuICApIHtcbiAgICAvLyBJZiB0aGlzIGlzIGEgc3RhdGUgcHJvcGVydHksIGZvcmNlIHRoZSBhdHRyaWJ1dGUgdG8gZmFsc2UuXG4gICAgaWYgKG9wdGlvbnMuc3RhdGUpIHtcbiAgICAgIChvcHRpb25zIGFzIE11dGFibGU8UHJvcGVydHlEZWNsYXJhdGlvbiwgJ2F0dHJpYnV0ZSc+KS5hdHRyaWJ1dGUgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fX3ByZXBhcmUoKTtcbiAgICAvLyBXaGV0aGVyIHRoaXMgcHJvcGVydHkgaXMgd3JhcHBpbmcgYWNjZXNzb3JzLlxuICAgIC8vIEhlbHBzIGNvbnRyb2wgdGhlIGluaXRpYWwgdmFsdWUgY2hhbmdlIGFuZCByZWZsZWN0aW9uIGxvZ2ljLlxuICAgIGlmICh0aGlzLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUob3B0aW9ucyk7XG4gICAgICBvcHRpb25zLndyYXBwZWQgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLnNldChuYW1lLCBvcHRpb25zKTtcbiAgICBpZiAoIW9wdGlvbnMubm9BY2Nlc3Nvcikge1xuICAgICAgY29uc3Qga2V5ID0gREVWX01PREVcbiAgICAgICAgPyAvLyBVc2UgU3ltYm9sLmZvciBpbiBkZXYgbW9kZSB0byBtYWtlIGl0IGVhc2llciB0byBtYWludGFpbiBzdGF0ZVxuICAgICAgICAgIC8vIHdoZW4gZG9pbmcgSE1SLlxuICAgICAgICAgIFN5bWJvbC5mb3IoYCR7U3RyaW5nKG5hbWUpfSAoQHByb3BlcnR5KCkgY2FjaGUpYClcbiAgICAgICAgOiBTeW1ib2woKTtcbiAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLmdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpO1xuICAgICAgaWYgKGRlc2NyaXB0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eSh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIGJlIGRlZmluZWQgb24gdGhlIGdpdmVuIG5hbWVkIHByb3BlcnR5LlxuICAgKiBJZiBubyBkZXNjcmlwdG9yIGlzIHJldHVybmVkLCB0aGUgcHJvcGVydHkgd2lsbCBub3QgYmVjb21lIGFuIGFjY2Vzc29yLlxuICAgKiBGb3IgZXhhbXBsZSxcbiAgICpcbiAgICogYGBgdHNcbiAgICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAqICAgc3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpIHtcbiAgICogICAgIGNvbnN0IGRlZmF1bHREZXNjcmlwdG9yID1cbiAgICogICAgICAgICBzdXBlci5nZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKTtcbiAgICogICAgIGNvbnN0IHNldHRlciA9IGRlZmF1bHREZXNjcmlwdG9yLnNldDtcbiAgICogICAgIHJldHVybiB7XG4gICAqICAgICAgIGdldDogZGVmYXVsdERlc2NyaXB0b3IuZ2V0LFxuICAgKiAgICAgICBzZXQodmFsdWUpIHtcbiAgICogICAgICAgICBzZXR0ZXIuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAqICAgICAgICAgLy8gY3VzdG9tIGFjdGlvbi5cbiAgICogICAgICAgfSxcbiAgICogICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgKiAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgcHJvcGVydGllc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBnZXRQcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgbmFtZTogUHJvcGVydHlLZXksXG4gICAga2V5OiBzdHJpbmcgfCBzeW1ib2wsXG4gICAgb3B0aW9uczogUHJvcGVydHlEZWNsYXJhdGlvblxuICApOiBQcm9wZXJ0eURlc2NyaXB0b3IgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHtnZXQsIHNldH0gPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcy5wcm90b3R5cGUsIG5hbWUpID8/IHtcbiAgICAgIGdldCh0aGlzOiBSZWFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba2V5IGFzIGtleW9mIHR5cGVvZiB0aGlzXTtcbiAgICAgIH0sXG4gICAgICBzZXQodGhpczogUmVhY3RpdmVFbGVtZW50LCB2OiB1bmtub3duKSB7XG4gICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZyB8IHN5bWJvbCwgdW5rbm93bj4pW2tleV0gPSB2O1xuICAgICAgfSxcbiAgICB9O1xuICAgIGlmIChERVZfTU9ERSAmJiBnZXQgPT0gbnVsbCkge1xuICAgICAgaWYgKCd2YWx1ZScgaW4gKGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLnByb3RvdHlwZSwgbmFtZSkgPz8ge30pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRmllbGQgJHtKU09OLnN0cmluZ2lmeShTdHJpbmcobmFtZSkpfSBvbiBgICtcbiAgICAgICAgICAgIGAke3RoaXMubmFtZX0gd2FzIGRlY2xhcmVkIGFzIGEgcmVhY3RpdmUgcHJvcGVydHkgYCArXG4gICAgICAgICAgICBgYnV0IGl0J3MgYWN0dWFsbHkgZGVjbGFyZWQgYXMgYSB2YWx1ZSBvbiB0aGUgcHJvdG90eXBlLiBgICtcbiAgICAgICAgICAgIGBVc3VhbGx5IHRoaXMgaXMgZHVlIHRvIHVzaW5nIEBwcm9wZXJ0eSBvciBAc3RhdGUgb24gYSBtZXRob2QuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAncmVhY3RpdmUtcHJvcGVydHktd2l0aG91dC1nZXR0ZXInLFxuICAgICAgICBgRmllbGQgJHtKU09OLnN0cmluZ2lmeShTdHJpbmcobmFtZSkpfSBvbiBgICtcbiAgICAgICAgICBgJHt0aGlzLm5hbWV9IHdhcyBkZWNsYXJlZCBhcyBhIHJlYWN0aXZlIHByb3BlcnR5IGAgK1xuICAgICAgICAgIGBidXQgaXQgZG9lcyBub3QgaGF2ZSBhIGdldHRlci4gVGhpcyB3aWxsIGJlIGFuIGVycm9yIGluIGEgYCArXG4gICAgICAgICAgYGZ1dHVyZSB2ZXJzaW9uIG9mIExpdC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZ2V0LFxuICAgICAgc2V0KHRoaXM6IFJlYWN0aXZlRWxlbWVudCwgdmFsdWU6IHVua25vd24pIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQ/LmNhbGwodGhpcyk7XG4gICAgICAgIHNldD8uY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSwgb3B0aW9ucyk7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHByb3BlcnR5IG9wdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICogVGhlc2Ugb3B0aW9ucyBhcmUgZGVmaW5lZCB3aXRoIGEgYFByb3BlcnR5RGVjbGFyYXRpb25gIHZpYSB0aGUgYHByb3BlcnRpZXNgXG4gICAqIG9iamVjdCBvciB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIGFuZCBhcmUgcmVnaXN0ZXJlZCBpblxuICAgKiBgY3JlYXRlUHJvcGVydHkoLi4uKWAuXG4gICAqXG4gICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIFwiZmluYWxcIiBhbmQgbm90IG92ZXJyaWRkZW4uIFRvXG4gICAqIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBnaXZlbiBwcm9wZXJ0eSwgb3ZlcnJpZGVcbiAgICoge0BsaW5rY29kZSBjcmVhdGVQcm9wZXJ0eX0uXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBmaW5hbFxuICAgKiBAY2F0ZWdvcnkgcHJvcGVydGllc1xuICAgKi9cbiAgc3RhdGljIGdldFByb3BlcnR5T3B0aW9ucyhuYW1lOiBQcm9wZXJ0eUtleSkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLmdldChuYW1lKSA/PyBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjtcbiAgfVxuXG4gIC8vIFRlbXBvcmFyeSwgdW50aWwgZ29vZ2xlMyBpcyBvbiBUeXBlU2NyaXB0IDUuMlxuICBkZWNsYXJlIHN0YXRpYyBbU3ltYm9sLm1ldGFkYXRhXTogb2JqZWN0ICYgUmVjb3JkPFByb3BlcnR5S2V5LCB1bmtub3duPjtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgc3RhdGljIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBjbGFzcyB1c2VkIGluIGJvb2trZWVwaW5nXG4gICAqIGZvciBlbGVtZW50IHByb3BlcnRpZXMsIGluaXRpYWxpemVycywgZXRjLlxuICAgKlxuICAgKiBDYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGJ5IGNvZGUgdGhhdCBuZWVkcyB0byBlbnN1cmUgdGhlc2VcbiAgICogcHJvcGVydGllcyBleGlzdCBiZWZvcmUgdXNpbmcgdGhlbS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgZW5zdXJlcyB0aGUgc3VwZXJjbGFzcyBpcyBmaW5hbGl6ZWQgc28gdGhhdCBpbmhlcml0ZWRcbiAgICogcHJvcGVydHkgbWV0YWRhdGEgY2FuIGJlIGNvcGllZCBkb3duLlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX19wcmVwYXJlKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZWxlbWVudFByb3BlcnRpZXMnLCB0aGlzKSlcbiAgICApIHtcbiAgICAgIC8vIEFscmVhZHkgcHJlcGFyZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRmluYWxpemUgYW55IHN1cGVyY2xhc3Nlc1xuICAgIGNvbnN0IHN1cGVyQ3RvciA9IGdldFByb3RvdHlwZU9mKHRoaXMpIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQ7XG4gICAgc3VwZXJDdG9yLmZpbmFsaXplKCk7XG5cbiAgICAvLyBDcmVhdGUgb3duIHNldCBvZiBpbml0aWFsaXplcnMgZm9yIHRoaXMgY2xhc3MgaWYgYW55IGV4aXN0IG9uIHRoZVxuICAgIC8vIHN1cGVyY2xhc3MgYW5kIGNvcHkgdGhlbSBkb3duLiBOb3RlLCBmb3IgYSBzbWFsbCBwZXJmIGJvb3N0LCBhdm9pZFxuICAgIC8vIGNyZWF0aW5nIGluaXRpYWxpemVycyB1bmxlc3MgbmVlZGVkLlxuICAgIGlmIChzdXBlckN0b3IuX2luaXRpYWxpemVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9pbml0aWFsaXplcnMgPSBbLi4uc3VwZXJDdG9yLl9pbml0aWFsaXplcnNdO1xuICAgIH1cbiAgICAvLyBJbml0aWFsaXplIGVsZW1lbnRQcm9wZXJ0aWVzIGZyb20gdGhlIHN1cGVyY2xhc3NcbiAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzID0gbmV3IE1hcChzdXBlckN0b3IuZWxlbWVudFByb3BlcnRpZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmlzaGVzIHNldHRpbmcgdXAgdGhlIGNsYXNzIHNvIHRoYXQgaXQncyByZWFkeSB0byBiZSByZWdpc3RlcmVkXG4gICAqIGFzIGEgY3VzdG9tIGVsZW1lbnQgYW5kIGluc3RhbnRpYXRlZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IHRoZSBSZWFjdGl2ZUVsZW1lbnQub2JzZXJ2ZWRBdHRyaWJ1dGVzIGdldHRlci5cbiAgICogSWYgeW91IG92ZXJyaWRlIHRoZSBvYnNlcnZlZEF0dHJpYnV0ZXMgZ2V0dGVyLCB5b3UgbXVzdCBlaXRoZXIgY2FsbFxuICAgKiBzdXBlci5vYnNlcnZlZEF0dHJpYnV0ZXMgdG8gdHJpZ2dlciBmaW5hbGl6YXRpb24sIG9yIGNhbGwgZmluYWxpemUoKVxuICAgKiB5b3Vyc2VsZi5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgZmluYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZmluYWxpemVkJywgdGhpcykpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLl9fcHJlcGFyZSgpO1xuXG4gICAgLy8gQ3JlYXRlIHByb3BlcnRpZXMgZnJvbSB0aGUgc3RhdGljIHByb3BlcnRpZXMgYmxvY2s6XG4gICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgncHJvcGVydGllcycsIHRoaXMpKSkge1xuICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBjb25zdCBwcm9wS2V5cyA9IFtcbiAgICAgICAgLi4uZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcyksXG4gICAgICAgIC4uLmdldE93blByb3BlcnR5U3ltYm9scyhwcm9wcyksXG4gICAgICBdIGFzIEFycmF5PGtleW9mIHR5cGVvZiBwcm9wcz47XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgcHJvcEtleXMpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVQcm9wZXJ0eShwLCBwcm9wc1twXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHByb3BlcnRpZXMgZnJvbSBzdGFuZGFyZCBkZWNvcmF0b3IgbWV0YWRhdGE6XG4gICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzW1N5bWJvbC5tZXRhZGF0YV07XG4gICAgaWYgKG1ldGFkYXRhICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbGl0UHJvcGVydHlNZXRhZGF0YS5nZXQobWV0YWRhdGEpO1xuICAgICAgaWYgKHByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtwLCBvcHRpb25zXSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50UHJvcGVydGllcy5zZXQocCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIGF0dHJpYnV0ZS10by1wcm9wZXJ0eSBtYXBcbiAgICB0aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IFtwLCBvcHRpb25zXSBvZiB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCBhdHRyID0gdGhpcy5fX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwLCBvcHRpb25zKTtcbiAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuc2V0KGF0dHIsIHApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudFN0eWxlcyA9IHRoaXMuZmluYWxpemVTdHlsZXModGhpcy5zdHlsZXMpO1xuXG4gICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnY3JlYXRlUHJvcGVydHknKSkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgJ25vLW92ZXJyaWRlLWNyZWF0ZS1wcm9wZXJ0eScsXG4gICAgICAgICAgJ092ZXJyaWRpbmcgUmVhY3RpdmVFbGVtZW50LmNyZWF0ZVByb3BlcnR5KCkgaXMgZGVwcmVjYXRlZC4gJyArXG4gICAgICAgICAgICAnVGhlIG92ZXJyaWRlIHdpbGwgbm90IGJlIGNhbGxlZCB3aXRoIHN0YW5kYXJkIGRlY29yYXRvcnMnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnZ2V0UHJvcGVydHlEZXNjcmlwdG9yJykpIHtcbiAgICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAgICduby1vdmVycmlkZS1nZXQtcHJvcGVydHktZGVzY3JpcHRvcicsXG4gICAgICAgICAgJ092ZXJyaWRpbmcgUmVhY3RpdmVFbGVtZW50LmdldFByb3BlcnR5RGVzY3JpcHRvcigpIGlzIGRlcHJlY2F0ZWQuICcgK1xuICAgICAgICAgICAgJ1RoZSBvdmVycmlkZSB3aWxsIG5vdCBiZSBjYWxsZWQgd2l0aCBzdGFuZGFyZCBkZWNvcmF0b3JzJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpb25zIHVzZWQgd2hlbiBjYWxsaW5nIGBhdHRhY2hTaGFkb3dgLiBTZXQgdGhpcyBwcm9wZXJ0eSB0byBjdXN0b21pemVcbiAgICogdGhlIG9wdGlvbnMgZm9yIHRoZSBzaGFkb3dSb290OyBmb3IgZXhhbXBsZSwgdG8gY3JlYXRlIGEgY2xvc2VkXG4gICAqIHNoYWRvd1Jvb3Q6IGB7bW9kZTogJ2Nsb3NlZCd9YC5cbiAgICpcbiAgICogTm90ZSwgdGhlc2Ugb3B0aW9ucyBhcmUgdXNlZCBpbiBgY3JlYXRlUmVuZGVyUm9vdGAuIElmIHRoaXMgbWV0aG9kXG4gICAqIGlzIGN1c3RvbWl6ZWQsIG9wdGlvbnMgc2hvdWxkIGJlIHJlc3BlY3RlZCBpZiBwb3NzaWJsZS5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgc3RhdGljIHNoYWRvd1Jvb3RPcHRpb25zOiBTaGFkb3dSb290SW5pdCA9IHttb2RlOiAnb3Blbid9O1xuXG4gIC8qKlxuICAgKiBUYWtlcyB0aGUgc3R5bGVzIHRoZSB1c2VyIHN1cHBsaWVkIHZpYSB0aGUgYHN0YXRpYyBzdHlsZXNgIHByb3BlcnR5IGFuZFxuICAgKiByZXR1cm5zIHRoZSBhcnJheSBvZiBzdHlsZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnQuXG4gICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGludGVncmF0ZSBpbnRvIGEgc3R5bGUgbWFuYWdlbWVudCBzeXN0ZW0uXG4gICAqXG4gICAqIFN0eWxlcyBhcmUgZGVkdXBsaWNhdGVkIHByZXNlcnZpbmcgdGhlIF9sYXN0XyBpbnN0YW5jZSBpbiB0aGUgbGlzdC4gVGhpc1xuICAgKiBpcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0byBhdm9pZCBkdXBsaWNhdGVkIHN0eWxlcyB0aGF0IGNhbiBvY2N1clxuICAgKiBlc3BlY2lhbGx5IHdoZW4gY29tcG9zaW5nIHZpYSBzdWJjbGFzc2luZy4gVGhlIGxhc3QgaXRlbSBpcyBrZXB0IHRvIHRyeVxuICAgKiB0byBwcmVzZXJ2ZSB0aGUgY2FzY2FkZSBvcmRlciB3aXRoIHRoZSBhc3N1bXB0aW9uIHRoYXQgaXQncyBtb3N0IGltcG9ydGFudFxuICAgKiB0aGF0IGxhc3QgYWRkZWQgc3R5bGVzIG92ZXJyaWRlIHByZXZpb3VzIHN0eWxlcy5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHN0eWxlc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbGl6ZVN0eWxlcyhcbiAgICBzdHlsZXM/OiBDU1NSZXN1bHRHcm91cFxuICApOiBBcnJheTxDU1NSZXN1bHRPck5hdGl2ZT4ge1xuICAgIGNvbnN0IGVsZW1lbnRTdHlsZXMgPSBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZXMpKSB7XG4gICAgICAvLyBEZWR1cGUgdGhlIGZsYXR0ZW5lZCBhcnJheSBpbiByZXZlcnNlIG9yZGVyIHRvIHByZXNlcnZlIHRoZSBsYXN0IGl0ZW1zLlxuICAgICAgLy8gQ2FzdGluZyB0byBBcnJheTx1bmtub3duPiB3b3JrcyBhcm91bmQgVFMgZXJyb3IgdGhhdFxuICAgICAgLy8gYXBwZWFycyB0byBjb21lIGZyb20gdHJ5aW5nIHRvIGZsYXR0ZW4gYSB0eXBlIENTU1Jlc3VsdEFycmF5LlxuICAgICAgY29uc3Qgc2V0ID0gbmV3IFNldCgoc3R5bGVzIGFzIEFycmF5PHVua25vd24+KS5mbGF0KEluZmluaXR5KS5yZXZlcnNlKCkpO1xuICAgICAgLy8gVGhlbiBwcmVzZXJ2ZSBvcmlnaW5hbCBvcmRlciBieSBhZGRpbmcgdGhlIHNldCBpdGVtcyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChjb25zdCBzIG9mIHNldCkge1xuICAgICAgICBlbGVtZW50U3R5bGVzLnVuc2hpZnQoZ2V0Q29tcGF0aWJsZVN0eWxlKHMgYXMgQ1NTUmVzdWx0T3JOYXRpdmUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0eWxlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBlbGVtZW50U3R5bGVzLnB1c2goZ2V0Q29tcGF0aWJsZVN0eWxlKHN0eWxlcykpO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudFN0eWxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBOb2RlIG9yIFNoYWRvd1Jvb3QgaW50byB3aGljaCBlbGVtZW50IERPTSBzaG91bGQgYmUgcmVuZGVyZWQuIERlZmF1bHRzXG4gICAqIHRvIGFuIG9wZW4gc2hhZG93Um9vdC5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcmVhZG9ubHkgcmVuZGVyUm9vdCE6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudDtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgbmFtZSBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSBgbmFtZWAuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBfX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShcbiAgICBuYW1lOiBQcm9wZXJ0eUtleSxcbiAgICBvcHRpb25zOiBQcm9wZXJ0eURlY2xhcmF0aW9uXG4gICkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG9wdGlvbnMuYXR0cmlidXRlO1xuICAgIHJldHVybiBhdHRyaWJ1dGUgPT09IGZhbHNlXG4gICAgICA/IHVuZGVmaW5lZFxuICAgICAgOiB0eXBlb2YgYXR0cmlidXRlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGF0dHJpYnV0ZVxuICAgICAgICA6IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJ1xuICAgICAgICAgID8gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBJbml0aWFsaXplIHRvIGFuIHVucmVzb2x2ZWQgUHJvbWlzZSBzbyB3ZSBjYW4gbWFrZSBzdXJlIHRoZSBlbGVtZW50IGhhc1xuICAvLyBjb25uZWN0ZWQgYmVmb3JlIGZpcnN0IHVwZGF0ZS5cbiAgcHJpdmF0ZSBfX3VwZGF0ZVByb21pc2UhOiBQcm9taXNlPGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZXJlIGlzIGEgcGVuZGluZyB1cGRhdGUgYXMgYSByZXN1bHQgb2YgY2FsbGluZyBgcmVxdWVzdFVwZGF0ZSgpYC5cbiAgICogU2hvdWxkIG9ubHkgYmUgcmVhZC5cbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIGlzVXBkYXRlUGVuZGluZyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJcyBzZXQgdG8gYHRydWVgIGFmdGVyIHRoZSBmaXJzdCB1cGRhdGUuIFRoZSBlbGVtZW50IGNvZGUgY2Fubm90IGFzc3VtZVxuICAgKiB0aGF0IGByZW5kZXJSb290YCBleGlzdHMgYmVmb3JlIHRoZSBlbGVtZW50IGBoYXNVcGRhdGVkYC5cbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIGhhc1VwZGF0ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogTWFwIHdpdGgga2V5cyBmb3IgYW55IHByb3BlcnRpZXMgdGhhdCBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3RcbiAgICogdXBkYXRlIGN5Y2xlIHdpdGggcHJldmlvdXMgdmFsdWVzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF8kY2hhbmdlZFByb3BlcnRpZXMhOiBQcm9wZXJ0eVZhbHVlcztcblxuICAvKipcbiAgICogUmVjb3JkcyBwcm9wZXJ0eSBkZWZhdWx0IHZhbHVlcyB3aGVuIHRoZVxuICAgKiBgdXNlRGVmYXVsdGAgb3B0aW9uIGlzIHVzZWQuXG4gICAqL1xuICBwcml2YXRlIF9fZGVmYXVsdFZhbHVlcz86IE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj47XG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgcmVmbGVjdGVkIHdoZW4gdXBkYXRlZC5cbiAgICovXG4gIHByaXZhdGUgX19yZWZsZWN0aW5nUHJvcGVydGllcz86IFNldDxQcm9wZXJ0eUtleT47XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgY3VycmVudGx5IHJlZmxlY3RpbmcgcHJvcGVydHlcbiAgICovXG4gIHByaXZhdGUgX19yZWZsZWN0aW5nUHJvcGVydHk6IFByb3BlcnR5S2V5IHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFNldCBvZiBjb250cm9sbGVycy5cbiAgICovXG4gIHByaXZhdGUgX19jb250cm9sbGVycz86IFNldDxSZWFjdGl2ZUNvbnRyb2xsZXI+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX2luaXRpYWxpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBvbmx5IG92ZXJyaWRlIHBvaW50IGZvciBjdXN0b21pemluZyB3b3JrIGRvbmUgd2hlbiBlbGVtZW50c1xuICAgKiBhcmUgY29uc3RydWN0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9faW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLl9fdXBkYXRlUHJvbWlzZSA9IG5ldyBQcm9taXNlPGJvb2xlYW4+KFxuICAgICAgKHJlcykgPT4gKHRoaXMuZW5hYmxlVXBkYXRpbmcgPSByZXMpXG4gICAgKTtcbiAgICB0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgLy8gVGhpcyBlbnF1ZXVlcyBhIG1pY3JvdGFzayB0aGF0IG11c3QgcnVuIGJlZm9yZSB0aGUgZmlyc3QgdXBkYXRlLCBzbyBpdFxuICAgIC8vIG11c3QgYmUgY2FsbGVkIGJlZm9yZSByZXF1ZXN0VXBkYXRlKClcbiAgICB0aGlzLl9fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpO1xuICAgIC8vIGVuc3VyZXMgZmlyc3QgdXBkYXRlIHdpbGwgYmUgY2F1Z2h0IGJ5IGFuIGVhcmx5IGFjY2VzcyBvZlxuICAgIC8vIGB1cGRhdGVDb21wbGV0ZWBcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5faW5pdGlhbGl6ZXJzPy5mb3JFYWNoKChpKSA9PlxuICAgICAgaSh0aGlzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAgdG8gcGFydGljaXBhdGUgaW4gdGhlIGVsZW1lbnQncyByZWFjdGl2ZVxuICAgKiB1cGRhdGUgY3ljbGUuIFRoZSBlbGVtZW50IGF1dG9tYXRpY2FsbHkgY2FsbHMgaW50byBhbnkgcmVnaXN0ZXJlZFxuICAgKiBjb250cm9sbGVycyBkdXJpbmcgaXRzIGxpZmVjeWNsZSBjYWxsYmFja3MuXG4gICAqXG4gICAqIElmIHRoZSBlbGVtZW50IGlzIGNvbm5lY3RlZCB3aGVuIGBhZGRDb250cm9sbGVyKClgIGlzIGNhbGxlZCwgdGhlXG4gICAqIGNvbnRyb2xsZXIncyBgaG9zdENvbm5lY3RlZCgpYCBjYWxsYmFjayB3aWxsIGJlIGltbWVkaWF0ZWx5IGNhbGxlZC5cbiAgICogQGNhdGVnb3J5IGNvbnRyb2xsZXJzXG4gICAqL1xuICBhZGRDb250cm9sbGVyKGNvbnRyb2xsZXI6IFJlYWN0aXZlQ29udHJvbGxlcikge1xuICAgICh0aGlzLl9fY29udHJvbGxlcnMgPz89IG5ldyBTZXQoKSkuYWRkKGNvbnRyb2xsZXIpO1xuICAgIC8vIElmIGEgY29udHJvbGxlciBpcyBhZGRlZCBhZnRlciB0aGUgZWxlbWVudCBoYXMgYmVlbiBjb25uZWN0ZWQsXG4gICAgLy8gY2FsbCBob3N0Q29ubmVjdGVkLiBOb3RlLCByZS11c2luZyBleGlzdGVuY2Ugb2YgYHJlbmRlclJvb3RgIGhlcmVcbiAgICAvLyAod2hpY2ggaXMgc2V0IGluIGNvbm5lY3RlZENhbGxiYWNrKSB0byBhdm9pZCB0aGUgbmVlZCB0byB0cmFjayBhXG4gICAgLy8gZmlyc3QgY29ubmVjdGVkIHN0YXRlLlxuICAgIGlmICh0aGlzLnJlbmRlclJvb3QgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICBjb250cm9sbGVyLmhvc3RDb25uZWN0ZWQ/LigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAgZnJvbSB0aGUgZWxlbWVudC5cbiAgICogQGNhdGVnb3J5IGNvbnRyb2xsZXJzXG4gICAqL1xuICByZW1vdmVDb250cm9sbGVyKGNvbnRyb2xsZXI6IFJlYWN0aXZlQ29udHJvbGxlcikge1xuICAgIHRoaXMuX19jb250cm9sbGVycz8uZGVsZXRlKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpeGVzIGFueSBwcm9wZXJ0aWVzIHNldCBvbiB0aGUgaW5zdGFuY2UgYmVmb3JlIHVwZ3JhZGUgdGltZS5cbiAgICogT3RoZXJ3aXNlIHRoZXNlIHdvdWxkIHNoYWRvdyB0aGUgYWNjZXNzb3IgYW5kIGJyZWFrIHRoZXNlIHByb3BlcnRpZXMuXG4gICAqIFRoZSBwcm9wZXJ0aWVzIGFyZSBzdG9yZWQgaW4gYSBNYXAgd2hpY2ggaXMgcGxheWVkIGJhY2sgYWZ0ZXIgdGhlXG4gICAqIGNvbnN0cnVjdG9yIHJ1bnMuXG4gICAqL1xuICBwcml2YXRlIF9fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBpbnN0YW5jZVByb3BlcnRpZXMgPSBuZXcgTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPigpO1xuICAgIGNvbnN0IGVsZW1lbnRQcm9wZXJ0aWVzID0gKHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudClcbiAgICAgIC5lbGVtZW50UHJvcGVydGllcztcbiAgICBmb3IgKGNvbnN0IHAgb2YgZWxlbWVudFByb3BlcnRpZXMua2V5cygpIGFzIEl0ZXJhYmxlSXRlcmF0b3I8a2V5b2YgdGhpcz4pIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgIGluc3RhbmNlUHJvcGVydGllcy5zZXQocCwgdGhpc1twXSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5zdGFuY2VQcm9wZXJ0aWVzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzID0gaW5zdGFuY2VQcm9wZXJ0aWVzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub2RlIGludG8gd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIHJlbmRlciBhbmQgYnkgZGVmYXVsdFxuICAgKiBjcmVhdGVzIGFuZCByZXR1cm5zIGFuIG9wZW4gc2hhZG93Um9vdC4gSW1wbGVtZW50IHRvIGN1c3RvbWl6ZSB3aGVyZSB0aGVcbiAgICogZWxlbWVudCdzIERPTSBpcyByZW5kZXJlZC4gRm9yIGV4YW1wbGUsIHRvIHJlbmRlciBpbnRvIHRoZSBlbGVtZW50J3NcbiAgICogY2hpbGROb2RlcywgcmV0dXJuIGB0aGlzYC5cbiAgICpcbiAgICogQHJldHVybiBSZXR1cm5zIGEgbm9kZSBpbnRvIHdoaWNoIHRvIHJlbmRlci5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIGNyZWF0ZVJlbmRlclJvb3QoKTogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHtcbiAgICBjb25zdCByZW5kZXJSb290ID1cbiAgICAgIHRoaXMuc2hhZG93Um9vdCA/P1xuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coXG4gICAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLnNoYWRvd1Jvb3RPcHRpb25zXG4gICAgICApO1xuICAgIGFkb3B0U3R5bGVzKFxuICAgICAgcmVuZGVyUm9vdCxcbiAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmVsZW1lbnRTdHlsZXNcbiAgICApO1xuICAgIHJldHVybiByZW5kZXJSb290O1xuICB9XG5cbiAgLyoqXG4gICAqIE9uIGZpcnN0IGNvbm5lY3Rpb24sIGNyZWF0ZXMgdGhlIGVsZW1lbnQncyByZW5kZXJSb290LCBzZXRzIHVwXG4gICAqIGVsZW1lbnQgc3R5bGluZywgYW5kIGVuYWJsZXMgdXBkYXRpbmcuXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIC8vIENyZWF0ZSByZW5kZXJSb290IGJlZm9yZSBjb250cm9sbGVycyBgaG9zdENvbm5lY3RlZGBcbiAgICAodGhpcyBhcyBNdXRhYmxlPHR5cGVvZiB0aGlzLCAncmVuZGVyUm9vdCc+KS5yZW5kZXJSb290ID8/PVxuICAgICAgdGhpcy5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgdGhpcy5lbmFibGVVcGRhdGluZyh0cnVlKTtcbiAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdENvbm5lY3RlZD8uKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIGZpbmFsIGFuZCBub3Qgb3ZlcnJpZGRlbi4gSXQgaXNcbiAgICogb3ZlcnJpZGRlbiBvbiB0aGUgZWxlbWVudCBpbnN0YW5jZSB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0cmlnZ2VycyB0aGUgZmlyc3RcbiAgICogdXBkYXRlLlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIGVuYWJsZVVwZGF0aW5nKF9yZXF1ZXN0ZWRVcGRhdGU6IGJvb2xlYW4pIHt9XG5cbiAgLyoqXG4gICAqIEFsbG93cyBmb3IgYHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKClgIGluIGV4dGVuc2lvbnMgd2hpbGVcbiAgICogcmVzZXJ2aW5nIHRoZSBwb3NzaWJpbGl0eSBvZiBtYWtpbmcgbm9uLWJyZWFraW5nIGZlYXR1cmUgYWRkaXRpb25zXG4gICAqIHdoZW4gZGlzY29ubmVjdGluZyBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuX19jb250cm9sbGVycz8uZm9yRWFjaCgoYykgPT4gYy5ob3N0RGlzY29ubmVjdGVkPy4oKSk7XG4gIH1cblxuICAvKipcbiAgICogU3luY2hyb25pemVzIHByb3BlcnR5IHZhbHVlcyB3aGVuIGF0dHJpYnV0ZXMgY2hhbmdlLlxuICAgKlxuICAgKiBTcGVjaWZpY2FsbHksIHdoZW4gYW4gYXR0cmlidXRlIGlzIHNldCwgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgaXMgc2V0LlxuICAgKiBZb3Ugc2hvdWxkIHJhcmVseSBuZWVkIHRvIGltcGxlbWVudCB0aGlzIGNhbGxiYWNrLiBJZiB0aGlzIG1ldGhvZCBpc1xuICAgKiBvdmVycmlkZGVuLCBgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIF9vbGQsIHZhbHVlKWAgbXVzdCBiZVxuICAgKiBjYWxsZWQuXG4gICAqXG4gICAqIFNlZSBbcmVzcG9uZGluZyB0byBhdHRyaWJ1dGUgY2hhbmdlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYl9jb21wb25lbnRzL1VzaW5nX2N1c3RvbV9lbGVtZW50cyNyZXNwb25kaW5nX3RvX2F0dHJpYnV0ZV9jaGFuZ2VzKVxuICAgKiBvbiBNRE4gZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLlxuICAgKiBAY2F0ZWdvcnkgYXR0cmlidXRlc1xuICAgKi9cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBfb2xkOiBzdHJpbmcgfCBudWxsLFxuICAgIHZhbHVlOiBzdHJpbmcgfCBudWxsXG4gICkge1xuICAgIHRoaXMuXyRhdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX19wcm9wZXJ0eVRvQXR0cmlidXRlKG5hbWU6IFByb3BlcnR5S2V5LCB2YWx1ZTogdW5rbm93bikge1xuICAgIGNvbnN0IGVsZW1Qcm9wZXJ0aWVzOiBQcm9wZXJ0eURlY2xhcmF0aW9uTWFwID0gKFxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50XG4gICAgKS5lbGVtZW50UHJvcGVydGllcztcbiAgICBjb25zdCBvcHRpb25zID0gZWxlbVByb3BlcnRpZXMuZ2V0KG5hbWUpITtcbiAgICBjb25zdCBhdHRyID0gKFxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50XG4gICAgKS5fX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShuYW1lLCBvcHRpb25zKTtcbiAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMucmVmbGVjdCA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgY29udmVydGVyID1cbiAgICAgICAgKG9wdGlvbnMuY29udmVydGVyIGFzIENvbXBsZXhBdHRyaWJ1dGVDb252ZXJ0ZXIpPy50b0F0dHJpYnV0ZSAhPT1cbiAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgICAgPyAob3B0aW9ucy5jb252ZXJ0ZXIgYXMgQ29tcGxleEF0dHJpYnV0ZUNvbnZlcnRlcilcbiAgICAgICAgICA6IGRlZmF1bHRDb252ZXJ0ZXI7XG4gICAgICBjb25zdCBhdHRyVmFsdWUgPSBjb252ZXJ0ZXIudG9BdHRyaWJ1dGUhKHZhbHVlLCBvcHRpb25zLnR5cGUpO1xuICAgICAgaWYgKFxuICAgICAgICBERVZfTU9ERSAmJlxuICAgICAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5lbmFibGVkV2FybmluZ3MhLmluY2x1ZGVzKFxuICAgICAgICAgICdtaWdyYXRpb24nXG4gICAgICAgICkgJiZcbiAgICAgICAgYXR0clZhbHVlID09PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgJ3VuZGVmaW5lZC1hdHRyaWJ1dGUtdmFsdWUnLFxuICAgICAgICAgIGBUaGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgJHtuYW1lIGFzIHN0cmluZ30gcHJvcGVydHkgaXMgYCArXG4gICAgICAgICAgICBgdW5kZWZpbmVkIG9uIGVsZW1lbnQgJHt0aGlzLmxvY2FsTmFtZX0uIFRoZSBhdHRyaWJ1dGUgd2lsbCBiZSBgICtcbiAgICAgICAgICAgIGByZW1vdmVkLCBidXQgaW4gdGhlIHByZXZpb3VzIHZlcnNpb24gb2YgXFxgUmVhY3RpdmVFbGVtZW50XFxgLCBgICtcbiAgICAgICAgICAgIGB0aGUgYXR0cmlidXRlIHdvdWxkIG5vdCBoYXZlIGNoYW5nZWQuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8gVHJhY2sgaWYgdGhlIHByb3BlcnR5IGlzIGJlaW5nIHJlZmxlY3RlZCB0byBhdm9pZFxuICAgICAgLy8gc2V0dGluZyB0aGUgcHJvcGVydHkgYWdhaW4gdmlhIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLiBOb3RlOlxuICAgICAgLy8gMS4gdGhpcyB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIGZhY3QgdGhhdCB0aGUgY2FsbGJhY2sgaXMgc3luY2hyb25vdXMuXG4gICAgICAvLyAyLiB3aWxsIGJlaGF2ZSBpbmNvcnJlY3RseSBpZiBtdWx0aXBsZSBhdHRyaWJ1dGVzIGFyZSBpbiB0aGUgcmVhY3Rpb25cbiAgICAgIC8vIHN0YWNrIGF0IHRpbWUgb2YgY2FsbGluZy4gSG93ZXZlciwgc2luY2Ugd2UgcHJvY2VzcyBhdHRyaWJ1dGVzXG4gICAgICAvLyBpbiBgdXBkYXRlYCB0aGlzIHNob3VsZCBub3QgYmUgcG9zc2libGUgKG9yIGFuIGV4dHJlbWUgY29ybmVyIGNhc2VcbiAgICAgIC8vIHRoYXQgd2UnZCBsaWtlIHRvIGRpc2NvdmVyKS5cbiAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSA9IG5hbWU7XG4gICAgICBpZiAoYXR0clZhbHVlID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyVmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgIH1cbiAgICAgIC8vIG1hcmsgc3RhdGUgbm90IHJlZmxlY3RpbmdcbiAgICAgIHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydHkgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRhdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50O1xuICAgIC8vIE5vdGUsIGhpbnQgdGhpcyBhcyBhbiBgQXR0cmlidXRlTWFwYCBzbyBjbG9zdXJlIGNsZWFybHkgdW5kZXJzdGFuZHNcbiAgICAvLyB0aGUgdHlwZTsgaXQgaGFzIGlzc3VlcyB3aXRoIHRyYWNraW5nIHR5cGVzIHRocm91Z2ggc3RhdGljc1xuICAgIGNvbnN0IHByb3BOYW1lID0gKGN0b3IuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIGFzIEF0dHJpYnV0ZU1hcCkuZ2V0KG5hbWUpO1xuICAgIC8vIFVzZSB0cmFja2luZyBpbmZvIHRvIGF2b2lkIHJlZmxlY3RpbmcgYSBwcm9wZXJ0eSB2YWx1ZSB0byBhbiBhdHRyaWJ1dGVcbiAgICAvLyBpZiBpdCB3YXMganVzdCBzZXQgYmVjYXVzZSB0aGUgYXR0cmlidXRlIGNoYW5nZWQuXG4gICAgaWYgKHByb3BOYW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSAhPT0gcHJvcE5hbWUpIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhwcm9wTmFtZSk7XG4gICAgICBjb25zdCBjb252ZXJ0ZXIgPVxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jb252ZXJ0ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICA/IHtmcm9tQXR0cmlidXRlOiBvcHRpb25zLmNvbnZlcnRlcn1cbiAgICAgICAgICA6IG9wdGlvbnMuY29udmVydGVyPy5mcm9tQXR0cmlidXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5jb252ZXJ0ZXJcbiAgICAgICAgICAgIDogZGVmYXVsdENvbnZlcnRlcjtcbiAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSA9IHByb3BOYW1lO1xuICAgICAgdGhpc1twcm9wTmFtZSBhcyBrZXlvZiB0aGlzXSA9XG4gICAgICAgIGNvbnZlcnRlci5mcm9tQXR0cmlidXRlISh2YWx1ZSwgb3B0aW9ucy50eXBlKSA/P1xuICAgICAgICB0aGlzLl9fZGVmYXVsdFZhbHVlcz8uZ2V0KHByb3BOYW1lKSA/P1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAobnVsbCBhcyBhbnkpO1xuICAgICAgLy8gbWFyayBzdGF0ZSBub3QgcmVmbGVjdGluZ1xuICAgICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3RzIGFuIHVwZGF0ZSB3aGljaCBpcyBwcm9jZXNzZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgc2hvdWxkIGJlIGNhbGxlZFxuICAgKiB3aGVuIGFuIGVsZW1lbnQgc2hvdWxkIHVwZGF0ZSBiYXNlZCBvbiBzb21lIHN0YXRlIG5vdCB0cmlnZ2VyZWQgYnkgc2V0dGluZ1xuICAgKiBhIHJlYWN0aXZlIHByb3BlcnR5LiBJbiB0aGlzIGNhc2UsIHBhc3Mgbm8gYXJndW1lbnRzLiBJdCBzaG91bGQgYWxzbyBiZVxuICAgKiBjYWxsZWQgd2hlbiBtYW51YWxseSBpbXBsZW1lbnRpbmcgYSBwcm9wZXJ0eSBzZXR0ZXIuIEluIHRoaXMgY2FzZSwgcGFzcyB0aGVcbiAgICogcHJvcGVydHkgYG5hbWVgIGFuZCBgb2xkVmFsdWVgIHRvIGVuc3VyZSB0aGF0IGFueSBjb25maWd1cmVkIHByb3BlcnR5XG4gICAqIG9wdGlvbnMgYXJlIGhvbm9yZWQuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIG5hbWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gb2xkVmFsdWUgb2xkIHZhbHVlIG9mIHJlcXVlc3RpbmcgcHJvcGVydHlcbiAgICogQHBhcmFtIG9wdGlvbnMgcHJvcGVydHkgb3B0aW9ucyB0byB1c2UgaW5zdGVhZCBvZiB0aGUgcHJldmlvdXNseVxuICAgKiAgICAgY29uZmlndXJlZCBvcHRpb25zXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICByZXF1ZXN0VXBkYXRlKFxuICAgIG5hbWU/OiBQcm9wZXJ0eUtleSxcbiAgICBvbGRWYWx1ZT86IHVua25vd24sXG4gICAgb3B0aW9ucz86IFByb3BlcnR5RGVjbGFyYXRpb25cbiAgKTogdm9pZCB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhIHByb3BlcnR5IGtleSwgcGVyZm9ybSBwcm9wZXJ0eSB1cGRhdGUgc3RlcHMuXG4gICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKERFVl9NT0RFICYmIChuYW1lIGFzIHVua25vd24pIGluc3RhbmNlb2YgRXZlbnQpIHtcbiAgICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAgIGBgLFxuICAgICAgICAgIGBUaGUgcmVxdWVzdFVwZGF0ZSgpIG1ldGhvZCB3YXMgY2FsbGVkIHdpdGggYW4gRXZlbnQgYXMgdGhlIHByb3BlcnR5IG5hbWUuIFRoaXMgaXMgcHJvYmFibHkgYSBtaXN0YWtlIGNhdXNlZCBieSBiaW5kaW5nIHRoaXMucmVxdWVzdFVwZGF0ZSBhcyBhbiBldmVudCBsaXN0ZW5lci4gSW5zdGVhZCBiaW5kIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGNhbGwgaXQgd2l0aCBubyBhcmd1bWVudHM6ICgpID0+IHRoaXMucmVxdWVzdFVwZGF0ZSgpYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudDtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpc1tuYW1lIGFzIGtleW9mIHRoaXNdO1xuICAgICAgb3B0aW9ucyA/Pz0gY3Rvci5nZXRQcm9wZXJ0eU9wdGlvbnMobmFtZSk7XG4gICAgICBjb25zdCBjaGFuZ2VkID1cbiAgICAgICAgKG9wdGlvbnMuaGFzQ2hhbmdlZCA/PyBub3RFcXVhbCkobmV3VmFsdWUsIG9sZFZhbHVlKSB8fFxuICAgICAgICAvLyBXaGVuIHRoZXJlIGlzIG5vIGNoYW5nZSwgY2hlY2sgYSBjb3JuZXIgY2FzZSB0aGF0IGNhbiBvY2N1ciB3aGVuXG4gICAgICAgIC8vIDEuIHRoZXJlJ3MgYSBpbml0aWFsIHZhbHVlIHdoaWNoIHdhcyBub3QgcmVmbGVjdGVkXG4gICAgICAgIC8vIDIuIHRoZSBwcm9wZXJ0eSBpcyBzdWJzZXF1ZW50bHkgc2V0IHRvIHRoaXMgdmFsdWUuXG4gICAgICAgIC8vIEZvciBleGFtcGxlLCBgcHJvcDoge3VzZURlZmF1bHQ6IHRydWUsIHJlZmxlY3Q6IHRydWV9YFxuICAgICAgICAvLyBhbmQgZWwucHJvcCA9ICdmb28nLiBUaGlzIHNob3VsZCBiZSBjb25zaWRlcmVkIGEgY2hhbmdlIGlmIHRoZVxuICAgICAgICAvLyBhdHRyaWJ1dGUgaXMgbm90IHNldCBiZWNhdXNlIHdlIHdpbGwgbm93IHJlZmxlY3QgdGhlIHByb3BlcnR5IHRvIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgIChvcHRpb25zLnVzZURlZmF1bHQgJiZcbiAgICAgICAgICBvcHRpb25zLnJlZmxlY3QgJiZcbiAgICAgICAgICBuZXdWYWx1ZSA9PT0gdGhpcy5fX2RlZmF1bHRWYWx1ZXM/LmdldChuYW1lKSAmJlxuICAgICAgICAgICF0aGlzLmhhc0F0dHJpYnV0ZShjdG9yLl9fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KG5hbWUsIG9wdGlvbnMpISkpO1xuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5fJGNoYW5nZVByb3BlcnR5KG5hbWUsIG9sZFZhbHVlLCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFib3J0IHRoZSByZXF1ZXN0IGlmIHRoZSBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgY2hhbmdlZC5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5pc1VwZGF0ZVBlbmRpbmcgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLl9fdXBkYXRlUHJvbWlzZSA9IHRoaXMuX19lbnF1ZXVlVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgXyRjaGFuZ2VQcm9wZXJ0eShcbiAgICBuYW1lOiBQcm9wZXJ0eUtleSxcbiAgICBvbGRWYWx1ZTogdW5rbm93bixcbiAgICB7dXNlRGVmYXVsdCwgcmVmbGVjdCwgd3JhcHBlZH06IFByb3BlcnR5RGVjbGFyYXRpb24sXG4gICAgaW5pdGlhbGl6ZVZhbHVlPzogdW5rbm93blxuICApIHtcbiAgICAvLyBSZWNvcmQgZGVmYXVsdCB2YWx1ZSB3aGVuIHVzZURlZmF1bHQgaXMgdXNlZC4gVGhpcyBhbGxvd3MgdXMgdG9cbiAgICAvLyByZXN0b3JlIHRoaXMgdmFsdWUgd2hlbiB0aGUgYXR0cmlidXRlIGlzIHJlbW92ZWQuXG4gICAgaWYgKHVzZURlZmF1bHQgJiYgISh0aGlzLl9fZGVmYXVsdFZhbHVlcyA/Pz0gbmV3IE1hcCgpKS5oYXMobmFtZSkpIHtcbiAgICAgIHRoaXMuX19kZWZhdWx0VmFsdWVzLnNldChcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaW5pdGlhbGl6ZVZhbHVlID8/IG9sZFZhbHVlID8/IHRoaXNbbmFtZSBhcyBrZXlvZiB0aGlzXVxuICAgICAgKTtcbiAgICAgIC8vIGlmIHRoaXMgaXMgbm90IHdyYXBwaW5nIGFuIGFjY2Vzc29yLCBpdCBtdXN0IGJlIGFuIGluaXRpYWwgc2V0dGluZ1xuICAgICAgLy8gYW5kIGluIHRoaXMgY2FzZSB3ZSBkbyBub3Qgd2FudCB0byByZWNvcmQgdGhlIGNoYW5nZSBvciByZWZsZWN0LlxuICAgICAgaWYgKHdyYXBwZWQgIT09IHRydWUgfHwgaW5pdGlhbGl6ZVZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBUT0RPIChqdXN0aW5mYWduYW5pKTogQ3JlYXRlIGEgYmVuY2htYXJrIG9mIE1hcC5oYXMoKSArIE1hcC5zZXQoXG4gICAgLy8gdnMganVzdCBNYXAuc2V0KClcbiAgICBpZiAoIXRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcbiAgICAgIC8vIE9uIHRoZSBpbml0aWFsIGNoYW5nZSwgdGhlIG9sZCB2YWx1ZSBzaG91bGQgYmUgYHVuZGVmaW5lZGAsIGV4Y2VwdFxuICAgICAgLy8gd2l0aCBgdXNlRGVmYXVsdGBcbiAgICAgIGlmICghdGhpcy5oYXNVcGRhdGVkICYmICF1c2VEZWZhdWx0KSB7XG4gICAgICAgIG9sZFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdGhpcy5fJGNoYW5nZWRQcm9wZXJ0aWVzLnNldChuYW1lLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIC8vIEFkZCB0byByZWZsZWN0aW5nIHByb3BlcnRpZXMgc2V0LlxuICAgIC8vIE5vdGUsIGl0J3MgaW1wb3J0YW50IHRoYXQgZXZlcnkgY2hhbmdlIGhhcyBhIGNoYW5jZSB0byBhZGQgdGhlXG4gICAgLy8gcHJvcGVydHkgdG8gYF9fcmVmbGVjdGluZ1Byb3BlcnRpZXNgLiBUaGlzIGVuc3VyZXMgc2V0dGluZ1xuICAgIC8vIGF0dHJpYnV0ZSArIHByb3BlcnR5IHJlZmxlY3RzIGNvcnJlY3RseS5cbiAgICBpZiAocmVmbGVjdCA9PT0gdHJ1ZSAmJiB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnR5ICE9PSBuYW1lKSB7XG4gICAgICAodGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID8/PSBuZXcgU2V0PFByb3BlcnR5S2V5PigpKS5hZGQobmFtZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGVsZW1lbnQgdG8gYXN5bmNocm9ub3VzbHkgdXBkYXRlLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBfX2VucXVldWVVcGRhdGUoKSB7XG4gICAgdGhpcy5pc1VwZGF0ZVBlbmRpbmcgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgYW55IHByZXZpb3VzIHVwZGF0ZSBoYXMgcmVzb2x2ZWQgYmVmb3JlIHVwZGF0aW5nLlxuICAgICAgLy8gVGhpcyBgYXdhaXRgIGFsc28gZW5zdXJlcyB0aGF0IHByb3BlcnR5IGNoYW5nZXMgYXJlIGJhdGNoZWQuXG4gICAgICBhd2FpdCB0aGlzLl9fdXBkYXRlUHJvbWlzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBSZWZpcmUgYW55IHByZXZpb3VzIGVycm9ycyBhc3luYyBzbyB0aGV5IGRvIG5vdCBkaXNydXB0IHRoZSB1cGRhdGVcbiAgICAgIC8vIGN5Y2xlLiBFcnJvcnMgYXJlIHJlZmlyZWQgc28gZGV2ZWxvcGVycyBoYXZlIGEgY2hhbmNlIHRvIG9ic2VydmVcbiAgICAgIC8vIHRoZW0sIGFuZCB0aGlzIGNhbiBiZSBkb25lIGJ5IGltcGxlbWVudGluZ1xuICAgICAgLy8gYHdpbmRvdy5vbnVuaGFuZGxlZHJlamVjdGlvbmAuXG4gICAgICBQcm9taXNlLnJlamVjdChlKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zY2hlZHVsZVVwZGF0ZSgpO1xuICAgIC8vIElmIGBzY2hlZHVsZVVwZGF0ZWAgcmV0dXJucyBhIFByb21pc2UsIHdlIGF3YWl0IGl0LiBUaGlzIGlzIGRvbmUgdG9cbiAgICAvLyBlbmFibGUgY29vcmRpbmF0aW5nIHVwZGF0ZXMgd2l0aCBhIHNjaGVkdWxlci4gTm90ZSwgdGhlIHJlc3VsdCBpc1xuICAgIC8vIGNoZWNrZWQgdG8gYXZvaWQgZGVsYXlpbmcgYW4gYWRkaXRpb25hbCBtaWNyb3Rhc2sgdW5sZXNzIHdlIG5lZWQgdG8uXG4gICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICBhd2FpdCByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy5pc1VwZGF0ZVBlbmRpbmc7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGVzIGFuIGVsZW1lbnQgdXBkYXRlLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGVcbiAgICogdGltaW5nIG9mIHVwZGF0ZXMgYnkgcmV0dXJuaW5nIGEgUHJvbWlzZS4gVGhlIHVwZGF0ZSB3aWxsIGF3YWl0IHRoZVxuICAgKiByZXR1cm5lZCBQcm9taXNlLCBhbmQgeW91IHNob3VsZCByZXNvbHZlIHRoZSBQcm9taXNlIHRvIGFsbG93IHRoZSB1cGRhdGVcbiAgICogdG8gcHJvY2VlZC4gSWYgdGhpcyBtZXRob2QgaXMgb3ZlcnJpZGRlbiwgYHN1cGVyLnNjaGVkdWxlVXBkYXRlKClgXG4gICAqIG11c3QgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBGb3IgaW5zdGFuY2UsIHRvIHNjaGVkdWxlIHVwZGF0ZXMgdG8gb2NjdXIganVzdCBiZWZvcmUgdGhlIG5leHQgZnJhbWU6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIG92ZXJyaWRlIHByb3RlY3RlZCBhc3luYyBzY2hlZHVsZVVwZGF0ZSgpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICogICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xuICAgKiAgIHN1cGVyLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgc2NoZWR1bGVVcGRhdGUoKTogdm9pZCB8IFByb21pc2U8dW5rbm93bj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGVyZm9ybVVwZGF0ZSgpO1xuICAgIGlmIChcbiAgICAgIERFVl9NT0RFICYmXG4gICAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5lbmFibGVkV2FybmluZ3MhLmluY2x1ZGVzKFxuICAgICAgICAnYXN5bmMtcGVyZm9ybS11cGRhdGUnXG4gICAgICApICYmXG4gICAgICB0eXBlb2YgKHJlc3VsdCBhcyB1bmtub3duIGFzIFByb21pc2U8dW5rbm93bj4gfCB1bmRlZmluZWQpPy50aGVuID09PVxuICAgICAgICAnZnVuY3Rpb24nXG4gICAgKSB7XG4gICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICdhc3luYy1wZXJmb3JtLXVwZGF0ZScsXG4gICAgICAgIGBFbGVtZW50ICR7dGhpcy5sb2NhbE5hbWV9IHJldHVybmVkIGEgUHJvbWlzZSBmcm9tIHBlcmZvcm1VcGRhdGUoKS4gYCArXG4gICAgICAgICAgYFRoaXMgYmVoYXZpb3IgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIGAgK1xuICAgICAgICAgIGB2ZXJzaW9uIG9mIFJlYWN0aXZlRWxlbWVudC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIGVsZW1lbnQgdXBkYXRlLiBOb3RlLCBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGR1cmluZyB0aGVcbiAgICogdXBkYXRlLCBgZmlyc3RVcGRhdGVkYCBhbmQgYHVwZGF0ZWRgIHdpbGwgbm90IGJlIGNhbGxlZC5cbiAgICpcbiAgICogQ2FsbCBgcGVyZm9ybVVwZGF0ZSgpYCB0byBpbW1lZGlhdGVseSBwcm9jZXNzIGEgcGVuZGluZyB1cGRhdGUuIFRoaXMgc2hvdWxkXG4gICAqIGdlbmVyYWxseSBub3QgYmUgbmVlZGVkLCBidXQgaXQgY2FuIGJlIGRvbmUgaW4gcmFyZSBjYXNlcyB3aGVuIHlvdSBuZWVkIHRvXG4gICAqIHVwZGF0ZSBzeW5jaHJvbm91c2x5LlxuICAgKlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIHBlcmZvcm1VcGRhdGUoKTogdm9pZCB7XG4gICAgLy8gQWJvcnQgYW55IHVwZGF0ZSBpZiBvbmUgaXMgbm90IHBlbmRpbmcgd2hlbiB0aGlzIGlzIGNhbGxlZC5cbiAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgYHBlcmZvcm1VcGRhdGVgIGlzIGNhbGxlZCBlYXJseSB0byBcImZsdXNoXCJcbiAgICAvLyB0aGUgdXBkYXRlLlxuICAgIGlmICghdGhpcy5pc1VwZGF0ZVBlbmRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGVidWdMb2dFdmVudD8uKHtraW5kOiAndXBkYXRlJ30pO1xuICAgIGlmICghdGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICAvLyBDcmVhdGUgcmVuZGVyUm9vdCBiZWZvcmUgZmlyc3QgdXBkYXRlLiBUaGlzIG9jY3VycyBpbiBgY29ubmVjdGVkQ2FsbGJhY2tgXG4gICAgICAvLyBidXQgaXMgZG9uZSBoZXJlIHRvIHN1cHBvcnQgb3V0IG9mIHRyZWUgY2FsbHMgdG8gYGVuYWJsZVVwZGF0aW5nYC9gcGVyZm9ybVVwZGF0ZWAuXG4gICAgICAodGhpcyBhcyBNdXRhYmxlPHR5cGVvZiB0aGlzLCAncmVuZGVyUm9vdCc+KS5yZW5kZXJSb290ID8/PVxuICAgICAgICB0aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgICAvLyBQcm9kdWNlIHdhcm5pbmcgaWYgYW55IHJlYWN0aXZlIHByb3BlcnRpZXMgb24gdGhlIHByb3RvdHlwZSBhcmVcbiAgICAgICAgLy8gc2hhZG93ZWQgYnkgY2xhc3MgZmllbGRzLiBJbnN0YW5jZSBmaWVsZHMgc2V0IGJlZm9yZSB1cGdyYWRlIGFyZVxuICAgICAgICAvLyBkZWxldGVkIGJ5IHRoaXMgcG9pbnQsIHNvIGFueSBvd24gcHJvcGVydHkgaXMgY2F1c2VkIGJ5IGNsYXNzIGZpZWxkXG4gICAgICAgIC8vIGluaXRpYWxpemF0aW9uIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3Qgc2hhZG93ZWRQcm9wZXJ0aWVzID0gWy4uLmN0b3IuZWxlbWVudFByb3BlcnRpZXMua2V5cygpXS5maWx0ZXIoXG4gICAgICAgICAgKHApID0+IHRoaXMuaGFzT3duUHJvcGVydHkocCkgJiYgcCBpbiBnZXRQcm90b3R5cGVPZih0aGlzKVxuICAgICAgICApO1xuICAgICAgICBpZiAoc2hhZG93ZWRQcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgb24gZWxlbWVudCAke3RoaXMubG9jYWxOYW1lfSB3aWxsIG5vdCBgICtcbiAgICAgICAgICAgICAgYHRyaWdnZXIgdXBkYXRlcyBhcyBleHBlY3RlZCBiZWNhdXNlIHRoZXkgYXJlIHNldCB1c2luZyBjbGFzcyBgICtcbiAgICAgICAgICAgICAgYGZpZWxkczogJHtzaGFkb3dlZFByb3BlcnRpZXMuam9pbignLCAnKX0uIGAgK1xuICAgICAgICAgICAgICBgTmF0aXZlIGNsYXNzIGZpZWxkcyBhbmQgc29tZSBjb21waWxlZCBvdXRwdXQgd2lsbCBvdmVyd3JpdGUgYCArXG4gICAgICAgICAgICAgIGBhY2Nlc3NvcnMgdXNlZCBmb3IgZGV0ZWN0aW5nIGNoYW5nZXMuIFNlZSBgICtcbiAgICAgICAgICAgICAgYGh0dHBzOi8vbGl0LmRldi9tc2cvY2xhc3MtZmllbGQtc2hhZG93aW5nIGAgK1xuICAgICAgICAgICAgICBgZm9yIG1vcmUgaW5mb3JtYXRpb24uYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE1peGluIGluc3RhbmNlIHByb3BlcnRpZXMgb25jZSwgaWYgdGhleSBleGlzdC5cbiAgICAgIGlmICh0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBzaG91bGQgd2UgdXNlIHRoZSBzdG9yZWQgdmFsdWU/IENvdWxkIGEgbmV3IHZhbHVlXG4gICAgICAgIC8vIGhhdmUgYmVlbiBzZXQgc2luY2Ugd2Ugc3RvcmVkIHRoZSBvd24gcHJvcGVydHkgdmFsdWU/XG4gICAgICAgIGZvciAoY29uc3QgW3AsIHZhbHVlXSBvZiB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgdGhpc1twIGFzIGtleW9mIHRoaXNdID0gdmFsdWUgYXMgdGhpc1trZXlvZiB0aGlzXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgLy8gVHJpZ2dlciBpbml0aWFsIHZhbHVlIHJlZmxlY3Rpb24gYW5kIHBvcHVsYXRlIHRoZSBpbml0aWFsXG4gICAgICAvLyBgY2hhbmdlZFByb3BlcnRpZXNgIG1hcCwgYnV0IG9ubHkgZm9yIHRoZSBjYXNlIG9mIHByb3BlcnRpZXMgY3JlYXRlZFxuICAgICAgLy8gdmlhIGBjcmVhdGVQcm9wZXJ0eWAgb24gYWNjZXNzb3JzLCB3aGljaCB3aWxsIG5vdCBoYXZlIGFscmVhZHlcbiAgICAgIC8vIHBvcHVsYXRlZCB0aGUgYGNoYW5nZWRQcm9wZXJ0aWVzYCBtYXAgc2luY2UgdGhleSBhcmUgbm90IHNldC5cbiAgICAgIC8vIFdlIGNhbid0IGtub3cgaWYgdGhlc2UgYWNjZXNzb3JzIGhhZCBpbml0aWFsaXplcnMsIHNvIHdlIGp1c3Qgc2V0XG4gICAgICAvLyB0aGVtIGFueXdheSAtIGEgZGlmZmVyZW5jZSBmcm9tIGV4cGVyaW1lbnRhbCBkZWNvcmF0b3JzIG9uIGZpZWxkcyBhbmRcbiAgICAgIC8vIHN0YW5kYXJkIGRlY29yYXRvcnMgb24gYXV0by1hY2Nlc3NvcnMuXG4gICAgICAvLyBGb3IgY29udGV4dCBzZWU6XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGl0L2xpdC9wdWxsLzQxODMjaXNzdWVjb21tZW50LTE3MTE5NTk2MzVcbiAgICAgIGNvbnN0IGVsZW1lbnRQcm9wZXJ0aWVzID0gKHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudClcbiAgICAgICAgLmVsZW1lbnRQcm9wZXJ0aWVzO1xuICAgICAgaWYgKGVsZW1lbnRQcm9wZXJ0aWVzLnNpemUgPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3AsIG9wdGlvbnNdIG9mIGVsZW1lbnRQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgY29uc3Qge3dyYXBwZWR9ID0gb3B0aW9ucztcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXNbcCBhcyBrZXlvZiB0aGlzXTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB3cmFwcGVkID09PSB0cnVlICYmXG4gICAgICAgICAgICAhdGhpcy5fJGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhwKSAmJlxuICAgICAgICAgICAgdmFsdWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fJGNoYW5nZVByb3BlcnR5KHAsIHVuZGVmaW5lZCwgb3B0aW9ucywgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgY29uc3QgY2hhbmdlZFByb3BlcnRpZXMgPSB0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXM7XG4gICAgdHJ5IHtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRoaXMuc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgdGhpcy53aWxsVXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5fX2NvbnRyb2xsZXJzPy5mb3JFYWNoKChjKSA9PiBjLmhvc3RVcGRhdGU/LigpKTtcbiAgICAgICAgdGhpcy51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fX21hcmtVcGRhdGVkKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gUHJldmVudCBgZmlyc3RVcGRhdGVkYCBhbmQgYHVwZGF0ZWRgIGZyb20gcnVubmluZyB3aGVuIHRoZXJlJ3MgYW5cbiAgICAgIC8vIHVwZGF0ZSBleGNlcHRpb24uXG4gICAgICBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICAgIC8vIEVuc3VyZSBlbGVtZW50IGNhbiBhY2NlcHQgYWRkaXRpb25hbCB1cGRhdGVzIGFmdGVyIGFuIGV4Y2VwdGlvbi5cbiAgICAgIHRoaXMuX19tYXJrVXBkYXRlZCgpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgLy8gVGhlIHVwZGF0ZSBpcyBubyBsb25nZXIgY29uc2lkZXJlZCBwZW5kaW5nIGFuZCBmdXJ0aGVyIHVwZGF0ZXMgYXJlIG5vdyBhbGxvd2VkLlxuICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgIHRoaXMuXyRkaWRVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIGJlZm9yZSBgdXBkYXRlKClgIHRvIGNvbXB1dGUgdmFsdWVzIG5lZWRlZCBkdXJpbmcgdGhlIHVwZGF0ZS5cbiAgICpcbiAgICogSW1wbGVtZW50IGB3aWxsVXBkYXRlYCB0byBjb21wdXRlIHByb3BlcnR5IHZhbHVlcyB0aGF0IGRlcGVuZCBvbiBvdGhlclxuICAgKiBwcm9wZXJ0aWVzIGFuZCBhcmUgdXNlZCBpbiB0aGUgcmVzdCBvZiB0aGUgdXBkYXRlIHByb2Nlc3MuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHdpbGxVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICogICAvLyBvbmx5IG5lZWQgdG8gY2hlY2sgY2hhbmdlZCBwcm9wZXJ0aWVzIGZvciBhbiBleHBlbnNpdmUgY29tcHV0YXRpb24uXG4gICAqICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnZmlyc3ROYW1lJykgfHwgY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdsYXN0TmFtZScpKSB7XG4gICAqICAgICB0aGlzLnNoYSA9IGNvbXB1dGVTSEEoYCR7dGhpcy5maXJzdE5hbWV9ICR7dGhpcy5sYXN0TmFtZX1gKTtcbiAgICogICB9XG4gICAqIH1cbiAgICpcbiAgICogcmVuZGVyKCkge1xuICAgKiAgIHJldHVybiBodG1sYFNIQTogJHt0aGlzLnNoYX1gO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIHdpbGxVcGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge31cblxuICAvLyBOb3RlLCB0aGlzIGlzIGFuIG92ZXJyaWRlIHBvaW50IGZvciBwb2x5ZmlsbC1zdXBwb3J0LlxuICAvLyBAaW50ZXJuYWxcbiAgXyRkaWRVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgdGhpcy5fX2NvbnRyb2xsZXJzPy5mb3JFYWNoKChjKSA9PiBjLmhvc3RVcGRhdGVkPy4oKSk7XG4gICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIHRoaXMuaGFzVXBkYXRlZCA9IHRydWU7XG4gICAgICB0aGlzLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgaWYgKFxuICAgICAgREVWX01PREUgJiZcbiAgICAgIHRoaXMuaXNVcGRhdGVQZW5kaW5nICYmXG4gICAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5lbmFibGVkV2FybmluZ3MhLmluY2x1ZGVzKFxuICAgICAgICAnY2hhbmdlLWluLXVwZGF0ZSdcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgJ2NoYW5nZS1pbi11cGRhdGUnLFxuICAgICAgICBgRWxlbWVudCAke3RoaXMubG9jYWxOYW1lfSBzY2hlZHVsZWQgYW4gdXBkYXRlIGAgK1xuICAgICAgICAgIGAoZ2VuZXJhbGx5IGJlY2F1c2UgYSBwcm9wZXJ0eSB3YXMgc2V0KSBgICtcbiAgICAgICAgICBgYWZ0ZXIgYW4gdXBkYXRlIGNvbXBsZXRlZCwgY2F1c2luZyBhIG5ldyB1cGRhdGUgdG8gYmUgc2NoZWR1bGVkLiBgICtcbiAgICAgICAgICBgVGhpcyBpcyBpbmVmZmljaWVudCBhbmQgc2hvdWxkIGJlIGF2b2lkZWQgdW5sZXNzIHRoZSBuZXh0IHVwZGF0ZSBgICtcbiAgICAgICAgICBgY2FuIG9ubHkgYmUgc2NoZWR1bGVkIGFzIGEgc2lkZSBlZmZlY3Qgb2YgdGhlIHByZXZpb3VzIHVwZGF0ZS5gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX19tYXJrVXBkYXRlZCgpIHtcbiAgICB0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pc1VwZGF0ZVBlbmRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGNvbXBsZXRlZCB1cGRhdGluZy5cbiAgICogVGhlIFByb21pc2UgdmFsdWUgaXMgYSBib29sZWFuIHRoYXQgaXMgYHRydWVgIGlmIHRoZSBlbGVtZW50IGNvbXBsZXRlZCB0aGVcbiAgICogdXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbm90aGVyIHVwZGF0ZS4gVGhlIFByb21pc2UgcmVzdWx0IGlzIGBmYWxzZWAgaWZcbiAgICogYSBwcm9wZXJ0eSB3YXMgc2V0IGluc2lkZSBgdXBkYXRlZCgpYC4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGFuXG4gICAqIGV4Y2VwdGlvbiB3YXMgdGhyb3duIGR1cmluZyB0aGUgdXBkYXRlLlxuICAgKlxuICAgKiBUbyBhd2FpdCBhZGRpdGlvbmFsIGFzeW5jaHJvbm91cyB3b3JrLCBvdmVycmlkZSB0aGUgYGdldFVwZGF0ZUNvbXBsZXRlYFxuICAgKiBtZXRob2QuIEZvciBleGFtcGxlLCBpdCBpcyBzb21ldGltZXMgdXNlZnVsIHRvIGF3YWl0IGEgcmVuZGVyZWQgZWxlbWVudFxuICAgKiBiZWZvcmUgZnVsZmlsbGluZyB0aGlzIFByb21pc2UuIFRvIGRvIHRoaXMsIGZpcnN0IGF3YWl0XG4gICAqIGBzdXBlci5nZXRVcGRhdGVDb21wbGV0ZSgpYCwgdGhlbiBhbnkgc3Vic2VxdWVudCBzdGF0ZS5cbiAgICpcbiAgICogQHJldHVybiBBIHByb21pc2Ugb2YgYSBib29sZWFuIHRoYXQgcmVzb2x2ZXMgdG8gdHJ1ZSBpZiB0aGUgdXBkYXRlIGNvbXBsZXRlZFxuICAgKiAgICAgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgZ2V0IHVwZGF0ZUNvbXBsZXRlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLmdldFVwZGF0ZUNvbXBsZXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgcG9pbnQgZm9yIHRoZSBgdXBkYXRlQ29tcGxldGVgIHByb21pc2UuXG4gICAqXG4gICAqIEl0IGlzIG5vdCBzYWZlIHRvIG92ZXJyaWRlIHRoZSBgdXBkYXRlQ29tcGxldGVgIGdldHRlciBkaXJlY3RseSBkdWUgdG8gYVxuICAgKiBsaW1pdGF0aW9uIGluIFR5cGVTY3JpcHQgd2hpY2ggbWVhbnMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGNhbGwgYVxuICAgKiBzdXBlcmNsYXNzIGdldHRlciAoZS5nLiBgc3VwZXIudXBkYXRlQ29tcGxldGUudGhlbiguLi4pYCkgd2hlbiB0aGUgdGFyZ2V0XG4gICAqIGxhbmd1YWdlIGlzIEVTNSAoaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zMzgpLlxuICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbnN0ZWFkLiBGb3IgZXhhbXBsZTpcbiAgICpcbiAgICogYGBgdHNcbiAgICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAqICAgb3ZlcnJpZGUgYXN5bmMgZ2V0VXBkYXRlQ29tcGxldGUoKSB7XG4gICAqICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdXBlci5nZXRVcGRhdGVDb21wbGV0ZSgpO1xuICAgKiAgICAgYXdhaXQgdGhpcy5fbXlDaGlsZC51cGRhdGVDb21wbGV0ZTtcbiAgICogICAgIHJldHVybiByZXN1bHQ7XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIEEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdGhhdCByZXNvbHZlcyB0byB0cnVlIGlmIHRoZSB1cGRhdGUgY29tcGxldGVkXG4gICAqICAgICB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0VXBkYXRlQ29tcGxldGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuX191cGRhdGVQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyb2xzIHdoZXRoZXIgb3Igbm90IGB1cGRhdGUoKWAgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IHJlcXVlc3RzXG4gICAqIGFuIHVwZGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBtZXRob2QgYWx3YXlzIHJldHVybnMgYHRydWVgLCBidXQgdGhpcyBjYW4gYmVcbiAgICogY3VzdG9taXplZCB0byBjb250cm9sIHdoZW4gdG8gdXBkYXRlLlxuICAgKlxuICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKF9jaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50LiBUaGlzIG1ldGhvZCByZWZsZWN0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYXR0cmlidXRlcy5cbiAgICogSXQgY2FuIGJlIG92ZXJyaWRkZW4gdG8gcmVuZGVyIGFuZCBrZWVwIHVwZGF0ZWQgZWxlbWVudCBET00uXG4gICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyXG4gICAqIGFub3RoZXIgdXBkYXRlLlxuICAgKlxuICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgdXBkYXRlKF9jaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICAvLyBUaGUgZm9yRWFjaCgpIGV4cHJlc3Npb24gd2lsbCBvbmx5IHJ1biB3aGVuIF9fcmVmbGVjdGluZ1Byb3BlcnRpZXMgaXNcbiAgICAvLyBkZWZpbmVkLCBhbmQgaXQgcmV0dXJucyB1bmRlZmluZWQsIHNldHRpbmcgX19yZWZsZWN0aW5nUHJvcGVydGllcyB0b1xuICAgIC8vIHVuZGVmaW5lZFxuICAgIHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydGllcyAmJj0gdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLmZvckVhY2goKHApID0+XG4gICAgICB0aGlzLl9fcHJvcGVydHlUb0F0dHJpYnV0ZShwLCB0aGlzW3AgYXMga2V5b2YgdGhpc10pXG4gICAgKSBhcyB1bmRlZmluZWQ7XG4gICAgdGhpcy5fX21hcmtVcGRhdGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuZXZlciB0aGUgZWxlbWVudCBpcyB1cGRhdGVkLiBJbXBsZW1lbnQgdG8gcGVyZm9ybVxuICAgKiBwb3N0LXVwZGF0aW5nIHRhc2tzIHZpYSBET00gQVBJcywgZm9yIGV4YW1wbGUsIGZvY3VzaW5nIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvIHVwZGF0ZVxuICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCB1cGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpIHt9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgZWxlbWVudCBpcyBmaXJzdCB1cGRhdGVkLiBJbXBsZW1lbnQgdG8gcGVyZm9ybSBvbmUgdGltZVxuICAgKiB3b3JrIG9uIHRoZSBlbGVtZW50IGFmdGVyIHVwZGF0ZS5cbiAgICpcbiAgICogYGBgdHNcbiAgICogZmlyc3RVcGRhdGVkKCkge1xuICAgKiAgIHRoaXMucmVuZGVyUm9vdC5nZXRFbGVtZW50QnlJZCgnbXktdGV4dC1hcmVhJykuZm9jdXMoKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG8gdXBkYXRlXG4gICAqIGFnYWluIGFmdGVyIHRoaXMgdXBkYXRlIGN5Y2xlIGNvbXBsZXRlcy5cbiAgICpcbiAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIGZpcnN0VXBkYXRlZChfY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7fVxufVxuLy8gQXNzaWduZWQgaGVyZSB0byB3b3JrIGFyb3VuZCBhIGpzY29tcGlsZXIgYnVnIHdpdGggc3RhdGljIGZpZWxkc1xuLy8gd2hlbiBjb21waWxpbmcgdG8gRVM1LlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8zMTc3XG4oUmVhY3RpdmVFbGVtZW50IGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW1xuICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdlbGVtZW50UHJvcGVydGllcycsIFJlYWN0aXZlRWxlbWVudClcbl0gPSBuZXcgTWFwKCk7XG4oUmVhY3RpdmVFbGVtZW50IGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW1xuICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdmaW5hbGl6ZWQnLCBSZWFjdGl2ZUVsZW1lbnQpXG5dID0gbmV3IE1hcCgpO1xuXG4vLyBBcHBseSBwb2x5ZmlsbHMgaWYgYXZhaWxhYmxlXG5wb2x5ZmlsbFN1cHBvcnQ/Lih7UmVhY3RpdmVFbGVtZW50fSk7XG5cbi8vIERldiBtb2RlIHdhcm5pbmdzLi4uXG5pZiAoREVWX01PREUpIHtcbiAgLy8gRGVmYXVsdCB3YXJuaW5nIHNldC5cbiAgUmVhY3RpdmVFbGVtZW50LmVuYWJsZWRXYXJuaW5ncyA9IFtcbiAgICAnY2hhbmdlLWluLXVwZGF0ZScsXG4gICAgJ2FzeW5jLXBlcmZvcm0tdXBkYXRlJyxcbiAgXTtcbiAgY29uc3QgZW5zdXJlT3duV2FybmluZ3MgPSBmdW5jdGlvbiAoY3RvcjogdHlwZW9mIFJlYWN0aXZlRWxlbWVudCkge1xuICAgIGlmIChcbiAgICAgICFjdG9yLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2VuYWJsZWRXYXJuaW5ncycsIGN0b3IpKVxuICAgICkge1xuICAgICAgY3Rvci5lbmFibGVkV2FybmluZ3MgPSBjdG9yLmVuYWJsZWRXYXJuaW5ncyEuc2xpY2UoKTtcbiAgICB9XG4gIH07XG4gIFJlYWN0aXZlRWxlbWVudC5lbmFibGVXYXJuaW5nID0gZnVuY3Rpb24gKFxuICAgIHRoaXM6IHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQsXG4gICAgd2FybmluZzogV2FybmluZ0tpbmRcbiAgKSB7XG4gICAgZW5zdXJlT3duV2FybmluZ3ModGhpcyk7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWRXYXJuaW5ncyEuaW5jbHVkZXMod2FybmluZykpIHtcbiAgICAgIHRoaXMuZW5hYmxlZFdhcm5pbmdzIS5wdXNoKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcbiAgUmVhY3RpdmVFbGVtZW50LmRpc2FibGVXYXJuaW5nID0gZnVuY3Rpb24gKFxuICAgIHRoaXM6IHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQsXG4gICAgd2FybmluZzogV2FybmluZ0tpbmRcbiAgKSB7XG4gICAgZW5zdXJlT3duV2FybmluZ3ModGhpcyk7XG4gICAgY29uc3QgaSA9IHRoaXMuZW5hYmxlZFdhcm5pbmdzIS5pbmRleE9mKHdhcm5pbmcpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgIHRoaXMuZW5hYmxlZFdhcm5pbmdzIS5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIFJlYWN0aXZlRWxlbWVudCB1c2FnZS5cbihnbG9iYWwucmVhY3RpdmVFbGVtZW50VmVyc2lvbnMgPz89IFtdKS5wdXNoKCcyLjEuMCcpO1xuaWYgKERFVl9NT0RFICYmIGdsb2JhbC5yZWFjdGl2ZUVsZW1lbnRWZXJzaW9ucy5sZW5ndGggPiAxKSB7XG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc3N1ZVdhcm5pbmchKFxuICAgICAgJ211bHRpcGxlLXZlcnNpb25zJyxcbiAgICAgIGBNdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXQgbG9hZGVkLiBMb2FkaW5nIG11bHRpcGxlIHZlcnNpb25zIGAgK1xuICAgICAgICBgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgICApO1xuICB9KTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuY29uc3QgdD1nbG9iYWxUaGlzLGU9dC5TaGFkb3dSb290JiYodm9pZCAwPT09dC5TaGFkeUNTU3x8dC5TaGFkeUNTUy5uYXRpdmVTaGFkb3cpJiZcImFkb3B0ZWRTdHlsZVNoZWV0c1wiaW4gRG9jdW1lbnQucHJvdG90eXBlJiZcInJlcGxhY2VcImluIENTU1N0eWxlU2hlZXQucHJvdG90eXBlLHM9U3ltYm9sKCksbz1uZXcgV2Vha01hcDtjbGFzcyBue2NvbnN0cnVjdG9yKHQsZSxvKXtpZih0aGlzLl8kY3NzUmVzdWx0JD0hMCxvIT09cyl0aHJvdyBFcnJvcihcIkNTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuXCIpO3RoaXMuY3NzVGV4dD10LHRoaXMudD1lfWdldCBzdHlsZVNoZWV0KCl7bGV0IHQ9dGhpcy5vO2NvbnN0IHM9dGhpcy50O2lmKGUmJnZvaWQgMD09PXQpe2NvbnN0IGU9dm9pZCAwIT09cyYmMT09PXMubGVuZ3RoO2UmJih0PW8uZ2V0KHMpKSx2b2lkIDA9PT10JiYoKHRoaXMubz10PW5ldyBDU1NTdHlsZVNoZWV0KS5yZXBsYWNlU3luYyh0aGlzLmNzc1RleHQpLGUmJm8uc2V0KHMsdCkpfXJldHVybiB0fXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuY3NzVGV4dH19Y29uc3Qgcj10PT5uZXcgbihcInN0cmluZ1wiPT10eXBlb2YgdD90OnQrXCJcIix2b2lkIDAscyksaT0odCwuLi5lKT0+e2NvbnN0IG89MT09PXQubGVuZ3RoP3RbMF06ZS5yZWR1Y2UoKChlLHMsbyk9PmUrKHQ9PntpZighMD09PXQuXyRjc3NSZXN1bHQkKXJldHVybiB0LmNzc1RleHQ7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpcmV0dXJuIHQ7dGhyb3cgRXJyb3IoXCJWYWx1ZSBwYXNzZWQgdG8gJ2NzcycgZnVuY3Rpb24gbXVzdCBiZSBhICdjc3MnIGZ1bmN0aW9uIHJlc3VsdDogXCIrdCtcIi4gVXNlICd1bnNhZmVDU1MnIHRvIHBhc3Mgbm9uLWxpdGVyYWwgdmFsdWVzLCBidXQgdGFrZSBjYXJlIHRvIGVuc3VyZSBwYWdlIHNlY3VyaXR5LlwiKX0pKHMpK3RbbysxXSksdFswXSk7cmV0dXJuIG5ldyBuKG8sdCxzKX0sUz0ocyxvKT0+e2lmKGUpcy5hZG9wdGVkU3R5bGVTaGVldHM9by5tYXAoKHQ9PnQgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0P3Q6dC5zdHlsZVNoZWV0KSk7ZWxzZSBmb3IoY29uc3QgZSBvZiBvKXtjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxuPXQubGl0Tm9uY2U7dm9pZCAwIT09biYmby5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLG4pLG8udGV4dENvbnRlbnQ9ZS5jc3NUZXh0LHMuYXBwZW5kQ2hpbGQobyl9fSxjPWU/dD0+dDp0PT50IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldD8odD0+e2xldCBlPVwiXCI7Zm9yKGNvbnN0IHMgb2YgdC5jc3NSdWxlcyllKz1zLmNzc1RleHQ7cmV0dXJuIHIoZSl9KSh0KTp0O2V4cG9ydHtuIGFzIENTU1Jlc3VsdCxTIGFzIGFkb3B0U3R5bGVzLGkgYXMgY3NzLGMgYXMgZ2V0Q29tcGF0aWJsZVN0eWxlLGUgYXMgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzLHIgYXMgdW5zYWZlQ1NTfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy10YWcuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuY29uc3QgTk9ERV9NT0RFID0gZmFsc2U7XG5cbi8vIEFsbG93cyBtaW5pZmllcnMgdG8gcmVuYW1lIHJlZmVyZW5jZXMgdG8gZ2xvYmFsVGhpc1xuY29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgc3VwcG9ydHMgYGFkb3B0ZWRTdHlsZVNoZWV0c2AuXG4gKi9cbmV4cG9ydCBjb25zdCBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHM6IGJvb2xlYW4gPVxuICBnbG9iYWwuU2hhZG93Um9vdCAmJlxuICAoZ2xvYmFsLlNoYWR5Q1NTID09PSB1bmRlZmluZWQgfHwgZ2xvYmFsLlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdykgJiZcbiAgJ2Fkb3B0ZWRTdHlsZVNoZWV0cycgaW4gRG9jdW1lbnQucHJvdG90eXBlICYmXG4gICdyZXBsYWNlJyBpbiBDU1NTdHlsZVNoZWV0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBBIENTU1Jlc3VsdCBvciBuYXRpdmUgQ1NTU3R5bGVTaGVldC5cbiAqXG4gKiBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgY29uc3RydWN0aWJsZSBDU1Mgc3R5bGUgc2hlZXRzLCBDU1NTdHlsZVNoZWV0XG4gKiBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIHN0eWxpbmcgYWxvbmcgc2lkZSBDU1NSZXN1bHQgZnJvbSB0aGUgYGNzc2BcbiAqIHRlbXBsYXRlIHRhZy5cbiAqL1xuZXhwb3J0IHR5cGUgQ1NTUmVzdWx0T3JOYXRpdmUgPSBDU1NSZXN1bHQgfCBDU1NTdHlsZVNoZWV0O1xuXG5leHBvcnQgdHlwZSBDU1NSZXN1bHRBcnJheSA9IEFycmF5PENTU1Jlc3VsdE9yTmF0aXZlIHwgQ1NTUmVzdWx0QXJyYXk+O1xuXG4vKipcbiAqIEEgc2luZ2xlIENTU1Jlc3VsdCwgQ1NTU3R5bGVTaGVldCwgb3IgYW4gYXJyYXkgb3IgbmVzdGVkIGFycmF5cyBvZiB0aG9zZS5cbiAqL1xuZXhwb3J0IHR5cGUgQ1NTUmVzdWx0R3JvdXAgPSBDU1NSZXN1bHRPck5hdGl2ZSB8IENTU1Jlc3VsdEFycmF5O1xuXG5jb25zdCBjb25zdHJ1Y3Rpb25Ub2tlbiA9IFN5bWJvbCgpO1xuXG5jb25zdCBjc3NUYWdDYWNoZSA9IG5ldyBXZWFrTWFwPFRlbXBsYXRlU3RyaW5nc0FycmF5LCBDU1NTdHlsZVNoZWV0PigpO1xuXG4vKipcbiAqIEEgY29udGFpbmVyIGZvciBhIHN0cmluZyBvZiBDU1MgdGV4dCwgdGhhdCBtYXkgYmUgdXNlZCB0byBjcmVhdGUgYSBDU1NTdHlsZVNoZWV0LlxuICpcbiAqIENTU1Jlc3VsdCBpcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGBjc3NgLXRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFscyBhbmRcbiAqIGB1bnNhZmVDU1MoKWAuIEluIG9yZGVyIHRvIGVuc3VyZSB0aGF0IENTU1Jlc3VsdHMgYXJlIG9ubHkgY3JlYXRlZCB2aWEgdGhlXG4gKiBgY3NzYCB0YWcgYW5kIGB1bnNhZmVDU1MoKWAsIENTU1Jlc3VsdCBjYW5ub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBDU1NSZXN1bHQge1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICBbJ18kY3NzUmVzdWx0JCddID0gdHJ1ZTtcbiAgcmVhZG9ubHkgY3NzVGV4dDogc3RyaW5nO1xuICBwcml2YXRlIF9zdHlsZVNoZWV0PzogQ1NTU3R5bGVTaGVldDtcbiAgcHJpdmF0ZSBfc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBjc3NUZXh0OiBzdHJpbmcsXG4gICAgc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQsXG4gICAgc2FmZVRva2VuOiBzeW1ib2xcbiAgKSB7XG4gICAgaWYgKHNhZmVUb2tlbiAhPT0gY29uc3RydWN0aW9uVG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0NTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICB0aGlzLl9zdHJpbmdzID0gc3RyaW5ncztcbiAgfVxuXG4gIC8vIFRoaXMgaXMgYSBnZXR0ZXIgc28gdGhhdCBpdCdzIGxhenkuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zIHN0eWxlc2hlZXRzXG4gIC8vIGFyZSBub3QgY3JlYXRlZCB1bnRpbCB0aGUgZmlyc3QgZWxlbWVudCBpbnN0YW5jZSBpcyBtYWRlLlxuICBnZXQgc3R5bGVTaGVldCgpOiBDU1NTdHlsZVNoZWV0IHwgdW5kZWZpbmVkIHtcbiAgICAvLyBJZiBgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzYCBpcyB0cnVlIHRoZW4gd2UgYXNzdW1lIENTU1N0eWxlU2hlZXQgaXNcbiAgICAvLyBjb25zdHJ1Y3RhYmxlLlxuICAgIGxldCBzdHlsZVNoZWV0ID0gdGhpcy5fc3R5bGVTaGVldDtcbiAgICBjb25zdCBzdHJpbmdzID0gdGhpcy5fc3RyaW5ncztcbiAgICBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzICYmIHN0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgY2FjaGVhYmxlID0gc3RyaW5ncyAhPT0gdW5kZWZpbmVkICYmIHN0cmluZ3MubGVuZ3RoID09PSAxO1xuICAgICAgaWYgKGNhY2hlYWJsZSkge1xuICAgICAgICBzdHlsZVNoZWV0ID0gY3NzVGFnQ2FjaGUuZ2V0KHN0cmluZ3MpO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAodGhpcy5fc3R5bGVTaGVldCA9IHN0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpKS5yZXBsYWNlU3luYyhcbiAgICAgICAgICB0aGlzLmNzc1RleHRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhY2hlYWJsZSkge1xuICAgICAgICAgIGNzc1RhZ0NhY2hlLnNldChzdHJpbmdzLCBzdHlsZVNoZWV0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGVTaGVldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3NzVGV4dDtcbiAgfVxufVxuXG50eXBlIENvbnN0cnVjdGFibGVDU1NSZXN1bHQgPSBDU1NSZXN1bHQgJiB7XG4gIG5ldyAoXG4gICAgY3NzVGV4dDogc3RyaW5nLFxuICAgIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5IHwgdW5kZWZpbmVkLFxuICAgIHNhZmVUb2tlbjogc3ltYm9sXG4gICk6IENTU1Jlc3VsdDtcbn07XG5cbmNvbnN0IHRleHRGcm9tQ1NTUmVzdWx0ID0gKHZhbHVlOiBDU1NSZXN1bHRHcm91cCB8IG51bWJlcikgPT4ge1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICBpZiAoKHZhbHVlIGFzIENTU1Jlc3VsdClbJ18kY3NzUmVzdWx0JCddID09PSB0cnVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSBhcyBDU1NSZXN1bHQpLmNzc1RleHQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVmFsdWUgcGFzc2VkIHRvICdjc3MnIGZ1bmN0aW9uIG11c3QgYmUgYSAnY3NzJyBmdW5jdGlvbiByZXN1bHQ6IGAgK1xuICAgICAgICBgJHt2YWx1ZX0uIFVzZSAndW5zYWZlQ1NTJyB0byBwYXNzIG5vbi1saXRlcmFsIHZhbHVlcywgYnV0IHRha2UgY2FyZSBgICtcbiAgICAgICAgYHRvIGVuc3VyZSBwYWdlIHNlY3VyaXR5LmBcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIFdyYXAgYSB2YWx1ZSBmb3IgaW50ZXJwb2xhdGlvbiBpbiBhIHtAbGlua2NvZGUgY3NzfSB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbC5cbiAqXG4gKiBUaGlzIGlzIHVuc2FmZSBiZWNhdXNlIHVudHJ1c3RlZCBDU1MgdGV4dCBjYW4gYmUgdXNlZCB0byBwaG9uZSBob21lXG4gKiBvciBleGZpbHRyYXRlIGRhdGEgdG8gYW4gYXR0YWNrZXIgY29udHJvbGxlZCBzaXRlLiBUYWtlIGNhcmUgdG8gb25seSB1c2VcbiAqIHRoaXMgd2l0aCB0cnVzdGVkIGlucHV0LlxuICovXG5leHBvcnQgY29uc3QgdW5zYWZlQ1NTID0gKHZhbHVlOiB1bmtub3duKSA9PlxuICBuZXcgKENTU1Jlc3VsdCBhcyBDb25zdHJ1Y3RhYmxlQ1NTUmVzdWx0KShcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpLFxuICAgIHVuZGVmaW5lZCxcbiAgICBjb25zdHJ1Y3Rpb25Ub2tlblxuICApO1xuXG4vKipcbiAqIEEgdGVtcGxhdGUgbGl0ZXJhbCB0YWcgd2hpY2ggY2FuIGJlIHVzZWQgd2l0aCBMaXRFbGVtZW50J3NcbiAqIHtAbGlua2NvZGUgTGl0RWxlbWVudC5zdHlsZXN9IHByb3BlcnR5IHRvIHNldCBlbGVtZW50IHN0eWxlcy5cbiAqXG4gKiBGb3Igc2VjdXJpdHkgcmVhc29ucywgb25seSBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgYW5kIG51bWJlciBtYXkgYmUgdXNlZCBpblxuICogZW1iZWRkZWQgZXhwcmVzc2lvbnMuIFRvIGluY29ycG9yYXRlIG5vbi1saXRlcmFsIHZhbHVlcyB7QGxpbmtjb2RlIHVuc2FmZUNTU31cbiAqIG1heSBiZSB1c2VkIGluc2lkZSBhbiBleHByZXNzaW9uLlxuICovXG5leHBvcnQgY29uc3QgY3NzID0gKFxuICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSxcbiAgLi4udmFsdWVzOiAoQ1NTUmVzdWx0R3JvdXAgfCBudW1iZXIpW11cbik6IENTU1Jlc3VsdCA9PiB7XG4gIGNvbnN0IGNzc1RleHQgPVxuICAgIHN0cmluZ3MubGVuZ3RoID09PSAxXG4gICAgICA/IHN0cmluZ3NbMF1cbiAgICAgIDogdmFsdWVzLnJlZHVjZShcbiAgICAgICAgICAoYWNjLCB2LCBpZHgpID0+IGFjYyArIHRleHRGcm9tQ1NTUmVzdWx0KHYpICsgc3RyaW5nc1tpZHggKyAxXSxcbiAgICAgICAgICBzdHJpbmdzWzBdXG4gICAgICAgICk7XG4gIHJldHVybiBuZXcgKENTU1Jlc3VsdCBhcyBDb25zdHJ1Y3RhYmxlQ1NTUmVzdWx0KShcbiAgICBjc3NUZXh0LFxuICAgIHN0cmluZ3MsXG4gICAgY29uc3RydWN0aW9uVG9rZW5cbiAgKTtcbn07XG5cbi8qKlxuICogQXBwbGllcyB0aGUgZ2l2ZW4gc3R5bGVzIHRvIGEgYHNoYWRvd1Jvb3RgLiBXaGVuIFNoYWRvdyBET00gaXNcbiAqIGF2YWlsYWJsZSBidXQgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgbm90LCBzdHlsZXMgYXJlIGFwcGVuZGVkIHRvIHRoZVxuICogYHNoYWRvd1Jvb3RgIHRvIFttaW1pYyB0aGUgbmF0aXZlIGZlYXR1cmVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TaGFkb3dSb290L2Fkb3B0ZWRTdHlsZVNoZWV0cykuXG4gKiBOb3RlLCB3aGVuIHNoaW1taW5nIGlzIHVzZWQsIGFueSBzdHlsZXMgdGhhdCBhcmUgc3Vic2VxdWVudGx5IHBsYWNlZCBpbnRvXG4gKiB0aGUgc2hhZG93Um9vdCBzaG91bGQgYmUgcGxhY2VkICpiZWZvcmUqIGFueSBzaGltbWVkIGFkb3B0ZWQgc3R5bGVzLiBUaGlzXG4gKiB3aWxsIG1hdGNoIHNwZWMgYmVoYXZpb3IgdGhhdCBnaXZlcyBhZG9wdGVkIHNoZWV0cyBwcmVjZWRlbmNlIG92ZXIgc3R5bGVzIGluXG4gKiBzaGFkb3dSb290LlxuICovXG5leHBvcnQgY29uc3QgYWRvcHRTdHlsZXMgPSAoXG4gIHJlbmRlclJvb3Q6IFNoYWRvd1Jvb3QsXG4gIHN0eWxlczogQXJyYXk8Q1NTUmVzdWx0T3JOYXRpdmU+XG4pID0+IHtcbiAgaWYgKHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cykge1xuICAgIChyZW5kZXJSb290IGFzIFNoYWRvd1Jvb3QpLmFkb3B0ZWRTdHlsZVNoZWV0cyA9IHN0eWxlcy5tYXAoKHMpID0+XG4gICAgICBzIGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCA/IHMgOiBzLnN0eWxlU2hlZXQhXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGNvbnN0IHMgb2Ygc3R5bGVzKSB7XG4gICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgY29uc3Qgbm9uY2UgPSAoZ2xvYmFsIGFzIGFueSlbJ2xpdE5vbmNlJ107XG4gICAgICBpZiAobm9uY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgbm9uY2UpO1xuICAgICAgfVxuICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSAocyBhcyBDU1NSZXN1bHQpLmNzc1RleHQ7XG4gICAgICByZW5kZXJSb290LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IGNzc1Jlc3VsdEZyb21TdHlsZVNoZWV0ID0gKHNoZWV0OiBDU1NTdHlsZVNoZWV0KSA9PiB7XG4gIGxldCBjc3NUZXh0ID0gJyc7XG4gIGZvciAoY29uc3QgcnVsZSBvZiBzaGVldC5jc3NSdWxlcykge1xuICAgIGNzc1RleHQgKz0gcnVsZS5jc3NUZXh0O1xuICB9XG4gIHJldHVybiB1bnNhZmVDU1MoY3NzVGV4dCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q29tcGF0aWJsZVN0eWxlID1cbiAgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzIHx8XG4gIChOT0RFX01PREUgJiYgZ2xvYmFsLkNTU1N0eWxlU2hlZXQgPT09IHVuZGVmaW5lZClcbiAgICA/IChzOiBDU1NSZXN1bHRPck5hdGl2ZSkgPT4gc1xuICAgIDogKHM6IENTU1Jlc3VsdE9yTmF0aXZlKSA9PlxuICAgICAgICBzIGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCA/IGNzc1Jlc3VsdEZyb21TdHlsZVNoZWV0KHMpIDogcztcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuY29uc3QgdD1nbG9iYWxUaGlzLGk9dC50cnVzdGVkVHlwZXMscz1pP2kuY3JlYXRlUG9saWN5KFwibGl0LWh0bWxcIix7Y3JlYXRlSFRNTDp0PT50fSk6dm9pZCAwLGU9XCIkbGl0JFwiLGg9YGxpdCQke01hdGgucmFuZG9tKCkudG9GaXhlZCg5KS5zbGljZSgyKX0kYCxvPVwiP1wiK2gsbj1gPCR7b30+YCxyPWRvY3VtZW50LGw9KCk9PnIuY3JlYXRlQ29tbWVudChcIlwiKSxjPXQ9Pm51bGw9PT10fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdCxhPUFycmF5LmlzQXJyYXksdT10PT5hKHQpfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Py5bU3ltYm9sLml0ZXJhdG9yXSxkPVwiWyBcXHRcXG5cXGZcXHJdXCIsZj0vPCg/OighLS18XFwvW15hLXpBLVpdKXwoXFwvP1thLXpBLVpdW14+XFxzXSopfChcXC8/JCkpL2csdj0vLS0+L2csXz0vPi9nLG09UmVnRXhwKGA+fCR7ZH0oPzooW15cXFxcc1wiJz49L10rKSgke2R9Kj0ke2R9Kig/OlteIFxcdFxcblxcZlxcclwiJ1xcYDw+PV18KFwifCcpfCkpfCQpYCxcImdcIikscD0vJy9nLGc9L1wiL2csJD0vXig/OnNjcmlwdHxzdHlsZXx0ZXh0YXJlYXx0aXRsZSkkL2kseT10PT4oaSwuLi5zKT0+KHtfJGxpdFR5cGUkOnQsc3RyaW5nczppLHZhbHVlczpzfSkseD15KDEpLGI9eSgyKSx3PXkoMyksVD1TeW1ib2wuZm9yKFwibGl0LW5vQ2hhbmdlXCIpLEU9U3ltYm9sLmZvcihcImxpdC1ub3RoaW5nXCIpLEE9bmV3IFdlYWtNYXAsQz1yLmNyZWF0ZVRyZWVXYWxrZXIociwxMjkpO2Z1bmN0aW9uIFAodCxpKXtpZighYSh0KXx8IXQuaGFzT3duUHJvcGVydHkoXCJyYXdcIikpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIHRlbXBsYXRlIHN0cmluZ3MgYXJyYXlcIik7cmV0dXJuIHZvaWQgMCE9PXM/cy5jcmVhdGVIVE1MKGkpOml9Y29uc3QgVj0odCxpKT0+e2NvbnN0IHM9dC5sZW5ndGgtMSxvPVtdO2xldCByLGw9Mj09PWk/XCI8c3ZnPlwiOjM9PT1pP1wiPG1hdGg+XCI6XCJcIixjPWY7Zm9yKGxldCBpPTA7aTxzO2krKyl7Y29uc3Qgcz10W2ldO2xldCBhLHUsZD0tMSx5PTA7Zm9yKDt5PHMubGVuZ3RoJiYoYy5sYXN0SW5kZXg9eSx1PWMuZXhlYyhzKSxudWxsIT09dSk7KXk9Yy5sYXN0SW5kZXgsYz09PWY/XCIhLS1cIj09PXVbMV0/Yz12OnZvaWQgMCE9PXVbMV0/Yz1fOnZvaWQgMCE9PXVbMl0/KCQudGVzdCh1WzJdKSYmKHI9UmVnRXhwKFwiPC9cIit1WzJdLFwiZ1wiKSksYz1tKTp2b2lkIDAhPT11WzNdJiYoYz1tKTpjPT09bT9cIj5cIj09PXVbMF0/KGM9cj8/ZixkPS0xKTp2b2lkIDA9PT11WzFdP2Q9LTI6KGQ9Yy5sYXN0SW5kZXgtdVsyXS5sZW5ndGgsYT11WzFdLGM9dm9pZCAwPT09dVszXT9tOidcIic9PT11WzNdP2c6cCk6Yz09PWd8fGM9PT1wP2M9bTpjPT09dnx8Yz09PV8/Yz1mOihjPW0scj12b2lkIDApO2NvbnN0IHg9Yz09PW0mJnRbaSsxXS5zdGFydHNXaXRoKFwiLz5cIik/XCIgXCI6XCJcIjtsKz1jPT09Zj9zK246ZD49MD8oby5wdXNoKGEpLHMuc2xpY2UoMCxkKStlK3Muc2xpY2UoZCkraCt4KTpzK2grKC0yPT09ZD9pOngpfXJldHVybltQKHQsbCsodFtzXXx8XCI8Pz5cIikrKDI9PT1pP1wiPC9zdmc+XCI6Mz09PWk/XCI8L21hdGg+XCI6XCJcIikpLG9dfTtjbGFzcyBOe2NvbnN0cnVjdG9yKHtzdHJpbmdzOnQsXyRsaXRUeXBlJDpzfSxuKXtsZXQgcjt0aGlzLnBhcnRzPVtdO2xldCBjPTAsYT0wO2NvbnN0IHU9dC5sZW5ndGgtMSxkPXRoaXMucGFydHMsW2Ysdl09Vih0LHMpO2lmKHRoaXMuZWw9Ti5jcmVhdGVFbGVtZW50KGYsbiksQy5jdXJyZW50Tm9kZT10aGlzLmVsLmNvbnRlbnQsMj09PXN8fDM9PT1zKXtjb25zdCB0PXRoaXMuZWwuY29udGVudC5maXJzdENoaWxkO3QucmVwbGFjZVdpdGgoLi4udC5jaGlsZE5vZGVzKX1mb3IoO251bGwhPT0ocj1DLm5leHROb2RlKCkpJiZkLmxlbmd0aDx1Oyl7aWYoMT09PXIubm9kZVR5cGUpe2lmKHIuaGFzQXR0cmlidXRlcygpKWZvcihjb25zdCB0IG9mIHIuZ2V0QXR0cmlidXRlTmFtZXMoKSlpZih0LmVuZHNXaXRoKGUpKXtjb25zdCBpPXZbYSsrXSxzPXIuZ2V0QXR0cmlidXRlKHQpLnNwbGl0KGgpLGU9LyhbLj9AXSk/KC4qKS8uZXhlYyhpKTtkLnB1c2goe3R5cGU6MSxpbmRleDpjLG5hbWU6ZVsyXSxzdHJpbmdzOnMsY3RvcjpcIi5cIj09PWVbMV0/SDpcIj9cIj09PWVbMV0/STpcIkBcIj09PWVbMV0/TDprfSksci5yZW1vdmVBdHRyaWJ1dGUodCl9ZWxzZSB0LnN0YXJ0c1dpdGgoaCkmJihkLnB1c2goe3R5cGU6NixpbmRleDpjfSksci5yZW1vdmVBdHRyaWJ1dGUodCkpO2lmKCQudGVzdChyLnRhZ05hbWUpKXtjb25zdCB0PXIudGV4dENvbnRlbnQuc3BsaXQoaCkscz10Lmxlbmd0aC0xO2lmKHM+MCl7ci50ZXh0Q29udGVudD1pP2kuZW1wdHlTY3JpcHQ6XCJcIjtmb3IobGV0IGk9MDtpPHM7aSsrKXIuYXBwZW5kKHRbaV0sbCgpKSxDLm5leHROb2RlKCksZC5wdXNoKHt0eXBlOjIsaW5kZXg6KytjfSk7ci5hcHBlbmQodFtzXSxsKCkpfX19ZWxzZSBpZig4PT09ci5ub2RlVHlwZSlpZihyLmRhdGE9PT1vKWQucHVzaCh7dHlwZToyLGluZGV4OmN9KTtlbHNle2xldCB0PS0xO2Zvcig7LTEhPT0odD1yLmRhdGEuaW5kZXhPZihoLHQrMSkpOylkLnB1c2goe3R5cGU6NyxpbmRleDpjfSksdCs9aC5sZW5ndGgtMX1jKyt9fXN0YXRpYyBjcmVhdGVFbGVtZW50KHQsaSl7Y29uc3Qgcz1yLmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtyZXR1cm4gcy5pbm5lckhUTUw9dCxzfX1mdW5jdGlvbiBTKHQsaSxzPXQsZSl7aWYoaT09PVQpcmV0dXJuIGk7bGV0IGg9dm9pZCAwIT09ZT9zLl8kQ28/LltlXTpzLl8kQ2w7Y29uc3Qgbz1jKGkpP3ZvaWQgMDppLl8kbGl0RGlyZWN0aXZlJDtyZXR1cm4gaD8uY29uc3RydWN0b3IhPT1vJiYoaD8uXyRBTz8uKCExKSx2b2lkIDA9PT1vP2g9dm9pZCAwOihoPW5ldyBvKHQpLGguXyRBVCh0LHMsZSkpLHZvaWQgMCE9PWU/KHMuXyRDbz8/PVtdKVtlXT1oOnMuXyRDbD1oKSx2b2lkIDAhPT1oJiYoaT1TKHQsaC5fJEFTKHQsaS52YWx1ZXMpLGgsZSkpLGl9Y2xhc3MgTXtjb25zdHJ1Y3Rvcih0LGkpe3RoaXMuXyRBVj1bXSx0aGlzLl8kQU49dm9pZCAwLHRoaXMuXyRBRD10LHRoaXMuXyRBTT1pfWdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHRoaXMuXyRBTS5wYXJlbnROb2RlfWdldCBfJEFVKCl7cmV0dXJuIHRoaXMuXyRBTS5fJEFVfXUodCl7Y29uc3R7ZWw6e2NvbnRlbnQ6aX0scGFydHM6c309dGhpcy5fJEFELGU9KHQ/LmNyZWF0aW9uU2NvcGU/P3IpLmltcG9ydE5vZGUoaSwhMCk7Qy5jdXJyZW50Tm9kZT1lO2xldCBoPUMubmV4dE5vZGUoKSxvPTAsbj0wLGw9c1swXTtmb3IoO3ZvaWQgMCE9PWw7KXtpZihvPT09bC5pbmRleCl7bGV0IGk7Mj09PWwudHlwZT9pPW5ldyBSKGgsaC5uZXh0U2libGluZyx0aGlzLHQpOjE9PT1sLnR5cGU/aT1uZXcgbC5jdG9yKGgsbC5uYW1lLGwuc3RyaW5ncyx0aGlzLHQpOjY9PT1sLnR5cGUmJihpPW5ldyB6KGgsdGhpcyx0KSksdGhpcy5fJEFWLnB1c2goaSksbD1zWysrbl19byE9PWw/LmluZGV4JiYoaD1DLm5leHROb2RlKCksbysrKX1yZXR1cm4gQy5jdXJyZW50Tm9kZT1yLGV9cCh0KXtsZXQgaT0wO2Zvcihjb25zdCBzIG9mIHRoaXMuXyRBVil2b2lkIDAhPT1zJiYodm9pZCAwIT09cy5zdHJpbmdzPyhzLl8kQUkodCxzLGkpLGkrPXMuc3RyaW5ncy5sZW5ndGgtMik6cy5fJEFJKHRbaV0pKSxpKyt9fWNsYXNzIFJ7Z2V0IF8kQVUoKXtyZXR1cm4gdGhpcy5fJEFNPy5fJEFVPz90aGlzLl8kQ3Z9Y29uc3RydWN0b3IodCxpLHMsZSl7dGhpcy50eXBlPTIsdGhpcy5fJEFIPUUsdGhpcy5fJEFOPXZvaWQgMCx0aGlzLl8kQUE9dCx0aGlzLl8kQUI9aSx0aGlzLl8kQU09cyx0aGlzLm9wdGlvbnM9ZSx0aGlzLl8kQ3Y9ZT8uaXNDb25uZWN0ZWQ/PyEwfWdldCBwYXJlbnROb2RlKCl7bGV0IHQ9dGhpcy5fJEFBLnBhcmVudE5vZGU7Y29uc3QgaT10aGlzLl8kQU07cmV0dXJuIHZvaWQgMCE9PWkmJjExPT09dD8ubm9kZVR5cGUmJih0PWkucGFyZW50Tm9kZSksdH1nZXQgc3RhcnROb2RlKCl7cmV0dXJuIHRoaXMuXyRBQX1nZXQgZW5kTm9kZSgpe3JldHVybiB0aGlzLl8kQUJ9XyRBSSh0LGk9dGhpcyl7dD1TKHRoaXMsdCxpKSxjKHQpP3Q9PT1FfHxudWxsPT10fHxcIlwiPT09dD8odGhpcy5fJEFIIT09RSYmdGhpcy5fJEFSKCksdGhpcy5fJEFIPUUpOnQhPT10aGlzLl8kQUgmJnQhPT1UJiZ0aGlzLl8odCk6dm9pZCAwIT09dC5fJGxpdFR5cGUkP3RoaXMuJCh0KTp2b2lkIDAhPT10Lm5vZGVUeXBlP3RoaXMuVCh0KTp1KHQpP3RoaXMuayh0KTp0aGlzLl8odCl9Tyh0KXtyZXR1cm4gdGhpcy5fJEFBLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHQsdGhpcy5fJEFCKX1UKHQpe3RoaXMuXyRBSCE9PXQmJih0aGlzLl8kQVIoKSx0aGlzLl8kQUg9dGhpcy5PKHQpKX1fKHQpe3RoaXMuXyRBSCE9PUUmJmModGhpcy5fJEFIKT90aGlzLl8kQUEubmV4dFNpYmxpbmcuZGF0YT10OnRoaXMuVChyLmNyZWF0ZVRleHROb2RlKHQpKSx0aGlzLl8kQUg9dH0kKHQpe2NvbnN0e3ZhbHVlczppLF8kbGl0VHlwZSQ6c309dCxlPVwibnVtYmVyXCI9PXR5cGVvZiBzP3RoaXMuXyRBQyh0KToodm9pZCAwPT09cy5lbCYmKHMuZWw9Ti5jcmVhdGVFbGVtZW50KFAocy5oLHMuaFswXSksdGhpcy5vcHRpb25zKSkscyk7aWYodGhpcy5fJEFIPy5fJEFEPT09ZSl0aGlzLl8kQUgucChpKTtlbHNle2NvbnN0IHQ9bmV3IE0oZSx0aGlzKSxzPXQudSh0aGlzLm9wdGlvbnMpO3QucChpKSx0aGlzLlQocyksdGhpcy5fJEFIPXR9fV8kQUModCl7bGV0IGk9QS5nZXQodC5zdHJpbmdzKTtyZXR1cm4gdm9pZCAwPT09aSYmQS5zZXQodC5zdHJpbmdzLGk9bmV3IE4odCkpLGl9ayh0KXthKHRoaXMuXyRBSCl8fCh0aGlzLl8kQUg9W10sdGhpcy5fJEFSKCkpO2NvbnN0IGk9dGhpcy5fJEFIO2xldCBzLGU9MDtmb3IoY29uc3QgaCBvZiB0KWU9PT1pLmxlbmd0aD9pLnB1c2gocz1uZXcgUih0aGlzLk8obCgpKSx0aGlzLk8obCgpKSx0aGlzLHRoaXMub3B0aW9ucykpOnM9aVtlXSxzLl8kQUkoaCksZSsrO2U8aS5sZW5ndGgmJih0aGlzLl8kQVIocyYmcy5fJEFCLm5leHRTaWJsaW5nLGUpLGkubGVuZ3RoPWUpfV8kQVIodD10aGlzLl8kQUEubmV4dFNpYmxpbmcsaSl7Zm9yKHRoaXMuXyRBUD8uKCExLCEwLGkpO3QmJnQhPT10aGlzLl8kQUI7KXtjb25zdCBpPXQubmV4dFNpYmxpbmc7dC5yZW1vdmUoKSx0PWl9fXNldENvbm5lY3RlZCh0KXt2b2lkIDA9PT10aGlzLl8kQU0mJih0aGlzLl8kQ3Y9dCx0aGlzLl8kQVA/Lih0KSl9fWNsYXNzIGt7Z2V0IHRhZ05hbWUoKXtyZXR1cm4gdGhpcy5lbGVtZW50LnRhZ05hbWV9Z2V0IF8kQVUoKXtyZXR1cm4gdGhpcy5fJEFNLl8kQVV9Y29uc3RydWN0b3IodCxpLHMsZSxoKXt0aGlzLnR5cGU9MSx0aGlzLl8kQUg9RSx0aGlzLl8kQU49dm9pZCAwLHRoaXMuZWxlbWVudD10LHRoaXMubmFtZT1pLHRoaXMuXyRBTT1lLHRoaXMub3B0aW9ucz1oLHMubGVuZ3RoPjJ8fFwiXCIhPT1zWzBdfHxcIlwiIT09c1sxXT8odGhpcy5fJEFIPUFycmF5KHMubGVuZ3RoLTEpLmZpbGwobmV3IFN0cmluZyksdGhpcy5zdHJpbmdzPXMpOnRoaXMuXyRBSD1FfV8kQUkodCxpPXRoaXMscyxlKXtjb25zdCBoPXRoaXMuc3RyaW5ncztsZXQgbz0hMTtpZih2b2lkIDA9PT1oKXQ9Uyh0aGlzLHQsaSwwKSxvPSFjKHQpfHx0IT09dGhpcy5fJEFIJiZ0IT09VCxvJiYodGhpcy5fJEFIPXQpO2Vsc2V7Y29uc3QgZT10O2xldCBuLHI7Zm9yKHQ9aFswXSxuPTA7bjxoLmxlbmd0aC0xO24rKylyPVModGhpcyxlW3Mrbl0saSxuKSxyPT09VCYmKHI9dGhpcy5fJEFIW25dKSxvfHw9IWMocil8fHIhPT10aGlzLl8kQUhbbl0scj09PUU/dD1FOnQhPT1FJiYodCs9KHI/P1wiXCIpK2hbbisxXSksdGhpcy5fJEFIW25dPXJ9byYmIWUmJnRoaXMuaih0KX1qKHQpe3Q9PT1FP3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5uYW1lKTp0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMubmFtZSx0Pz9cIlwiKX19Y2xhc3MgSCBleHRlbmRzIGt7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudHlwZT0zfWoodCl7dGhpcy5lbGVtZW50W3RoaXMubmFtZV09dD09PUU/dm9pZCAwOnR9fWNsYXNzIEkgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9NH1qKHQpe3RoaXMuZWxlbWVudC50b2dnbGVBdHRyaWJ1dGUodGhpcy5uYW1lLCEhdCYmdCE9PUUpfX1jbGFzcyBMIGV4dGVuZHMga3tjb25zdHJ1Y3Rvcih0LGkscyxlLGgpe3N1cGVyKHQsaSxzLGUsaCksdGhpcy50eXBlPTV9XyRBSSh0LGk9dGhpcyl7aWYoKHQ9Uyh0aGlzLHQsaSwwKT8/RSk9PT1UKXJldHVybjtjb25zdCBzPXRoaXMuXyRBSCxlPXQ9PT1FJiZzIT09RXx8dC5jYXB0dXJlIT09cy5jYXB0dXJlfHx0Lm9uY2UhPT1zLm9uY2V8fHQucGFzc2l2ZSE9PXMucGFzc2l2ZSxoPXQhPT1FJiYocz09PUV8fGUpO2UmJnRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMubmFtZSx0aGlzLHMpLGgmJnRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMubmFtZSx0aGlzLHQpLHRoaXMuXyRBSD10fWhhbmRsZUV2ZW50KHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuXyRBSD90aGlzLl8kQUguY2FsbCh0aGlzLm9wdGlvbnM/Lmhvc3Q/P3RoaXMuZWxlbWVudCx0KTp0aGlzLl8kQUguaGFuZGxlRXZlbnQodCl9fWNsYXNzIHp7Y29uc3RydWN0b3IodCxpLHMpe3RoaXMuZWxlbWVudD10LHRoaXMudHlwZT02LHRoaXMuXyRBTj12b2lkIDAsdGhpcy5fJEFNPWksdGhpcy5vcHRpb25zPXN9Z2V0IF8kQVUoKXtyZXR1cm4gdGhpcy5fJEFNLl8kQVV9XyRBSSh0KXtTKHRoaXMsdCl9fWNvbnN0IFo9e006ZSxQOmgsQTpvLEM6MSxMOlYsUjpNLEQ6dSxWOlMsSTpSLEg6ayxOOkksVTpMLEI6SCxGOnp9LGo9dC5saXRIdG1sUG9seWZpbGxTdXBwb3J0O2o/LihOLFIpLCh0LmxpdEh0bWxWZXJzaW9ucz8/PVtdKS5wdXNoKFwiMy4zLjBcIik7Y29uc3QgQj0odCxpLHMpPT57Y29uc3QgZT1zPy5yZW5kZXJCZWZvcmU/P2k7bGV0IGg9ZS5fJGxpdFBhcnQkO2lmKHZvaWQgMD09PWgpe2NvbnN0IHQ9cz8ucmVuZGVyQmVmb3JlPz9udWxsO2UuXyRsaXRQYXJ0JD1oPW5ldyBSKGkuaW5zZXJ0QmVmb3JlKGwoKSx0KSx0LHZvaWQgMCxzPz97fSl9cmV0dXJuIGguXyRBSSh0KSxofTtleHBvcnR7WiBhcyBfJExILHggYXMgaHRtbCx3IGFzIG1hdGhtbCxUIGFzIG5vQ2hhbmdlLEUgYXMgbm90aGluZyxCIGFzIHJlbmRlcixiIGFzIHN2Z307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXQtaHRtbC5qcy5tYXBcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG4vLyBJTVBPUlRBTlQ6IHRoZXNlIGltcG9ydHMgbXVzdCBiZSB0eXBlLW9ubHlcbmltcG9ydCB0eXBlIHtEaXJlY3RpdmUsIERpcmVjdGl2ZVJlc3VsdCwgUGFydEluZm99IGZyb20gJy4vZGlyZWN0aXZlLmpzJztcbmltcG9ydCB0eXBlIHtUcnVzdGVkSFRNTCwgVHJ1c3RlZFR5cGVzV2luZG93fSBmcm9tICd0cnVzdGVkLXR5cGVzL2xpYi9pbmRleC5qcyc7XG5cbmNvbnN0IERFVl9NT0RFID0gdHJ1ZTtcbmNvbnN0IEVOQUJMRV9FWFRSQV9TRUNVUklUWV9IT09LUyA9IHRydWU7XG5jb25zdCBFTkFCTEVfU0hBRFlET01fTk9QQVRDSCA9IHRydWU7XG5jb25zdCBOT0RFX01PREUgPSBmYWxzZTtcblxuLy8gQWxsb3dzIG1pbmlmaWVycyB0byByZW5hbWUgcmVmZXJlbmNlcyB0byBnbG9iYWxUaGlzXG5jb25zdCBnbG9iYWwgPSBnbG9iYWxUaGlzO1xuXG4vKipcbiAqIENvbnRhaW5zIHR5cGVzIHRoYXQgYXJlIHBhcnQgb2YgdGhlIHVuc3RhYmxlIGRlYnVnIEFQSS5cbiAqXG4gKiBFdmVyeXRoaW5nIGluIHRoaXMgQVBJIGlzIG5vdCBzdGFibGUgYW5kIG1heSBjaGFuZ2Ugb3IgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLFxuICogZXZlbiBvbiBwYXRjaCByZWxlYXNlcy5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgTGl0VW5zdGFibGUge1xuICAvKipcbiAgICogV2hlbiBMaXQgaXMgcnVubmluZyBpbiBkZXYgbW9kZSBhbmQgYHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHNgIGlzIHRydWUsXG4gICAqIHdlIHdpbGwgZW1pdCAnbGl0LWRlYnVnJyBldmVudHMgdG8gd2luZG93LCB3aXRoIGxpdmUgZGV0YWlscyBhYm91dCB0aGUgdXBkYXRlIGFuZCByZW5kZXJcbiAgICogbGlmZWN5Y2xlLiBUaGVzZSBjYW4gYmUgdXNlZnVsIGZvciB3cml0aW5nIGRlYnVnIHRvb2xpbmcgYW5kIHZpc3VhbGl6YXRpb25zLlxuICAgKlxuICAgKiBQbGVhc2UgYmUgYXdhcmUgdGhhdCBydW5uaW5nIHdpdGggd2luZG93LmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cyBoYXMgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQsXG4gICAqIG1ha2luZyBjZXJ0YWluIG9wZXJhdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgdmVyeSBjaGVhcCAobGlrZSBhIG5vLW9wIHJlbmRlcikgbXVjaCBzbG93ZXIsXG4gICAqIGJlY2F1c2Ugd2UgbXVzdCBjb3B5IGRhdGEgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gIGV4cG9ydCBuYW1lc3BhY2UgRGVidWdMb2cge1xuICAgIGV4cG9ydCB0eXBlIEVudHJ5ID1cbiAgICAgIHwgVGVtcGxhdGVQcmVwXG4gICAgICB8IFRlbXBsYXRlSW5zdGFudGlhdGVkXG4gICAgICB8IFRlbXBsYXRlSW5zdGFudGlhdGVkQW5kVXBkYXRlZFxuICAgICAgfCBUZW1wbGF0ZVVwZGF0aW5nXG4gICAgICB8IEJlZ2luUmVuZGVyXG4gICAgICB8IEVuZFJlbmRlclxuICAgICAgfCBDb21taXRQYXJ0RW50cnlcbiAgICAgIHwgU2V0UGFydFZhbHVlO1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVQcmVwIHtcbiAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBwcmVwJztcbiAgICAgIHRlbXBsYXRlOiBUZW1wbGF0ZTtcbiAgICAgIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5O1xuICAgICAgY2xvbmFibGVUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICAgIHBhcnRzOiBUZW1wbGF0ZVBhcnRbXTtcbiAgICB9XG4gICAgZXhwb3J0IGludGVyZmFjZSBCZWdpblJlbmRlciB7XG4gICAgICBraW5kOiAnYmVnaW4gcmVuZGVyJztcbiAgICAgIGlkOiBudW1iZXI7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50O1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIHBhcnQ6IENoaWxkUGFydCB8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZXhwb3J0IGludGVyZmFjZSBFbmRSZW5kZXIge1xuICAgICAga2luZDogJ2VuZCByZW5kZXInO1xuICAgICAgaWQ6IG51bWJlcjtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQ7XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgICAgcGFydDogQ2hpbGRQYXJ0O1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFRlbXBsYXRlSW5zdGFudGlhdGVkIHtcbiAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBpbnN0YW50aWF0ZWQnO1xuICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlIHwgQ29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgIGluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIGZyYWdtZW50OiBOb2RlO1xuICAgICAgcGFydHM6IEFycmF5PFBhcnQgfCB1bmRlZmluZWQ+O1xuICAgICAgdmFsdWVzOiB1bmtub3duW107XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVJbnN0YW50aWF0ZWRBbmRVcGRhdGVkIHtcbiAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBpbnN0YW50aWF0ZWQgYW5kIHVwZGF0ZWQnO1xuICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlIHwgQ29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgIGluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIGZyYWdtZW50OiBOb2RlO1xuICAgICAgcGFydHM6IEFycmF5PFBhcnQgfCB1bmRlZmluZWQ+O1xuICAgICAgdmFsdWVzOiB1bmtub3duW107XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVVcGRhdGluZyB7XG4gICAgICBraW5kOiAndGVtcGxhdGUgdXBkYXRpbmcnO1xuICAgICAgdGVtcGxhdGU6IFRlbXBsYXRlIHwgQ29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgIGluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIHBhcnRzOiBBcnJheTxQYXJ0IHwgdW5kZWZpbmVkPjtcbiAgICAgIHZhbHVlczogdW5rbm93bltdO1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFNldFBhcnRWYWx1ZSB7XG4gICAgICBraW5kOiAnc2V0IHBhcnQnO1xuICAgICAgcGFydDogUGFydDtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgdmFsdWVJbmRleDogbnVtYmVyO1xuICAgICAgdmFsdWVzOiB1bmtub3duW107XG4gICAgICB0ZW1wbGF0ZUluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlO1xuICAgIH1cblxuICAgIGV4cG9ydCB0eXBlIENvbW1pdFBhcnRFbnRyeSA9XG4gICAgICB8IENvbW1pdE5vdGhpbmdUb0NoaWxkRW50cnlcbiAgICAgIHwgQ29tbWl0VGV4dFxuICAgICAgfCBDb21taXROb2RlXG4gICAgICB8IENvbW1pdEF0dHJpYnV0ZVxuICAgICAgfCBDb21taXRQcm9wZXJ0eVxuICAgICAgfCBDb21taXRCb29sZWFuQXR0cmlidXRlXG4gICAgICB8IENvbW1pdEV2ZW50TGlzdGVuZXJcbiAgICAgIHwgQ29tbWl0VG9FbGVtZW50QmluZGluZztcblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0Tm90aGluZ1RvQ2hpbGRFbnRyeSB7XG4gICAgICBraW5kOiAnY29tbWl0IG5vdGhpbmcgdG8gY2hpbGQnO1xuICAgICAgc3RhcnQ6IENoaWxkTm9kZTtcbiAgICAgIGVuZDogQ2hpbGROb2RlIHwgbnVsbDtcbiAgICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUgfCB1bmRlZmluZWQ7XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0VGV4dCB7XG4gICAgICBraW5kOiAnY29tbWl0IHRleHQnO1xuICAgICAgbm9kZTogVGV4dDtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdE5vZGUge1xuICAgICAga2luZDogJ2NvbW1pdCBub2RlJztcbiAgICAgIHN0YXJ0OiBOb2RlO1xuICAgICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSB8IHVuZGVmaW5lZDtcbiAgICAgIHZhbHVlOiBOb2RlO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdEF0dHJpYnV0ZSB7XG4gICAgICBraW5kOiAnY29tbWl0IGF0dHJpYnV0ZSc7XG4gICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgdmFsdWU6IHVua25vd247XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0UHJvcGVydHkge1xuICAgICAga2luZDogJ2NvbW1pdCBwcm9wZXJ0eSc7XG4gICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgdmFsdWU6IHVua25vd247XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0Qm9vbGVhbkF0dHJpYnV0ZSB7XG4gICAgICBraW5kOiAnY29tbWl0IGJvb2xlYW4gYXR0cmlidXRlJztcbiAgICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICB2YWx1ZTogYm9vbGVhbjtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb21taXRFdmVudExpc3RlbmVyIHtcbiAgICAgIGtpbmQ6ICdjb21taXQgZXZlbnQgbGlzdGVuZXInO1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb2xkTGlzdGVuZXI6IHVua25vd247XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgICAgLy8gVHJ1ZSBpZiB3ZSdyZSByZW1vdmluZyB0aGUgb2xkIGV2ZW50IGxpc3RlbmVyIChlLmcuIGJlY2F1c2Ugc2V0dGluZ3MgY2hhbmdlZCwgb3IgdmFsdWUgaXMgbm90aGluZylcbiAgICAgIHJlbW92ZUxpc3RlbmVyOiBib29sZWFuO1xuICAgICAgLy8gVHJ1ZSBpZiB3ZSdyZSBhZGRpbmcgYSBuZXcgZXZlbnQgbGlzdGVuZXIgKGUuZy4gYmVjYXVzZSBmaXJzdCByZW5kZXIsIG9yIHNldHRpbmdzIGNoYW5nZWQpXG4gICAgICBhZGRMaXN0ZW5lcjogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdFRvRWxlbWVudEJpbmRpbmcge1xuICAgICAga2luZDogJ2NvbW1pdCB0byBlbGVtZW50IGJpbmRpbmcnO1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIERlYnVnTG9nZ2luZ1dpbmRvdyB7XG4gIC8vIEV2ZW4gaW4gZGV2IG1vZGUsIHdlIGdlbmVyYWxseSBkb24ndCB3YW50IHRvIGVtaXQgdGhlc2UgZXZlbnRzLCBhcyB0aGF0J3NcbiAgLy8gYW5vdGhlciBsZXZlbCBvZiBjb3N0LCBzbyBvbmx5IGVtaXQgdGhlbSB3aGVuIERFVl9NT0RFIGlzIHRydWUgX2FuZF8gd2hlblxuICAvLyB3aW5kb3cuZW1pdExpdERlYnVnRXZlbnRzIGlzIHRydWUuXG4gIGVtaXRMaXREZWJ1Z0xvZ0V2ZW50cz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVXNlZnVsIGZvciB2aXN1YWxpemluZyBhbmQgbG9nZ2luZyBpbnNpZ2h0cyBpbnRvIHdoYXQgdGhlIExpdCB0ZW1wbGF0ZSBzeXN0ZW0gaXMgZG9pbmcuXG4gKlxuICogQ29tcGlsZWQgb3V0IG9mIHByb2QgbW9kZSBidWlsZHMuXG4gKi9cbmNvbnN0IGRlYnVnTG9nRXZlbnQgPSBERVZfTU9ERVxuICA/IChldmVudDogTGl0VW5zdGFibGUuRGVidWdMb2cuRW50cnkpID0+IHtcbiAgICAgIGNvbnN0IHNob3VsZEVtaXQgPSAoZ2xvYmFsIGFzIHVua25vd24gYXMgRGVidWdMb2dnaW5nV2luZG93KVxuICAgICAgICAuZW1pdExpdERlYnVnTG9nRXZlbnRzO1xuICAgICAgaWYgKCFzaG91bGRFbWl0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGdsb2JhbC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8TGl0VW5zdGFibGUuRGVidWdMb2cuRW50cnk+KCdsaXQtZGVidWcnLCB7XG4gICAgICAgICAgZGV0YWlsOiBldmVudCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICA6IHVuZGVmaW5lZDtcbi8vIFVzZWQgZm9yIGNvbm5lY3RpbmcgYmVnaW5SZW5kZXIgYW5kIGVuZFJlbmRlciBldmVudHMgd2hlbiB0aGVyZSBhcmUgbmVzdGVkXG4vLyByZW5kZXJzIHdoZW4gZXJyb3JzIGFyZSB0aHJvd24gcHJldmVudGluZyBhbiBlbmRSZW5kZXIgZXZlbnQgZnJvbSBiZWluZ1xuLy8gY2FsbGVkLlxubGV0IGRlYnVnTG9nUmVuZGVySWQgPSAwO1xuXG5sZXQgaXNzdWVXYXJuaW5nOiAoY29kZTogc3RyaW5nLCB3YXJuaW5nOiBzdHJpbmcpID0+IHZvaWQ7XG5cbmlmIChERVZfTU9ERSkge1xuICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MgPz89IG5ldyBTZXQoKTtcblxuICAvKipcbiAgICogSXNzdWUgYSB3YXJuaW5nIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgYmFzZWQgZWl0aGVyIG9uIGBjb2RlYCBvciBgd2FybmluZ2AuXG4gICAqIFdhcm5pbmdzIGFyZSBkaXNhYmxlZCBhdXRvbWF0aWNhbGx5IG9ubHkgYnkgYHdhcm5pbmdgOyBkaXNhYmxpbmcgdmlhIGBjb2RlYFxuICAgKiBjYW4gYmUgZG9uZSBieSB1c2Vycy5cbiAgICovXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gY29kZVxuICAgICAgPyBgIFNlZSBodHRwczovL2xpdC5kZXYvbXNnLyR7Y29kZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uYFxuICAgICAgOiAnJztcbiAgICBpZiAoXG4gICAgICAhZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5oYXMod2FybmluZykgJiZcbiAgICAgICFnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MhLmhhcyhjb2RlKVxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKHdhcm5pbmcpO1xuICAgICAgZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzIS5hZGQod2FybmluZyk7XG4gICAgfVxuICB9O1xuXG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAnZGV2LW1vZGUnLFxuICAgICAgYExpdCBpcyBpbiBkZXYgbW9kZS4gTm90IHJlY29tbWVuZGVkIGZvciBwcm9kdWN0aW9uIWBcbiAgICApO1xuICB9KTtcbn1cblxuY29uc3Qgd3JhcCA9XG4gIEVOQUJMRV9TSEFEWURPTV9OT1BBVENIICYmXG4gIGdsb2JhbC5TaGFkeURPTT8uaW5Vc2UgJiZcbiAgZ2xvYmFsLlNoYWR5RE9NPy5ub1BhdGNoID09PSB0cnVlXG4gICAgPyAoZ2xvYmFsLlNoYWR5RE9NIS53cmFwIGFzIDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkgPT4gVClcbiAgICA6IDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkgPT4gbm9kZTtcblxuY29uc3QgdHJ1c3RlZFR5cGVzID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIFRydXN0ZWRUeXBlc1dpbmRvdykudHJ1c3RlZFR5cGVzO1xuXG4vKipcbiAqIE91ciBUcnVzdGVkVHlwZVBvbGljeSBmb3IgSFRNTCB3aGljaCBpcyBkZWNsYXJlZCB1c2luZyB0aGUgaHRtbCB0ZW1wbGF0ZVxuICogdGFnIGZ1bmN0aW9uLlxuICpcbiAqIFRoYXQgSFRNTCBpcyBhIGRldmVsb3Blci1hdXRob3JlZCBjb25zdGFudCwgYW5kIGlzIHBhcnNlZCB3aXRoIGlubmVySFRNTFxuICogYmVmb3JlIGFueSB1bnRydXN0ZWQgZXhwcmVzc2lvbnMgaGF2ZSBiZWVuIG1peGVkIGluLiBUaGVyZWZvciBpdCBpc1xuICogY29uc2lkZXJlZCBzYWZlIGJ5IGNvbnN0cnVjdGlvbi5cbiAqL1xuY29uc3QgcG9saWN5ID0gdHJ1c3RlZFR5cGVzXG4gID8gdHJ1c3RlZFR5cGVzLmNyZWF0ZVBvbGljeSgnbGl0LWh0bWwnLCB7XG4gICAgICBjcmVhdGVIVE1MOiAocykgPT4gcyxcbiAgICB9KVxuICA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBVc2VkIHRvIHNhbml0aXplIGFueSB2YWx1ZSBiZWZvcmUgaXQgaXMgd3JpdHRlbiBpbnRvIHRoZSBET00uIFRoaXMgY2FuIGJlXG4gKiB1c2VkIHRvIGltcGxlbWVudCBhIHNlY3VyaXR5IHBvbGljeSBvZiBhbGxvd2VkIGFuZCBkaXNhbGxvd2VkIHZhbHVlcyBpblxuICogb3JkZXIgdG8gcHJldmVudCBYU1MgYXR0YWNrcy5cbiAqXG4gKiBPbmUgd2F5IG9mIHVzaW5nIHRoaXMgY2FsbGJhY2sgd291bGQgYmUgdG8gY2hlY2sgYXR0cmlidXRlcyBhbmQgcHJvcGVydGllc1xuICogYWdhaW5zdCBhIGxpc3Qgb2YgaGlnaCByaXNrIGZpZWxkcywgYW5kIHJlcXVpcmUgdGhhdCB2YWx1ZXMgd3JpdHRlbiB0byBzdWNoXG4gKiBmaWVsZHMgYmUgaW5zdGFuY2VzIG9mIGEgY2xhc3Mgd2hpY2ggaXMgc2FmZSBieSBjb25zdHJ1Y3Rpb24uIENsb3N1cmUncyBTYWZlXG4gKiBIVE1MIFR5cGVzIGlzIG9uZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHRlY2huaXF1ZSAoXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3NhZmUtaHRtbC10eXBlcy9ibG9iL21hc3Rlci9kb2Mvc2FmZWh0bWwtdHlwZXMubWQpLlxuICogVGhlIFRydXN0ZWRUeXBlcyBwb2x5ZmlsbCBpbiBBUEktb25seSBtb2RlIGNvdWxkIGFsc28gYmUgdXNlZCBhcyBhIGJhc2lzXG4gKiBmb3IgdGhpcyB0ZWNobmlxdWUgKGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL3RydXN0ZWQtdHlwZXMpLlxuICpcbiAqIEBwYXJhbSBub2RlIFRoZSBIVE1MIG5vZGUgKHVzdWFsbHkgZWl0aGVyIGEgI3RleHQgbm9kZSBvciBhbiBFbGVtZW50KSB0aGF0XG4gKiAgICAgaXMgYmVpbmcgd3JpdHRlbiB0by4gTm90ZSB0aGF0IHRoaXMgaXMganVzdCBhbiBleGVtcGxhciBub2RlLCB0aGUgd3JpdGVcbiAqICAgICBtYXkgdGFrZSBwbGFjZSBhZ2FpbnN0IGFub3RoZXIgaW5zdGFuY2Ugb2YgdGhlIHNhbWUgY2xhc3Mgb2Ygbm9kZS5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIGFuIGF0dHJpYnV0ZSBvciBwcm9wZXJ0eSAoZm9yIGV4YW1wbGUsICdocmVmJykuXG4gKiBAcGFyYW0gdHlwZSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgd3JpdGUgdGhhdCdzIGFib3V0IHRvIGJlIHBlcmZvcm1lZCB3aWxsXG4gKiAgICAgYmUgdG8gYSBwcm9wZXJ0eSBvciBhIG5vZGUuXG4gKiBAcmV0dXJuIEEgZnVuY3Rpb24gdGhhdCB3aWxsIHNhbml0aXplIHRoaXMgY2xhc3Mgb2Ygd3JpdGVzLlxuICovXG5leHBvcnQgdHlwZSBTYW5pdGl6ZXJGYWN0b3J5ID0gKFxuICBub2RlOiBOb2RlLFxuICBuYW1lOiBzdHJpbmcsXG4gIHR5cGU6ICdwcm9wZXJ0eScgfCAnYXR0cmlidXRlJ1xuKSA9PiBWYWx1ZVNhbml0aXplcjtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHdoaWNoIGNhbiBzYW5pdGl6ZSB2YWx1ZXMgdGhhdCB3aWxsIGJlIHdyaXR0ZW4gdG8gYSBzcGVjaWZpYyBraW5kXG4gKiBvZiBET00gc2luay5cbiAqXG4gKiBTZWUgU2FuaXRpemVyRmFjdG9yeS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNhbml0aXplLiBXaWxsIGJlIHRoZSBhY3R1YWwgdmFsdWUgcGFzc2VkIGludG9cbiAqICAgICB0aGUgbGl0LWh0bWwgdGVtcGxhdGUgbGl0ZXJhbCwgc28gdGhpcyBjb3VsZCBiZSBvZiBhbnkgdHlwZS5cbiAqIEByZXR1cm4gVGhlIHZhbHVlIHRvIHdyaXRlIHRvIHRoZSBET00uIFVzdWFsbHkgdGhlIHNhbWUgYXMgdGhlIGlucHV0IHZhbHVlLFxuICogICAgIHVubGVzcyBzYW5pdGl6YXRpb24gaXMgbmVlZGVkLlxuICovXG5leHBvcnQgdHlwZSBWYWx1ZVNhbml0aXplciA9ICh2YWx1ZTogdW5rbm93bikgPT4gdW5rbm93bjtcblxuY29uc3QgaWRlbnRpdHlGdW5jdGlvbjogVmFsdWVTYW5pdGl6ZXIgPSAodmFsdWU6IHVua25vd24pID0+IHZhbHVlO1xuY29uc3Qgbm9vcFNhbml0aXplcjogU2FuaXRpemVyRmFjdG9yeSA9IChcbiAgX25vZGU6IE5vZGUsXG4gIF9uYW1lOiBzdHJpbmcsXG4gIF90eXBlOiAncHJvcGVydHknIHwgJ2F0dHJpYnV0ZSdcbikgPT4gaWRlbnRpdHlGdW5jdGlvbjtcblxuLyoqIFNldHMgdGhlIGdsb2JhbCBzYW5pdGl6ZXIgZmFjdG9yeS4gKi9cbmNvbnN0IHNldFNhbml0aXplciA9IChuZXdTYW5pdGl6ZXI6IFNhbml0aXplckZhY3RvcnkpID0+IHtcbiAgaWYgKCFFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNhbml0aXplckZhY3RvcnlJbnRlcm5hbCAhPT0gbm9vcFNhbml0aXplcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBBdHRlbXB0ZWQgdG8gb3ZlcndyaXRlIGV4aXN0aW5nIGxpdC1odG1sIHNlY3VyaXR5IHBvbGljeS5gICtcbiAgICAgICAgYCBzZXRTYW5pdGl6ZURPTVZhbHVlRmFjdG9yeSBzaG91bGQgYmUgY2FsbGVkIGF0IG1vc3Qgb25jZS5gXG4gICAgKTtcbiAgfVxuICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgPSBuZXdTYW5pdGl6ZXI7XG59O1xuXG4vKipcbiAqIE9ubHkgdXNlZCBpbiBpbnRlcm5hbCB0ZXN0cywgbm90IGEgcGFydCBvZiB0aGUgcHVibGljIEFQSS5cbiAqL1xuY29uc3QgX3Rlc3RPbmx5Q2xlYXJTYW5pdGl6ZXJGYWN0b3J5RG9Ob3RDYWxsT3JFbHNlID0gKCkgPT4ge1xuICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgPSBub29wU2FuaXRpemVyO1xufTtcblxuY29uc3QgY3JlYXRlU2FuaXRpemVyOiBTYW5pdGl6ZXJGYWN0b3J5ID0gKG5vZGUsIG5hbWUsIHR5cGUpID0+IHtcbiAgcmV0dXJuIHNhbml0aXplckZhY3RvcnlJbnRlcm5hbChub2RlLCBuYW1lLCB0eXBlKTtcbn07XG5cbi8vIEFkZGVkIHRvIGFuIGF0dHJpYnV0ZSBuYW1lIHRvIG1hcmsgdGhlIGF0dHJpYnV0ZSBhcyBib3VuZCBzbyB3ZSBjYW4gZmluZFxuLy8gaXQgZWFzaWx5LlxuY29uc3QgYm91bmRBdHRyaWJ1dGVTdWZmaXggPSAnJGxpdCQnO1xuXG4vLyBUaGlzIG1hcmtlciBpcyB1c2VkIGluIG1hbnkgc3ludGFjdGljIHBvc2l0aW9ucyBpbiBIVE1MLCBzbyBpdCBtdXN0IGJlXG4vLyBhIHZhbGlkIGVsZW1lbnQgbmFtZSBhbmQgYXR0cmlidXRlIG5hbWUuIFdlIGRvbid0IHN1cHBvcnQgZHluYW1pYyBuYW1lcyAoeWV0KVxuLy8gYnV0IHRoaXMgYXQgbGVhc3QgZW5zdXJlcyB0aGF0IHRoZSBwYXJzZSB0cmVlIGlzIGNsb3NlciB0byB0aGUgdGVtcGxhdGVcbi8vIGludGVudGlvbi5cbmNvbnN0IG1hcmtlciA9IGBsaXQkJHtNYXRoLnJhbmRvbSgpLnRvRml4ZWQoOSkuc2xpY2UoMil9JGA7XG5cbi8vIFN0cmluZyB1c2VkIHRvIHRlbGwgaWYgYSBjb21tZW50IGlzIGEgbWFya2VyIGNvbW1lbnRcbmNvbnN0IG1hcmtlck1hdGNoID0gJz8nICsgbWFya2VyO1xuXG4vLyBUZXh0IHVzZWQgdG8gaW5zZXJ0IGEgY29tbWVudCBtYXJrZXIgbm9kZS4gV2UgdXNlIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb25cbi8vIHN5bnRheCBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgc21hbGxlciwgYnV0IHBhcnNlcyBhcyBhIGNvbW1lbnQgbm9kZS5cbmNvbnN0IG5vZGVNYXJrZXIgPSBgPCR7bWFya2VyTWF0Y2h9PmA7XG5cbmNvbnN0IGQgPVxuICBOT0RFX01PREUgJiYgZ2xvYmFsLmRvY3VtZW50ID09PSB1bmRlZmluZWRcbiAgICA/ICh7XG4gICAgICAgIGNyZWF0ZVRyZWVXYWxrZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9LFxuICAgICAgfSBhcyB1bmtub3duIGFzIERvY3VtZW50KVxuICAgIDogZG9jdW1lbnQ7XG5cbi8vIENyZWF0ZXMgYSBkeW5hbWljIG1hcmtlci4gV2UgbmV2ZXIgaGF2ZSB0byBzZWFyY2ggZm9yIHRoZXNlIGluIHRoZSBET00uXG5jb25zdCBjcmVhdGVNYXJrZXIgPSAoKSA9PiBkLmNyZWF0ZUNvbW1lbnQoJycpO1xuXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10eXBlb2Ytb3BlcmF0b3JcbnR5cGUgUHJpbWl0aXZlID0gbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4gfCBudW1iZXIgfCBzdHJpbmcgfCBzeW1ib2wgfCBiaWdpbnQ7XG5jb25zdCBpc1ByaW1pdGl2ZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFByaW1pdGl2ZSA9PlxuICB2YWx1ZSA9PT0gbnVsbCB8fCAodHlwZW9mIHZhbHVlICE9ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZSAhPSAnZnVuY3Rpb24nKTtcbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuY29uc3QgaXNJdGVyYWJsZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEl0ZXJhYmxlPHVua25vd24+ID0+XG4gIGlzQXJyYXkodmFsdWUpIHx8XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHR5cGVvZiAodmFsdWUgYXMgYW55KT8uW1N5bWJvbC5pdGVyYXRvcl0gPT09ICdmdW5jdGlvbic7XG5cbmNvbnN0IFNQQUNFX0NIQVIgPSBgWyBcXHRcXG5cXGZcXHJdYDtcbmNvbnN0IEFUVFJfVkFMVUVfQ0hBUiA9IGBbXiBcXHRcXG5cXGZcXHJcIidcXGA8Pj1dYDtcbmNvbnN0IE5BTUVfQ0hBUiA9IGBbXlxcXFxzXCInPj0vXWA7XG5cbi8vIFRoZXNlIHJlZ2V4ZXMgcmVwcmVzZW50IHRoZSBmaXZlIHBhcnNpbmcgc3RhdGVzIHRoYXQgd2UgY2FyZSBhYm91dCBpbiB0aGVcbi8vIFRlbXBsYXRlJ3MgSFRNTCBzY2FubmVyLiBUaGV5IG1hdGNoIHRoZSAqZW5kKiBvZiB0aGUgc3RhdGUgdGhleSdyZSBuYW1lZFxuLy8gYWZ0ZXIuXG4vLyBEZXBlbmRpbmcgb24gdGhlIG1hdGNoLCB3ZSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlLiBJZiB0aGVyZSdzIG5vIG1hdGNoLFxuLy8gd2Ugc3RheSBpbiB0aGUgc2FtZSBzdGF0ZS5cbi8vIE5vdGUgdGhhdCB0aGUgcmVnZXhlcyBhcmUgc3RhdGVmdWwuIFdlIHV0aWxpemUgbGFzdEluZGV4IGFuZCBzeW5jIGl0XG4vLyBhY3Jvc3MgdGhlIG11bHRpcGxlIHJlZ2V4ZXMgdXNlZC4gSW4gYWRkaXRpb24gdG8gdGhlIGZpdmUgcmVnZXhlcyBiZWxvd1xuLy8gd2UgYWxzbyBkeW5hbWljYWxseSBjcmVhdGUgYSByZWdleCB0byBmaW5kIHRoZSBtYXRjaGluZyBlbmQgdGFncyBmb3IgcmF3XG4vLyB0ZXh0IGVsZW1lbnRzLlxuXG4vKipcbiAqIEVuZCBvZiB0ZXh0IGlzOiBgPGAgZm9sbG93ZWQgYnk6XG4gKiAgIChjb21tZW50IHN0YXJ0KSBvciAodGFnKSBvciAoZHluYW1pYyB0YWcgYmluZGluZylcbiAqL1xuY29uc3QgdGV4dEVuZFJlZ2V4ID0gLzwoPzooIS0tfFxcL1teYS16QS1aXSl8KFxcLz9bYS16QS1aXVtePlxcc10qKXwoXFwvPyQpKS9nO1xuY29uc3QgQ09NTUVOVF9TVEFSVCA9IDE7XG5jb25zdCBUQUdfTkFNRSA9IDI7XG5jb25zdCBEWU5BTUlDX1RBR19OQU1FID0gMztcblxuY29uc3QgY29tbWVudEVuZFJlZ2V4ID0gLy0tPi9nO1xuLyoqXG4gKiBDb21tZW50cyBub3Qgc3RhcnRlZCB3aXRoIDwhLS0sIGxpa2UgPC97LCBjYW4gYmUgZW5kZWQgYnkgYSBzaW5nbGUgYD5gXG4gKi9cbmNvbnN0IGNvbW1lbnQyRW5kUmVnZXggPSAvPi9nO1xuXG4vKipcbiAqIFRoZSB0YWdFbmQgcmVnZXggbWF0Y2hlcyB0aGUgZW5kIG9mIHRoZSBcImluc2lkZSBhbiBvcGVuaW5nXCIgdGFnIHN5bnRheFxuICogcG9zaXRpb24uIEl0IGVpdGhlciBtYXRjaGVzIGEgYD5gLCBhbiBhdHRyaWJ1dGUtbGlrZSBzZXF1ZW5jZSwgb3IgdGhlIGVuZFxuICogb2YgdGhlIHN0cmluZyBhZnRlciBhIHNwYWNlIChhdHRyaWJ1dGUtbmFtZSBwb3NpdGlvbiBlbmRpbmcpLlxuICpcbiAqIFNlZSBhdHRyaWJ1dGVzIGluIHRoZSBIVE1MIHNwZWM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudHMtYXR0cmlidXRlc1xuICpcbiAqIFwiIFxcdFxcblxcZlxcclwiIGFyZSBIVE1MIHNwYWNlIGNoYXJhY3RlcnM6XG4gKiBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jYXNjaWktd2hpdGVzcGFjZVxuICpcbiAqIFNvIGFuIGF0dHJpYnV0ZSBpczpcbiAqICAqIFRoZSBuYW1lOiBhbnkgY2hhcmFjdGVyIGV4Y2VwdCBhIHdoaXRlc3BhY2UgY2hhcmFjdGVyLCAoXCIpLCAoJyksIFwiPlwiLFxuICogICAgXCI9XCIsIG9yIFwiL1wiLiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBIVE1MIHNwZWMgd2hpY2ggYWxzbyBleGNsdWRlcyBjb250cm9sIGNoYXJhY3RlcnMuXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnkgXCI9XCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieTpcbiAqICAgICogQW55IGNoYXJhY3RlciBleGNlcHQgc3BhY2UsICgnKSwgKFwiKSwgXCI8XCIsIFwiPlwiLCBcIj1cIiwgKGApLCBvclxuICogICAgKiAoXCIpIHRoZW4gYW55IG5vbi0oXCIpLCBvclxuICogICAgKiAoJykgdGhlbiBhbnkgbm9uLSgnKVxuICovXG5jb25zdCB0YWdFbmRSZWdleCA9IG5ldyBSZWdFeHAoXG4gIGA+fCR7U1BBQ0VfQ0hBUn0oPzooJHtOQU1FX0NIQVJ9KykoJHtTUEFDRV9DSEFSfSo9JHtTUEFDRV9DSEFSfSooPzoke0FUVFJfVkFMVUVfQ0hBUn18KFwifCcpfCkpfCQpYCxcbiAgJ2cnXG4pO1xuY29uc3QgRU5USVJFX01BVENIID0gMDtcbmNvbnN0IEFUVFJJQlVURV9OQU1FID0gMTtcbmNvbnN0IFNQQUNFU19BTkRfRVFVQUxTID0gMjtcbmNvbnN0IFFVT1RFX0NIQVIgPSAzO1xuXG5jb25zdCBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCA9IC8nL2c7XG5jb25zdCBkb3VibGVRdW90ZUF0dHJFbmRSZWdleCA9IC9cIi9nO1xuLyoqXG4gKiBNYXRjaGVzIHRoZSByYXcgdGV4dCBlbGVtZW50cy5cbiAqXG4gKiBDb21tZW50cyBhcmUgbm90IHBhcnNlZCB3aXRoaW4gcmF3IHRleHQgZWxlbWVudHMsIHNvIHdlIG5lZWQgdG8gc2VhcmNoIHRoZWlyXG4gKiB0ZXh0IGNvbnRlbnQgZm9yIG1hcmtlciBzdHJpbmdzLlxuICovXG5jb25zdCByYXdUZXh0RWxlbWVudCA9IC9eKD86c2NyaXB0fHN0eWxlfHRleHRhcmVhfHRpdGxlKSQvaTtcblxuLyoqIFRlbXBsYXRlUmVzdWx0IHR5cGVzICovXG5jb25zdCBIVE1MX1JFU1VMVCA9IDE7XG5jb25zdCBTVkdfUkVTVUxUID0gMjtcbmNvbnN0IE1BVEhNTF9SRVNVTFQgPSAzO1xuXG50eXBlIFJlc3VsdFR5cGUgPSB0eXBlb2YgSFRNTF9SRVNVTFQgfCB0eXBlb2YgU1ZHX1JFU1VMVCB8IHR5cGVvZiBNQVRITUxfUkVTVUxUO1xuXG4vLyBUZW1wbGF0ZVBhcnQgdHlwZXNcbi8vIElNUE9SVEFOVDogdGhlc2UgbXVzdCBtYXRjaCB0aGUgdmFsdWVzIGluIFBhcnRUeXBlXG5jb25zdCBBVFRSSUJVVEVfUEFSVCA9IDE7XG5jb25zdCBDSElMRF9QQVJUID0gMjtcbmNvbnN0IFBST1BFUlRZX1BBUlQgPSAzO1xuY29uc3QgQk9PTEVBTl9BVFRSSUJVVEVfUEFSVCA9IDQ7XG5jb25zdCBFVkVOVF9QQVJUID0gNTtcbmNvbnN0IEVMRU1FTlRfUEFSVCA9IDY7XG5jb25zdCBDT01NRU5UX1BBUlQgPSA3O1xuXG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiB0aGUgdGVtcGxhdGUgdGFnIGZ1bmN0aW9ucywge0BsaW5rY29kZSBodG1sfSBhbmRcbiAqIHtAbGlua2NvZGUgc3ZnfSB3aGVuIGl0IGhhc24ndCBiZWVuIGNvbXBpbGVkIGJ5IEBsaXQtbGFicy9jb21waWxlci5cbiAqXG4gKiBBIGBUZW1wbGF0ZVJlc3VsdGAgb2JqZWN0IGhvbGRzIGFsbCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYSB0ZW1wbGF0ZVxuICogZXhwcmVzc2lvbiByZXF1aXJlZCB0byByZW5kZXIgaXQ6IHRoZSB0ZW1wbGF0ZSBzdHJpbmdzLCBleHByZXNzaW9uIHZhbHVlcyxcbiAqIGFuZCB0eXBlIG9mIHRlbXBsYXRlIChodG1sIG9yIHN2ZykuXG4gKlxuICogYFRlbXBsYXRlUmVzdWx0YCBvYmplY3RzIGRvIG5vdCBjcmVhdGUgYW55IERPTSBvbiB0aGVpciBvd24uIFRvIGNyZWF0ZSBvclxuICogdXBkYXRlIERPTSB5b3UgbmVlZCB0byByZW5kZXIgdGhlIGBUZW1wbGF0ZVJlc3VsdGAuIFNlZVxuICogW1JlbmRlcmluZ10oaHR0cHM6Ly9saXQuZGV2L2RvY3MvY29tcG9uZW50cy9yZW5kZXJpbmcpIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqL1xuZXhwb3J0IHR5cGUgVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0PFQgZXh0ZW5kcyBSZXN1bHRUeXBlID0gUmVzdWx0VHlwZT4gPSB7XG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIFsnXyRsaXRUeXBlJCddOiBUO1xuICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbiAgdmFsdWVzOiB1bmtub3duW107XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgYSB0ZW1wbGF0ZSByZXN1bHQgdGhhdCBtYXkgYmUgZWl0aGVyIHVuY29tcGlsZWQgb3IgY29tcGlsZWQuXG4gKlxuICogSW4gdGhlIGZ1dHVyZSwgVGVtcGxhdGVSZXN1bHQgd2lsbCBiZSB0aGlzIHR5cGUuIElmIHlvdSB3YW50IHRvIGV4cGxpY2l0bHlcbiAqIG5vdGUgdGhhdCBhIHRlbXBsYXRlIHJlc3VsdCBpcyBwb3RlbnRpYWxseSBjb21waWxlZCwgeW91IGNhbiByZWZlcmVuY2UgdGhpc1xuICogdHlwZSBhbmQgaXQgd2lsbCBjb250aW51ZSB0byBiZWhhdmUgdGhlIHNhbWUgdGhyb3VnaCB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uXG4gKiBvZiBMaXQuIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3IgY29kZSB0aGF0IHdhbnRzIHRvIHByZXBhcmUgZm9yIHRoZSBuZXh0XG4gKiBtYWpvciB2ZXJzaW9uIG9mIExpdC5cbiAqL1xuZXhwb3J0IHR5cGUgTWF5YmVDb21waWxlZFRlbXBsYXRlUmVzdWx0PFQgZXh0ZW5kcyBSZXN1bHRUeXBlID0gUmVzdWx0VHlwZT4gPVxuICB8IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPlxuICB8IENvbXBpbGVkVGVtcGxhdGVSZXN1bHQ7XG5cbi8qKlxuICogVGhlIHJldHVybiB0eXBlIG9mIHRoZSB0ZW1wbGF0ZSB0YWcgZnVuY3Rpb25zLCB7QGxpbmtjb2RlIGh0bWx9IGFuZFxuICoge0BsaW5rY29kZSBzdmd9LlxuICpcbiAqIEEgYFRlbXBsYXRlUmVzdWx0YCBvYmplY3QgaG9sZHMgYWxsIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhIHRlbXBsYXRlXG4gKiBleHByZXNzaW9uIHJlcXVpcmVkIHRvIHJlbmRlciBpdDogdGhlIHRlbXBsYXRlIHN0cmluZ3MsIGV4cHJlc3Npb24gdmFsdWVzLFxuICogYW5kIHR5cGUgb2YgdGVtcGxhdGUgKGh0bWwgb3Igc3ZnKS5cbiAqXG4gKiBgVGVtcGxhdGVSZXN1bHRgIG9iamVjdHMgZG8gbm90IGNyZWF0ZSBhbnkgRE9NIG9uIHRoZWlyIG93bi4gVG8gY3JlYXRlIG9yXG4gKiB1cGRhdGUgRE9NIHlvdSBuZWVkIHRvIHJlbmRlciB0aGUgYFRlbXBsYXRlUmVzdWx0YC4gU2VlXG4gKiBbUmVuZGVyaW5nXShodHRwczovL2xpdC5kZXYvZG9jcy9jb21wb25lbnRzL3JlbmRlcmluZykgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogSW4gTGl0IDQsIHRoaXMgdHlwZSB3aWxsIGJlIGFuIGFsaWFzIG9mXG4gKiBNYXliZUNvbXBpbGVkVGVtcGxhdGVSZXN1bHQsIHNvIHRoYXQgY29kZSB3aWxsIGdldCB0eXBlIGVycm9ycyBpZiBpdCBhc3N1bWVzXG4gKiB0aGF0IExpdCB0ZW1wbGF0ZXMgYXJlIG5vdCBjb21waWxlZC4gV2hlbiBkZWxpYmVyYXRlbHkgd29ya2luZyB3aXRoIG9ubHlcbiAqIG9uZSwgdXNlIGVpdGhlciB7QGxpbmtjb2RlIENvbXBpbGVkVGVtcGxhdGVSZXN1bHR9IG9yXG4gKiB7QGxpbmtjb2RlIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdH0gZXhwbGljaXRseS5cbiAqL1xuZXhwb3J0IHR5cGUgVGVtcGxhdGVSZXN1bHQ8VCBleHRlbmRzIFJlc3VsdFR5cGUgPSBSZXN1bHRUeXBlPiA9XG4gIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPjtcblxuZXhwb3J0IHR5cGUgSFRNTFRlbXBsYXRlUmVzdWx0ID0gVGVtcGxhdGVSZXN1bHQ8dHlwZW9mIEhUTUxfUkVTVUxUPjtcblxuZXhwb3J0IHR5cGUgU1ZHVGVtcGxhdGVSZXN1bHQgPSBUZW1wbGF0ZVJlc3VsdDx0eXBlb2YgU1ZHX1JFU1VMVD47XG5cbmV4cG9ydCB0eXBlIE1hdGhNTFRlbXBsYXRlUmVzdWx0ID0gVGVtcGxhdGVSZXN1bHQ8dHlwZW9mIE1BVEhNTF9SRVNVTFQ+O1xuXG4vKipcbiAqIEEgVGVtcGxhdGVSZXN1bHQgdGhhdCBoYXMgYmVlbiBjb21waWxlZCBieSBAbGl0LWxhYnMvY29tcGlsZXIsIHNraXBwaW5nIHRoZVxuICogcHJlcGFyZSBzdGVwLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQge1xuICAvLyBUaGlzIGlzIGEgZmFjdG9yeSBpbiBvcmRlciB0byBtYWtlIHRlbXBsYXRlIGluaXRpYWxpemF0aW9uIGxhenlcbiAgLy8gYW5kIGFsbG93IFNoYWR5UmVuZGVyT3B0aW9ucyBzY29wZSB0byBiZSBwYXNzZWQgaW4uXG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIFsnXyRsaXRUeXBlJCddOiBDb21waWxlZFRlbXBsYXRlO1xuICB2YWx1ZXM6IHVua25vd25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21waWxlZFRlbXBsYXRlIGV4dGVuZHMgT21pdDxUZW1wbGF0ZSwgJ2VsJz4ge1xuICAvLyBlbCBpcyBvdmVycmlkZGVuIHRvIGJlIG9wdGlvbmFsLiBXZSBpbml0aWFsaXplIGl0IG9uIGZpcnN0IHJlbmRlclxuICBlbD86IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG5cbiAgLy8gVGhlIHByZXBhcmVkIEhUTUwgc3RyaW5nIHRvIGNyZWF0ZSBhIHRlbXBsYXRlIGVsZW1lbnQgZnJvbS5cbiAgLy8gVGhlIHR5cGUgaXMgYSBUZW1wbGF0ZVN0cmluZ3NBcnJheSB0byBndWFyYW50ZWUgdGhhdCB0aGUgdmFsdWUgY2FtZSBmcm9tXG4gIC8vIHNvdXJjZSBjb2RlLCBwcmV2ZW50aW5nIGEgSlNPTiBpbmplY3Rpb24gYXR0YWNrLlxuICBoOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB0ZW1wbGF0ZSBsaXRlcmFsIHRhZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBUZW1wbGF0ZVJlc3VsdCB3aXRoXG4gKiB0aGUgZ2l2ZW4gcmVzdWx0IHR5cGUuXG4gKi9cbmNvbnN0IHRhZyA9XG4gIDxUIGV4dGVuZHMgUmVzdWx0VHlwZT4odHlwZTogVCkgPT5cbiAgKHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5LCAuLi52YWx1ZXM6IHVua25vd25bXSk6IFRlbXBsYXRlUmVzdWx0PFQ+ID0+IHtcbiAgICAvLyBXYXJuIGFnYWluc3QgdGVtcGxhdGVzIG9jdGFsIGVzY2FwZSBzZXF1ZW5jZXNcbiAgICAvLyBXZSBkbyB0aGlzIGhlcmUgcmF0aGVyIHRoYW4gaW4gcmVuZGVyIHNvIHRoYXQgdGhlIHdhcm5pbmcgaXMgY2xvc2VyIHRvIHRoZVxuICAgIC8vIHRlbXBsYXRlIGRlZmluaXRpb24uXG4gICAgaWYgKERFVl9NT0RFICYmIHN0cmluZ3Muc29tZSgocykgPT4gcyA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnU29tZSB0ZW1wbGF0ZSBzdHJpbmdzIGFyZSB1bmRlZmluZWQuXFxuJyArXG4gICAgICAgICAgJ1RoaXMgaXMgcHJvYmFibHkgY2F1c2VkIGJ5IGlsbGVnYWwgb2N0YWwgZXNjYXBlIHNlcXVlbmNlcy4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIC8vIEltcG9ydCBzdGF0aWMtaHRtbC5qcyByZXN1bHRzIGluIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSB3aGljaCBnMyBkb2Vzbid0XG4gICAgICAvLyBoYW5kbGUuIEluc3RlYWQgd2Uga25vdyB0aGF0IHN0YXRpYyB2YWx1ZXMgbXVzdCBoYXZlIHRoZSBmaWVsZFxuICAgICAgLy8gYF8kbGl0U3RhdGljJGAuXG4gICAgICBpZiAoXG4gICAgICAgIHZhbHVlcy5zb21lKCh2YWwpID0+ICh2YWwgYXMge18kbGl0U3RhdGljJDogdW5rbm93bn0pPy5bJ18kbGl0U3RhdGljJCddKVxuICAgICAgKSB7XG4gICAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgICAnJyxcbiAgICAgICAgICBgU3RhdGljIHZhbHVlcyAnbGl0ZXJhbCcgb3IgJ3Vuc2FmZVN0YXRpYycgY2Fubm90IGJlIHVzZWQgYXMgdmFsdWVzIHRvIG5vbi1zdGF0aWMgdGVtcGxhdGVzLlxcbmAgK1xuICAgICAgICAgICAgYFBsZWFzZSB1c2UgdGhlIHN0YXRpYyAnaHRtbCcgdGFnIGZ1bmN0aW9uLiBTZWUgaHR0cHM6Ly9saXQuZGV2L2RvY3MvdGVtcGxhdGVzL2V4cHJlc3Npb25zLyNzdGF0aWMtZXhwcmVzc2lvbnNgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgICAgWydfJGxpdFR5cGUkJ106IHR5cGUsXG4gICAgICBzdHJpbmdzLFxuICAgICAgdmFsdWVzLFxuICAgIH07XG4gIH07XG5cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gSFRNTCB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGhlYWRlciA9ICh0aXRsZTogc3RyaW5nKSA9PiBodG1sYDxoMT4ke3RpdGxlfTwvaDE+YDtcbiAqIGBgYFxuICpcbiAqIFRoZSBgaHRtbGAgdGFnIHJldHVybnMgYSBkZXNjcmlwdGlvbiBvZiB0aGUgRE9NIHRvIHJlbmRlciBhcyBhIHZhbHVlLiBJdCBpc1xuICogbGF6eSwgbWVhbmluZyBubyB3b3JrIGlzIGRvbmUgdW50aWwgdGhlIHRlbXBsYXRlIGlzIHJlbmRlcmVkLiBXaGVuIHJlbmRlcmluZyxcbiAqIGlmIGEgdGVtcGxhdGUgY29tZXMgZnJvbSB0aGUgc2FtZSBleHByZXNzaW9uIGFzIGEgcHJldmlvdXNseSByZW5kZXJlZCByZXN1bHQsXG4gKiBpdCdzIGVmZmljaWVudGx5IHVwZGF0ZWQgaW5zdGVhZCBvZiByZXBsYWNlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSB0YWcoSFRNTF9SRVNVTFQpO1xuXG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIFNWRyBmcmFnbWVudCB0aGF0IGNhbiBlZmZpY2llbnRseSByZW5kZXJcbiAqIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHJlY3QgPSBzdmdgPHJlY3Qgd2lkdGg9XCIxMFwiIGhlaWdodD1cIjEwXCI+PC9yZWN0PmA7XG4gKlxuICogY29uc3QgbXlJbWFnZSA9IGh0bWxgXG4gKiAgIDxzdmcgdmlld0JveD1cIjAgMCAxMCAxMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAqICAgICAke3JlY3R9XG4gKiAgIDwvc3ZnPmA7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYHN2Z2AgKnRhZyBmdW5jdGlvbiogc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgU1ZHIGZyYWdtZW50cywgb3IgZWxlbWVudHNcbiAqIHRoYXQgd291bGQgYmUgY29udGFpbmVkICoqaW5zaWRlKiogYW4gYDxzdmc+YCBIVE1MIGVsZW1lbnQuIEEgY29tbW9uIGVycm9yIGlzXG4gKiBwbGFjaW5nIGFuIGA8c3ZnPmAgKmVsZW1lbnQqIGluIGEgdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIGBzdmdgIHRhZ1xuICogZnVuY3Rpb24uIFRoZSBgPHN2Zz5gIGVsZW1lbnQgaXMgYW4gSFRNTCBlbGVtZW50IGFuZCBzaG91bGQgYmUgdXNlZCB3aXRoaW4gYVxuICogdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIHtAbGlua2NvZGUgaHRtbH0gdGFnIGZ1bmN0aW9uLlxuICpcbiAqIEluIExpdEVsZW1lbnQgdXNhZ2UsIGl0J3MgaW52YWxpZCB0byByZXR1cm4gYW4gU1ZHIGZyYWdtZW50IGZyb20gdGhlXG4gKiBgcmVuZGVyKClgIG1ldGhvZCwgYXMgdGhlIFNWRyBmcmFnbWVudCB3aWxsIGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlIGVsZW1lbnQnc1xuICogc2hhZG93IHJvb3QgYW5kIHRodXMgbm90IGJlIHByb3Blcmx5IGNvbnRhaW5lZCB3aXRoaW4gYW4gYDxzdmc+YCBIVE1MXG4gKiBlbGVtZW50LlxuICovXG5leHBvcnQgY29uc3Qgc3ZnID0gdGFnKFNWR19SRVNVTFQpO1xuXG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIE1hdGhNTCBmcmFnbWVudCB0aGF0IGNhbiBlZmZpY2llbnRseSByZW5kZXJcbiAqIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IG51bSA9IG1hdGhtbGA8bW4+MTwvbW4+YDtcbiAqXG4gKiBjb25zdCBlcSA9IGh0bWxgXG4gKiAgIDxtYXRoPlxuICogICAgICR7bnVtfVxuICogICA8L21hdGg+YDtcbiAqIGBgYFxuICpcbiAqIFRoZSBgbWF0aG1sYCAqdGFnIGZ1bmN0aW9uKiBzaG91bGQgb25seSBiZSB1c2VkIGZvciBNYXRoTUwgZnJhZ21lbnRzLCBvclxuICogZWxlbWVudHMgdGhhdCB3b3VsZCBiZSBjb250YWluZWQgKippbnNpZGUqKiBhIGA8bWF0aD5gIEhUTUwgZWxlbWVudC4gQSBjb21tb25cbiAqIGVycm9yIGlzIHBsYWNpbmcgYSBgPG1hdGg+YCAqZWxlbWVudCogaW4gYSB0ZW1wbGF0ZSB0YWdnZWQgd2l0aCB0aGUgYG1hdGhtbGBcbiAqIHRhZyBmdW5jdGlvbi4gVGhlIGA8bWF0aD5gIGVsZW1lbnQgaXMgYW4gSFRNTCBlbGVtZW50IGFuZCBzaG91bGQgYmUgdXNlZFxuICogd2l0aGluIGEgdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIHtAbGlua2NvZGUgaHRtbH0gdGFnIGZ1bmN0aW9uLlxuICpcbiAqIEluIExpdEVsZW1lbnQgdXNhZ2UsIGl0J3MgaW52YWxpZCB0byByZXR1cm4gYW4gTWF0aE1MIGZyYWdtZW50IGZyb20gdGhlXG4gKiBgcmVuZGVyKClgIG1ldGhvZCwgYXMgdGhlIE1hdGhNTCBmcmFnbWVudCB3aWxsIGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlXG4gKiBlbGVtZW50J3Mgc2hhZG93IHJvb3QgYW5kIHRodXMgbm90IGJlIHByb3Blcmx5IGNvbnRhaW5lZCB3aXRoaW4gYSBgPG1hdGg+YFxuICogSFRNTCBlbGVtZW50LlxuICovXG5leHBvcnQgY29uc3QgbWF0aG1sID0gdGFnKE1BVEhNTF9SRVNVTFQpO1xuXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSBTeW1ib2wuZm9yKCdsaXQtbm9DaGFuZ2UnKTtcblxuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyBhIENoaWxkUGFydCB0byBmdWxseSBjbGVhciBpdHMgY29udGVudC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgYnV0dG9uID0gaHRtbGAke1xuICogIHVzZXIuaXNBZG1pblxuICogICAgPyBodG1sYDxidXR0b24+REVMRVRFPC9idXR0b24+YFxuICogICAgOiBub3RoaW5nXG4gKiB9YDtcbiAqIGBgYFxuICpcbiAqIFByZWZlciB1c2luZyBgbm90aGluZ2Agb3ZlciBvdGhlciBmYWxzeSB2YWx1ZXMgYXMgaXQgcHJvdmlkZXMgYSBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBiZXR3ZWVuIHZhcmlvdXMgZXhwcmVzc2lvbiBiaW5kaW5nIGNvbnRleHRzLlxuICpcbiAqIEluIGNoaWxkIGV4cHJlc3Npb25zLCBgdW5kZWZpbmVkYCwgYG51bGxgLCBgJydgLCBhbmQgYG5vdGhpbmdgIGFsbCBiZWhhdmUgdGhlXG4gKiBzYW1lIGFuZCByZW5kZXIgbm8gbm9kZXMuIEluIGF0dHJpYnV0ZSBleHByZXNzaW9ucywgYG5vdGhpbmdgIF9yZW1vdmVzXyB0aGVcbiAqIGF0dHJpYnV0ZSwgd2hpbGUgYHVuZGVmaW5lZGAgYW5kIGBudWxsYCB3aWxsIHJlbmRlciBhbiBlbXB0eSBzdHJpbmcuIEluXG4gKiBwcm9wZXJ0eSBleHByZXNzaW9ucyBgbm90aGluZ2AgYmVjb21lcyBgdW5kZWZpbmVkYC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmcgPSBTeW1ib2wuZm9yKCdsaXQtbm90aGluZycpO1xuXG4vKipcbiAqIFRoZSBjYWNoZSBvZiBwcmVwYXJlZCB0ZW1wbGF0ZXMsIGtleWVkIGJ5IHRoZSB0YWdnZWQgVGVtcGxhdGVTdHJpbmdzQXJyYXlcbiAqIGFuZCBfbm90XyBhY2NvdW50aW5nIGZvciB0aGUgc3BlY2lmaWMgdGVtcGxhdGUgdGFnIHVzZWQuIFRoaXMgbWVhbnMgdGhhdFxuICogdGVtcGxhdGUgdGFncyBjYW5ub3QgYmUgZHluYW1pYyAtIHRoZXkgbXVzdCBzdGF0aWNhbGx5IGJlIG9uZSBvZiBodG1sLCBzdmcsXG4gKiBvciBhdHRyLiBUaGlzIHJlc3RyaWN0aW9uIHNpbXBsaWZpZXMgdGhlIGNhY2hlIGxvb2t1cCwgd2hpY2ggaXMgb24gdGhlIGhvdFxuICogcGF0aCBmb3IgcmVuZGVyaW5nLlxuICovXG5jb25zdCB0ZW1wbGF0ZUNhY2hlID0gbmV3IFdlYWtNYXA8VGVtcGxhdGVTdHJpbmdzQXJyYXksIFRlbXBsYXRlPigpO1xuXG4vKipcbiAqIE9iamVjdCBzcGVjaWZ5aW5nIG9wdGlvbnMgZm9yIGNvbnRyb2xsaW5nIGxpdC1odG1sIHJlbmRlcmluZy4gTm90ZSB0aGF0XG4gKiB3aGlsZSBgcmVuZGVyYCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIGBjb250YWluZXJgIChhbmRcbiAqIGByZW5kZXJCZWZvcmVgIHJlZmVyZW5jZSBub2RlKSB0byBlZmZpY2llbnRseSB1cGRhdGUgdGhlIHJlbmRlcmVkIGNvbnRlbnQsXG4gKiBvbmx5IHRoZSBvcHRpb25zIHBhc3NlZCBpbiBkdXJpbmcgdGhlIGZpcnN0IHJlbmRlciBhcmUgcmVzcGVjdGVkIGR1cmluZ1xuICogdGhlIGxpZmV0aW1lIG9mIHJlbmRlcnMgdG8gdGhhdCB1bmlxdWUgYGNvbnRhaW5lcmAgKyBgcmVuZGVyQmVmb3JlYFxuICogY29tYmluYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdG8gdXNlIGFzIHRoZSBgdGhpc2AgdmFsdWUgZm9yIGV2ZW50IGxpc3RlbmVycy4gSXQncyBvZnRlblxuICAgKiB1c2VmdWwgdG8gc2V0IHRoaXMgdG8gdGhlIGhvc3QgY29tcG9uZW50IHJlbmRlcmluZyBhIHRlbXBsYXRlLlxuICAgKi9cbiAgaG9zdD86IG9iamVjdDtcbiAgLyoqXG4gICAqIEEgRE9NIG5vZGUgYmVmb3JlIHdoaWNoIHRvIHJlbmRlciBjb250ZW50IGluIHRoZSBjb250YWluZXIuXG4gICAqL1xuICByZW5kZXJCZWZvcmU/OiBDaGlsZE5vZGUgfCBudWxsO1xuICAvKipcbiAgICogTm9kZSB1c2VkIGZvciBjbG9uaW5nIHRoZSB0ZW1wbGF0ZSAoYGltcG9ydE5vZGVgIHdpbGwgYmUgY2FsbGVkIG9uIHRoaXNcbiAgICogbm9kZSkuIFRoaXMgY29udHJvbHMgdGhlIGBvd25lckRvY3VtZW50YCBvZiB0aGUgcmVuZGVyZWQgRE9NLCBhbG9uZyB3aXRoXG4gICAqIGFueSBpbmhlcml0ZWQgY29udGV4dC4gRGVmYXVsdHMgdG8gdGhlIGdsb2JhbCBgZG9jdW1lbnRgLlxuICAgKi9cbiAgY3JlYXRpb25TY29wZT86IHtpbXBvcnROb2RlKG5vZGU6IE5vZGUsIGRlZXA/OiBib29sZWFuKTogTm9kZX07XG4gIC8qKlxuICAgKiBUaGUgaW5pdGlhbCBjb25uZWN0ZWQgc3RhdGUgZm9yIHRoZSB0b3AtbGV2ZWwgcGFydCBiZWluZyByZW5kZXJlZC4gSWYgbm9cbiAgICogYGlzQ29ubmVjdGVkYCBvcHRpb24gaXMgc2V0LCBgQXN5bmNEaXJlY3RpdmVgcyB3aWxsIGJlIGNvbm5lY3RlZCBieVxuICAgKiBkZWZhdWx0LiBTZXQgdG8gYGZhbHNlYCBpZiB0aGUgaW5pdGlhbCByZW5kZXIgb2NjdXJzIGluIGEgZGlzY29ubmVjdGVkIHRyZWVcbiAgICogYW5kIGBBc3luY0RpcmVjdGl2ZWBzIHNob3VsZCBzZWUgYGlzQ29ubmVjdGVkID09PSBmYWxzZWAgZm9yIHRoZWlyIGluaXRpYWxcbiAgICogcmVuZGVyLiBUaGUgYHBhcnQuc2V0Q29ubmVjdGVkKClgIG1ldGhvZCBtdXN0IGJlIHVzZWQgc3Vic2VxdWVudCB0byBpbml0aWFsXG4gICAqIHJlbmRlciB0byBjaGFuZ2UgdGhlIGNvbm5lY3RlZCBzdGF0ZSBvZiB0aGUgcGFydC5cbiAgICovXG4gIGlzQ29ubmVjdGVkPzogYm9vbGVhbjtcbn1cblxuY29uc3Qgd2Fsa2VyID0gZC5jcmVhdGVUcmVlV2Fsa2VyKFxuICBkLFxuICAxMjkgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR9ICovXG4pO1xuXG5sZXQgc2FuaXRpemVyRmFjdG9yeUludGVybmFsOiBTYW5pdGl6ZXJGYWN0b3J5ID0gbm9vcFNhbml0aXplcjtcblxuLy9cbi8vIENsYXNzZXMgb25seSBiZWxvdyBoZXJlLCBjb25zdCB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgb25seSBhYm92ZSBoZXJlLi4uXG4vL1xuLy8gS2VlcGluZyB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgYW5kIGNsYXNzZXMgdG9nZXRoZXIgaW1wcm92ZXMgbWluaWZpY2F0aW9uLlxuLy8gSW50ZXJmYWNlcyBhbmQgdHlwZSBhbGlhc2VzIGNhbiBiZSBpbnRlcmxlYXZlZCBmcmVlbHkuXG4vL1xuXG4vLyBUeXBlIGZvciBjbGFzc2VzIHRoYXQgaGF2ZSBhIGBfZGlyZWN0aXZlYCBvciBgX2RpcmVjdGl2ZXNbXWAgZmllbGQsIHVzZWQgYnlcbi8vIGByZXNvbHZlRGlyZWN0aXZlYFxuZXhwb3J0IGludGVyZmFjZSBEaXJlY3RpdmVQYXJlbnQge1xuICBfJHBhcmVudD86IERpcmVjdGl2ZVBhcmVudDtcbiAgXyRpc0Nvbm5lY3RlZDogYm9vbGVhbjtcbiAgX19kaXJlY3RpdmU/OiBEaXJlY3RpdmU7XG4gIF9fZGlyZWN0aXZlcz86IEFycmF5PERpcmVjdGl2ZSB8IHVuZGVmaW5lZD47XG59XG5cbmZ1bmN0aW9uIHRydXN0RnJvbVRlbXBsYXRlU3RyaW5nKFxuICB0c2E6IFRlbXBsYXRlU3RyaW5nc0FycmF5LFxuICBzdHJpbmdGcm9tVFNBOiBzdHJpbmdcbik6IFRydXN0ZWRIVE1MIHtcbiAgLy8gQSBzZWN1cml0eSBjaGVjayB0byBwcmV2ZW50IHNwb29maW5nIG9mIExpdCB0ZW1wbGF0ZSByZXN1bHRzLlxuICAvLyBJbiB0aGUgZnV0dXJlLCB3ZSBtYXkgYmUgYWJsZSB0byByZXBsYWNlIHRoaXMgd2l0aCBBcnJheS5pc1RlbXBsYXRlT2JqZWN0LFxuICAvLyB0aG91Z2ggd2UgbWlnaHQgbmVlZCB0byBtYWtlIHRoYXQgY2hlY2sgaW5zaWRlIG9mIHRoZSBodG1sIGFuZCBzdmdcbiAgLy8gZnVuY3Rpb25zLCBiZWNhdXNlIHByZWNvbXBpbGVkIHRlbXBsYXRlcyBkb24ndCBjb21lIGluIGFzXG4gIC8vIFRlbXBsYXRlU3RyaW5nQXJyYXkgb2JqZWN0cy5cbiAgaWYgKCFpc0FycmF5KHRzYSkgfHwgIXRzYS5oYXNPd25Qcm9wZXJ0eSgncmF3JykpIHtcbiAgICBsZXQgbWVzc2FnZSA9ICdpbnZhbGlkIHRlbXBsYXRlIHN0cmluZ3MgYXJyYXknO1xuICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgbWVzc2FnZSA9IGBcbiAgICAgICAgICBJbnRlcm5hbCBFcnJvcjogZXhwZWN0ZWQgdGVtcGxhdGUgc3RyaW5ncyB0byBiZSBhbiBhcnJheVxuICAgICAgICAgIHdpdGggYSAncmF3JyBmaWVsZC4gRmFraW5nIGEgdGVtcGxhdGUgc3RyaW5ncyBhcnJheSBieVxuICAgICAgICAgIGNhbGxpbmcgaHRtbCBvciBzdmcgbGlrZSBhbiBvcmRpbmFyeSBmdW5jdGlvbiBpcyBlZmZlY3RpdmVseVxuICAgICAgICAgIHRoZSBzYW1lIGFzIGNhbGxpbmcgdW5zYWZlSHRtbCBhbmQgY2FuIGxlYWQgdG8gbWFqb3Igc2VjdXJpdHlcbiAgICAgICAgICBpc3N1ZXMsIGUuZy4gb3BlbmluZyB5b3VyIGNvZGUgdXAgdG8gWFNTIGF0dGFja3MuXG4gICAgICAgICAgSWYgeW91J3JlIHVzaW5nIHRoZSBodG1sIG9yIHN2ZyB0YWdnZWQgdGVtcGxhdGUgZnVuY3Rpb25zIG5vcm1hbGx5XG4gICAgICAgICAgYW5kIHN0aWxsIHNlZWluZyB0aGlzIGVycm9yLCBwbGVhc2UgZmlsZSBhIGJ1ZyBhdFxuICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L2lzc3Vlcy9uZXc/dGVtcGxhdGU9YnVnX3JlcG9ydC5tZFxuICAgICAgICAgIGFuZCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgYnVpbGQgdG9vbGluZywgaWYgYW55LlxuICAgICAgICBgXG4gICAgICAgIC50cmltKClcbiAgICAgICAgLnJlcGxhY2UoL1xcbiAqL2csICdcXG4nKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBwb2xpY3kgIT09IHVuZGVmaW5lZFxuICAgID8gcG9saWN5LmNyZWF0ZUhUTUwoc3RyaW5nRnJvbVRTQSlcbiAgICA6IChzdHJpbmdGcm9tVFNBIGFzIHVua25vd24gYXMgVHJ1c3RlZEhUTUwpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSFRNTCBzdHJpbmcgZm9yIHRoZSBnaXZlbiBUZW1wbGF0ZVN0cmluZ3NBcnJheSBhbmQgcmVzdWx0IHR5cGVcbiAqIChIVE1MIG9yIFNWRyksIGFsb25nIHdpdGggdGhlIGNhc2Utc2Vuc2l0aXZlIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcyBpblxuICogdGVtcGxhdGUgb3JkZXIuIFRoZSBIVE1MIGNvbnRhaW5zIGNvbW1lbnQgbWFya2VycyBkZW5vdGluZyB0aGUgYENoaWxkUGFydGBzXG4gKiBhbmQgc3VmZml4ZXMgb24gYm91bmQgYXR0cmlidXRlcyBkZW5vdGluZyB0aGUgYEF0dHJpYnV0ZVBhcnRzYC5cbiAqXG4gKiBAcGFyYW0gc3RyaW5ncyB0ZW1wbGF0ZSBzdHJpbmdzIGFycmF5XG4gKiBAcGFyYW0gdHlwZSBIVE1MIG9yIFNWR1xuICogQHJldHVybiBBcnJheSBjb250YWluaW5nIGBbaHRtbCwgYXR0ck5hbWVzXWAgKGFycmF5IHJldHVybmVkIGZvciB0ZXJzZW5lc3MsXG4gKiAgICAgdG8gYXZvaWQgb2JqZWN0IGZpZWxkcyBzaW5jZSB0aGlzIGNvZGUgaXMgc2hhcmVkIHdpdGggbm9uLW1pbmlmaWVkIFNTUlxuICogICAgIGNvZGUpXG4gKi9cbmNvbnN0IGdldFRlbXBsYXRlSHRtbCA9IChcbiAgc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXksXG4gIHR5cGU6IFJlc3VsdFR5cGVcbik6IFtUcnVzdGVkSFRNTCwgQXJyYXk8c3RyaW5nPl0gPT4ge1xuICAvLyBJbnNlcnQgbWFrZXJzIGludG8gdGhlIHRlbXBsYXRlIEhUTUwgdG8gcmVwcmVzZW50IHRoZSBwb3NpdGlvbiBvZlxuICAvLyBiaW5kaW5ncy4gVGhlIGZvbGxvd2luZyBjb2RlIHNjYW5zIHRoZSB0ZW1wbGF0ZSBzdHJpbmdzIHRvIGRldGVybWluZSB0aGVcbiAgLy8gc3ludGFjdGljIHBvc2l0aW9uIG9mIHRoZSBiaW5kaW5ncy4gVGhleSBjYW4gYmUgaW4gdGV4dCBwb3NpdGlvbiwgd2hlcmVcbiAgLy8gd2UgaW5zZXJ0IGFuIEhUTUwgY29tbWVudCwgYXR0cmlidXRlIHZhbHVlIHBvc2l0aW9uLCB3aGVyZSB3ZSBpbnNlcnQgYVxuICAvLyBzZW50aW5lbCBzdHJpbmcgYW5kIHJlLXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZSwgb3IgaW5zaWRlIGEgdGFnIHdoZXJlXG4gIC8vIHdlIGluc2VydCB0aGUgc2VudGluZWwgc3RyaW5nLlxuICBjb25zdCBsID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAvLyBTdG9yZXMgdGhlIGNhc2Utc2Vuc2l0aXZlIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcyBpbiB0aGUgb3JkZXIgb2YgdGhlaXJcbiAgLy8gcGFydHMuIEVsZW1lbnRQYXJ0cyBhcmUgYWxzbyByZWZsZWN0ZWQgaW4gdGhpcyBhcnJheSBhcyB1bmRlZmluZWRcbiAgLy8gcmF0aGVyIHRoYW4gYSBzdHJpbmcsIHRvIGRpc2FtYmlndWF0ZSBmcm9tIGF0dHJpYnV0ZSBiaW5kaW5ncy5cbiAgY29uc3QgYXR0ck5hbWVzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGxldCBodG1sID1cbiAgICB0eXBlID09PSBTVkdfUkVTVUxUID8gJzxzdmc+JyA6IHR5cGUgPT09IE1BVEhNTF9SRVNVTFQgPyAnPG1hdGg+JyA6ICcnO1xuXG4gIC8vIFdoZW4gd2UncmUgaW5zaWRlIGEgcmF3IHRleHQgdGFnIChub3QgaXQncyB0ZXh0IGNvbnRlbnQpLCB0aGUgcmVnZXhcbiAgLy8gd2lsbCBzdGlsbCBiZSB0YWdSZWdleCBzbyB3ZSBjYW4gZmluZCBhdHRyaWJ1dGVzLCBidXQgd2lsbCBzd2l0Y2ggdG9cbiAgLy8gdGhpcyByZWdleCB3aGVuIHRoZSB0YWcgZW5kcy5cbiAgbGV0IHJhd1RleHRFbmRSZWdleDogUmVnRXhwIHwgdW5kZWZpbmVkO1xuXG4gIC8vIFRoZSBjdXJyZW50IHBhcnNpbmcgc3RhdGUsIHJlcHJlc2VudGVkIGFzIGEgcmVmZXJlbmNlIHRvIG9uZSBvZiB0aGVcbiAgLy8gcmVnZXhlc1xuICBsZXQgcmVnZXggPSB0ZXh0RW5kUmVnZXg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBjb25zdCBzID0gc3RyaW5nc1tpXTtcbiAgICAvLyBUaGUgaW5kZXggb2YgdGhlIGVuZCBvZiB0aGUgbGFzdCBhdHRyaWJ1dGUgbmFtZS4gV2hlbiB0aGlzIGlzXG4gICAgLy8gcG9zaXRpdmUgYXQgZW5kIG9mIGEgc3RyaW5nLCBpdCBtZWFucyB3ZSdyZSBpbiBhbiBhdHRyaWJ1dGUgdmFsdWVcbiAgICAvLyBwb3NpdGlvbiBhbmQgbmVlZCB0byByZXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZS5cbiAgICAvLyBXZSBhbHNvIHVzZSBhIHNwZWNpYWwgdmFsdWUgb2YgLTIgdG8gaW5kaWNhdGUgdGhhdCB3ZSBlbmNvdW50ZXJlZFxuICAgIC8vIHRoZSBlbmQgb2YgYSBzdHJpbmcgaW4gYXR0cmlidXRlIG5hbWUgcG9zaXRpb24uXG4gICAgbGV0IGF0dHJOYW1lRW5kSW5kZXggPSAtMTtcbiAgICBsZXQgYXR0ck5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBsZXQgbWF0Y2ghOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsO1xuXG4gICAgLy8gVGhlIGNvbmRpdGlvbnMgaW4gdGhpcyBsb29wIGhhbmRsZSB0aGUgY3VycmVudCBwYXJzZSBzdGF0ZSwgYW5kIHRoZVxuICAgIC8vIGFzc2lnbm1lbnRzIHRvIHRoZSBgcmVnZXhgIHZhcmlhYmxlIGFyZSB0aGUgc3RhdGUgdHJhbnNpdGlvbnMuXG4gICAgd2hpbGUgKGxhc3RJbmRleCA8IHMubGVuZ3RoKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgd2Ugc3RhcnQgc2VhcmNoaW5nIGZyb20gd2hlcmUgd2UgcHJldmlvdXNseSBsZWZ0IG9mZlxuICAgICAgcmVnZXgubGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgbWF0Y2ggPSByZWdleC5leGVjKHMpO1xuICAgICAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGFzdEluZGV4ID0gcmVnZXgubGFzdEluZGV4O1xuICAgICAgaWYgKHJlZ2V4ID09PSB0ZXh0RW5kUmVnZXgpIHtcbiAgICAgICAgaWYgKG1hdGNoW0NPTU1FTlRfU1RBUlRdID09PSAnIS0tJykge1xuICAgICAgICAgIHJlZ2V4ID0gY29tbWVudEVuZFJlZ2V4O1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoW0NPTU1FTlRfU1RBUlRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBXZSBzdGFydGVkIGEgd2VpcmQgY29tbWVudCwgbGlrZSA8L3tcbiAgICAgICAgICByZWdleCA9IGNvbW1lbnQyRW5kUmVnZXg7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbVEFHX05BTUVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAocmF3VGV4dEVsZW1lbnQudGVzdChtYXRjaFtUQUdfTkFNRV0pKSB7XG4gICAgICAgICAgICAvLyBSZWNvcmQgaWYgd2UgZW5jb3VudGVyIGEgcmF3LXRleHQgZWxlbWVudC4gV2UnbGwgc3dpdGNoIHRvXG4gICAgICAgICAgICAvLyB0aGlzIHJlZ2V4IGF0IHRoZSBlbmQgb2YgdGhlIHRhZy5cbiAgICAgICAgICAgIHJhd1RleHRFbmRSZWdleCA9IG5ldyBSZWdFeHAoYDwvJHttYXRjaFtUQUdfTkFNRV19YCwgJ2cnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVnZXggPSB0YWdFbmRSZWdleDtcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaFtEWU5BTUlDX1RBR19OQU1FXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICdCaW5kaW5ncyBpbiB0YWcgbmFtZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2Ugc3RhdGljIHRlbXBsYXRlcyBpbnN0ZWFkLiAnICtcbiAgICAgICAgICAgICAgICAnU2VlIGh0dHBzOi8vbGl0LmRldi9kb2NzL3RlbXBsYXRlcy9leHByZXNzaW9ucy8jc3RhdGljLWV4cHJlc3Npb25zJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVnZXggPSB0YWdFbmRSZWdleDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWdleCA9PT0gdGFnRW5kUmVnZXgpIHtcbiAgICAgICAgaWYgKG1hdGNoW0VOVElSRV9NQVRDSF0gPT09ICc+Jykge1xuICAgICAgICAgIC8vIEVuZCBvZiBhIHRhZy4gSWYgd2UgaGFkIHN0YXJ0ZWQgYSByYXctdGV4dCBlbGVtZW50LCB1c2UgdGhhdFxuICAgICAgICAgIC8vIHJlZ2V4XG4gICAgICAgICAgcmVnZXggPSByYXdUZXh0RW5kUmVnZXggPz8gdGV4dEVuZFJlZ2V4O1xuICAgICAgICAgIC8vIFdlIG1heSBiZSBlbmRpbmcgYW4gdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLCBzbyBtYWtlIHN1cmUgd2VcbiAgICAgICAgICAvLyBjbGVhciBhbnkgcGVuZGluZyBhdHRyTmFtZUVuZEluZGV4XG4gICAgICAgICAgYXR0ck5hbWVFbmRJbmRleCA9IC0xO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoW0FUVFJJQlVURV9OQU1FXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gQXR0cmlidXRlIG5hbWUgcG9zaXRpb25cbiAgICAgICAgICBhdHRyTmFtZUVuZEluZGV4ID0gLTI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0ck5hbWVFbmRJbmRleCA9IHJlZ2V4Lmxhc3RJbmRleCAtIG1hdGNoW1NQQUNFU19BTkRfRVFVQUxTXS5sZW5ndGg7XG4gICAgICAgICAgYXR0ck5hbWUgPSBtYXRjaFtBVFRSSUJVVEVfTkFNRV07XG4gICAgICAgICAgcmVnZXggPVxuICAgICAgICAgICAgbWF0Y2hbUVVPVEVfQ0hBUl0gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IHRhZ0VuZFJlZ2V4XG4gICAgICAgICAgICAgIDogbWF0Y2hbUVVPVEVfQ0hBUl0gPT09ICdcIidcbiAgICAgICAgICAgICAgICA/IGRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4XG4gICAgICAgICAgICAgICAgOiBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcmVnZXggPT09IGRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4IHx8XG4gICAgICAgIHJlZ2V4ID09PSBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleFxuICAgICAgKSB7XG4gICAgICAgIHJlZ2V4ID0gdGFnRW5kUmVnZXg7XG4gICAgICB9IGVsc2UgaWYgKHJlZ2V4ID09PSBjb21tZW50RW5kUmVnZXggfHwgcmVnZXggPT09IGNvbW1lbnQyRW5kUmVnZXgpIHtcbiAgICAgICAgcmVnZXggPSB0ZXh0RW5kUmVnZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3Qgb25lIG9mIHRoZSBmaXZlIHN0YXRlIHJlZ2V4ZXMsIHNvIGl0IG11c3QgYmUgdGhlIGR5bmFtaWNhbGx5XG4gICAgICAgIC8vIGNyZWF0ZWQgcmF3IHRleHQgcmVnZXggYW5kIHdlJ3JlIGF0IHRoZSBjbG9zZSBvZiB0aGF0IGVsZW1lbnQuXG4gICAgICAgIHJlZ2V4ID0gdGFnRW5kUmVnZXg7XG4gICAgICAgIHJhd1RleHRFbmRSZWdleCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgYSBhdHRyTmFtZUVuZEluZGV4LCB3aGljaCBpbmRpY2F0ZXMgdGhhdCB3ZSBzaG91bGRcbiAgICAgIC8vIHJld3JpdGUgdGhlIGF0dHJpYnV0ZSBuYW1lLCBhc3NlcnQgdGhhdCB3ZSdyZSBpbiBhIHZhbGlkIGF0dHJpYnV0ZVxuICAgICAgLy8gcG9zaXRpb24gLSBlaXRoZXIgaW4gYSB0YWcsIG9yIGEgcXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgIGNvbnNvbGUuYXNzZXJ0KFxuICAgICAgICBhdHRyTmFtZUVuZEluZGV4ID09PSAtMSB8fFxuICAgICAgICAgIHJlZ2V4ID09PSB0YWdFbmRSZWdleCB8fFxuICAgICAgICAgIHJlZ2V4ID09PSBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCB8fFxuICAgICAgICAgIHJlZ2V4ID09PSBkb3VibGVRdW90ZUF0dHJFbmRSZWdleCxcbiAgICAgICAgJ3VuZXhwZWN0ZWQgcGFyc2Ugc3RhdGUgQidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gV2UgaGF2ZSBmb3VyIGNhc2VzOlxuICAgIC8vICAxLiBXZSdyZSBpbiB0ZXh0IHBvc2l0aW9uLCBhbmQgbm90IGluIGEgcmF3IHRleHQgZWxlbWVudFxuICAgIC8vICAgICAocmVnZXggPT09IHRleHRFbmRSZWdleCk6IGluc2VydCBhIGNvbW1lbnQgbWFya2VyLlxuICAgIC8vICAyLiBXZSBoYXZlIGEgbm9uLW5lZ2F0aXZlIGF0dHJOYW1lRW5kSW5kZXggd2hpY2ggbWVhbnMgd2UgbmVlZCB0b1xuICAgIC8vICAgICByZXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZSB0byBhZGQgYSBib3VuZCBhdHRyaWJ1dGUgc3VmZml4LlxuICAgIC8vICAzLiBXZSdyZSBhdCB0aGUgbm9uLWZpcnN0IGJpbmRpbmcgaW4gYSBtdWx0aS1iaW5kaW5nIGF0dHJpYnV0ZSwgdXNlIGFcbiAgICAvLyAgICAgcGxhaW4gbWFya2VyLlxuICAgIC8vICA0LiBXZSdyZSBzb21ld2hlcmUgZWxzZSBpbnNpZGUgdGhlIHRhZy4gSWYgd2UncmUgaW4gYXR0cmlidXRlIG5hbWVcbiAgICAvLyAgICAgcG9zaXRpb24gKGF0dHJOYW1lRW5kSW5kZXggPT09IC0yKSwgYWRkIGEgc2VxdWVudGlhbCBzdWZmaXggdG9cbiAgICAvLyAgICAgZ2VuZXJhdGUgYSB1bmlxdWUgYXR0cmlidXRlIG5hbWUuXG5cbiAgICAvLyBEZXRlY3QgYSBiaW5kaW5nIG5leHQgdG8gc2VsZi1jbG9zaW5nIHRhZyBlbmQgYW5kIGluc2VydCBhIHNwYWNlIHRvXG4gICAgLy8gc2VwYXJhdGUgdGhlIG1hcmtlciBmcm9tIHRoZSB0YWcgZW5kOlxuICAgIGNvbnN0IGVuZCA9XG4gICAgICByZWdleCA9PT0gdGFnRW5kUmVnZXggJiYgc3RyaW5nc1tpICsgMV0uc3RhcnRzV2l0aCgnLz4nKSA/ICcgJyA6ICcnO1xuICAgIGh0bWwgKz1cbiAgICAgIHJlZ2V4ID09PSB0ZXh0RW5kUmVnZXhcbiAgICAgICAgPyBzICsgbm9kZU1hcmtlclxuICAgICAgICA6IGF0dHJOYW1lRW5kSW5kZXggPj0gMFxuICAgICAgICAgID8gKGF0dHJOYW1lcy5wdXNoKGF0dHJOYW1lISksXG4gICAgICAgICAgICBzLnNsaWNlKDAsIGF0dHJOYW1lRW5kSW5kZXgpICtcbiAgICAgICAgICAgICAgYm91bmRBdHRyaWJ1dGVTdWZmaXggK1xuICAgICAgICAgICAgICBzLnNsaWNlKGF0dHJOYW1lRW5kSW5kZXgpKSArXG4gICAgICAgICAgICBtYXJrZXIgK1xuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgOiBzICsgbWFya2VyICsgKGF0dHJOYW1lRW5kSW5kZXggPT09IC0yID8gaSA6IGVuZCk7XG4gIH1cblxuICBjb25zdCBodG1sUmVzdWx0OiBzdHJpbmcgfCBUcnVzdGVkSFRNTCA9XG4gICAgaHRtbCArXG4gICAgKHN0cmluZ3NbbF0gfHwgJzw/PicpICtcbiAgICAodHlwZSA9PT0gU1ZHX1JFU1VMVCA/ICc8L3N2Zz4nIDogdHlwZSA9PT0gTUFUSE1MX1JFU1VMVCA/ICc8L21hdGg+JyA6ICcnKTtcblxuICAvLyBSZXR1cm5lZCBhcyBhbiBhcnJheSBmb3IgdGVyc2VuZXNzXG4gIHJldHVybiBbdHJ1c3RGcm9tVGVtcGxhdGVTdHJpbmcoc3RyaW5ncywgaHRtbFJlc3VsdCksIGF0dHJOYW1lc107XG59O1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdHlwZSB7VGVtcGxhdGV9O1xuY2xhc3MgVGVtcGxhdGUge1xuICAvKiogQGludGVybmFsICovXG4gIGVsITogSFRNTFRlbXBsYXRlRWxlbWVudDtcblxuICBwYXJ0czogQXJyYXk8VGVtcGxhdGVQYXJ0PiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAge3N0cmluZ3MsIFsnXyRsaXRUeXBlJCddOiB0eXBlfTogVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0LFxuICAgIG9wdGlvbnM/OiBSZW5kZXJPcHRpb25zXG4gICkge1xuICAgIGxldCBub2RlOiBOb2RlIHwgbnVsbDtcbiAgICBsZXQgbm9kZUluZGV4ID0gMDtcbiAgICBsZXQgYXR0ck5hbWVJbmRleCA9IDA7XG4gICAgY29uc3QgcGFydENvdW50ID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHBhcnRzID0gdGhpcy5wYXJ0cztcblxuICAgIC8vIENyZWF0ZSB0ZW1wbGF0ZSBlbGVtZW50XG4gICAgY29uc3QgW2h0bWwsIGF0dHJOYW1lc10gPSBnZXRUZW1wbGF0ZUh0bWwoc3RyaW5ncywgdHlwZSk7XG4gICAgdGhpcy5lbCA9IFRlbXBsYXRlLmNyZWF0ZUVsZW1lbnQoaHRtbCwgb3B0aW9ucyk7XG4gICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gdGhpcy5lbC5jb250ZW50O1xuXG4gICAgLy8gUmUtcGFyZW50IFNWRyBvciBNYXRoTUwgbm9kZXMgaW50byB0ZW1wbGF0ZSByb290XG4gICAgaWYgKHR5cGUgPT09IFNWR19SRVNVTFQgfHwgdHlwZSA9PT0gTUFUSE1MX1JFU1VMVCkge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMuZWwuY29udGVudC5maXJzdENoaWxkITtcbiAgICAgIHdyYXBwZXIucmVwbGFjZVdpdGgoLi4ud3JhcHBlci5jaGlsZE5vZGVzKTtcbiAgICB9XG5cbiAgICAvLyBXYWxrIHRoZSB0ZW1wbGF0ZSB0byBmaW5kIGJpbmRpbmcgbWFya2VycyBhbmQgY3JlYXRlIFRlbXBsYXRlUGFydHNcbiAgICB3aGlsZSAoKG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSkgIT09IG51bGwgJiYgcGFydHMubGVuZ3RoIDwgcGFydENvdW50KSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBpZiAoREVWX01PREUpIHtcbiAgICAgICAgICBjb25zdCB0YWcgPSAobm9kZSBhcyBFbGVtZW50KS5sb2NhbE5hbWU7XG4gICAgICAgICAgLy8gV2FybiBpZiBgdGV4dGFyZWFgIGluY2x1ZGVzIGFuIGV4cHJlc3Npb24gYW5kIHRocm93IGlmIGB0ZW1wbGF0ZWBcbiAgICAgICAgICAvLyBkb2VzIHNpbmNlIHRoZXNlIGFyZSBub3Qgc3VwcG9ydGVkLiBXZSBkbyB0aGlzIGJ5IGNoZWNraW5nXG4gICAgICAgICAgLy8gaW5uZXJIVE1MIGZvciBhbnl0aGluZyB0aGF0IGxvb2tzIGxpa2UgYSBtYXJrZXIuIFRoaXMgY2F0Y2hlc1xuICAgICAgICAgIC8vIGNhc2VzIGxpa2UgYmluZGluZ3MgaW4gdGV4dGFyZWEgdGhlcmUgbWFya2VycyB0dXJuIGludG8gdGV4dCBub2Rlcy5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvXig/OnRleHRhcmVhfHRlbXBsYXRlKSQvaSEudGVzdCh0YWcpICYmXG4gICAgICAgICAgICAobm9kZSBhcyBFbGVtZW50KS5pbm5lckhUTUwuaW5jbHVkZXMobWFya2VyKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbSA9XG4gICAgICAgICAgICAgIGBFeHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbnNpZGUgXFxgJHt0YWd9XFxgIGAgK1xuICAgICAgICAgICAgICBgZWxlbWVudHMuIFNlZSBodHRwczovL2xpdC5kZXYvbXNnL2V4cHJlc3Npb24taW4tJHt0YWd9IGZvciBtb3JlIGAgK1xuICAgICAgICAgICAgICBgaW5mb3JtYXRpb24uYDtcbiAgICAgICAgICAgIGlmICh0YWcgPT09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0pO1xuICAgICAgICAgICAgfSBlbHNlIGlzc3VlV2FybmluZygnJywgbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBmb3IgYXR0ZW1wdGVkIGR5bmFtaWMgdGFnIG5hbWVzLCB3ZSBkb24ndFxuICAgICAgICAvLyBpbmNyZW1lbnQgdGhlIGJpbmRpbmdJbmRleCwgYW5kIGl0J2xsIGJlIG9mZiBieSAxIGluIHRoZSBlbGVtZW50XG4gICAgICAgIC8vIGFuZCBvZmYgYnkgdHdvIGFmdGVyIGl0LlxuICAgICAgICBpZiAoKG5vZGUgYXMgRWxlbWVudCkuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZU5hbWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChuYW1lLmVuZHNXaXRoKGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICBjb25zdCByZWFsTmFtZSA9IGF0dHJOYW1lc1thdHRyTmFtZUluZGV4KytdO1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZShuYW1lKSE7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSB2YWx1ZS5zcGxpdChtYXJrZXIpO1xuICAgICAgICAgICAgICBjb25zdCBtID0gLyhbLj9AXSk/KC4qKS8uZXhlYyhyZWFsTmFtZSkhO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBVFRSSUJVVEVfUEFSVCxcbiAgICAgICAgICAgICAgICBpbmRleDogbm9kZUluZGV4LFxuICAgICAgICAgICAgICAgIG5hbWU6IG1bMl0sXG4gICAgICAgICAgICAgICAgc3RyaW5nczogc3RhdGljcyxcbiAgICAgICAgICAgICAgICBjdG9yOlxuICAgICAgICAgICAgICAgICAgbVsxXSA9PT0gJy4nXG4gICAgICAgICAgICAgICAgICAgID8gUHJvcGVydHlQYXJ0XG4gICAgICAgICAgICAgICAgICAgIDogbVsxXSA9PT0gJz8nXG4gICAgICAgICAgICAgICAgICAgICAgPyBCb29sZWFuQXR0cmlidXRlUGFydFxuICAgICAgICAgICAgICAgICAgICAgIDogbVsxXSA9PT0gJ0AnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IEV2ZW50UGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBBdHRyaWJ1dGVQYXJ0LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgKG5vZGUgYXMgRWxlbWVudCkucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLnN0YXJ0c1dpdGgobWFya2VyKSkge1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBFTEVNRU5UX1BBUlQsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5vZGVJbmRleCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IGJlbmNobWFyayB0aGUgcmVnZXggYWdhaW5zdCB0ZXN0aW5nIGZvciBlYWNoXG4gICAgICAgIC8vIG9mIHRoZSAzIHJhdyB0ZXh0IGVsZW1lbnQgbmFtZXMuXG4gICAgICAgIGlmIChyYXdUZXh0RWxlbWVudC50ZXN0KChub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWUpKSB7XG4gICAgICAgICAgLy8gRm9yIHJhdyB0ZXh0IGVsZW1lbnRzIHdlIG5lZWQgdG8gc3BsaXQgdGhlIHRleHQgY29udGVudCBvblxuICAgICAgICAgIC8vIG1hcmtlcnMsIGNyZWF0ZSBhIFRleHQgbm9kZSBmb3IgZWFjaCBzZWdtZW50LCBhbmQgY3JlYXRlXG4gICAgICAgICAgLy8gYSBUZW1wbGF0ZVBhcnQgZm9yIGVhY2ggbWFya2VyLlxuICAgICAgICAgIGNvbnN0IHN0cmluZ3MgPSAobm9kZSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCEuc3BsaXQobWFya2VyKTtcbiAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgaWYgKGxhc3RJbmRleCA+IDApIHtcbiAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnRleHRDb250ZW50ID0gdHJ1c3RlZFR5cGVzXG4gICAgICAgICAgICAgID8gKHRydXN0ZWRUeXBlcy5lbXB0eVNjcmlwdCBhcyB1bmtub3duIGFzICcnKVxuICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgdGV4dCBub2RlIGZvciBlYWNoIGxpdGVyYWwgc2VjdGlvblxuICAgICAgICAgICAgLy8gVGhlc2Ugbm9kZXMgYXJlIGFsc28gdXNlZCBhcyB0aGUgbWFya2VycyBmb3IgY2hpbGQgcGFydHNcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgKG5vZGUgYXMgRWxlbWVudCkuYXBwZW5kKHN0cmluZ3NbaV0sIGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgICAgICAgLy8gV2FsayBwYXN0IHRoZSBtYXJrZXIgbm9kZSB3ZSBqdXN0IGFkZGVkXG4gICAgICAgICAgICAgIHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHt0eXBlOiBDSElMRF9QQVJULCBpbmRleDogKytub2RlSW5kZXh9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdGUgYmVjYXVzZSB0aGlzIG1hcmtlciBpcyBhZGRlZCBhZnRlciB0aGUgd2Fsa2VyJ3MgY3VycmVudFxuICAgICAgICAgICAgLy8gbm9kZSwgaXQgd2lsbCBiZSB3YWxrZWQgdG8gaW4gdGhlIG91dGVyIGxvb3AgKGFuZCBpZ25vcmVkKSwgc29cbiAgICAgICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gYWRqdXN0IG5vZGVJbmRleCBoZXJlXG4gICAgICAgICAgICAobm9kZSBhcyBFbGVtZW50KS5hcHBlbmQoc3RyaW5nc1tsYXN0SW5kZXhdLCBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IChub2RlIGFzIENvbW1lbnQpLmRhdGE7XG4gICAgICAgIGlmIChkYXRhID09PSBtYXJrZXJNYXRjaCkge1xuICAgICAgICAgIHBhcnRzLnB1c2goe3R5cGU6IENISUxEX1BBUlQsIGluZGV4OiBub2RlSW5kZXh9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgaSA9IC0xO1xuICAgICAgICAgIHdoaWxlICgoaSA9IChub2RlIGFzIENvbW1lbnQpLmRhdGEuaW5kZXhPZihtYXJrZXIsIGkgKyAxKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBDb21tZW50IG5vZGUgaGFzIGEgYmluZGluZyBtYXJrZXIgaW5zaWRlLCBtYWtlIGFuIGluYWN0aXZlIHBhcnRcbiAgICAgICAgICAgIC8vIFRoZSBiaW5kaW5nIHdvbid0IHdvcmssIGJ1dCBzdWJzZXF1ZW50IGJpbmRpbmdzIHdpbGxcbiAgICAgICAgICAgIHBhcnRzLnB1c2goe3R5cGU6IENPTU1FTlRfUEFSVCwgaW5kZXg6IG5vZGVJbmRleH0pO1xuICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgZW5kIG9mIHRoZSBtYXRjaFxuICAgICAgICAgICAgaSArPSBtYXJrZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5vZGVJbmRleCsrO1xuICAgIH1cblxuICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgLy8gSWYgdGhlcmUgd2FzIGEgZHVwbGljYXRlIGF0dHJpYnV0ZSBvbiBhIHRhZywgdGhlbiB3aGVuIHRoZSB0YWcgaXNcbiAgICAgIC8vIHBhcnNlZCBpbnRvIGFuIGVsZW1lbnQgdGhlIGF0dHJpYnV0ZSBnZXRzIGRlLWR1cGxpY2F0ZWQuIFdlIGNhbiBkZXRlY3RcbiAgICAgIC8vIHRoaXMgbWlzbWF0Y2ggaWYgd2UgaGF2ZW4ndCBwcmVjaXNlbHkgY29uc3VtZWQgZXZlcnkgYXR0cmlidXRlIG5hbWVcbiAgICAgIC8vIHdoZW4gcHJlcGFyaW5nIHRoZSB0ZW1wbGF0ZS4gVGhpcyB3b3JrcyBiZWNhdXNlIGBhdHRyTmFtZXNgIGlzIGJ1aWx0XG4gICAgICAvLyBmcm9tIHRoZSB0ZW1wbGF0ZSBzdHJpbmcgYW5kIGBhdHRyTmFtZUluZGV4YCBjb21lcyBmcm9tIHByb2Nlc3NpbmcgdGhlXG4gICAgICAvLyByZXN1bHRpbmcgRE9NLlxuICAgICAgaWYgKGF0dHJOYW1lcy5sZW5ndGggIT09IGF0dHJOYW1lSW5kZXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBEZXRlY3RlZCBkdXBsaWNhdGUgYXR0cmlidXRlIGJpbmRpbmdzLiBUaGlzIG9jY3VycyBpZiB5b3VyIHRlbXBsYXRlIGAgK1xuICAgICAgICAgICAgYGhhcyBkdXBsaWNhdGUgYXR0cmlidXRlcyBvbiBhbiBlbGVtZW50IHRhZy4gRm9yIGV4YW1wbGUgYCArXG4gICAgICAgICAgICBgXCI8aW5wdXQgP2Rpc2FibGVkPVxcJHt0cnVlfSA/ZGlzYWJsZWQ9XFwke2ZhbHNlfT5cIiBjb250YWlucyBhIGAgK1xuICAgICAgICAgICAgYGR1cGxpY2F0ZSBcImRpc2FibGVkXCIgYXR0cmlidXRlLiBUaGUgZXJyb3Igd2FzIGRldGVjdGVkIGluIGAgK1xuICAgICAgICAgICAgYHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6IFxcbmAgK1xuICAgICAgICAgICAgJ2AnICtcbiAgICAgICAgICAgIHN0cmluZ3Muam9pbignJHsuLi59JykgK1xuICAgICAgICAgICAgJ2AnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2UgY291bGQgc2V0IHdhbGtlci5jdXJyZW50Tm9kZSB0byBhbm90aGVyIG5vZGUgaGVyZSB0byBwcmV2ZW50IGEgbWVtb3J5XG4gICAgLy8gbGVhaywgYnV0IGV2ZXJ5IHRpbWUgd2UgcHJlcGFyZSBhIHRlbXBsYXRlLCB3ZSBpbW1lZGlhdGVseSByZW5kZXIgaXRcbiAgICAvLyBhbmQgcmUtdXNlIHRoZSB3YWxrZXIgaW4gbmV3IFRlbXBsYXRlSW5zdGFuY2UuX2Nsb25lKCkuXG4gICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBwcmVwJyxcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMsXG4gICAgICAgIGNsb25hYmxlVGVtcGxhdGU6IHRoaXMuZWwsXG4gICAgICAgIHBhcnRzOiB0aGlzLnBhcnRzLFxuICAgICAgICBzdHJpbmdzLFxuICAgICAgfSk7XG4gIH1cblxuICAvLyBPdmVycmlkZGVuIHZpYSBgbGl0SHRtbFBvbHlmaWxsU3VwcG9ydGAgdG8gcHJvdmlkZSBwbGF0Zm9ybSBzdXBwb3J0LlxuICAvKiogQG5vY29sbGFwc2UgKi9cbiAgc3RhdGljIGNyZWF0ZUVsZW1lbnQoaHRtbDogVHJ1c3RlZEhUTUwsIF9vcHRpb25zPzogUmVuZGVyT3B0aW9ucykge1xuICAgIGNvbnN0IGVsID0gZC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgIGVsLmlubmVySFRNTCA9IGh0bWwgYXMgdW5rbm93biBhcyBzdHJpbmc7XG4gICAgcmV0dXJuIGVsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlzY29ubmVjdGFibGUge1xuICBfJHBhcmVudD86IERpc2Nvbm5lY3RhYmxlO1xuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+O1xuICAvLyBSYXRoZXIgdGhhbiBob2xkIGNvbm5lY3Rpb24gc3RhdGUgb24gaW5zdGFuY2VzLCBEaXNjb25uZWN0YWJsZXMgcmVjdXJzaXZlbHlcbiAgLy8gZmV0Y2ggdGhlIGNvbm5lY3Rpb24gc3RhdGUgZnJvbSB0aGUgUm9vdFBhcnQgdGhleSBhcmUgY29ubmVjdGVkIGluIHZpYVxuICAvLyBnZXR0ZXJzIHVwIHRoZSBEaXNjb25uZWN0YWJsZSB0cmVlIHZpYSBfJHBhcmVudCByZWZlcmVuY2VzLiBUaGlzIHB1c2hlcyB0aGVcbiAgLy8gY29zdCBvZiB0cmFja2luZyB0aGUgaXNDb25uZWN0ZWQgc3RhdGUgdG8gYEFzeW5jRGlyZWN0aXZlc2AsIGFuZCBhdm9pZHNcbiAgLy8gbmVlZGluZyB0byBwYXNzIGFsbCBEaXNjb25uZWN0YWJsZXMgKHBhcnRzLCB0ZW1wbGF0ZSBpbnN0YW5jZXMsIGFuZFxuICAvLyBkaXJlY3RpdmVzKSB0aGVpciBjb25uZWN0aW9uIHN0YXRlIGVhY2ggdGltZSBpdCBjaGFuZ2VzLCB3aGljaCB3b3VsZCBiZVxuICAvLyBjb3N0bHkgZm9yIHRyZWVzIHRoYXQgaGF2ZSBubyBBc3luY0RpcmVjdGl2ZXMuXG4gIF8kaXNDb25uZWN0ZWQ6IGJvb2xlYW47XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVEaXJlY3RpdmUoXG4gIHBhcnQ6IENoaWxkUGFydCB8IEF0dHJpYnV0ZVBhcnQgfCBFbGVtZW50UGFydCxcbiAgdmFsdWU6IHVua25vd24sXG4gIHBhcmVudDogRGlyZWN0aXZlUGFyZW50ID0gcGFydCxcbiAgYXR0cmlidXRlSW5kZXg/OiBudW1iZXJcbik6IHVua25vd24ge1xuICAvLyBCYWlsIGVhcmx5IGlmIHRoZSB2YWx1ZSBpcyBleHBsaWNpdGx5IG5vQ2hhbmdlLiBOb3RlLCB0aGlzIG1lYW5zIGFueVxuICAvLyBuZXN0ZWQgZGlyZWN0aXZlIGlzIHN0aWxsIGF0dGFjaGVkIGFuZCBpcyBub3QgcnVuLlxuICBpZiAodmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGxldCBjdXJyZW50RGlyZWN0aXZlID1cbiAgICBhdHRyaWJ1dGVJbmRleCAhPT0gdW5kZWZpbmVkXG4gICAgICA/IChwYXJlbnQgYXMgQXR0cmlidXRlUGFydCkuX19kaXJlY3RpdmVzPy5bYXR0cmlidXRlSW5kZXhdXG4gICAgICA6IChwYXJlbnQgYXMgQ2hpbGRQYXJ0IHwgRWxlbWVudFBhcnQgfCBEaXJlY3RpdmUpLl9fZGlyZWN0aXZlO1xuICBjb25zdCBuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IgPSBpc1ByaW1pdGl2ZSh2YWx1ZSlcbiAgICA/IHVuZGVmaW5lZFxuICAgIDogLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgICAgICh2YWx1ZSBhcyBEaXJlY3RpdmVSZXN1bHQpWydfJGxpdERpcmVjdGl2ZSQnXTtcbiAgaWYgKGN1cnJlbnREaXJlY3RpdmU/LmNvbnN0cnVjdG9yICE9PSBuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IpIHtcbiAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgIGN1cnJlbnREaXJlY3RpdmU/LlsnXyRub3RpZnlEaXJlY3RpdmVDb25uZWN0aW9uQ2hhbmdlZCddPy4oZmFsc2UpO1xuICAgIGlmIChuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VycmVudERpcmVjdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudERpcmVjdGl2ZSA9IG5ldyBuZXh0RGlyZWN0aXZlQ29uc3RydWN0b3IocGFydCBhcyBQYXJ0SW5mbyk7XG4gICAgICBjdXJyZW50RGlyZWN0aXZlLl8kaW5pdGlhbGl6ZShwYXJ0LCBwYXJlbnQsIGF0dHJpYnV0ZUluZGV4KTtcbiAgICB9XG4gICAgaWYgKGF0dHJpYnV0ZUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICgocGFyZW50IGFzIEF0dHJpYnV0ZVBhcnQpLl9fZGlyZWN0aXZlcyA/Pz0gW10pW2F0dHJpYnV0ZUluZGV4XSA9XG4gICAgICAgIGN1cnJlbnREaXJlY3RpdmU7XG4gICAgfSBlbHNlIHtcbiAgICAgIChwYXJlbnQgYXMgQ2hpbGRQYXJ0IHwgRGlyZWN0aXZlKS5fX2RpcmVjdGl2ZSA9IGN1cnJlbnREaXJlY3RpdmU7XG4gICAgfVxuICB9XG4gIGlmIChjdXJyZW50RGlyZWN0aXZlICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IHJlc29sdmVEaXJlY3RpdmUoXG4gICAgICBwYXJ0LFxuICAgICAgY3VycmVudERpcmVjdGl2ZS5fJHJlc29sdmUocGFydCwgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdCkudmFsdWVzKSxcbiAgICAgIGN1cnJlbnREaXJlY3RpdmUsXG4gICAgICBhdHRyaWJ1dGVJbmRleFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgdHlwZSB7VGVtcGxhdGVJbnN0YW5jZX07XG4vKipcbiAqIEFuIHVwZGF0ZWFibGUgaW5zdGFuY2Ugb2YgYSBUZW1wbGF0ZS4gSG9sZHMgcmVmZXJlbmNlcyB0byB0aGUgUGFydHMgdXNlZCB0b1xuICogdXBkYXRlIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZS5cbiAqL1xuY2xhc3MgVGVtcGxhdGVJbnN0YW5jZSBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgXyR0ZW1wbGF0ZTogVGVtcGxhdGU7XG4gIF8kcGFydHM6IEFycmF5PFBhcnQgfCB1bmRlZmluZWQ+ID0gW107XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHBhcmVudDogQ2hpbGRQYXJ0O1xuICAvKiogQGludGVybmFsICovXG4gIF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbj86IFNldDxEaXNjb25uZWN0YWJsZT4gPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IodGVtcGxhdGU6IFRlbXBsYXRlLCBwYXJlbnQ6IENoaWxkUGFydCkge1xuICAgIHRoaXMuXyR0ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuXyRwYXJlbnQgPSBwYXJlbnQ7XG4gIH1cblxuICAvLyBDYWxsZWQgYnkgQ2hpbGRQYXJ0IHBhcmVudE5vZGUgZ2V0dGVyXG4gIGdldCBwYXJlbnROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl8kcGFyZW50LnBhcmVudE5vZGU7XG4gIH1cblxuICAvLyBTZWUgY29tbWVudCBpbiBEaXNjb25uZWN0YWJsZSBpbnRlcmZhY2UgZm9yIHdoeSB0aGlzIGlzIGEgZ2V0dGVyXG4gIGdldCBfJGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl8kcGFyZW50Ll8kaXNDb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBUaGlzIG1ldGhvZCBpcyBzZXBhcmF0ZSBmcm9tIHRoZSBjb25zdHJ1Y3RvciBiZWNhdXNlIHdlIG5lZWQgdG8gcmV0dXJuIGFcbiAgLy8gRG9jdW1lbnRGcmFnbWVudCBhbmQgd2UgZG9uJ3Qgd2FudCB0byBob2xkIG9udG8gaXQgd2l0aCBhbiBpbnN0YW5jZSBmaWVsZC5cbiAgX2Nsb25lKG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQpIHtcbiAgICBjb25zdCB7XG4gICAgICBlbDoge2NvbnRlbnR9LFxuICAgICAgcGFydHM6IHBhcnRzLFxuICAgIH0gPSB0aGlzLl8kdGVtcGxhdGU7XG4gICAgY29uc3QgZnJhZ21lbnQgPSAob3B0aW9ucz8uY3JlYXRpb25TY29wZSA/PyBkKS5pbXBvcnROb2RlKGNvbnRlbnQsIHRydWUpO1xuICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGZyYWdtZW50O1xuXG4gICAgbGV0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSE7XG4gICAgbGV0IG5vZGVJbmRleCA9IDA7XG4gICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgbGV0IHRlbXBsYXRlUGFydCA9IHBhcnRzWzBdO1xuXG4gICAgd2hpbGUgKHRlbXBsYXRlUGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAobm9kZUluZGV4ID09PSB0ZW1wbGF0ZVBhcnQuaW5kZXgpIHtcbiAgICAgICAgbGV0IHBhcnQ6IFBhcnQgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0ZW1wbGF0ZVBhcnQudHlwZSA9PT0gQ0hJTERfUEFSVCkge1xuICAgICAgICAgIHBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgICAgICAgbm9kZSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIG5vZGUubmV4dFNpYmxpbmcsXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVQYXJ0LnR5cGUgPT09IEFUVFJJQlVURV9QQVJUKSB7XG4gICAgICAgICAgcGFydCA9IG5ldyB0ZW1wbGF0ZVBhcnQuY3RvcihcbiAgICAgICAgICAgIG5vZGUgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhcnQubmFtZSxcbiAgICAgICAgICAgIHRlbXBsYXRlUGFydC5zdHJpbmdzLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlUGFydC50eXBlID09PSBFTEVNRU5UX1BBUlQpIHtcbiAgICAgICAgICBwYXJ0ID0gbmV3IEVsZW1lbnRQYXJ0KG5vZGUgYXMgSFRNTEVsZW1lbnQsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuXyRwYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgICB0ZW1wbGF0ZVBhcnQgPSBwYXJ0c1srK3BhcnRJbmRleF07XG4gICAgICB9XG4gICAgICBpZiAobm9kZUluZGV4ICE9PSB0ZW1wbGF0ZVBhcnQ/LmluZGV4KSB7XG4gICAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSE7XG4gICAgICAgIG5vZGVJbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBXZSBuZWVkIHRvIHNldCB0aGUgY3VycmVudE5vZGUgYXdheSBmcm9tIHRoZSBjbG9uZWQgdHJlZSBzbyB0aGF0IHdlXG4gICAgLy8gZG9uJ3QgaG9sZCBvbnRvIHRoZSB0cmVlIGV2ZW4gaWYgdGhlIHRyZWUgaXMgZGV0YWNoZWQgYW5kIHNob3VsZCBiZVxuICAgIC8vIGZyZWVkLlxuICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGQ7XG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9XG5cbiAgX3VwZGF0ZSh2YWx1ZXM6IEFycmF5PHVua25vd24+KSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLl8kcGFydHMpIHtcbiAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgICAga2luZDogJ3NldCBwYXJ0JyxcbiAgICAgICAgICAgIHBhcnQsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVzW2ldLFxuICAgICAgICAgICAgdmFsdWVJbmRleDogaSxcbiAgICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgICAgIHRlbXBsYXRlSW5zdGFuY2U6IHRoaXMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIGlmICgocGFydCBhcyBBdHRyaWJ1dGVQYXJ0KS5zdHJpbmdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAocGFydCBhcyBBdHRyaWJ1dGVQYXJ0KS5fJHNldFZhbHVlKHZhbHVlcywgcGFydCBhcyBBdHRyaWJ1dGVQYXJ0LCBpKTtcbiAgICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHZhbHVlcyB0aGUgcGFydCBjb25zdW1lcyBpcyBwYXJ0LnN0cmluZ3MubGVuZ3RoIC0gMVxuICAgICAgICAgIC8vIHNpbmNlIHZhbHVlcyBhcmUgaW4gYmV0d2VlbiB0ZW1wbGF0ZSBzcGFucy4gV2UgaW5jcmVtZW50IGkgYnkgMVxuICAgICAgICAgIC8vIGxhdGVyIGluIHRoZSBsb29wLCBzbyBpbmNyZW1lbnQgaXQgYnkgcGFydC5zdHJpbmdzLmxlbmd0aCAtIDIgaGVyZVxuICAgICAgICAgIGkgKz0gKHBhcnQgYXMgQXR0cmlidXRlUGFydCkuc3RyaW5ncyEubGVuZ3RoIC0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0Ll8kc2V0VmFsdWUodmFsdWVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH1cbiAgfVxufVxuXG4vKlxuICogUGFydHNcbiAqL1xudHlwZSBBdHRyaWJ1dGVUZW1wbGF0ZVBhcnQgPSB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBBVFRSSUJVVEVfUEFSVDtcbiAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBjdG9yOiB0eXBlb2YgQXR0cmlidXRlUGFydDtcbiAgcmVhZG9ubHkgc3RyaW5nczogUmVhZG9ubHlBcnJheTxzdHJpbmc+O1xufTtcbnR5cGUgQ2hpbGRUZW1wbGF0ZVBhcnQgPSB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBDSElMRF9QQVJUO1xuICByZWFkb25seSBpbmRleDogbnVtYmVyO1xufTtcbnR5cGUgRWxlbWVudFRlbXBsYXRlUGFydCA9IHtcbiAgcmVhZG9ubHkgdHlwZTogdHlwZW9mIEVMRU1FTlRfUEFSVDtcbiAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcbn07XG50eXBlIENvbW1lbnRUZW1wbGF0ZVBhcnQgPSB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBDT01NRU5UX1BBUlQ7XG4gIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEEgVGVtcGxhdGVQYXJ0IHJlcHJlc2VudHMgYSBkeW5hbWljIHBhcnQgaW4gYSB0ZW1wbGF0ZSwgYmVmb3JlIHRoZSB0ZW1wbGF0ZVxuICogaXMgaW5zdGFudGlhdGVkLiBXaGVuIGEgdGVtcGxhdGUgaXMgaW5zdGFudGlhdGVkIFBhcnRzIGFyZSBjcmVhdGVkIGZyb21cbiAqIFRlbXBsYXRlUGFydHMuXG4gKi9cbnR5cGUgVGVtcGxhdGVQYXJ0ID1cbiAgfCBDaGlsZFRlbXBsYXRlUGFydFxuICB8IEF0dHJpYnV0ZVRlbXBsYXRlUGFydFxuICB8IEVsZW1lbnRUZW1wbGF0ZVBhcnRcbiAgfCBDb21tZW50VGVtcGxhdGVQYXJ0O1xuXG5leHBvcnQgdHlwZSBQYXJ0ID1cbiAgfCBDaGlsZFBhcnRcbiAgfCBBdHRyaWJ1dGVQYXJ0XG4gIHwgUHJvcGVydHlQYXJ0XG4gIHwgQm9vbGVhbkF0dHJpYnV0ZVBhcnRcbiAgfCBFbGVtZW50UGFydFxuICB8IEV2ZW50UGFydDtcblxuZXhwb3J0IHR5cGUge0NoaWxkUGFydH07XG5jbGFzcyBDaGlsZFBhcnQgaW1wbGVtZW50cyBEaXNjb25uZWN0YWJsZSB7XG4gIHJlYWRvbmx5IHR5cGUgPSBDSElMRF9QQVJUO1xuICByZWFkb25seSBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICBfJGNvbW1pdHRlZFZhbHVlOiB1bmtub3duID0gbm90aGluZztcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfX2RpcmVjdGl2ZT86IERpcmVjdGl2ZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHN0YXJ0Tm9kZTogQ2hpbGROb2RlO1xuICAvKiogQGludGVybmFsICovXG4gIF8kZW5kTm9kZTogQ2hpbGROb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBfdGV4dFNhbml0aXplcjogVmFsdWVTYW5pdGl6ZXIgfCB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRwYXJlbnQ6IERpc2Nvbm5lY3RhYmxlIHwgdW5kZWZpbmVkO1xuICAvKipcbiAgICogQ29ubmVjdGlvbiBzdGF0ZSBmb3IgUm9vdFBhcnRzIG9ubHkgKGkuZS4gQ2hpbGRQYXJ0IHdpdGhvdXQgXyRwYXJlbnRcbiAgICogcmV0dXJuZWQgZnJvbSB0b3AtbGV2ZWwgYHJlbmRlcmApLiBUaGlzIGZpZWxkIGlzIHVudXNlZCBvdGhlcndpc2UuIFRoZVxuICAgKiBpbnRlbnRpb24gd291bGQgYmUgY2xlYXJlciBpZiB3ZSBtYWRlIGBSb290UGFydGAgYSBzdWJjbGFzcyBvZiBgQ2hpbGRQYXJ0YFxuICAgKiB3aXRoIHRoaXMgZmllbGQgKGFuZCBhIGRpZmZlcmVudCBfJGlzQ29ubmVjdGVkIGdldHRlciksIGJ1dCB0aGUgc3ViY2xhc3NcbiAgICogY2F1c2VkIGEgcGVyZiByZWdyZXNzaW9uLCBwb3NzaWJseSBkdWUgdG8gbWFraW5nIGNhbGwgc2l0ZXMgcG9seW1vcnBoaWMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX19pc0Nvbm5lY3RlZDogYm9vbGVhbjtcblxuICAvLyBTZWUgY29tbWVudCBpbiBEaXNjb25uZWN0YWJsZSBpbnRlcmZhY2UgZm9yIHdoeSB0aGlzIGlzIGEgZ2V0dGVyXG4gIGdldCBfJGlzQ29ubmVjdGVkKCkge1xuICAgIC8vIENoaWxkUGFydHMgdGhhdCBhcmUgbm90IGF0IHRoZSByb290IHNob3VsZCBhbHdheXMgYmUgY3JlYXRlZCB3aXRoIGFcbiAgICAvLyBwYXJlbnQ7IG9ubHkgUm9vdENoaWxkTm9kZSdzIHdvbid0LCBzbyB0aGV5IHJldHVybiB0aGUgbG9jYWwgaXNDb25uZWN0ZWRcbiAgICAvLyBzdGF0ZVxuICAgIHJldHVybiB0aGlzLl8kcGFyZW50Py5fJGlzQ29ubmVjdGVkID8/IHRoaXMuX19pc0Nvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIFRoZSBmb2xsb3dpbmcgZmllbGRzIHdpbGwgYmUgcGF0Y2hlZCBvbnRvIENoaWxkUGFydHMgd2hlbiByZXF1aXJlZCBieVxuICAvLyBBc3luY0RpcmVjdGl2ZVxuICAvKiogQGludGVybmFsICovXG4gIF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbj86IFNldDxEaXNjb25uZWN0YWJsZT4gPSB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZD8oXG4gICAgaXNDb25uZWN0ZWQ6IGJvb2xlYW4sXG4gICAgcmVtb3ZlRnJvbVBhcmVudD86IGJvb2xlYW4sXG4gICAgZnJvbT86IG51bWJlclxuICApOiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIF8kcmVwYXJlbnREaXNjb25uZWN0YWJsZXM/KHBhcmVudDogRGlzY29ubmVjdGFibGUpOiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0YXJ0Tm9kZTogQ2hpbGROb2RlLFxuICAgIGVuZE5vZGU6IENoaWxkTm9kZSB8IG51bGwsXG4gICAgcGFyZW50OiBUZW1wbGF0ZUluc3RhbmNlIHwgQ2hpbGRQYXJ0IHwgdW5kZWZpbmVkLFxuICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgdGhpcy5fJHN0YXJ0Tm9kZSA9IHN0YXJ0Tm9kZTtcbiAgICB0aGlzLl8kZW5kTm9kZSA9IGVuZE5vZGU7XG4gICAgdGhpcy5fJHBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIE5vdGUgX19pc0Nvbm5lY3RlZCBpcyBvbmx5IGV2ZXIgYWNjZXNzZWQgb24gUm9vdFBhcnRzIChpLmUuIHdoZW4gdGhlcmUgaXNcbiAgICAvLyBubyBfJHBhcmVudCk7IHRoZSB2YWx1ZSBvbiBhIG5vbi1yb290LXBhcnQgaXMgXCJkb24ndCBjYXJlXCIsIGJ1dCBjaGVja2luZ1xuICAgIC8vIGZvciBwYXJlbnQgd291bGQgYmUgbW9yZSBjb2RlXG4gICAgdGhpcy5fX2lzQ29ubmVjdGVkID0gb3B0aW9ucz8uaXNDb25uZWN0ZWQgPz8gdHJ1ZTtcbiAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAvLyBFeHBsaWNpdGx5IGluaXRpYWxpemUgZm9yIGNvbnNpc3RlbnQgY2xhc3Mgc2hhcGUuXG4gICAgICB0aGlzLl90ZXh0U2FuaXRpemVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcGFyZW50IG5vZGUgaW50byB3aGljaCB0aGUgcGFydCByZW5kZXJzIGl0cyBjb250ZW50LlxuICAgKlxuICAgKiBBIENoaWxkUGFydCdzIGNvbnRlbnQgY29uc2lzdHMgb2YgYSByYW5nZSBvZiBhZGphY2VudCBjaGlsZCBub2RlcyBvZlxuICAgKiBgLnBhcmVudE5vZGVgLCBwb3NzaWJseSBib3JkZXJlZCBieSAnbWFya2VyIG5vZGVzJyAoYC5zdGFydE5vZGVgIGFuZFxuICAgKiBgLmVuZE5vZGVgKS5cbiAgICpcbiAgICogLSBJZiBib3RoIGAuc3RhcnROb2RlYCBhbmQgYC5lbmROb2RlYCBhcmUgbm9uLW51bGwsIHRoZW4gdGhlIHBhcnQncyBjb250ZW50XG4gICAqIGNvbnNpc3RzIG9mIGFsbCBzaWJsaW5ncyBiZXR3ZWVuIGAuc3RhcnROb2RlYCBhbmQgYC5lbmROb2RlYCwgZXhjbHVzaXZlbHkuXG4gICAqXG4gICAqIC0gSWYgYC5zdGFydE5vZGVgIGlzIG5vbi1udWxsIGJ1dCBgLmVuZE5vZGVgIGlzIG51bGwsIHRoZW4gdGhlIHBhcnQnc1xuICAgKiBjb250ZW50IGNvbnNpc3RzIG9mIGFsbCBzaWJsaW5ncyBmb2xsb3dpbmcgYC5zdGFydE5vZGVgLCB1cCB0byBhbmRcbiAgICogaW5jbHVkaW5nIHRoZSBsYXN0IGNoaWxkIG9mIGAucGFyZW50Tm9kZWAuIElmIGAuZW5kTm9kZWAgaXMgbm9uLW51bGwsIHRoZW5cbiAgICogYC5zdGFydE5vZGVgIHdpbGwgYWx3YXlzIGJlIG5vbi1udWxsLlxuICAgKlxuICAgKiAtIElmIGJvdGggYC5lbmROb2RlYCBhbmQgYC5zdGFydE5vZGVgIGFyZSBudWxsLCB0aGVuIHRoZSBwYXJ0J3MgY29udGVudFxuICAgKiBjb25zaXN0cyBvZiBhbGwgY2hpbGQgbm9kZXMgb2YgYC5wYXJlbnROb2RlYC5cbiAgICovXG4gIGdldCBwYXJlbnROb2RlKCk6IE5vZGUge1xuICAgIGxldCBwYXJlbnROb2RlOiBOb2RlID0gd3JhcCh0aGlzLl8kc3RhcnROb2RlKS5wYXJlbnROb2RlITtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLl8kcGFyZW50O1xuICAgIGlmIChcbiAgICAgIHBhcmVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICBwYXJlbnROb2RlPy5ub2RlVHlwZSA9PT0gMTEgLyogTm9kZS5ET0NVTUVOVF9GUkFHTUVOVCAqL1xuICAgICkge1xuICAgICAgLy8gSWYgdGhlIHBhcmVudE5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LCBpdCBtYXkgYmUgYmVjYXVzZSB0aGUgRE9NIGlzXG4gICAgICAvLyBzdGlsbCBpbiB0aGUgY2xvbmVkIGZyYWdtZW50IGR1cmluZyBpbml0aWFsIHJlbmRlcjsgaWYgc28sIGdldCB0aGUgcmVhbFxuICAgICAgLy8gcGFyZW50Tm9kZSB0aGUgcGFydCB3aWxsIGJlIGNvbW1pdHRlZCBpbnRvIGJ5IGFza2luZyB0aGUgcGFyZW50LlxuICAgICAgcGFyZW50Tm9kZSA9IChwYXJlbnQgYXMgQ2hpbGRQYXJ0IHwgVGVtcGxhdGVJbnN0YW5jZSkucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudE5vZGU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHBhcnQncyBsZWFkaW5nIG1hcmtlciBub2RlLCBpZiBhbnkuIFNlZSBgLnBhcmVudE5vZGVgIGZvciBtb3JlXG4gICAqIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgZ2V0IHN0YXJ0Tm9kZSgpOiBOb2RlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuXyRzdGFydE5vZGU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHBhcnQncyB0cmFpbGluZyBtYXJrZXIgbm9kZSwgaWYgYW55LiBTZWUgYC5wYXJlbnROb2RlYCBmb3IgbW9yZVxuICAgKiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGdldCBlbmROb2RlKCk6IE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fJGVuZE5vZGU7XG4gIH1cblxuICBfJHNldFZhbHVlKHZhbHVlOiB1bmtub3duLCBkaXJlY3RpdmVQYXJlbnQ6IERpcmVjdGl2ZVBhcmVudCA9IHRoaXMpOiB2b2lkIHtcbiAgICBpZiAoREVWX01PREUgJiYgdGhpcy5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUaGlzIFxcYENoaWxkUGFydFxcYCBoYXMgbm8gXFxgcGFyZW50Tm9kZVxcYCBhbmQgdGhlcmVmb3JlIGNhbm5vdCBhY2NlcHQgYSB2YWx1ZS4gVGhpcyBsaWtlbHkgbWVhbnMgdGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGUgcGFydCB3YXMgbWFuaXB1bGF0ZWQgaW4gYW4gdW5zdXBwb3J0ZWQgd2F5IG91dHNpZGUgb2YgTGl0J3MgY29udHJvbCBzdWNoIHRoYXQgdGhlIHBhcnQncyBtYXJrZXIgbm9kZXMgd2VyZSBlamVjdGVkIGZyb20gRE9NLiBGb3IgZXhhbXBsZSwgc2V0dGluZyB0aGUgZWxlbWVudCdzIFxcYGlubmVySFRNTFxcYCBvciBcXGB0ZXh0Q29udGVudFxcYCBjYW4gZG8gdGhpcy5gXG4gICAgICApO1xuICAgIH1cbiAgICB2YWx1ZSA9IHJlc29sdmVEaXJlY3RpdmUodGhpcywgdmFsdWUsIGRpcmVjdGl2ZVBhcmVudCk7XG4gICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgLy8gTm9uLXJlbmRlcmluZyBjaGlsZCB2YWx1ZXMuIEl0J3MgaW1wb3J0YW50IHRoYXQgdGhlc2UgZG8gbm90IHJlbmRlclxuICAgICAgLy8gZW1wdHkgdGV4dCBub2RlcyB0byBhdm9pZCBpc3N1ZXMgd2l0aCBwcmV2ZW50aW5nIGRlZmF1bHQgPHNsb3Q+XG4gICAgICAvLyBmYWxsYmFjayBjb250ZW50LlxuICAgICAgaWYgKHZhbHVlID09PSBub3RoaW5nIHx8IHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgIGlmICh0aGlzLl8kY29tbWl0dGVkVmFsdWUgIT09IG5vdGhpbmcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICAgICAga2luZDogJ2NvbW1pdCBub3RoaW5nIHRvIGNoaWxkJyxcbiAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMuXyRzdGFydE5vZGUsXG4gICAgICAgICAgICAgIGVuZDogdGhpcy5fJGVuZE5vZGUsXG4gICAgICAgICAgICAgIHBhcmVudDogdGhpcy5fJHBhcmVudCxcbiAgICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fJGNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gbm90aGluZztcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMuXyRjb21taXR0ZWRWYWx1ZSAmJiB2YWx1ZSAhPT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgIH0gZWxzZSBpZiAoKHZhbHVlIGFzIFRlbXBsYXRlUmVzdWx0KVsnXyRsaXRUeXBlJCddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NvbW1pdFRlbXBsYXRlUmVzdWx0KHZhbHVlIGFzIFRlbXBsYXRlUmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKCh2YWx1ZSBhcyBOb2RlKS5ub2RlVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoREVWX01PREUgJiYgdGhpcy5vcHRpb25zPy5ob3N0ID09PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jb21taXRUZXh0KFxuICAgICAgICAgIGBbcHJvYmFibGUgbWlzdGFrZTogcmVuZGVyZWQgYSB0ZW1wbGF0ZSdzIGhvc3QgaW4gaXRzZWxmIGAgK1xuICAgICAgICAgICAgYChjb21tb25seSBjYXVzZWQgYnkgd3JpdGluZyBcXCR7dGhpc30gaW4gYSB0ZW1wbGF0ZV1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgQXR0ZW1wdGVkIHRvIHJlbmRlciB0aGUgdGVtcGxhdGUgaG9zdGAsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgYGluc2lkZSBpdHNlbGYuIFRoaXMgaXMgYWxtb3N0IGFsd2F5cyBhIG1pc3Rha2UsIGFuZCBpbiBkZXYgbW9kZSBgLFxuICAgICAgICAgIGB3ZSByZW5kZXIgc29tZSB3YXJuaW5nIHRleHQuIEluIHByb2R1Y3Rpb24gaG93ZXZlciwgd2UnbGwgYCxcbiAgICAgICAgICBgcmVuZGVyIGl0LCB3aGljaCB3aWxsIHVzdWFsbHkgcmVzdWx0IGluIGFuIGVycm9yLCBhbmQgc29tZXRpbWVzIGAsXG4gICAgICAgICAgYGluIHRoZSBlbGVtZW50IGRpc2FwcGVhcmluZyBmcm9tIHRoZSBET00uYFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9jb21taXROb2RlKHZhbHVlIGFzIE5vZGUpO1xuICAgIH0gZWxzZSBpZiAoaXNJdGVyYWJsZSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuX2NvbW1pdEl0ZXJhYmxlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2ssIHdpbGwgcmVuZGVyIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICAgIHRoaXMuX2NvbW1pdFRleHQodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2luc2VydDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkge1xuICAgIHJldHVybiB3cmFwKHdyYXAodGhpcy5fJHN0YXJ0Tm9kZSkucGFyZW50Tm9kZSEpLmluc2VydEJlZm9yZShcbiAgICAgIG5vZGUsXG4gICAgICB0aGlzLl8kZW5kTm9kZVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9jb21taXROb2RlKHZhbHVlOiBOb2RlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuXyRjbGVhcigpO1xuICAgICAgaWYgKFxuICAgICAgICBFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MgJiZcbiAgICAgICAgc2FuaXRpemVyRmFjdG9yeUludGVybmFsICE9PSBub29wU2FuaXRpemVyXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgcGFyZW50Tm9kZU5hbWUgPSB0aGlzLl8kc3RhcnROb2RlLnBhcmVudE5vZGU/Lm5vZGVOYW1lO1xuICAgICAgICBpZiAocGFyZW50Tm9kZU5hbWUgPT09ICdTVFlMRScgfHwgcGFyZW50Tm9kZU5hbWUgPT09ICdTQ1JJUFQnKSB7XG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnRm9yYmlkZGVuJztcbiAgICAgICAgICBpZiAoREVWX01PREUpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnROb2RlTmFtZSA9PT0gJ1NUWUxFJykge1xuICAgICAgICAgICAgICBtZXNzYWdlID1cbiAgICAgICAgICAgICAgICBgTGl0IGRvZXMgbm90IHN1cHBvcnQgYmluZGluZyBpbnNpZGUgc3R5bGUgbm9kZXMuIGAgK1xuICAgICAgICAgICAgICAgIGBUaGlzIGlzIGEgc2VjdXJpdHkgcmlzaywgYXMgc3R5bGUgaW5qZWN0aW9uIGF0dGFja3MgY2FuIGAgK1xuICAgICAgICAgICAgICAgIGBleGZpbHRyYXRlIGRhdGEgYW5kIHNwb29mIFVJcy4gYCArXG4gICAgICAgICAgICAgICAgYENvbnNpZGVyIGluc3RlYWQgdXNpbmcgY3NzXFxgLi4uXFxgIGxpdGVyYWxzIGAgK1xuICAgICAgICAgICAgICAgIGB0byBjb21wb3NlIHN0eWxlcywgYW5kIGRvIGR5bmFtaWMgc3R5bGluZyB3aXRoIGAgK1xuICAgICAgICAgICAgICAgIGBjc3MgY3VzdG9tIHByb3BlcnRpZXMsIDo6cGFydHMsIDxzbG90PnMsIGAgK1xuICAgICAgICAgICAgICAgIGBhbmQgYnkgbXV0YXRpbmcgdGhlIERPTSByYXRoZXIgdGhhbiBzdHlsZXNoZWV0cy5gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSA9XG4gICAgICAgICAgICAgICAgYExpdCBkb2VzIG5vdCBzdXBwb3J0IGJpbmRpbmcgaW5zaWRlIHNjcmlwdCBub2Rlcy4gYCArXG4gICAgICAgICAgICAgICAgYFRoaXMgaXMgYSBzZWN1cml0eSByaXNrLCBhcyBpdCBjb3VsZCBhbGxvdyBhcmJpdHJhcnkgYCArXG4gICAgICAgICAgICAgICAgYGNvZGUgZXhlY3V0aW9uLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICBraW5kOiAnY29tbWl0IG5vZGUnLFxuICAgICAgICAgIHN0YXJ0OiB0aGlzLl8kc3RhcnROb2RlLFxuICAgICAgICAgIHBhcmVudDogdGhpcy5fJHBhcmVudCxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IHRoaXMuX2luc2VydCh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY29tbWl0VGV4dCh2YWx1ZTogdW5rbm93bik6IHZvaWQge1xuICAgIC8vIElmIHRoZSBjb21taXR0ZWQgdmFsdWUgaXMgYSBwcmltaXRpdmUgaXQgbWVhbnMgd2UgY2FsbGVkIF9jb21taXRUZXh0IG9uXG4gICAgLy8gdGhlIHByZXZpb3VzIHJlbmRlciwgYW5kIHdlIGtub3cgdGhhdCB0aGlzLl8kc3RhcnROb2RlLm5leHRTaWJsaW5nIGlzIGFcbiAgICAvLyBUZXh0IG5vZGUuIFdlIGNhbiBub3cganVzdCByZXBsYWNlIHRoZSB0ZXh0IGNvbnRlbnQgKC5kYXRhKSBvZiB0aGUgbm9kZS5cbiAgICBpZiAoXG4gICAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgIT09IG5vdGhpbmcgJiZcbiAgICAgIGlzUHJpbWl0aXZlKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSlcbiAgICApIHtcbiAgICAgIGNvbnN0IG5vZGUgPSB3cmFwKHRoaXMuXyRzdGFydE5vZGUpLm5leHRTaWJsaW5nIGFzIFRleHQ7XG4gICAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXh0U2FuaXRpemVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLl90ZXh0U2FuaXRpemVyID0gY3JlYXRlU2FuaXRpemVyKG5vZGUsICdkYXRhJywgJ3Byb3BlcnR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0aGlzLl90ZXh0U2FuaXRpemVyKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ2NvbW1pdCB0ZXh0JyxcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAobm9kZSBhcyBUZXh0KS5kYXRhID0gdmFsdWUgYXMgc3RyaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAgIGNvbnN0IHRleHROb2RlID0gZC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICAgIHRoaXMuX2NvbW1pdE5vZGUodGV4dE5vZGUpO1xuICAgICAgICAvLyBXaGVuIHNldHRpbmcgdGV4dCBjb250ZW50LCBmb3Igc2VjdXJpdHkgcHVycG9zZXMgaXQgbWF0dGVycyBhIGxvdFxuICAgICAgICAvLyB3aGF0IHRoZSBwYXJlbnQgaXMuIEZvciBleGFtcGxlLCA8c3R5bGU+IGFuZCA8c2NyaXB0PiBuZWVkIHRvIGJlXG4gICAgICAgIC8vIGhhbmRsZWQgd2l0aCBjYXJlLCB3aGlsZSA8c3Bhbj4gZG9lcyBub3QuIFNvIGZpcnN0IHdlIG5lZWQgdG8gcHV0IGFcbiAgICAgICAgLy8gdGV4dCBub2RlIGludG8gdGhlIGRvY3VtZW50LCB0aGVuIHdlIGNhbiBzYW5pdGl6ZSBpdHMgY29udGVudC5cbiAgICAgICAgaWYgKHRoaXMuX3RleHRTYW5pdGl6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuX3RleHRTYW5pdGl6ZXIgPSBjcmVhdGVTYW5pdGl6ZXIodGV4dE5vZGUsICdkYXRhJywgJ3Byb3BlcnR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0aGlzLl90ZXh0U2FuaXRpemVyKHZhbHVlKTtcbiAgICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgICAga2luZDogJ2NvbW1pdCB0ZXh0JyxcbiAgICAgICAgICAgIG5vZGU6IHRleHROb2RlLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIHRleHROb2RlLmRhdGEgPSB2YWx1ZSBhcyBzdHJpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jb21taXROb2RlKGQuY3JlYXRlVGV4dE5vZGUodmFsdWUgYXMgc3RyaW5nKSk7XG4gICAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICAgIGtpbmQ6ICdjb21taXQgdGV4dCcsXG4gICAgICAgICAgICBub2RlOiB3cmFwKHRoaXMuXyRzdGFydE5vZGUpLm5leHRTaWJsaW5nIGFzIFRleHQsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBwcml2YXRlIF9jb21taXRUZW1wbGF0ZVJlc3VsdChcbiAgICByZXN1bHQ6IFRlbXBsYXRlUmVzdWx0IHwgQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdFxuICApOiB2b2lkIHtcbiAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgIGNvbnN0IHt2YWx1ZXMsIFsnXyRsaXRUeXBlJCddOiB0eXBlfSA9IHJlc3VsdDtcbiAgICAvLyBJZiAkbGl0VHlwZSQgaXMgYSBudW1iZXIsIHJlc3VsdCBpcyBhIHBsYWluIFRlbXBsYXRlUmVzdWx0IGFuZCB3ZSBnZXRcbiAgICAvLyB0aGUgdGVtcGxhdGUgZnJvbSB0aGUgdGVtcGxhdGUgY2FjaGUuIElmIG5vdCwgcmVzdWx0IGlzIGFcbiAgICAvLyBDb21waWxlZFRlbXBsYXRlUmVzdWx0IGFuZCBfJGxpdFR5cGUkIGlzIGEgQ29tcGlsZWRUZW1wbGF0ZSBhbmQgd2UgbmVlZFxuICAgIC8vIHRvIGNyZWF0ZSB0aGUgPHRlbXBsYXRlPiBlbGVtZW50IHRoZSBmaXJzdCB0aW1lIHdlIHNlZSBpdC5cbiAgICBjb25zdCB0ZW1wbGF0ZTogVGVtcGxhdGUgfCBDb21waWxlZFRlbXBsYXRlID1cbiAgICAgIHR5cGVvZiB0eXBlID09PSAnbnVtYmVyJ1xuICAgICAgICA/IHRoaXMuXyRnZXRUZW1wbGF0ZShyZXN1bHQgYXMgVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0KVxuICAgICAgICA6ICh0eXBlLmVsID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICh0eXBlLmVsID0gVGVtcGxhdGUuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgdHJ1c3RGcm9tVGVtcGxhdGVTdHJpbmcodHlwZS5oLCB0eXBlLmhbMF0pLFxuICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgICkpLFxuICAgICAgICAgIHR5cGUpO1xuXG4gICAgaWYgKCh0aGlzLl8kY29tbWl0dGVkVmFsdWUgYXMgVGVtcGxhdGVJbnN0YW5jZSk/Ll8kdGVtcGxhdGUgPT09IHRlbXBsYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSB1cGRhdGluZycsXG4gICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgaW5zdGFuY2U6IHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBUZW1wbGF0ZUluc3RhbmNlLFxuICAgICAgICAgIHBhcnRzOiAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIFRlbXBsYXRlSW5zdGFuY2UpLl8kcGFydHMsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgfSk7XG4gICAgICAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIFRlbXBsYXRlSW5zdGFuY2UpLl91cGRhdGUodmFsdWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgVGVtcGxhdGVJbnN0YW5jZSh0ZW1wbGF0ZSBhcyBUZW1wbGF0ZSwgdGhpcyk7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGluc3RhbmNlLl9jbG9uZSh0aGlzLm9wdGlvbnMpO1xuICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICBraW5kOiAndGVtcGxhdGUgaW5zdGFudGlhdGVkJyxcbiAgICAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICBwYXJ0czogaW5zdGFuY2UuXyRwYXJ0cyxcbiAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgICAgdmFsdWVzLFxuICAgICAgICB9KTtcbiAgICAgIGluc3RhbmNlLl91cGRhdGUodmFsdWVzKTtcbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ3RlbXBsYXRlIGluc3RhbnRpYXRlZCBhbmQgdXBkYXRlZCcsXG4gICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgcGFydHM6IGluc3RhbmNlLl8kcGFydHMsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgIGZyYWdtZW50LFxuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgfSk7XG4gICAgICB0aGlzLl9jb21taXROb2RlKGZyYWdtZW50KTtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IGluc3RhbmNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIE92ZXJyaWRkZW4gdmlhIGBsaXRIdG1sUG9seWZpbGxTdXBwb3J0YCB0byBwcm92aWRlIHBsYXRmb3JtIHN1cHBvcnQuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRnZXRUZW1wbGF0ZShyZXN1bHQ6IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCkge1xuICAgIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGVtcGxhdGVDYWNoZS5zZXQocmVzdWx0LnN0cmluZ3MsICh0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXN1bHQpKSk7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbW1pdEl0ZXJhYmxlKHZhbHVlOiBJdGVyYWJsZTx1bmtub3duPik6IHZvaWQge1xuICAgIC8vIEZvciBhbiBJdGVyYWJsZSwgd2UgY3JlYXRlIGEgbmV3IEluc3RhbmNlUGFydCBwZXIgaXRlbSwgdGhlbiBzZXQgaXRzXG4gICAgLy8gdmFsdWUgdG8gdGhlIGl0ZW0uIFRoaXMgaXMgYSBsaXR0bGUgYml0IG9mIG92ZXJoZWFkIGZvciBldmVyeSBpdGVtIGluXG4gICAgLy8gYW4gSXRlcmFibGUsIGJ1dCBpdCBsZXRzIHVzIHJlY3Vyc2UgZWFzaWx5IGFuZCBlZmZpY2llbnRseSB1cGRhdGUgQXJyYXlzXG4gICAgLy8gb2YgVGVtcGxhdGVSZXN1bHRzIHRoYXQgd2lsbCBiZSBjb21tb25seSByZXR1cm5lZCBmcm9tIGV4cHJlc3Npb25zIGxpa2U6XG4gICAgLy8gYXJyYXkubWFwKChpKSA9PiBodG1sYCR7aX1gKSwgYnkgcmV1c2luZyBleGlzdGluZyBUZW1wbGF0ZUluc3RhbmNlcy5cblxuICAgIC8vIElmIHZhbHVlIGlzIGFuIGFycmF5LCB0aGVuIHRoZSBwcmV2aW91cyByZW5kZXIgd2FzIG9mIGFuXG4gICAgLy8gaXRlcmFibGUgYW5kIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgQ2hpbGRQYXJ0cyBmcm9tIHRoZSBwcmV2aW91c1xuICAgIC8vIHJlbmRlci4gSWYgdmFsdWUgaXMgbm90IGFuIGFycmF5LCBjbGVhciB0aGlzIHBhcnQgYW5kIG1ha2UgYSBuZXdcbiAgICAvLyBhcnJheSBmb3IgQ2hpbGRQYXJ0cy5cbiAgICBpZiAoIWlzQXJyYXkodGhpcy5fJGNvbW1pdHRlZFZhbHVlKSkge1xuICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gW107XG4gICAgICB0aGlzLl8kY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvLyBMZXRzIHVzIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgaXRlbXMgd2Ugc3RhbXBlZCBzbyB3ZSBjYW4gY2xlYXIgbGVmdG92ZXJcbiAgICAvLyBpdGVtcyBmcm9tIGEgcHJldmlvdXMgcmVuZGVyXG4gICAgY29uc3QgaXRlbVBhcnRzID0gdGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIENoaWxkUGFydFtdO1xuICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgIGxldCBpdGVtUGFydDogQ2hpbGRQYXJ0IHwgdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICBpZiAocGFydEluZGV4ID09PSBpdGVtUGFydHMubGVuZ3RoKSB7XG4gICAgICAgIC8vIElmIG5vIGV4aXN0aW5nIHBhcnQsIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IHRlc3QgcGVyZiBpbXBhY3Qgb2YgYWx3YXlzIGNyZWF0aW5nIHR3byBwYXJ0c1xuICAgICAgICAvLyBpbnN0ZWFkIG9mIHNoYXJpbmcgcGFydHMgYmV0d2VlbiBub2Rlc1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGl0L2xpdC9pc3N1ZXMvMTI2NlxuICAgICAgICBpdGVtUGFydHMucHVzaChcbiAgICAgICAgICAoaXRlbVBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0KGNyZWF0ZU1hcmtlcigpKSxcbiAgICAgICAgICAgIHRoaXMuX2luc2VydChjcmVhdGVNYXJrZXIoKSksXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zXG4gICAgICAgICAgKSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldXNlIGFuIGV4aXN0aW5nIHBhcnRcbiAgICAgICAgaXRlbVBhcnQgPSBpdGVtUGFydHNbcGFydEluZGV4XTtcbiAgICAgIH1cbiAgICAgIGl0ZW1QYXJ0Ll8kc2V0VmFsdWUoaXRlbSk7XG4gICAgICBwYXJ0SW5kZXgrKztcbiAgICB9XG5cbiAgICBpZiAocGFydEluZGV4IDwgaXRlbVBhcnRzLmxlbmd0aCkge1xuICAgICAgLy8gaXRlbVBhcnRzIGFsd2F5cyBoYXZlIGVuZCBub2Rlc1xuICAgICAgdGhpcy5fJGNsZWFyKFxuICAgICAgICBpdGVtUGFydCAmJiB3cmFwKGl0ZW1QYXJ0Ll8kZW5kTm9kZSEpLm5leHRTaWJsaW5nLFxuICAgICAgICBwYXJ0SW5kZXhcbiAgICAgICk7XG4gICAgICAvLyBUcnVuY2F0ZSB0aGUgcGFydHMgYXJyYXkgc28gX3ZhbHVlIHJlZmxlY3RzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICBpdGVtUGFydHMubGVuZ3RoID0gcGFydEluZGV4O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBub2RlcyBjb250YWluZWQgd2l0aGluIHRoaXMgUGFydCBmcm9tIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydCBTdGFydCBub2RlIHRvIGNsZWFyIGZyb20sIGZvciBjbGVhcmluZyBhIHN1YnNldCBvZiB0aGUgcGFydCdzXG4gICAqICAgICBET00gKHVzZWQgd2hlbiB0cnVuY2F0aW5nIGl0ZXJhYmxlcylcbiAgICogQHBhcmFtIGZyb20gIFdoZW4gYHN0YXJ0YCBpcyBzcGVjaWZpZWQsIHRoZSBpbmRleCB3aXRoaW4gdGhlIGl0ZXJhYmxlIGZyb21cbiAgICogICAgIHdoaWNoIENoaWxkUGFydHMgYXJlIGJlaW5nIHJlbW92ZWQsIHVzZWQgZm9yIGRpc2Nvbm5lY3RpbmcgZGlyZWN0aXZlcyBpblxuICAgKiAgICAgdGhvc2UgUGFydHMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgXyRjbGVhcihcbiAgICBzdGFydDogQ2hpbGROb2RlIHwgbnVsbCA9IHdyYXAodGhpcy5fJHN0YXJ0Tm9kZSkubmV4dFNpYmxpbmcsXG4gICAgZnJvbT86IG51bWJlclxuICApIHtcbiAgICB0aGlzLl8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQ/LihmYWxzZSwgdHJ1ZSwgZnJvbSk7XG4gICAgd2hpbGUgKHN0YXJ0ICYmIHN0YXJ0ICE9PSB0aGlzLl8kZW5kTm9kZSkge1xuICAgICAgY29uc3QgbiA9IHdyYXAoc3RhcnQhKS5uZXh0U2libGluZztcbiAgICAgICh3cmFwKHN0YXJ0ISkgYXMgRWxlbWVudCkucmVtb3ZlKCk7XG4gICAgICBzdGFydCA9IG47XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJbXBsZW1lbnRhdGlvbiBvZiBSb290UGFydCdzIGBpc0Nvbm5lY3RlZGAuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZFxuICAgKiBzaG91bGQgb25seSBiZSBjYWxsZWQgb24gYFJvb3RQYXJ0YHMgKHRoZSBgQ2hpbGRQYXJ0YCByZXR1cm5lZCBmcm9tIGFcbiAgICogdG9wLWxldmVsIGByZW5kZXIoKWAgY2FsbCkuIEl0IGhhcyBubyBlZmZlY3Qgb24gbm9uLXJvb3QgQ2hpbGRQYXJ0cy5cbiAgICogQHBhcmFtIGlzQ29ubmVjdGVkIFdoZXRoZXIgdG8gc2V0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2V0Q29ubmVjdGVkKGlzQ29ubmVjdGVkOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuXyRwYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fX2lzQ29ubmVjdGVkID0gaXNDb25uZWN0ZWQ7XG4gICAgICB0aGlzLl8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQ/Lihpc0Nvbm5lY3RlZCk7XG4gICAgfSBlbHNlIGlmIChERVZfTU9ERSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAncGFydC5zZXRDb25uZWN0ZWQoKSBtYXkgb25seSBiZSBjYWxsZWQgb24gYSAnICtcbiAgICAgICAgICAnUm9vdFBhcnQgcmV0dXJuZWQgZnJvbSByZW5kZXIoKS4nXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEEgdG9wLWxldmVsIGBDaGlsZFBhcnRgIHJldHVybmVkIGZyb20gYHJlbmRlcmAgdGhhdCBtYW5hZ2VzIHRoZSBjb25uZWN0ZWRcbiAqIHN0YXRlIG9mIGBBc3luY0RpcmVjdGl2ZWBzIGNyZWF0ZWQgdGhyb3VnaG91dCB0aGUgdHJlZSBiZWxvdyBpdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSb290UGFydCBleHRlbmRzIENoaWxkUGFydCB7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb25uZWN0aW9uIHN0YXRlIGZvciBgQXN5bmNEaXJlY3RpdmVgcyBjb250YWluZWQgd2l0aGluIHRoaXMgcm9vdFxuICAgKiBDaGlsZFBhcnQuXG4gICAqXG4gICAqIGxpdC1odG1sIGRvZXMgbm90IGF1dG9tYXRpY2FsbHkgbW9uaXRvciB0aGUgY29ubmVjdGVkbmVzcyBvZiBET00gcmVuZGVyZWQ7XG4gICAqIGFzIHN1Y2gsIGl0IGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgY2FsbGVyIHRvIGByZW5kZXJgIHRvIGVuc3VyZSB0aGF0XG4gICAqIGBwYXJ0LnNldENvbm5lY3RlZChmYWxzZSlgIGlzIGNhbGxlZCBiZWZvcmUgdGhlIHBhcnQgb2JqZWN0IGlzIHBvdGVudGlhbGx5XG4gICAqIGRpc2NhcmRlZCwgdG8gZW5zdXJlIHRoYXQgYEFzeW5jRGlyZWN0aXZlYHMgaGF2ZSBhIGNoYW5jZSB0byBkaXNwb3NlIG9mXG4gICAqIGFueSByZXNvdXJjZXMgYmVpbmcgaGVsZC4gSWYgYSBgUm9vdFBhcnRgIHRoYXQgd2FzIHByZXZpb3VzbHlcbiAgICogZGlzY29ubmVjdGVkIGlzIHN1YnNlcXVlbnRseSByZS1jb25uZWN0ZWQgKGFuZCBpdHMgYEFzeW5jRGlyZWN0aXZlYHMgc2hvdWxkXG4gICAqIHJlLWNvbm5lY3QpLCBgc2V0Q29ubmVjdGVkKHRydWUpYCBzaG91bGQgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0gaXNDb25uZWN0ZWQgV2hldGhlciBkaXJlY3RpdmVzIHdpdGhpbiB0aGlzIHRyZWUgc2hvdWxkIGJlIGNvbm5lY3RlZFxuICAgKiBvciBub3RcbiAgICovXG4gIHNldENvbm5lY3RlZChpc0Nvbm5lY3RlZDogYm9vbGVhbik6IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIHtBdHRyaWJ1dGVQYXJ0fTtcbmNsYXNzIEF0dHJpYnV0ZVBhcnQgaW1wbGVtZW50cyBEaXNjb25uZWN0YWJsZSB7XG4gIHJlYWRvbmx5IHR5cGU6XG4gICAgfCB0eXBlb2YgQVRUUklCVVRFX1BBUlRcbiAgICB8IHR5cGVvZiBQUk9QRVJUWV9QQVJUXG4gICAgfCB0eXBlb2YgQk9PTEVBTl9BVFRSSUJVVEVfUEFSVFxuICAgIHwgdHlwZW9mIEVWRU5UX1BBUlQgPSBBVFRSSUJVVEVfUEFSVDtcbiAgcmVhZG9ubHkgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbiAgcmVhZG9ubHkgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogSWYgdGhpcyBhdHRyaWJ1dGUgcGFydCByZXByZXNlbnRzIGFuIGludGVycG9sYXRpb24sIHRoaXMgY29udGFpbnMgdGhlXG4gICAqIHN0YXRpYyBzdHJpbmdzIG9mIHRoZSBpbnRlcnBvbGF0aW9uLiBGb3Igc2luZ2xlLXZhbHVlLCBjb21wbGV0ZSBiaW5kaW5ncyxcbiAgICogdGhpcyBpcyB1bmRlZmluZWQuXG4gICAqL1xuICByZWFkb25seSBzdHJpbmdzPzogUmVhZG9ubHlBcnJheTxzdHJpbmc+O1xuICAvKiogQGludGVybmFsICovXG4gIF8kY29tbWl0dGVkVmFsdWU6IHVua25vd24gfCBBcnJheTx1bmtub3duPiA9IG5vdGhpbmc7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX19kaXJlY3RpdmVzPzogQXJyYXk8RGlyZWN0aXZlIHwgdW5kZWZpbmVkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHBhcmVudDogRGlzY29ubmVjdGFibGU7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuPzogU2V0PERpc2Nvbm5lY3RhYmxlPiA9IHVuZGVmaW5lZDtcblxuICBwcm90ZWN0ZWQgX3Nhbml0aXplcjogVmFsdWVTYW5pdGl6ZXIgfCB1bmRlZmluZWQ7XG5cbiAgZ2V0IHRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC50YWdOYW1lO1xuICB9XG5cbiAgLy8gU2VlIGNvbW1lbnQgaW4gRGlzY29ubmVjdGFibGUgaW50ZXJmYWNlIGZvciB3aHkgdGhpcyBpcyBhIGdldHRlclxuICBnZXQgXyRpc0Nvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fJHBhcmVudC5fJGlzQ29ubmVjdGVkO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHN0cmluZ3M6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPixcbiAgICBwYXJlbnQ6IERpc2Nvbm5lY3RhYmxlLFxuICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuXyRwYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBpZiAoc3RyaW5ncy5sZW5ndGggPiAyIHx8IHN0cmluZ3NbMF0gIT09ICcnIHx8IHN0cmluZ3NbMV0gIT09ICcnKSB7XG4gICAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPSBuZXcgQXJyYXkoc3RyaW5ncy5sZW5ndGggLSAxKS5maWxsKG5ldyBTdHJpbmcoKSk7XG4gICAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPSBub3RoaW5nO1xuICAgIH1cbiAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICB0aGlzLl9zYW5pdGl6ZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoaXMgcGFydCBieSByZXNvbHZpbmcgdGhlIHZhbHVlIGZyb20gcG9zc2libHkgbXVsdGlwbGVcbiAgICogdmFsdWVzIGFuZCBzdGF0aWMgc3RyaW5ncyBhbmQgY29tbWl0dGluZyBpdCB0byB0aGUgRE9NLlxuICAgKiBJZiB0aGlzIHBhcnQgaXMgc2luZ2xlLXZhbHVlZCwgYHRoaXMuX3N0cmluZ3NgIHdpbGwgYmUgdW5kZWZpbmVkLCBhbmQgdGhlXG4gICAqIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgc2luZ2xlIHZhbHVlIGFyZ3VtZW50LiBJZiB0aGlzIHBhcnQgaXNcbiAgICogbXVsdGktdmFsdWUsIGB0aGlzLl9zdHJpbmdzYCB3aWxsIGJlIGRlZmluZWQsIGFuZCB0aGUgbWV0aG9kIGlzIGNhbGxlZFxuICAgKiB3aXRoIHRoZSB2YWx1ZSBhcnJheSBvZiB0aGUgcGFydCdzIG93bmluZyBUZW1wbGF0ZUluc3RhbmNlLCBhbmQgYW4gb2Zmc2V0XG4gICAqIGludG8gdGhlIHZhbHVlIGFycmF5IGZyb20gd2hpY2ggdGhlIHZhbHVlcyBzaG91bGQgYmUgcmVhZC5cbiAgICogVGhpcyBtZXRob2QgaXMgb3ZlcmxvYWRlZCB0aGlzIHdheSB0byBlbGltaW5hdGUgc2hvcnQtbGl2ZWQgYXJyYXkgc2xpY2VzXG4gICAqIG9mIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSB2YWx1ZXMsIGFuZCBhbGxvdyBhIGZhc3QtcGF0aCBmb3Igc2luZ2xlLXZhbHVlZFxuICAgKiBwYXJ0cy5cbiAgICpcbiAgICogQHBhcmFtIHZhbHVlIFRoZSBwYXJ0IHZhbHVlLCBvciBhbiBhcnJheSBvZiB2YWx1ZXMgZm9yIG11bHRpLXZhbHVlZCBwYXJ0c1xuICAgKiBAcGFyYW0gdmFsdWVJbmRleCB0aGUgaW5kZXggdG8gc3RhcnQgcmVhZGluZyB2YWx1ZXMgZnJvbS4gYHVuZGVmaW5lZGAgZm9yXG4gICAqICAgc2luZ2xlLXZhbHVlZCBwYXJ0c1xuICAgKiBAcGFyYW0gbm9Db21taXQgY2F1c2VzIHRoZSBwYXJ0IHRvIG5vdCBjb21taXQgaXRzIHZhbHVlIHRvIHRoZSBET00uIFVzZWRcbiAgICogICBpbiBoeWRyYXRpb24gdG8gcHJpbWUgYXR0cmlidXRlIHBhcnRzIHdpdGggdGhlaXIgZmlyc3QtcmVuZGVyZWQgdmFsdWUsXG4gICAqICAgYnV0IG5vdCBzZXQgdGhlIGF0dHJpYnV0ZSwgYW5kIGluIFNTUiB0byBuby1vcCB0aGUgRE9NIG9wZXJhdGlvbiBhbmRcbiAgICogICBjYXB0dXJlIHRoZSB2YWx1ZSBmb3Igc2VyaWFsaXphdGlvbi5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfJHNldFZhbHVlKFxuICAgIHZhbHVlOiB1bmtub3duIHwgQXJyYXk8dW5rbm93bj4sXG4gICAgZGlyZWN0aXZlUGFyZW50OiBEaXJlY3RpdmVQYXJlbnQgPSB0aGlzLFxuICAgIHZhbHVlSW5kZXg/OiBudW1iZXIsXG4gICAgbm9Db21taXQ/OiBib29sZWFuXG4gICkge1xuICAgIGNvbnN0IHN0cmluZ3MgPSB0aGlzLnN0cmluZ3M7XG5cbiAgICAvLyBXaGV0aGVyIGFueSBvZiB0aGUgdmFsdWVzIGhhcyBjaGFuZ2VkLCBmb3IgZGlydHktY2hlY2tpbmdcbiAgICBsZXQgY2hhbmdlID0gZmFsc2U7XG5cbiAgICBpZiAoc3RyaW5ncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBTaW5nbGUtdmFsdWUgYmluZGluZyBjYXNlXG4gICAgICB2YWx1ZSA9IHJlc29sdmVEaXJlY3RpdmUodGhpcywgdmFsdWUsIGRpcmVjdGl2ZVBhcmVudCwgMCk7XG4gICAgICBjaGFuZ2UgPVxuICAgICAgICAhaXNQcmltaXRpdmUodmFsdWUpIHx8XG4gICAgICAgICh2YWx1ZSAhPT0gdGhpcy5fJGNvbW1pdHRlZFZhbHVlICYmIHZhbHVlICE9PSBub0NoYW5nZSk7XG4gICAgICBpZiAoY2hhbmdlKSB7XG4gICAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbnRlcnBvbGF0aW9uIGNhc2VcbiAgICAgIGNvbnN0IHZhbHVlcyA9IHZhbHVlIGFzIEFycmF5PHVua25vd24+O1xuICAgICAgdmFsdWUgPSBzdHJpbmdzWzBdO1xuXG4gICAgICBsZXQgaSwgdjtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICB2ID0gcmVzb2x2ZURpcmVjdGl2ZSh0aGlzLCB2YWx1ZXNbdmFsdWVJbmRleCEgKyBpXSwgZGlyZWN0aXZlUGFyZW50LCBpKTtcblxuICAgICAgICBpZiAodiA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgdXNlci1wcm92aWRlZCB2YWx1ZSBpcyBgbm9DaGFuZ2VgLCB1c2UgdGhlIHByZXZpb3VzIHZhbHVlXG4gICAgICAgICAgdiA9ICh0aGlzLl8kY29tbWl0dGVkVmFsdWUgYXMgQXJyYXk8dW5rbm93bj4pW2ldO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZSB8fD1cbiAgICAgICAgICAhaXNQcmltaXRpdmUodikgfHwgdiAhPT0gKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBBcnJheTx1bmtub3duPilbaV07XG4gICAgICAgIGlmICh2ID09PSBub3RoaW5nKSB7XG4gICAgICAgICAgdmFsdWUgPSBub3RoaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSBub3RoaW5nKSB7XG4gICAgICAgICAgdmFsdWUgKz0gKHYgPz8gJycpICsgc3RyaW5nc1tpICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgYWx3YXlzIHJlY29yZCBlYWNoIHZhbHVlLCBldmVuIGlmIG9uZSBpcyBgbm90aGluZ2AsIGZvciBmdXR1cmVcbiAgICAgICAgLy8gY2hhbmdlIGRldGVjdGlvbi5cbiAgICAgICAgKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBBcnJheTx1bmtub3duPilbaV0gPSB2O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2hhbmdlICYmICFub0NvbW1pdCkge1xuICAgICAgdGhpcy5fY29tbWl0VmFsdWUodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2NvbW1pdFZhbHVlKHZhbHVlOiB1bmtub3duKSB7XG4gICAgaWYgKHZhbHVlID09PSBub3RoaW5nKSB7XG4gICAgICAod3JhcCh0aGlzLmVsZW1lbnQpIGFzIEVsZW1lbnQpLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLm5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICAgIGlmICh0aGlzLl9zYW5pdGl6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuX3Nhbml0aXplciA9IHNhbml0aXplckZhY3RvcnlJbnRlcm5hbChcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgICdhdHRyaWJ1dGUnXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRoaXMuX3Nhbml0aXplcih2YWx1ZSA/PyAnJyk7XG4gICAgICB9XG4gICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgIGtpbmQ6ICdjb21taXQgYXR0cmlidXRlJyxcbiAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAod3JhcCh0aGlzLmVsZW1lbnQpIGFzIEVsZW1lbnQpLnNldEF0dHJpYnV0ZShcbiAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAodmFsdWUgPz8gJycpIGFzIHN0cmluZ1xuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUge1Byb3BlcnR5UGFydH07XG5jbGFzcyBQcm9wZXJ0eVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgdHlwZSA9IFBST1BFUlRZX1BBUlQ7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBvdmVycmlkZSBfY29tbWl0VmFsdWUodmFsdWU6IHVua25vd24pIHtcbiAgICBpZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gICAgICBpZiAodGhpcy5fc2FuaXRpemVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fc2FuaXRpemVyID0gc2FuaXRpemVyRmFjdG9yeUludGVybmFsKFxuICAgICAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgJ3Byb3BlcnR5J1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB0aGlzLl9zYW5pdGl6ZXIodmFsdWUpO1xuICAgIH1cbiAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAga2luZDogJ2NvbW1pdCBwcm9wZXJ0eScsXG4gICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgfSk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAodGhpcy5lbGVtZW50IGFzIGFueSlbdGhpcy5uYW1lXSA9IHZhbHVlID09PSBub3RoaW5nID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUge0Jvb2xlYW5BdHRyaWJ1dGVQYXJ0fTtcbmNsYXNzIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0IGV4dGVuZHMgQXR0cmlidXRlUGFydCB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHR5cGUgPSBCT09MRUFOX0FUVFJJQlVURV9QQVJUO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgb3ZlcnJpZGUgX2NvbW1pdFZhbHVlKHZhbHVlOiB1bmtub3duKSB7XG4gICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgIGtpbmQ6ICdjb21taXQgYm9vbGVhbiBhdHRyaWJ1dGUnLFxuICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgdmFsdWU6ICEhKHZhbHVlICYmIHZhbHVlICE9PSBub3RoaW5nKSxcbiAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgfSk7XG4gICAgKHdyYXAodGhpcy5lbGVtZW50KSBhcyBFbGVtZW50KS50b2dnbGVBdHRyaWJ1dGUoXG4gICAgICB0aGlzLm5hbWUsXG4gICAgICAhIXZhbHVlICYmIHZhbHVlICE9PSBub3RoaW5nXG4gICAgKTtcbiAgfVxufVxuXG50eXBlIEV2ZW50TGlzdGVuZXJXaXRoT3B0aW9ucyA9IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QgJlxuICBQYXJ0aWFsPEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zPjtcblxuLyoqXG4gKiBBbiBBdHRyaWJ1dGVQYXJ0IHRoYXQgbWFuYWdlcyBhbiBldmVudCBsaXN0ZW5lciB2aWEgYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIuXG4gKlxuICogVGhpcyBwYXJ0IHdvcmtzIGJ5IGFkZGluZyBpdHNlbGYgYXMgdGhlIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGVsZW1lbnQsIHRoZW5cbiAqIGRlbGVnYXRpbmcgdG8gdGhlIHZhbHVlIHBhc3NlZCB0byBpdC4gVGhpcyByZWR1Y2VzIHRoZSBudW1iZXIgb2YgY2FsbHMgdG9cbiAqIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyIGlmIHRoZSBsaXN0ZW5lciBjaGFuZ2VzIGZyZXF1ZW50bHksIHN1Y2ggYXMgd2hlbiBhblxuICogaW5saW5lIGZ1bmN0aW9uIGlzIHVzZWQgYXMgYSBsaXN0ZW5lci5cbiAqXG4gKiBCZWNhdXNlIGV2ZW50IG9wdGlvbnMgYXJlIHBhc3NlZCB3aGVuIGFkZGluZyBsaXN0ZW5lcnMsIHdlIG11c3QgdGFrZSBjYXNlXG4gKiB0byBhZGQgYW5kIHJlbW92ZSB0aGUgcGFydCBhcyBhIGxpc3RlbmVyIHdoZW4gdGhlIGV2ZW50IG9wdGlvbnMgY2hhbmdlLlxuICovXG5leHBvcnQgdHlwZSB7RXZlbnRQYXJ0fTtcbmNsYXNzIEV2ZW50UGFydCBleHRlbmRzIEF0dHJpYnV0ZVBhcnQge1xuICBvdmVycmlkZSByZWFkb25seSB0eXBlID0gRVZFTlRfUEFSVDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgc3RyaW5nczogUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUsXG4gICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZFxuICApIHtcbiAgICBzdXBlcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzLCBwYXJlbnQsIG9wdGlvbnMpO1xuXG4gICAgaWYgKERFVl9NT0RFICYmIHRoaXMuc3RyaW5ncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBBIFxcYDwke2VsZW1lbnQubG9jYWxOYW1lfT5cXGAgaGFzIGEgXFxgQCR7bmFtZX09Li4uXFxgIGxpc3RlbmVyIHdpdGggYCArXG4gICAgICAgICAgJ2ludmFsaWQgY29udGVudC4gRXZlbnQgbGlzdGVuZXJzIGluIHRlbXBsYXRlcyBtdXN0IGhhdmUgZXhhY3RseSAnICtcbiAgICAgICAgICAnb25lIGV4cHJlc3Npb24gYW5kIG5vIHN1cnJvdW5kaW5nIHRleHQuJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBFdmVudFBhcnQgZG9lcyBub3QgdXNlIHRoZSBiYXNlIF8kc2V0VmFsdWUvX3Jlc29sdmVWYWx1ZSBpbXBsZW1lbnRhdGlvblxuICAvLyBzaW5jZSB0aGUgZGlydHkgY2hlY2tpbmcgaXMgbW9yZSBjb21wbGV4XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgb3ZlcnJpZGUgXyRzZXRWYWx1ZShcbiAgICBuZXdMaXN0ZW5lcjogdW5rbm93bixcbiAgICBkaXJlY3RpdmVQYXJlbnQ6IERpcmVjdGl2ZVBhcmVudCA9IHRoaXNcbiAgKSB7XG4gICAgbmV3TGlzdGVuZXIgPVxuICAgICAgcmVzb2x2ZURpcmVjdGl2ZSh0aGlzLCBuZXdMaXN0ZW5lciwgZGlyZWN0aXZlUGFyZW50LCAwKSA/PyBub3RoaW5nO1xuICAgIGlmIChuZXdMaXN0ZW5lciA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2xkTGlzdGVuZXIgPSB0aGlzLl8kY29tbWl0dGVkVmFsdWU7XG5cbiAgICAvLyBJZiB0aGUgbmV3IHZhbHVlIGlzIG5vdGhpbmcgb3IgYW55IG9wdGlvbnMgY2hhbmdlIHdlIGhhdmUgdG8gcmVtb3ZlIHRoZVxuICAgIC8vIHBhcnQgYXMgYSBsaXN0ZW5lci5cbiAgICBjb25zdCBzaG91bGRSZW1vdmVMaXN0ZW5lciA9XG4gICAgICAobmV3TGlzdGVuZXIgPT09IG5vdGhpbmcgJiYgb2xkTGlzdGVuZXIgIT09IG5vdGhpbmcpIHx8XG4gICAgICAobmV3TGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zKS5jYXB0dXJlICE9PVxuICAgICAgICAob2xkTGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zKS5jYXB0dXJlIHx8XG4gICAgICAobmV3TGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zKS5vbmNlICE9PVxuICAgICAgICAob2xkTGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zKS5vbmNlIHx8XG4gICAgICAobmV3TGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zKS5wYXNzaXZlICE9PVxuICAgICAgICAob2xkTGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zKS5wYXNzaXZlO1xuXG4gICAgLy8gSWYgdGhlIG5ldyB2YWx1ZSBpcyBub3Qgbm90aGluZyBhbmQgd2UgcmVtb3ZlZCB0aGUgbGlzdGVuZXIsIHdlIGhhdmVcbiAgICAvLyB0byBhZGQgdGhlIHBhcnQgYXMgYSBsaXN0ZW5lci5cbiAgICBjb25zdCBzaG91bGRBZGRMaXN0ZW5lciA9XG4gICAgICBuZXdMaXN0ZW5lciAhPT0gbm90aGluZyAmJlxuICAgICAgKG9sZExpc3RlbmVyID09PSBub3RoaW5nIHx8IHNob3VsZFJlbW92ZUxpc3RlbmVyKTtcblxuICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICBraW5kOiAnY29tbWl0IGV2ZW50IGxpc3RlbmVyJyxcbiAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIHZhbHVlOiBuZXdMaXN0ZW5lcixcbiAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICByZW1vdmVMaXN0ZW5lcjogc2hvdWxkUmVtb3ZlTGlzdGVuZXIsXG4gICAgICAgIGFkZExpc3RlbmVyOiBzaG91bGRBZGRMaXN0ZW5lcixcbiAgICAgICAgb2xkTGlzdGVuZXIsXG4gICAgICB9KTtcbiAgICBpZiAoc2hvdWxkUmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIG9sZExpc3RlbmVyIGFzIEV2ZW50TGlzdGVuZXJXaXRoT3B0aW9uc1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHNob3VsZEFkZExpc3RlbmVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICB0aGlzLFxuICAgICAgICBuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IG5ld0xpc3RlbmVyO1xuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZS5jYWxsKHRoaXMub3B0aW9ucz8uaG9zdCA/PyB0aGlzLmVsZW1lbnQsIGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBFdmVudExpc3RlbmVyT2JqZWN0KS5oYW5kbGVFdmVudChldmVudCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB0eXBlIHtFbGVtZW50UGFydH07XG5jbGFzcyBFbGVtZW50UGFydCBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgcmVhZG9ubHkgdHlwZSA9IEVMRU1FTlRfUEFSVDtcblxuICAvKiogQGludGVybmFsICovXG4gIF9fZGlyZWN0aXZlPzogRGlyZWN0aXZlO1xuXG4gIC8vIFRoaXMgaXMgdG8gZW5zdXJlIHRoYXQgZXZlcnkgUGFydCBoYXMgYSBfJGNvbW1pdHRlZFZhbHVlXG4gIF8kY29tbWl0dGVkVmFsdWU6IHVuZGVmaW5lZDtcblxuICAvKiogQGludGVybmFsICovXG4gIF8kcGFyZW50ITogRGlzY29ubmVjdGFibGU7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+ID0gdW5kZWZpbmVkO1xuXG4gIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGVsZW1lbnQ6IEVsZW1lbnQsXG4gICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSxcbiAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkXG4gICkge1xuICAgIHRoaXMuXyRwYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8vIFNlZSBjb21tZW50IGluIERpc2Nvbm5lY3RhYmxlIGludGVyZmFjZSBmb3Igd2h5IHRoaXMgaXMgYSBnZXR0ZXJcbiAgZ2V0IF8kaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuXyRwYXJlbnQuXyRpc0Nvbm5lY3RlZDtcbiAgfVxuXG4gIF8kc2V0VmFsdWUodmFsdWU6IHVua25vd24pOiB2b2lkIHtcbiAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAga2luZDogJ2NvbW1pdCB0byBlbGVtZW50IGJpbmRpbmcnLFxuICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KTtcbiAgICByZXNvbHZlRGlyZWN0aXZlKHRoaXMsIHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEVORCBVU0VSUyBTSE9VTEQgTk9UIFJFTFkgT04gVEhJUyBPQkpFQ1QuXG4gKlxuICogUHJpdmF0ZSBleHBvcnRzIGZvciB1c2UgYnkgb3RoZXIgTGl0IHBhY2thZ2VzLCBub3QgaW50ZW5kZWQgZm9yIHVzZSBieVxuICogZXh0ZXJuYWwgdXNlcnMuXG4gKlxuICogV2UgY3VycmVudGx5IGRvIG5vdCBtYWtlIGEgbWFuZ2xlZCByb2xsdXAgYnVpbGQgb2YgdGhlIGxpdC1zc3IgY29kZS4gSW4gb3JkZXJcbiAqIHRvIGtlZXAgYSBudW1iZXIgb2YgKG90aGVyd2lzZSBwcml2YXRlKSB0b3AtbGV2ZWwgZXhwb3J0cyBtYW5nbGVkIGluIHRoZVxuICogY2xpZW50IHNpZGUgY29kZSwgd2UgZXhwb3J0IGEgXyRMSCBvYmplY3QgY29udGFpbmluZyB0aG9zZSBtZW1iZXJzIChvclxuICogaGVscGVyIG1ldGhvZHMgZm9yIGFjY2Vzc2luZyBwcml2YXRlIGZpZWxkcyBvZiB0aG9zZSBtZW1iZXJzKSwgYW5kIHRoZW5cbiAqIHJlLWV4cG9ydCB0aGVtIGZvciB1c2UgaW4gbGl0LXNzci4gVGhpcyBrZWVwcyBsaXQtc3NyIGFnbm9zdGljIHRvIHdoZXRoZXIgdGhlXG4gKiBjbGllbnQtc2lkZSBjb2RlIGlzIGJlaW5nIHVzZWQgaW4gYGRldmAgbW9kZSBvciBgcHJvZGAgbW9kZS5cbiAqXG4gKiBUaGlzIGhhcyBhIHVuaXF1ZSBuYW1lLCB0byBkaXNhbWJpZ3VhdGUgaXQgZnJvbSBwcml2YXRlIGV4cG9ydHMgaW5cbiAqIGxpdC1lbGVtZW50LCB3aGljaCByZS1leHBvcnRzIGFsbCBvZiBsaXQtaHRtbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgXyRMSCA9IHtcbiAgLy8gVXNlZCBpbiBsaXQtc3NyXG4gIF9ib3VuZEF0dHJpYnV0ZVN1ZmZpeDogYm91bmRBdHRyaWJ1dGVTdWZmaXgsXG4gIF9tYXJrZXI6IG1hcmtlcixcbiAgX21hcmtlck1hdGNoOiBtYXJrZXJNYXRjaCxcbiAgX0hUTUxfUkVTVUxUOiBIVE1MX1JFU1VMVCxcbiAgX2dldFRlbXBsYXRlSHRtbDogZ2V0VGVtcGxhdGVIdG1sLFxuICAvLyBVc2VkIGluIHRlc3RzIGFuZCBwcml2YXRlLXNzci1zdXBwb3J0XG4gIF9UZW1wbGF0ZUluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlLFxuICBfaXNJdGVyYWJsZTogaXNJdGVyYWJsZSxcbiAgX3Jlc29sdmVEaXJlY3RpdmU6IHJlc29sdmVEaXJlY3RpdmUsXG4gIF9DaGlsZFBhcnQ6IENoaWxkUGFydCxcbiAgX0F0dHJpYnV0ZVBhcnQ6IEF0dHJpYnV0ZVBhcnQsXG4gIF9Cb29sZWFuQXR0cmlidXRlUGFydDogQm9vbGVhbkF0dHJpYnV0ZVBhcnQsXG4gIF9FdmVudFBhcnQ6IEV2ZW50UGFydCxcbiAgX1Byb3BlcnR5UGFydDogUHJvcGVydHlQYXJ0LFxuICBfRWxlbWVudFBhcnQ6IEVsZW1lbnRQYXJ0LFxufTtcblxuLy8gQXBwbHkgcG9seWZpbGxzIGlmIGF2YWlsYWJsZVxuY29uc3QgcG9seWZpbGxTdXBwb3J0ID0gREVWX01PREVcbiAgPyBnbG9iYWwubGl0SHRtbFBvbHlmaWxsU3VwcG9ydERldk1vZGVcbiAgOiBnbG9iYWwubGl0SHRtbFBvbHlmaWxsU3VwcG9ydDtcbnBvbHlmaWxsU3VwcG9ydD8uKFRlbXBsYXRlLCBDaGlsZFBhcnQpO1xuXG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIGxpdC1odG1sIHVzYWdlLlxuKGdsb2JhbC5saXRIdG1sVmVyc2lvbnMgPz89IFtdKS5wdXNoKCczLjMuMCcpO1xuaWYgKERFVl9NT0RFICYmIGdsb2JhbC5saXRIdG1sVmVyc2lvbnMubGVuZ3RoID4gMSkge1xuICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgaXNzdWVXYXJuaW5nIShcbiAgICAgICdtdWx0aXBsZS12ZXJzaW9ucycsXG4gICAgICBgTXVsdGlwbGUgdmVyc2lvbnMgb2YgTGl0IGxvYWRlZC4gYCArXG4gICAgICAgIGBMb2FkaW5nIG11bHRpcGxlIHZlcnNpb25zIGlzIG5vdCByZWNvbW1lbmRlZC5gXG4gICAgKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmVuZGVycyBhIHZhbHVlLCB1c3VhbGx5IGEgbGl0LWh0bWwgVGVtcGxhdGVSZXN1bHQsIHRvIHRoZSBjb250YWluZXIuXG4gKlxuICogVGhpcyBleGFtcGxlIHJlbmRlcnMgdGhlIHRleHQgXCJIZWxsbywgWm9lIVwiIGluc2lkZSBhIHBhcmFncmFwaCB0YWcsIGFwcGVuZGluZ1xuICogaXQgdG8gdGhlIGNvbnRhaW5lciBgZG9jdW1lbnQuYm9keWAuXG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7aHRtbCwgcmVuZGVyfSBmcm9tICdsaXQnO1xuICpcbiAqIGNvbnN0IG5hbWUgPSBcIlpvZVwiO1xuICogcmVuZGVyKGh0bWxgPHA+SGVsbG8sICR7bmFtZX0hPC9wPmAsIGRvY3VtZW50LmJvZHkpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHZhbHVlIEFueSBbcmVuZGVyYWJsZVxuICogICB2YWx1ZV0oaHR0cHM6Ly9saXQuZGV2L2RvY3MvdGVtcGxhdGVzL2V4cHJlc3Npb25zLyNjaGlsZC1leHByZXNzaW9ucyksXG4gKiAgIHR5cGljYWxseSBhIHtAbGlua2NvZGUgVGVtcGxhdGVSZXN1bHR9IGNyZWF0ZWQgYnkgZXZhbHVhdGluZyBhIHRlbXBsYXRlIHRhZ1xuICogICBsaWtlIHtAbGlua2NvZGUgaHRtbH0gb3Ige0BsaW5rY29kZSBzdmd9LlxuICogQHBhcmFtIGNvbnRhaW5lciBBIERPTSBjb250YWluZXIgdG8gcmVuZGVyIHRvLiBUaGUgZmlyc3QgcmVuZGVyIHdpbGwgYXBwZW5kXG4gKiAgIHRoZSByZW5kZXJlZCB2YWx1ZSB0byB0aGUgY29udGFpbmVyLCBhbmQgc3Vic2VxdWVudCByZW5kZXJzIHdpbGxcbiAqICAgZWZmaWNpZW50bHkgdXBkYXRlIHRoZSByZW5kZXJlZCB2YWx1ZSBpZiB0aGUgc2FtZSByZXN1bHQgdHlwZSB3YXNcbiAqICAgcHJldmlvdXNseSByZW5kZXJlZCB0aGVyZS5cbiAqIEBwYXJhbSBvcHRpb25zIFNlZSB7QGxpbmtjb2RlIFJlbmRlck9wdGlvbnN9IGZvciBvcHRpb25zIGRvY3VtZW50YXRpb24uXG4gKiBAc2VlXG4gKiB7QGxpbmsgaHR0cHM6Ly9saXQuZGV2L2RvY3MvbGlicmFyaWVzL3N0YW5kYWxvbmUtdGVtcGxhdGVzLyNyZW5kZXJpbmctbGl0LWh0bWwtdGVtcGxhdGVzfCBSZW5kZXJpbmcgTGl0IEhUTUwgVGVtcGxhdGVzfVxuICovXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKFxuICB2YWx1ZTogdW5rbm93bixcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQsXG4gIG9wdGlvbnM/OiBSZW5kZXJPcHRpb25zXG4pOiBSb290UGFydCA9PiB7XG4gIGlmIChERVZfTU9ERSAmJiBjb250YWluZXIgPT0gbnVsbCkge1xuICAgIC8vIEdpdmUgYSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UgdGhhblxuICAgIC8vICAgICBVbmNhdWdodCBUeXBlRXJyb3I6IENhbm5vdCByZWFkIHByb3BlcnRpZXMgb2YgbnVsbCAocmVhZGluZ1xuICAgIC8vICAgICAnXyRsaXRQYXJ0JCcpXG4gICAgLy8gd2hpY2ggcmVhZHMgbGlrZSBhbiBpbnRlcm5hbCBMaXQgZXJyb3IuXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIGNvbnRhaW5lciB0byByZW5kZXIgaW50byBtYXkgbm90IGJlICR7Y29udGFpbmVyfWApO1xuICB9XG4gIGNvbnN0IHJlbmRlcklkID0gREVWX01PREUgPyBkZWJ1Z0xvZ1JlbmRlcklkKysgOiAwO1xuICBjb25zdCBwYXJ0T3duZXJOb2RlID0gb3B0aW9ucz8ucmVuZGVyQmVmb3JlID8/IGNvbnRhaW5lcjtcbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgbGV0IHBhcnQ6IENoaWxkUGFydCA9IChwYXJ0T3duZXJOb2RlIGFzIGFueSlbJ18kbGl0UGFydCQnXTtcbiAgZGVidWdMb2dFdmVudCAmJlxuICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAga2luZDogJ2JlZ2luIHJlbmRlcicsXG4gICAgICBpZDogcmVuZGVySWQsXG4gICAgICB2YWx1ZSxcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIG9wdGlvbnMsXG4gICAgICBwYXJ0LFxuICAgIH0pO1xuICBpZiAocGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgZW5kTm9kZSA9IG9wdGlvbnM/LnJlbmRlckJlZm9yZSA/PyBudWxsO1xuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAocGFydE93bmVyTm9kZSBhcyBhbnkpWydfJGxpdFBhcnQkJ10gPSBwYXJ0ID0gbmV3IENoaWxkUGFydChcbiAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIGVuZE5vZGUpLFxuICAgICAgZW5kTm9kZSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIG9wdGlvbnMgPz8ge31cbiAgICApO1xuICB9XG4gIHBhcnQuXyRzZXRWYWx1ZSh2YWx1ZSk7XG4gIGRlYnVnTG9nRXZlbnQgJiZcbiAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgIGtpbmQ6ICdlbmQgcmVuZGVyJyxcbiAgICAgIGlkOiByZW5kZXJJZCxcbiAgICAgIHZhbHVlLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHBhcnQsXG4gICAgfSk7XG4gIHJldHVybiBwYXJ0IGFzIFJvb3RQYXJ0O1xufTtcblxuaWYgKEVOQUJMRV9FWFRSQV9TRUNVUklUWV9IT09LUykge1xuICByZW5kZXIuc2V0U2FuaXRpemVyID0gc2V0U2FuaXRpemVyO1xuICByZW5kZXIuY3JlYXRlU2FuaXRpemVyID0gY3JlYXRlU2FuaXRpemVyO1xuICBpZiAoREVWX01PREUpIHtcbiAgICByZW5kZXIuX3Rlc3RPbmx5Q2xlYXJTYW5pdGl6ZXJGYWN0b3J5RG9Ob3RDYWxsT3JFbHNlID1cbiAgICAgIF90ZXN0T25seUNsZWFyU2FuaXRpemVyRmFjdG9yeURvTm90Q2FsbE9yRWxzZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5jb25zdCByPShyLG8sdCk9Pntmb3IoY29uc3QgdCBvZiBvKWlmKHRbMF09PT1yKXJldHVybigwLHRbMV0pKCk7cmV0dXJuIHQ/LigpfTtleHBvcnR7ciBhcyBjaG9vc2V9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hvb3NlLmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogQ2hvb3NlcyBhbmQgZXZhbHVhdGVzIGEgdGVtcGxhdGUgZnVuY3Rpb24gZnJvbSBhIGxpc3QgYmFzZWQgb24gbWF0Y2hpbmdcbiAqIHRoZSBnaXZlbiBgdmFsdWVgIHRvIGEgY2FzZS5cbiAqXG4gKiBDYXNlcyBhcmUgc3RydWN0dXJlZCBhcyBgW2Nhc2VWYWx1ZSwgZnVuY11gLiBgdmFsdWVgIGlzIG1hdGNoZWQgdG9cbiAqIGBjYXNlVmFsdWVgIGJ5IHN0cmljdCBlcXVhbGl0eS4gVGhlIGZpcnN0IG1hdGNoIGlzIHNlbGVjdGVkLiBDYXNlIHZhbHVlc1xuICogY2FuIGJlIG9mIGFueSB0eXBlIGluY2x1ZGluZyBwcmltaXRpdmVzLCBvYmplY3RzLCBhbmQgc3ltYm9scy5cbiAqXG4gKiBUaGlzIGlzIHNpbWlsYXIgdG8gYSBzd2l0Y2ggc3RhdGVtZW50LCBidXQgYXMgYW4gZXhwcmVzc2lvbiBhbmQgd2l0aG91dFxuICogZmFsbHRocm91Z2guXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogcmVuZGVyKCkge1xuICogICByZXR1cm4gaHRtbGBcbiAqICAgICAke2Nob29zZSh0aGlzLnNlY3Rpb24sIFtcbiAqICAgICAgIFsnaG9tZScsICgpID0+IGh0bWxgPGgxPkhvbWU8L2gxPmBdLFxuICogICAgICAgWydhYm91dCcsICgpID0+IGh0bWxgPGgxPkFib3V0PC9oMT5gXVxuICogICAgIF0sXG4gKiAgICAgKCkgPT4gaHRtbGA8aDE+RXJyb3I8L2gxPmApfVxuICogICBgO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBjaG9vc2UgPSA8VCwgViwgSyBleHRlbmRzIFQgPSBUPihcbiAgdmFsdWU6IFQsXG4gIGNhc2VzOiBBcnJheTxbSywgKCkgPT4gVl0+LFxuICBkZWZhdWx0Q2FzZT86ICgpID0+IFZcbikgPT4ge1xuICBmb3IgKGNvbnN0IGMgb2YgY2FzZXMpIHtcbiAgICBjb25zdCBjYXNlVmFsdWUgPSBjWzBdO1xuICAgIGlmIChjYXNlVmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICBjb25zdCBmbiA9IGNbMV07XG4gICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRDYXNlPy4oKTtcbn07XG4iLCJpbXBvcnR7bm9DaGFuZ2UgYXMgdH1mcm9tXCIuLi9saXQtaHRtbC5qc1wiO2ltcG9ydHtkaXJlY3RpdmUgYXMgcyxEaXJlY3RpdmUgYXMgaSxQYXJ0VHlwZSBhcyByfWZyb21cIi4uL2RpcmVjdGl2ZS5qc1wiO1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovY29uc3QgZT1zKGNsYXNzIGV4dGVuZHMgaXtjb25zdHJ1Y3Rvcih0KXtpZihzdXBlcih0KSx0LnR5cGUhPT1yLkFUVFJJQlVURXx8XCJjbGFzc1wiIT09dC5uYW1lfHx0LnN0cmluZ3M/Lmxlbmd0aD4yKXRocm93IEVycm9yKFwiYGNsYXNzTWFwKClgIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGBjbGFzc2AgYXR0cmlidXRlIGFuZCBtdXN0IGJlIHRoZSBvbmx5IHBhcnQgaW4gdGhlIGF0dHJpYnV0ZS5cIil9cmVuZGVyKHQpe3JldHVyblwiIFwiK09iamVjdC5rZXlzKHQpLmZpbHRlcigocz0+dFtzXSkpLmpvaW4oXCIgXCIpK1wiIFwifXVwZGF0ZShzLFtpXSl7aWYodm9pZCAwPT09dGhpcy5zdCl7dGhpcy5zdD1uZXcgU2V0LHZvaWQgMCE9PXMuc3RyaW5ncyYmKHRoaXMubnQ9bmV3IFNldChzLnN0cmluZ3Muam9pbihcIiBcIikuc3BsaXQoL1xccy8pLmZpbHRlcigodD0+XCJcIiE9PXQpKSkpO2Zvcihjb25zdCB0IGluIGkpaVt0XSYmIXRoaXMubnQ/Lmhhcyh0KSYmdGhpcy5zdC5hZGQodCk7cmV0dXJuIHRoaXMucmVuZGVyKGkpfWNvbnN0IHI9cy5lbGVtZW50LmNsYXNzTGlzdDtmb3IoY29uc3QgdCBvZiB0aGlzLnN0KXQgaW4gaXx8KHIucmVtb3ZlKHQpLHRoaXMuc3QuZGVsZXRlKHQpKTtmb3IoY29uc3QgdCBpbiBpKXtjb25zdCBzPSEhaVt0XTtzPT09dGhpcy5zdC5oYXModCl8fHRoaXMubnQ/Lmhhcyh0KXx8KHM/KHIuYWRkKHQpLHRoaXMuc3QuYWRkKHQpKTooci5yZW1vdmUodCksdGhpcy5zdC5kZWxldGUodCkpKX1yZXR1cm4gdH19KTtleHBvcnR7ZSBhcyBjbGFzc01hcH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGFzcy1tYXAuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuaW1wb3J0IHtBdHRyaWJ1dGVQYXJ0LCBub0NoYW5nZX0gZnJvbSAnLi4vbGl0LWh0bWwuanMnO1xuaW1wb3J0IHtcbiAgZGlyZWN0aXZlLFxuICBEaXJlY3RpdmUsXG4gIERpcmVjdGl2ZVBhcmFtZXRlcnMsXG4gIFBhcnRJbmZvLFxuICBQYXJ0VHlwZSxcbn0gZnJvbSAnLi4vZGlyZWN0aXZlLmpzJztcblxuLyoqXG4gKiBBIGtleS12YWx1ZSBzZXQgb2YgY2xhc3MgbmFtZXMgdG8gdHJ1dGh5IHZhbHVlcy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDbGFzc0luZm8ge1xuICByZWFkb25seSBbbmFtZTogc3RyaW5nXTogc3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlcjtcbn1cblxuY2xhc3MgQ2xhc3NNYXBEaXJlY3RpdmUgZXh0ZW5kcyBEaXJlY3RpdmUge1xuICAvKipcbiAgICogU3RvcmVzIHRoZSBDbGFzc0luZm8gb2JqZWN0IGFwcGxpZWQgdG8gYSBnaXZlbiBBdHRyaWJ1dGVQYXJ0LlxuICAgKiBVc2VkIHRvIHVuc2V0IGV4aXN0aW5nIHZhbHVlcyB3aGVuIGEgbmV3IENsYXNzSW5mbyBvYmplY3QgaXMgYXBwbGllZC5cbiAgICovXG4gIHByaXZhdGUgX3ByZXZpb3VzQ2xhc3Nlcz86IFNldDxzdHJpbmc+O1xuICBwcml2YXRlIF9zdGF0aWNDbGFzc2VzPzogU2V0PHN0cmluZz47XG5cbiAgY29uc3RydWN0b3IocGFydEluZm86IFBhcnRJbmZvKSB7XG4gICAgc3VwZXIocGFydEluZm8pO1xuICAgIGlmIChcbiAgICAgIHBhcnRJbmZvLnR5cGUgIT09IFBhcnRUeXBlLkFUVFJJQlVURSB8fFxuICAgICAgcGFydEluZm8ubmFtZSAhPT0gJ2NsYXNzJyB8fFxuICAgICAgKHBhcnRJbmZvLnN0cmluZ3M/Lmxlbmd0aCBhcyBudW1iZXIpID4gMlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnYGNsYXNzTWFwKClgIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGBjbGFzc2AgYXR0cmlidXRlICcgK1xuICAgICAgICAgICdhbmQgbXVzdCBiZSB0aGUgb25seSBwYXJ0IGluIHRoZSBhdHRyaWJ1dGUuJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoY2xhc3NJbmZvOiBDbGFzc0luZm8pIHtcbiAgICAvLyBBZGQgc3BhY2VzIHRvIGVuc3VyZSBzZXBhcmF0aW9uIGZyb20gc3RhdGljIGNsYXNzZXNcbiAgICByZXR1cm4gKFxuICAgICAgJyAnICtcbiAgICAgIE9iamVjdC5rZXlzKGNsYXNzSW5mbylcbiAgICAgICAgLmZpbHRlcigoa2V5KSA9PiBjbGFzc0luZm9ba2V5XSlcbiAgICAgICAgLmpvaW4oJyAnKSArXG4gICAgICAnICdcbiAgICApO1xuICB9XG5cbiAgb3ZlcnJpZGUgdXBkYXRlKHBhcnQ6IEF0dHJpYnV0ZVBhcnQsIFtjbGFzc0luZm9dOiBEaXJlY3RpdmVQYXJhbWV0ZXJzPHRoaXM+KSB7XG4gICAgLy8gUmVtZW1iZXIgZHluYW1pYyBjbGFzc2VzIG9uIHRoZSBmaXJzdCByZW5kZXJcbiAgICBpZiAodGhpcy5fcHJldmlvdXNDbGFzc2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3ByZXZpb3VzQ2xhc3NlcyA9IG5ldyBTZXQoKTtcbiAgICAgIGlmIChwYXJ0LnN0cmluZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9zdGF0aWNDbGFzc2VzID0gbmV3IFNldChcbiAgICAgICAgICBwYXJ0LnN0cmluZ3NcbiAgICAgICAgICAgIC5qb2luKCcgJylcbiAgICAgICAgICAgIC5zcGxpdCgvXFxzLylcbiAgICAgICAgICAgIC5maWx0ZXIoKHMpID0+IHMgIT09ICcnKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIGNsYXNzSW5mbykge1xuICAgICAgICBpZiAoY2xhc3NJbmZvW25hbWVdICYmICF0aGlzLl9zdGF0aWNDbGFzc2VzPy5oYXMobmFtZSkpIHtcbiAgICAgICAgICB0aGlzLl9wcmV2aW91c0NsYXNzZXMuYWRkKG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXIoY2xhc3NJbmZvKTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGFzc0xpc3QgPSBwYXJ0LmVsZW1lbnQuY2xhc3NMaXN0O1xuXG4gICAgLy8gUmVtb3ZlIG9sZCBjbGFzc2VzIHRoYXQgbm8gbG9uZ2VyIGFwcGx5XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIHRoaXMuX3ByZXZpb3VzQ2xhc3Nlcykge1xuICAgICAgaWYgKCEobmFtZSBpbiBjbGFzc0luZm8pKSB7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzQ2xhc3NlcyEuZGVsZXRlKG5hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBvciByZW1vdmUgY2xhc3NlcyBiYXNlZCBvbiB0aGVpciBjbGFzc01hcCB2YWx1ZVxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBjbGFzc0luZm8pIHtcbiAgICAgIC8vIFdlIGV4cGxpY2l0bHkgd2FudCBhIGxvb3NlIHRydXRoeSBjaGVjayBvZiBgdmFsdWVgIGJlY2F1c2UgaXQgc2VlbXNcbiAgICAgIC8vIG1vcmUgY29udmVuaWVudCB0aGF0ICcnIGFuZCAwIGFyZSBza2lwcGVkLlxuICAgICAgY29uc3QgdmFsdWUgPSAhIWNsYXNzSW5mb1tuYW1lXTtcbiAgICAgIGlmIChcbiAgICAgICAgdmFsdWUgIT09IHRoaXMuX3ByZXZpb3VzQ2xhc3Nlcy5oYXMobmFtZSkgJiZcbiAgICAgICAgIXRoaXMuX3N0YXRpY0NsYXNzZXM/LmhhcyhuYW1lKVxuICAgICAgKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIGNsYXNzTGlzdC5hZGQobmFtZSk7XG4gICAgICAgICAgdGhpcy5fcHJldmlvdXNDbGFzc2VzLmFkZChuYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKG5hbWUpO1xuICAgICAgICAgIHRoaXMuX3ByZXZpb3VzQ2xhc3Nlcy5kZWxldGUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vQ2hhbmdlO1xuICB9XG59XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgdGhhdCBhcHBsaWVzIGR5bmFtaWMgQ1NTIGNsYXNzZXMuXG4gKlxuICogVGhpcyBtdXN0IGJlIHVzZWQgaW4gdGhlIGBjbGFzc2AgYXR0cmlidXRlIGFuZCBtdXN0IGJlIHRoZSBvbmx5IHBhcnQgdXNlZCBpblxuICogdGhlIGF0dHJpYnV0ZS4gSXQgdGFrZXMgZWFjaCBwcm9wZXJ0eSBpbiB0aGUgYGNsYXNzSW5mb2AgYXJndW1lbnQgYW5kIGFkZHNcbiAqIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHRoZSBlbGVtZW50J3MgYGNsYXNzTGlzdGAgaWYgdGhlIHByb3BlcnR5IHZhbHVlIGlzXG4gKiB0cnV0aHk7IGlmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyBmYWxzeSwgdGhlIHByb3BlcnR5IG5hbWUgaXMgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgZWxlbWVudCdzIGBjbGFzc2AuXG4gKlxuICogRm9yIGV4YW1wbGUgYHtmb286IGJhcn1gIGFwcGxpZXMgdGhlIGNsYXNzIGBmb29gIGlmIHRoZSB2YWx1ZSBvZiBgYmFyYCBpc1xuICogdHJ1dGh5LlxuICpcbiAqIEBwYXJhbSBjbGFzc0luZm9cbiAqL1xuZXhwb3J0IGNvbnN0IGNsYXNzTWFwID0gZGlyZWN0aXZlKENsYXNzTWFwRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgY2xhc3MgdGhhdCBwb3dlcnMgdGhpcyBkaXJlY3RpdmUuIE5lY2Vzc2FyeSBmb3IgbmFtaW5nIHRoZVxuICogZGlyZWN0aXZlJ3MgcmV0dXJuIHR5cGUuXG4gKi9cbmV4cG9ydCB0eXBlIHtDbGFzc01hcERpcmVjdGl2ZX07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cbmNvbnN0IHQ9e0FUVFJJQlVURToxLENISUxEOjIsUFJPUEVSVFk6MyxCT09MRUFOX0FUVFJJQlVURTo0LEVWRU5UOjUsRUxFTUVOVDo2fSxlPXQ9PiguLi5lKT0+KHtfJGxpdERpcmVjdGl2ZSQ6dCx2YWx1ZXM6ZX0pO2NsYXNzIGl7Y29uc3RydWN0b3IodCl7fWdldCBfJEFVKCl7cmV0dXJuIHRoaXMuXyRBTS5fJEFVfV8kQVQodCxlLGkpe3RoaXMuXyRDdD10LHRoaXMuXyRBTT1lLHRoaXMuXyRDaT1pfV8kQVModCxlKXtyZXR1cm4gdGhpcy51cGRhdGUodCxlKX11cGRhdGUodCxlKXtyZXR1cm4gdGhpcy5yZW5kZXIoLi4uZSl9fWV4cG9ydHtpIGFzIERpcmVjdGl2ZSx0IGFzIFBhcnRUeXBlLGUgYXMgZGlyZWN0aXZlfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpcmVjdGl2ZS5qcy5tYXBcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG5pbXBvcnQge0Rpc2Nvbm5lY3RhYmxlLCBQYXJ0fSBmcm9tICcuL2xpdC1odG1sLmpzJztcblxuZXhwb3J0IHtcbiAgQXR0cmlidXRlUGFydCxcbiAgQm9vbGVhbkF0dHJpYnV0ZVBhcnQsXG4gIENoaWxkUGFydCxcbiAgRWxlbWVudFBhcnQsXG4gIEV2ZW50UGFydCxcbiAgUGFydCxcbiAgUHJvcGVydHlQYXJ0LFxufSBmcm9tICcuL2xpdC1odG1sLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBEaXJlY3RpdmVDbGFzcyB7XG4gIG5ldyAocGFydDogUGFydEluZm8pOiBEaXJlY3RpdmU7XG59XG5cbi8qKlxuICogVGhpcyB1dGlsaXR5IHR5cGUgZXh0cmFjdHMgdGhlIHNpZ25hdHVyZSBvZiBhIGRpcmVjdGl2ZSBjbGFzcydzIHJlbmRlcigpXG4gKiBtZXRob2Qgc28gd2UgY2FuIHVzZSBpdCBmb3IgdGhlIHR5cGUgb2YgdGhlIGdlbmVyYXRlZCBkaXJlY3RpdmUgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCB0eXBlIERpcmVjdGl2ZVBhcmFtZXRlcnM8QyBleHRlbmRzIERpcmVjdGl2ZT4gPSBQYXJhbWV0ZXJzPENbJ3JlbmRlciddPjtcblxuLyoqXG4gKiBBIGdlbmVyYXRlZCBkaXJlY3RpdmUgZnVuY3Rpb24gZG9lc24ndCBldmFsdWF0ZSB0aGUgZGlyZWN0aXZlLCBidXQganVzdFxuICogcmV0dXJucyBhIERpcmVjdGl2ZVJlc3VsdCBvYmplY3QgdGhhdCBjYXB0dXJlcyB0aGUgYXJndW1lbnRzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIERpcmVjdGl2ZVJlc3VsdDxDIGV4dGVuZHMgRGlyZWN0aXZlQ2xhc3MgPSBEaXJlY3RpdmVDbGFzcz4ge1xuICAvKipcbiAgICogVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBbJ18kbGl0RGlyZWN0aXZlJCddOiBDO1xuICAvKiogQGludGVybmFsICovXG4gIHZhbHVlczogRGlyZWN0aXZlUGFyYW1ldGVyczxJbnN0YW5jZVR5cGU8Qz4+O1xufVxuXG5leHBvcnQgY29uc3QgUGFydFR5cGUgPSB7XG4gIEFUVFJJQlVURTogMSxcbiAgQ0hJTEQ6IDIsXG4gIFBST1BFUlRZOiAzLFxuICBCT09MRUFOX0FUVFJJQlVURTogNCxcbiAgRVZFTlQ6IDUsXG4gIEVMRU1FTlQ6IDYsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBQYXJ0VHlwZSA9ICh0eXBlb2YgUGFydFR5cGUpW2tleW9mIHR5cGVvZiBQYXJ0VHlwZV07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hpbGRQYXJ0SW5mbyB7XG4gIHJlYWRvbmx5IHR5cGU6IHR5cGVvZiBQYXJ0VHlwZS5DSElMRDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdHRyaWJ1dGVQYXJ0SW5mbyB7XG4gIHJlYWRvbmx5IHR5cGU6XG4gICAgfCB0eXBlb2YgUGFydFR5cGUuQVRUUklCVVRFXG4gICAgfCB0eXBlb2YgUGFydFR5cGUuUFJPUEVSVFlcbiAgICB8IHR5cGVvZiBQYXJ0VHlwZS5CT09MRUFOX0FUVFJJQlVURVxuICAgIHwgdHlwZW9mIFBhcnRUeXBlLkVWRU5UO1xuICByZWFkb25seSBzdHJpbmdzPzogUmVhZG9ubHlBcnJheTxzdHJpbmc+O1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHRhZ05hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbGVtZW50UGFydEluZm8ge1xuICByZWFkb25seSB0eXBlOiB0eXBlb2YgUGFydFR5cGUuRUxFTUVOVDtcbn1cblxuLyoqXG4gKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgcGFydCBhIGRpcmVjdGl2ZSBpcyBib3VuZCB0by5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2hlY2tpbmcgdGhhdCBhIGRpcmVjdGl2ZSBpcyBhdHRhY2hlZCB0byBhIHZhbGlkIHBhcnQsXG4gKiBzdWNoIGFzIHdpdGggZGlyZWN0aXZlIHRoYXQgY2FuIG9ubHkgYmUgdXNlZCBvbiBhdHRyaWJ1dGUgYmluZGluZ3MuXG4gKi9cbmV4cG9ydCB0eXBlIFBhcnRJbmZvID0gQ2hpbGRQYXJ0SW5mbyB8IEF0dHJpYnV0ZVBhcnRJbmZvIHwgRWxlbWVudFBhcnRJbmZvO1xuXG4vKipcbiAqIENyZWF0ZXMgYSB1c2VyLWZhY2luZyBkaXJlY3RpdmUgZnVuY3Rpb24gZnJvbSBhIERpcmVjdGl2ZSBjbGFzcy4gVGhpc1xuICogZnVuY3Rpb24gaGFzIHRoZSBzYW1lIHBhcmFtZXRlcnMgYXMgdGhlIGRpcmVjdGl2ZSdzIHJlbmRlcigpIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGRpcmVjdGl2ZSA9XG4gIDxDIGV4dGVuZHMgRGlyZWN0aXZlQ2xhc3M+KGM6IEMpID0+XG4gICguLi52YWx1ZXM6IERpcmVjdGl2ZVBhcmFtZXRlcnM8SW5zdGFuY2VUeXBlPEM+Pik6IERpcmVjdGl2ZVJlc3VsdDxDPiA9PiAoe1xuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAgWydfJGxpdERpcmVjdGl2ZSQnXTogYyxcbiAgICB2YWx1ZXMsXG4gIH0pO1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGNyZWF0aW5nIGN1c3RvbSBkaXJlY3RpdmVzLiBVc2VycyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MsXG4gKiBpbXBsZW1lbnQgYHJlbmRlcmAgYW5kL29yIGB1cGRhdGVgLCBhbmQgdGhlbiBwYXNzIHRoZWlyIHN1YmNsYXNzIHRvXG4gKiBgZGlyZWN0aXZlYC5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERpcmVjdGl2ZSBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgLy9AaW50ZXJuYWxcbiAgX19wYXJ0ITogUGFydDtcbiAgLy9AaW50ZXJuYWxcbiAgX19hdHRyaWJ1dGVJbmRleDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAvL0BpbnRlcm5hbFxuICBfX2RpcmVjdGl2ZT86IERpcmVjdGl2ZTtcblxuICAvL0BpbnRlcm5hbFxuICBfJHBhcmVudCE6IERpc2Nvbm5lY3RhYmxlO1xuXG4gIC8vIFRoZXNlIHdpbGwgb25seSBleGlzdCBvbiB0aGUgQXN5bmNEaXJlY3RpdmUgc3ViY2xhc3NcbiAgLy9AaW50ZXJuYWxcbiAgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuPzogU2V0PERpc2Nvbm5lY3RhYmxlPjtcbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgLy9AaW50ZXJuYWxcbiAgWydfJG5vdGlmeURpcmVjdGl2ZUNvbm5lY3Rpb25DaGFuZ2VkJ10/KGlzQ29ubmVjdGVkOiBib29sZWFuKTogdm9pZDtcblxuICBjb25zdHJ1Y3RvcihfcGFydEluZm86IFBhcnRJbmZvKSB7fVxuXG4gIC8vIFNlZSBjb21tZW50IGluIERpc2Nvbm5lY3RhYmxlIGludGVyZmFjZSBmb3Igd2h5IHRoaXMgaXMgYSBnZXR0ZXJcbiAgZ2V0IF8kaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuXyRwYXJlbnQuXyRpc0Nvbm5lY3RlZDtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRpbml0aWFsaXplKFxuICAgIHBhcnQ6IFBhcnQsXG4gICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSxcbiAgICBhdHRyaWJ1dGVJbmRleDogbnVtYmVyIHwgdW5kZWZpbmVkXG4gICkge1xuICAgIHRoaXMuX19wYXJ0ID0gcGFydDtcbiAgICB0aGlzLl8kcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuX19hdHRyaWJ1dGVJbmRleCA9IGF0dHJpYnV0ZUluZGV4O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRyZXNvbHZlKHBhcnQ6IFBhcnQsIHByb3BzOiBBcnJheTx1bmtub3duPik6IHVua25vd24ge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZShwYXJ0LCBwcm9wcyk7XG4gIH1cblxuICBhYnN0cmFjdCByZW5kZXIoLi4ucHJvcHM6IEFycmF5PHVua25vd24+KTogdW5rbm93bjtcblxuICB1cGRhdGUoX3BhcnQ6IFBhcnQsIHByb3BzOiBBcnJheTx1bmtub3duPik6IHVua25vd24ge1xuICAgIHJldHVybiB0aGlzLnJlbmRlciguLi5wcm9wcyk7XG4gIH1cbn1cbiIsImltcG9ydHtub0NoYW5nZSBhcyB0fWZyb21cIi4uL2xpdC1odG1sLmpzXCI7aW1wb3J0e2RpcmVjdGl2ZSBhcyBlLERpcmVjdGl2ZSBhcyByLFBhcnRUeXBlIGFzIHN9ZnJvbVwiLi4vZGlyZWN0aXZlLmpzXCI7XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9jb25zdCBuPVwiaW1wb3J0YW50XCIsaT1cIiAhXCIrbixvPWUoY2xhc3MgZXh0ZW5kcyBye2NvbnN0cnVjdG9yKHQpe2lmKHN1cGVyKHQpLHQudHlwZSE9PXMuQVRUUklCVVRFfHxcInN0eWxlXCIhPT10Lm5hbWV8fHQuc3RyaW5ncz8ubGVuZ3RoPjIpdGhyb3cgRXJyb3IoXCJUaGUgYHN0eWxlTWFwYCBkaXJlY3RpdmUgbXVzdCBiZSB1c2VkIGluIHRoZSBgc3R5bGVgIGF0dHJpYnV0ZSBhbmQgbXVzdCBiZSB0aGUgb25seSBwYXJ0IGluIHRoZSBhdHRyaWJ1dGUuXCIpfXJlbmRlcih0KXtyZXR1cm4gT2JqZWN0LmtleXModCkucmVkdWNlKCgoZSxyKT0+e2NvbnN0IHM9dFtyXTtyZXR1cm4gbnVsbD09cz9lOmUrYCR7cj1yLmluY2x1ZGVzKFwiLVwiKT9yOnIucmVwbGFjZSgvKD86Xih3ZWJraXR8bW96fG1zfG8pfCkoPz1bQS1aXSkvZyxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpfToke3N9O2B9KSxcIlwiKX11cGRhdGUoZSxbcl0pe2NvbnN0e3N0eWxlOnN9PWUuZWxlbWVudDtpZih2b2lkIDA9PT10aGlzLmZ0KXJldHVybiB0aGlzLmZ0PW5ldyBTZXQoT2JqZWN0LmtleXMocikpLHRoaXMucmVuZGVyKHIpO2Zvcihjb25zdCB0IG9mIHRoaXMuZnQpbnVsbD09clt0XSYmKHRoaXMuZnQuZGVsZXRlKHQpLHQuaW5jbHVkZXMoXCItXCIpP3MucmVtb3ZlUHJvcGVydHkodCk6c1t0XT1udWxsKTtmb3IoY29uc3QgdCBpbiByKXtjb25zdCBlPXJbdF07aWYobnVsbCE9ZSl7dGhpcy5mdC5hZGQodCk7Y29uc3Qgcj1cInN0cmluZ1wiPT10eXBlb2YgZSYmZS5lbmRzV2l0aChpKTt0LmluY2x1ZGVzKFwiLVwiKXx8cj9zLnNldFByb3BlcnR5KHQscj9lLnNsaWNlKDAsLTExKTplLHI/bjpcIlwiKTpzW3RdPWV9fXJldHVybiB0fX0pO2V4cG9ydHtvIGFzIHN0eWxlTWFwfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0eWxlLW1hcC5qcy5tYXBcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG5pbXBvcnQge0F0dHJpYnV0ZVBhcnQsIG5vQ2hhbmdlfSBmcm9tICcuLi9saXQtaHRtbC5qcyc7XG5pbXBvcnQge1xuICBkaXJlY3RpdmUsXG4gIERpcmVjdGl2ZSxcbiAgRGlyZWN0aXZlUGFyYW1ldGVycyxcbiAgUGFydEluZm8sXG4gIFBhcnRUeXBlLFxufSBmcm9tICcuLi9kaXJlY3RpdmUuanMnO1xuXG4vKipcbiAqIEEga2V5LXZhbHVlIHNldCBvZiBDU1MgcHJvcGVydGllcyBhbmQgdmFsdWVzLlxuICpcbiAqIFRoZSBrZXkgc2hvdWxkIGJlIGVpdGhlciBhIHZhbGlkIENTUyBwcm9wZXJ0eSBuYW1lIHN0cmluZywgbGlrZVxuICogYCdiYWNrZ3JvdW5kLWNvbG9yJ2AsIG9yIGEgdmFsaWQgSmF2YVNjcmlwdCBjYW1lbCBjYXNlIHByb3BlcnR5IG5hbWVcbiAqIGZvciBDU1NTdHlsZURlY2xhcmF0aW9uIGxpa2UgYGJhY2tncm91bmRDb2xvcmAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVJbmZvIHtcbiAgW25hbWU6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZCB8IG51bGw7XG59XG5cbmNvbnN0IGltcG9ydGFudCA9ICdpbXBvcnRhbnQnO1xuLy8gVGhlIGxlYWRpbmcgc3BhY2UgaXMgaW1wb3J0YW50XG5jb25zdCBpbXBvcnRhbnRGbGFnID0gJyAhJyArIGltcG9ydGFudDtcbi8vIEhvdyBtYW55IGNoYXJhY3RlcnMgdG8gcmVtb3ZlIGZyb20gYSB2YWx1ZSwgYXMgYSBuZWdhdGl2ZSBudW1iZXJcbmNvbnN0IGZsYWdUcmltID0gMCAtIGltcG9ydGFudEZsYWcubGVuZ3RoO1xuXG5jbGFzcyBTdHlsZU1hcERpcmVjdGl2ZSBleHRlbmRzIERpcmVjdGl2ZSB7XG4gIHByaXZhdGUgX3ByZXZpb3VzU3R5bGVQcm9wZXJ0aWVzPzogU2V0PHN0cmluZz47XG5cbiAgY29uc3RydWN0b3IocGFydEluZm86IFBhcnRJbmZvKSB7XG4gICAgc3VwZXIocGFydEluZm8pO1xuICAgIGlmIChcbiAgICAgIHBhcnRJbmZvLnR5cGUgIT09IFBhcnRUeXBlLkFUVFJJQlVURSB8fFxuICAgICAgcGFydEluZm8ubmFtZSAhPT0gJ3N0eWxlJyB8fFxuICAgICAgKHBhcnRJbmZvLnN0cmluZ3M/Lmxlbmd0aCBhcyBudW1iZXIpID4gMlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhlIGBzdHlsZU1hcGAgZGlyZWN0aXZlIG11c3QgYmUgdXNlZCBpbiB0aGUgYHN0eWxlYCBhdHRyaWJ1dGUgJyArXG4gICAgICAgICAgJ2FuZCBtdXN0IGJlIHRoZSBvbmx5IHBhcnQgaW4gdGhlIGF0dHJpYnV0ZS4nXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcihzdHlsZUluZm86IFJlYWRvbmx5PFN0eWxlSW5mbz4pIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVJbmZvKS5yZWR1Y2UoKHN0eWxlLCBwcm9wKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlSW5mb1twcm9wXTtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnZlcnQgcHJvcGVydHkgbmFtZXMgZnJvbSBjYW1lbC1jYXNlIHRvIGRhc2gtY2FzZSwgaS5lLjpcbiAgICAgIC8vICBgYmFja2dyb3VuZENvbG9yYCAtPiBgYmFja2dyb3VuZC1jb2xvcmBcbiAgICAgIC8vIFZlbmRvci1wcmVmaXhlZCBuYW1lcyBuZWVkIGFuIGV4dHJhIGAtYCBhcHBlbmRlZCB0byBmcm9udDpcbiAgICAgIC8vICBgd2Via2l0QXBwZWFyYW5jZWAgLT4gYC13ZWJraXQtYXBwZWFyYW5jZWBcbiAgICAgIC8vIEV4Y2VwdGlvbiBpcyBhbnkgcHJvcGVydHkgbmFtZSBjb250YWluaW5nIGEgZGFzaCwgaW5jbHVkaW5nXG4gICAgICAvLyBjdXN0b20gcHJvcGVydGllczsgd2UgYXNzdW1lIHRoZXNlIGFyZSBhbHJlYWR5IGRhc2gtY2FzZWQgaS5lLjpcbiAgICAgIC8vICBgLS1teS1idXR0b24tY29sb3JgIC0tPiBgLS1teS1idXR0b24tY29sb3JgXG4gICAgICBwcm9wID0gcHJvcC5pbmNsdWRlcygnLScpXG4gICAgICAgID8gcHJvcFxuICAgICAgICA6IHByb3BcbiAgICAgICAgICAgIC5yZXBsYWNlKC8oPzpeKHdlYmtpdHxtb3p8bXN8byl8KSg/PVtBLVpdKS9nLCAnLSQmJylcbiAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHN0eWxlICsgYCR7cHJvcH06JHt2YWx1ZX07YDtcbiAgICB9LCAnJyk7XG4gIH1cblxuICBvdmVycmlkZSB1cGRhdGUocGFydDogQXR0cmlidXRlUGFydCwgW3N0eWxlSW5mb106IERpcmVjdGl2ZVBhcmFtZXRlcnM8dGhpcz4pIHtcbiAgICBjb25zdCB7c3R5bGV9ID0gcGFydC5lbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgaWYgKHRoaXMuX3ByZXZpb3VzU3R5bGVQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3ByZXZpb3VzU3R5bGVQcm9wZXJ0aWVzID0gbmV3IFNldChPYmplY3Qua2V5cyhzdHlsZUluZm8pKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcihzdHlsZUluZm8pO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBvbGQgcHJvcGVydGllcyB0aGF0IG5vIGxvbmdlciBleGlzdCBpbiBzdHlsZUluZm9cbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgdGhpcy5fcHJldmlvdXNTdHlsZVByb3BlcnRpZXMpIHtcbiAgICAgIC8vIElmIHRoZSBuYW1lIGlzbid0IGluIHN0eWxlSW5mbyBvciBpdCdzIG51bGwvdW5kZWZpbmVkXG4gICAgICBpZiAoc3R5bGVJbmZvW25hbWVdID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZVByb3BlcnRpZXMhLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgICAgIHN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgKHN0eWxlIGFzIGFueSlbbmFtZV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIG9yIHVwZGF0ZSBwcm9wZXJ0aWVzXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHN0eWxlSW5mbykge1xuICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZUluZm9bbmFtZV07XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlUHJvcGVydGllcy5hZGQobmFtZSk7XG4gICAgICAgIGNvbnN0IGlzSW1wb3J0YW50ID1cbiAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmVuZHNXaXRoKGltcG9ydGFudEZsYWcpO1xuICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnLScpIHx8IGlzSW1wb3J0YW50KSB7XG4gICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaXNJbXBvcnRhbnRcbiAgICAgICAgICAgICAgPyAodmFsdWUgYXMgc3RyaW5nKS5zbGljZSgwLCBmbGFnVHJpbSlcbiAgICAgICAgICAgICAgOiAodmFsdWUgYXMgc3RyaW5nKSxcbiAgICAgICAgICAgIGlzSW1wb3J0YW50ID8gaW1wb3J0YW50IDogJydcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgKHN0eWxlIGFzIGFueSlbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9DaGFuZ2U7XG4gIH1cbn1cblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB0aGF0IGFwcGxpZXMgQ1NTIHByb3BlcnRpZXMgdG8gYW4gZWxlbWVudC5cbiAqXG4gKiBgc3R5bGVNYXBgIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGBzdHlsZWAgYXR0cmlidXRlIGFuZCBtdXN0IGJlIHRoZSBvbmx5XG4gKiBleHByZXNzaW9uIGluIHRoZSBhdHRyaWJ1dGUuIEl0IHRha2VzIHRoZSBwcm9wZXJ0eSBuYW1lcyBpbiB0aGVcbiAqIHtAbGluayBTdHlsZUluZm8gc3R5bGVJbmZvfSBvYmplY3QgYW5kIGFkZHMgdGhlIHByb3BlcnRpZXMgdG8gdGhlIGlubGluZVxuICogc3R5bGUgb2YgdGhlIGVsZW1lbnQuXG4gKlxuICogUHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgKGAtYCkgYXJlIGFzc3VtZWQgdG8gYmUgdmFsaWQgQ1NTXG4gKiBwcm9wZXJ0eSBuYW1lcyBhbmQgc2V0IG9uIHRoZSBlbGVtZW50J3Mgc3R5bGUgb2JqZWN0IHVzaW5nIGBzZXRQcm9wZXJ0eSgpYC5cbiAqIE5hbWVzIHdpdGhvdXQgZGFzaGVzIGFyZSBhc3N1bWVkIHRvIGJlIGNhbWVsQ2FzZWQgSmF2YVNjcmlwdCBwcm9wZXJ0eSBuYW1lc1xuICogYW5kIHNldCBvbiB0aGUgZWxlbWVudCdzIHN0eWxlIG9iamVjdCB1c2luZyBwcm9wZXJ0eSBhc3NpZ25tZW50LCBhbGxvd2luZyB0aGVcbiAqIHN0eWxlIG9iamVjdCB0byB0cmFuc2xhdGUgSmF2YVNjcmlwdC1zdHlsZSBuYW1lcyB0byBDU1MgcHJvcGVydHkgbmFtZXMuXG4gKlxuICogRm9yIGV4YW1wbGUgYHN0eWxlTWFwKHtiYWNrZ3JvdW5kQ29sb3I6ICdyZWQnLCAnYm9yZGVyLXRvcCc6ICc1cHgnLCAnLS1zaXplJzpcbiAqICcwJ30pYCBzZXRzIHRoZSBgYmFja2dyb3VuZC1jb2xvcmAsIGBib3JkZXItdG9wYCBhbmQgYC0tc2l6ZWAgcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0gc3R5bGVJbmZvXG4gKiBAc2VlIHtAbGluayBodHRwczovL2xpdC5kZXYvZG9jcy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy8jc3R5bGVtYXAgc3R5bGVNYXAgY29kZSBzYW1wbGVzIG9uIExpdC5kZXZ9XG4gKi9cbmV4cG9ydCBjb25zdCBzdHlsZU1hcCA9IGRpcmVjdGl2ZShTdHlsZU1hcERpcmVjdGl2ZSk7XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgdGhlIGNsYXNzIHRoYXQgcG93ZXJzIHRoaXMgZGlyZWN0aXZlLiBOZWNlc3NhcnkgZm9yIG5hbWluZyB0aGVcbiAqIGRpcmVjdGl2ZSdzIHJldHVybiB0eXBlLlxuICovXG5leHBvcnQgdHlwZSB7U3R5bGVNYXBEaXJlY3RpdmV9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5mdW5jdGlvbipvKG8sZil7aWYodm9pZCAwIT09byl7bGV0IGk9MDtmb3IoY29uc3QgdCBvZiBvKXlpZWxkIGYodCxpKyspfX1leHBvcnR7byBhcyBtYXB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogUmV0dXJucyBhbiBpdGVyYWJsZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY2FsbGluZyBgZih2YWx1ZSlgIG9uIGVhY2hcbiAqIHZhbHVlIGluIGBpdGVtc2AuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogcmVuZGVyKCkge1xuICogICByZXR1cm4gaHRtbGBcbiAqICAgICA8dWw+XG4gKiAgICAgICAke21hcChpdGVtcywgKGkpID0+IGh0bWxgPGxpPiR7aX08L2xpPmApfVxuICogICAgIDwvdWw+XG4gKiAgIGA7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uKiBtYXA8VD4oXG4gIGl0ZW1zOiBJdGVyYWJsZTxUPiB8IHVuZGVmaW5lZCxcbiAgZjogKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiB1bmtub3duXG4pIHtcbiAgaWYgKGl0ZW1zICE9PSB1bmRlZmluZWQpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiBpdGVtcykge1xuICAgICAgeWllbGQgZih2YWx1ZSwgaSsrKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydHtub0NoYW5nZSBhcyBlfWZyb21cIi4uL2xpdC1odG1sLmpzXCI7aW1wb3J0e2RpcmVjdGl2ZSBhcyBzLERpcmVjdGl2ZSBhcyB0LFBhcnRUeXBlIGFzIHJ9ZnJvbVwiLi4vZGlyZWN0aXZlLmpzXCI7aW1wb3J0e2dldENvbW1pdHRlZFZhbHVlIGFzIGwsc2V0Q2hpbGRQYXJ0VmFsdWUgYXMgbyxpbnNlcnRQYXJ0IGFzIGkscmVtb3ZlUGFydCBhcyBuLHNldENvbW1pdHRlZFZhbHVlIGFzIGZ9ZnJvbVwiLi4vZGlyZWN0aXZlLWhlbHBlcnMuanNcIjtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuY29uc3QgdT0oZSxzLHQpPT57Y29uc3Qgcj1uZXcgTWFwO2ZvcihsZXQgbD1zO2w8PXQ7bCsrKXIuc2V0KGVbbF0sbCk7cmV0dXJuIHJ9LGM9cyhjbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksZS50eXBlIT09ci5DSElMRCl0aHJvdyBFcnJvcihcInJlcGVhdCgpIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGV4dCBleHByZXNzaW9uc1wiKX1kdChlLHMsdCl7bGV0IHI7dm9pZCAwPT09dD90PXM6dm9pZCAwIT09cyYmKHI9cyk7Y29uc3QgbD1bXSxvPVtdO2xldCBpPTA7Zm9yKGNvbnN0IHMgb2YgZSlsW2ldPXI/cihzLGkpOmksb1tpXT10KHMsaSksaSsrO3JldHVybnt2YWx1ZXM6byxrZXlzOmx9fXJlbmRlcihlLHMsdCl7cmV0dXJuIHRoaXMuZHQoZSxzLHQpLnZhbHVlc311cGRhdGUocyxbdCxyLGNdKXtjb25zdCBkPWwocykse3ZhbHVlczpwLGtleXM6YX09dGhpcy5kdCh0LHIsYyk7aWYoIUFycmF5LmlzQXJyYXkoZCkpcmV0dXJuIHRoaXMudXQ9YSxwO2NvbnN0IGg9dGhpcy51dD8/PVtdLHY9W107bGV0IG0seSx4PTAsaj1kLmxlbmd0aC0xLGs9MCx3PXAubGVuZ3RoLTE7Zm9yKDt4PD1qJiZrPD13OylpZihudWxsPT09ZFt4XSl4Kys7ZWxzZSBpZihudWxsPT09ZFtqXSlqLS07ZWxzZSBpZihoW3hdPT09YVtrXSl2W2tdPW8oZFt4XSxwW2tdKSx4KyssaysrO2Vsc2UgaWYoaFtqXT09PWFbd10pdlt3XT1vKGRbal0scFt3XSksai0tLHctLTtlbHNlIGlmKGhbeF09PT1hW3ddKXZbd109byhkW3hdLHBbd10pLGkocyx2W3crMV0sZFt4XSkseCsrLHctLTtlbHNlIGlmKGhbal09PT1hW2tdKXZba109byhkW2pdLHBba10pLGkocyxkW3hdLGRbal0pLGotLSxrKys7ZWxzZSBpZih2b2lkIDA9PT1tJiYobT11KGEsayx3KSx5PXUoaCx4LGopKSxtLmhhcyhoW3hdKSlpZihtLmhhcyhoW2pdKSl7Y29uc3QgZT15LmdldChhW2tdKSx0PXZvaWQgMCE9PWU/ZFtlXTpudWxsO2lmKG51bGw9PT10KXtjb25zdCBlPWkocyxkW3hdKTtvKGUscFtrXSksdltrXT1lfWVsc2UgdltrXT1vKHQscFtrXSksaShzLGRbeF0sdCksZFtlXT1udWxsO2srK31lbHNlIG4oZFtqXSksai0tO2Vsc2UgbihkW3hdKSx4Kys7Zm9yKDtrPD13Oyl7Y29uc3QgZT1pKHMsdlt3KzFdKTtvKGUscFtrXSksdltrKytdPWV9Zm9yKDt4PD1qOyl7Y29uc3QgZT1kW3grK107bnVsbCE9PWUmJm4oZSl9cmV0dXJuIHRoaXMudXQ9YSxmKHMsdiksZX19KTtleHBvcnR7YyBhcyByZXBlYXR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwZWF0LmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbmltcG9ydCB7Q2hpbGRQYXJ0LCBub0NoYW5nZX0gZnJvbSAnLi4vbGl0LWh0bWwuanMnO1xuaW1wb3J0IHtkaXJlY3RpdmUsIERpcmVjdGl2ZSwgUGFydEluZm8sIFBhcnRUeXBlfSBmcm9tICcuLi9kaXJlY3RpdmUuanMnO1xuaW1wb3J0IHtcbiAgaW5zZXJ0UGFydCxcbiAgZ2V0Q29tbWl0dGVkVmFsdWUsXG4gIHJlbW92ZVBhcnQsXG4gIHNldENvbW1pdHRlZFZhbHVlLFxuICBzZXRDaGlsZFBhcnRWYWx1ZSxcbn0gZnJvbSAnLi4vZGlyZWN0aXZlLWhlbHBlcnMuanMnO1xuXG5leHBvcnQgdHlwZSBLZXlGbjxUPiA9IChpdGVtOiBULCBpbmRleDogbnVtYmVyKSA9PiB1bmtub3duO1xuZXhwb3J0IHR5cGUgSXRlbVRlbXBsYXRlPFQ+ID0gKGl0ZW06IFQsIGluZGV4OiBudW1iZXIpID0+IHVua25vd247XG5cbi8vIEhlbHBlciBmb3IgZ2VuZXJhdGluZyBhIG1hcCBvZiBhcnJheSBpdGVtIHRvIGl0cyBpbmRleCBvdmVyIGEgc3Vic2V0XG4vLyBvZiBhbiBhcnJheSAodXNlZCB0byBsYXppbHkgZ2VuZXJhdGUgYG5ld0tleVRvSW5kZXhNYXBgIGFuZFxuLy8gYG9sZEtleVRvSW5kZXhNYXBgKVxuY29uc3QgZ2VuZXJhdGVNYXAgPSAobGlzdDogdW5rbm93bltdLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcikgPT4ge1xuICBjb25zdCBtYXAgPSBuZXcgTWFwPHVua25vd24sIG51bWJlcj4oKTtcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XG4gICAgbWFwLnNldChsaXN0W2ldLCBpKTtcbiAgfVxuICByZXR1cm4gbWFwO1xufTtcblxuY2xhc3MgUmVwZWF0RGlyZWN0aXZlIGV4dGVuZHMgRGlyZWN0aXZlIHtcbiAgcHJpdmF0ZSBfaXRlbUtleXM/OiB1bmtub3duW107XG5cbiAgY29uc3RydWN0b3IocGFydEluZm86IFBhcnRJbmZvKSB7XG4gICAgc3VwZXIocGFydEluZm8pO1xuICAgIGlmIChwYXJ0SW5mby50eXBlICE9PSBQYXJ0VHlwZS5DSElMRCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZXBlYXQoKSBjYW4gb25seSBiZSB1c2VkIGluIHRleHQgZXhwcmVzc2lvbnMnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRWYWx1ZXNBbmRLZXlzPFQ+KFxuICAgIGl0ZW1zOiBJdGVyYWJsZTxUPixcbiAgICBrZXlGbk9yVGVtcGxhdGU6IEtleUZuPFQ+IHwgSXRlbVRlbXBsYXRlPFQ+LFxuICAgIHRlbXBsYXRlPzogSXRlbVRlbXBsYXRlPFQ+XG4gICkge1xuICAgIGxldCBrZXlGbjogS2V5Rm48VD4gfCB1bmRlZmluZWQ7XG4gICAgaWYgKHRlbXBsYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRlbXBsYXRlID0ga2V5Rm5PclRlbXBsYXRlO1xuICAgIH0gZWxzZSBpZiAoa2V5Rm5PclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleUZuID0ga2V5Rm5PclRlbXBsYXRlIGFzIEtleUZuPFQ+O1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gW107XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIGtleXNbaW5kZXhdID0ga2V5Rm4gPyBrZXlGbihpdGVtLCBpbmRleCkgOiBpbmRleDtcbiAgICAgIHZhbHVlc1tpbmRleF0gPSB0ZW1wbGF0ZSEoaXRlbSwgaW5kZXgpO1xuICAgICAgaW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlcyxcbiAgICAgIGtleXMsXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcjxUPihpdGVtczogSXRlcmFibGU8VD4sIHRlbXBsYXRlOiBJdGVtVGVtcGxhdGU8VD4pOiBBcnJheTx1bmtub3duPjtcbiAgcmVuZGVyPFQ+KFxuICAgIGl0ZW1zOiBJdGVyYWJsZTxUPixcbiAgICBrZXlGbjogS2V5Rm48VD4gfCBJdGVtVGVtcGxhdGU8VD4sXG4gICAgdGVtcGxhdGU6IEl0ZW1UZW1wbGF0ZTxUPlxuICApOiBBcnJheTx1bmtub3duPjtcbiAgcmVuZGVyPFQ+KFxuICAgIGl0ZW1zOiBJdGVyYWJsZTxUPixcbiAgICBrZXlGbk9yVGVtcGxhdGU6IEtleUZuPFQ+IHwgSXRlbVRlbXBsYXRlPFQ+LFxuICAgIHRlbXBsYXRlPzogSXRlbVRlbXBsYXRlPFQ+XG4gICkge1xuICAgIHJldHVybiB0aGlzLl9nZXRWYWx1ZXNBbmRLZXlzKGl0ZW1zLCBrZXlGbk9yVGVtcGxhdGUsIHRlbXBsYXRlKS52YWx1ZXM7XG4gIH1cblxuICBvdmVycmlkZSB1cGRhdGU8VD4oXG4gICAgY29udGFpbmVyUGFydDogQ2hpbGRQYXJ0LFxuICAgIFtpdGVtcywga2V5Rm5PclRlbXBsYXRlLCB0ZW1wbGF0ZV06IFtcbiAgICAgIEl0ZXJhYmxlPFQ+LFxuICAgICAgS2V5Rm48VD4gfCBJdGVtVGVtcGxhdGU8VD4sXG4gICAgICBJdGVtVGVtcGxhdGU8VD4sXG4gICAgXVxuICApIHtcbiAgICAvLyBPbGQgcGFydCAmIGtleSBsaXN0cyBhcmUgcmV0cmlldmVkIGZyb20gdGhlIGxhc3QgdXBkYXRlICh3aGljaCBtYXlcbiAgICAvLyBiZSBwcmltZWQgYnkgaHlkcmF0aW9uKVxuICAgIGNvbnN0IG9sZFBhcnRzID0gZ2V0Q29tbWl0dGVkVmFsdWUoXG4gICAgICBjb250YWluZXJQYXJ0XG4gICAgKSBhcyBBcnJheTxDaGlsZFBhcnQgfCBudWxsPjtcbiAgICBjb25zdCB7dmFsdWVzOiBuZXdWYWx1ZXMsIGtleXM6IG5ld0tleXN9ID0gdGhpcy5fZ2V0VmFsdWVzQW5kS2V5cyhcbiAgICAgIGl0ZW1zLFxuICAgICAga2V5Rm5PclRlbXBsYXRlLFxuICAgICAgdGVtcGxhdGVcbiAgICApO1xuXG4gICAgLy8gV2UgY2hlY2sgdGhhdCBvbGRQYXJ0cywgdGhlIGNvbW1pdHRlZCB2YWx1ZSwgaXMgYW4gQXJyYXkgYXMgYW5cbiAgICAvLyBpbmRpY2F0b3IgdGhhdCB0aGUgcHJldmlvdXMgdmFsdWUgY2FtZSBmcm9tIGEgcmVwZWF0KCkgY2FsbC4gSWZcbiAgICAvLyBvbGRQYXJ0cyBpcyBub3QgYW4gQXJyYXkgdGhlbiB0aGlzIGlzIHRoZSBmaXJzdCByZW5kZXIgYW5kIHdlIHJldHVyblxuICAgIC8vIGFuIGFycmF5IGZvciBsaXQtaHRtbCdzIGFycmF5IGhhbmRsaW5nIHRvIHJlbmRlciwgYW5kIHJlbWVtYmVyIHRoZVxuICAgIC8vIGtleXMuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG9sZFBhcnRzKSkge1xuICAgICAgdGhpcy5faXRlbUtleXMgPSBuZXdLZXlzO1xuICAgICAgcmV0dXJuIG5ld1ZhbHVlcztcbiAgICB9XG5cbiAgICAvLyBJbiBTU1IgaHlkcmF0aW9uIGl0J3MgcG9zc2libGUgZm9yIG9sZFBhcnRzIHRvIGJlIGFuIGFycmF5IGJ1dCBmb3IgdXNcbiAgICAvLyB0byBub3QgaGF2ZSBpdGVtIGtleXMgYmVjYXVzZSB0aGUgdXBkYXRlKCkgaGFzbid0IHJ1biB5ZXQuIFdlIHNldCB0aGVcbiAgICAvLyBrZXlzIHRvIGFuIGVtcHR5IGFycmF5LiBUaGlzIHdpbGwgY2F1c2UgYWxsIG9sZEtleS9uZXdLZXkgY29tcGFyaXNvbnNcbiAgICAvLyB0byBmYWlsIGFuZCBleGVjdXRpb24gdG8gZmFsbCB0byB0aGUgbGFzdCBuZXN0ZWQgYnJhY2ggYmVsb3cgd2hpY2hcbiAgICAvLyByZXVzZXMgdGhlIG9sZFBhcnQuXG4gICAgY29uc3Qgb2xkS2V5cyA9ICh0aGlzLl9pdGVtS2V5cyA/Pz0gW10pO1xuXG4gICAgLy8gTmV3IHBhcnQgbGlzdCB3aWxsIGJlIGJ1aWx0IHVwIGFzIHdlIGdvIChlaXRoZXIgcmV1c2VkIGZyb21cbiAgICAvLyBvbGQgcGFydHMgb3IgY3JlYXRlZCBmb3IgbmV3IGtleXMgaW4gdGhpcyB1cGRhdGUpLiBUaGlzIGlzXG4gICAgLy8gc2F2ZWQgaW4gdGhlIGFib3ZlIGNhY2hlIGF0IHRoZSBlbmQgb2YgdGhlIHVwZGF0ZS5cbiAgICBjb25zdCBuZXdQYXJ0czogQ2hpbGRQYXJ0W10gPSBbXTtcblxuICAgIC8vIE1hcHMgZnJvbSBrZXkgdG8gaW5kZXggZm9yIGN1cnJlbnQgYW5kIHByZXZpb3VzIHVwZGF0ZTsgdGhlc2VcbiAgICAvLyBhcmUgZ2VuZXJhdGVkIGxhemlseSBvbmx5IHdoZW4gbmVlZGVkIGFzIGEgcGVyZm9ybWFuY2VcbiAgICAvLyBvcHRpbWl6YXRpb24sIHNpbmNlIHRoZXkgYXJlIG9ubHkgcmVxdWlyZWQgZm9yIG11bHRpcGxlXG4gICAgLy8gbm9uLWNvbnRpZ3VvdXMgY2hhbmdlcyBpbiB0aGUgbGlzdCwgd2hpY2ggYXJlIGxlc3MgY29tbW9uLlxuICAgIGxldCBuZXdLZXlUb0luZGV4TWFwITogTWFwPHVua25vd24sIG51bWJlcj47XG4gICAgbGV0IG9sZEtleVRvSW5kZXhNYXAhOiBNYXA8dW5rbm93biwgbnVtYmVyPjtcblxuICAgIC8vIEhlYWQgYW5kIHRhaWwgcG9pbnRlcnMgdG8gb2xkIHBhcnRzIGFuZCBuZXcgdmFsdWVzXG4gICAgbGV0IG9sZEhlYWQgPSAwO1xuICAgIGxldCBvbGRUYWlsID0gb2xkUGFydHMubGVuZ3RoIC0gMTtcbiAgICBsZXQgbmV3SGVhZCA9IDA7XG4gICAgbGV0IG5ld1RhaWwgPSBuZXdWYWx1ZXMubGVuZ3RoIC0gMTtcblxuICAgIC8vIE92ZXJ2aWV3IG9mIE8obikgcmVjb25jaWxpYXRpb24gYWxnb3JpdGhtIChnZW5lcmFsIGFwcHJvYWNoXG4gICAgLy8gYmFzZWQgb24gaWRlYXMgZm91bmQgaW4gaXZpLCB2dWUsIHNuYWJiZG9tLCBldGMuKTpcbiAgICAvL1xuICAgIC8vICogV2Ugc3RhcnQgd2l0aCB0aGUgbGlzdCBvZiBvbGQgcGFydHMgYW5kIG5ldyB2YWx1ZXMgKGFuZFxuICAgIC8vICAgYXJyYXlzIG9mIHRoZWlyIHJlc3BlY3RpdmUga2V5cyksIGhlYWQvdGFpbCBwb2ludGVycyBpbnRvXG4gICAgLy8gICBlYWNoLCBhbmQgd2UgYnVpbGQgdXAgdGhlIG5ldyBsaXN0IG9mIHBhcnRzIGJ5IHVwZGF0aW5nXG4gICAgLy8gICAoYW5kIHdoZW4gbmVlZGVkLCBtb3ZpbmcpIG9sZCBwYXJ0cyBvciBjcmVhdGluZyBuZXcgb25lcy5cbiAgICAvLyAgIFRoZSBpbml0aWFsIHNjZW5hcmlvIG1pZ2h0IGxvb2sgbGlrZSB0aGlzIChmb3IgYnJldml0eSBvZlxuICAgIC8vICAgdGhlIGRpYWdyYW1zLCB0aGUgbnVtYmVycyBpbiB0aGUgYXJyYXkgcmVmbGVjdCBrZXlzXG4gICAgLy8gICBhc3NvY2lhdGVkIHdpdGggdGhlIG9sZCBwYXJ0cyBvciBuZXcgdmFsdWVzLCBhbHRob3VnaCBrZXlzXG4gICAgLy8gICBhbmQgcGFydHMvdmFsdWVzIGFyZSBhY3R1YWxseSBzdG9yZWQgaW4gcGFyYWxsZWwgYXJyYXlzXG4gICAgLy8gICBpbmRleGVkIHVzaW5nIHRoZSBzYW1lIGhlYWQvdGFpbCBwb2ludGVycyk6XG4gICAgLy9cbiAgICAvLyAgICAgIG9sZEhlYWQgdiAgICAgICAgICAgICAgICAgdiBvbGRUYWlsXG4gICAgLy8gICBvbGRLZXlzOiAgWzAsIDEsIDIsIDMsIDQsIDUsIDZdXG4gICAgLy8gICBuZXdQYXJ0czogWyAsICAsICAsICAsICAsICAsICBdXG4gICAgLy8gICBuZXdLZXlzOiAgWzAsIDIsIDEsIDQsIDMsIDcsIDZdIDwtIHJlZmxlY3RzIHRoZSB1c2VyJ3MgbmV3XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gb3JkZXJcbiAgICAvLyAgICAgIG5ld0hlYWQgXiAgICAgICAgICAgICAgICAgXiBuZXdUYWlsXG4gICAgLy9cbiAgICAvLyAqIEl0ZXJhdGUgb2xkICYgbmV3IGxpc3RzIGZyb20gYm90aCBzaWRlcywgdXBkYXRpbmcsXG4gICAgLy8gICBzd2FwcGluZywgb3IgcmVtb3ZpbmcgcGFydHMgYXQgdGhlIGhlYWQvdGFpbCBsb2NhdGlvbnNcbiAgICAvLyAgIHVudGlsIG5laXRoZXIgaGVhZCBub3IgdGFpbCBjYW4gbW92ZS5cbiAgICAvL1xuICAgIC8vICogRXhhbXBsZSBiZWxvdzoga2V5cyBhdCBoZWFkIHBvaW50ZXJzIG1hdGNoLCBzbyB1cGRhdGUgb2xkXG4gICAgLy8gICBwYXJ0IDAgaW4tcGxhY2UgKG5vIG5lZWQgdG8gbW92ZSBpdCkgYW5kIHJlY29yZCBwYXJ0IDAgaW5cbiAgICAvLyAgIHRoZSBgbmV3UGFydHNgIGxpc3QuIFRoZSBsYXN0IHRoaW5nIHdlIGRvIGlzIGFkdmFuY2UgdGhlXG4gICAgLy8gICBgb2xkSGVhZGAgYW5kIGBuZXdIZWFkYCBwb2ludGVycyAod2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlXG4gICAgLy8gICBuZXh0IGRpYWdyYW0pLlxuICAgIC8vXG4gICAgLy8gICAgICBvbGRIZWFkIHYgICAgICAgICAgICAgICAgIHYgb2xkVGFpbFxuICAgIC8vICAgb2xkS2V5czogIFswLCAxLCAyLCAzLCA0LCA1LCA2XVxuICAgIC8vICAgbmV3UGFydHM6IFswLCAgLCAgLCAgLCAgLCAgLCAgXSA8LSBoZWFkcyBtYXRjaGVkOiB1cGRhdGUgMFxuICAgIC8vICAgbmV3S2V5czogIFswLCAyLCAxLCA0LCAzLCA3LCA2XSAgICBhbmQgYWR2YW5jZSBib3RoIG9sZEhlYWRcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiBuZXdIZWFkXG4gICAgLy8gICAgICBuZXdIZWFkIF4gICAgICAgICAgICAgICAgIF4gbmV3VGFpbFxuICAgIC8vXG4gICAgLy8gKiBFeGFtcGxlIGJlbG93OiBoZWFkIHBvaW50ZXJzIGRvbid0IG1hdGNoLCBidXQgdGFpbFxuICAgIC8vICAgcG9pbnRlcnMgZG8sIHNvIHVwZGF0ZSBwYXJ0IDYgaW4gcGxhY2UgKG5vIG5lZWQgdG8gbW92ZVxuICAgIC8vICAgaXQpLCBhbmQgcmVjb3JkIHBhcnQgNiBpbiB0aGUgYG5ld1BhcnRzYCBsaXN0LiBMYXN0LFxuICAgIC8vICAgYWR2YW5jZSB0aGUgYG9sZFRhaWxgIGFuZCBgb2xkSGVhZGAgcG9pbnRlcnMuXG4gICAgLy9cbiAgICAvLyAgICAgICAgIG9sZEhlYWQgdiAgICAgICAgICAgICAgdiBvbGRUYWlsXG4gICAgLy8gICBvbGRLZXlzOiAgWzAsIDEsIDIsIDMsIDQsIDUsIDZdXG4gICAgLy8gICBuZXdQYXJ0czogWzAsICAsICAsICAsICAsICAsIDZdIDwtIHRhaWxzIG1hdGNoZWQ6IHVwZGF0ZSA2XG4gICAgLy8gICBuZXdLZXlzOiAgWzAsIDIsIDEsIDQsIDMsIDcsIDZdICAgIGFuZCBhZHZhbmNlIGJvdGggb2xkVGFpbFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmIG5ld1RhaWxcbiAgICAvLyAgICAgICAgIG5ld0hlYWQgXiAgICAgICAgICAgICAgXiBuZXdUYWlsXG4gICAgLy9cbiAgICAvLyAqIElmIG5laXRoZXIgaGVhZCBub3IgdGFpbCBtYXRjaDsgbmV4dCBjaGVjayBpZiBvbmUgb2YgdGhlXG4gICAgLy8gICBvbGQgaGVhZC90YWlsIGl0ZW1zIHdhcyByZW1vdmVkLiBXZSBmaXJzdCBuZWVkIHRvIGdlbmVyYXRlXG4gICAgLy8gICB0aGUgcmV2ZXJzZSBtYXAgb2YgbmV3IGtleXMgdG8gaW5kZXggKGBuZXdLZXlUb0luZGV4TWFwYCksXG4gICAgLy8gICB3aGljaCBpcyBkb25lIG9uY2UgbGF6aWx5IGFzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLFxuICAgIC8vICAgc2luY2Ugd2Ugb25seSBoaXQgdGhpcyBjYXNlIGlmIG11bHRpcGxlIG5vbi1jb250aWd1b3VzXG4gICAgLy8gICBjaGFuZ2VzIHdlcmUgbWFkZS4gTm90ZSB0aGF0IGZvciBjb250aWd1b3VzIHJlbW92YWxcbiAgICAvLyAgIGFueXdoZXJlIGluIHRoZSBsaXN0LCB0aGUgaGVhZCBhbmQgdGFpbHMgd291bGQgYWR2YW5jZVxuICAgIC8vICAgZnJvbSBlaXRoZXIgZW5kIGFuZCBwYXNzIGVhY2ggb3RoZXIgYmVmb3JlIHdlIGdldCB0byB0aGlzXG4gICAgLy8gICBjYXNlIGFuZCByZW1vdmFscyB3b3VsZCBiZSBoYW5kbGVkIGluIHRoZSBmaW5hbCB3aGlsZSBsb29wXG4gICAgLy8gICB3aXRob3V0IG5lZWRpbmcgdG8gZ2VuZXJhdGUgdGhlIG1hcC5cbiAgICAvL1xuICAgIC8vICogRXhhbXBsZSBiZWxvdzogVGhlIGtleSBhdCBgb2xkVGFpbGAgd2FzIHJlbW92ZWQgKG5vIGxvbmdlclxuICAgIC8vICAgaW4gdGhlIGBuZXdLZXlUb0luZGV4TWFwYCksIHNvIHJlbW92ZSB0aGF0IHBhcnQgZnJvbSB0aGVcbiAgICAvLyAgIERPTSBhbmQgYWR2YW5jZSBqdXN0IHRoZSBgb2xkVGFpbGAgcG9pbnRlci5cbiAgICAvL1xuICAgIC8vICAgICAgICAgb2xkSGVhZCB2ICAgICAgICAgICB2IG9sZFRhaWxcbiAgICAvLyAgIG9sZEtleXM6ICBbMCwgMSwgMiwgMywgNCwgNSwgNl1cbiAgICAvLyAgIG5ld1BhcnRzOiBbMCwgICwgICwgICwgICwgICwgNl0gPC0gNSBub3QgaW4gbmV3IG1hcDogcmVtb3ZlXG4gICAgLy8gICBuZXdLZXlzOiAgWzAsIDIsIDEsIDQsIDMsIDcsIDZdICAgIDUgYW5kIGFkdmFuY2Ugb2xkVGFpbFxuICAgIC8vICAgICAgICAgbmV3SGVhZCBeICAgICAgICAgICBeIG5ld1RhaWxcbiAgICAvL1xuICAgIC8vICogT25jZSBoZWFkIGFuZCB0YWlsIGNhbm5vdCBtb3ZlLCBhbnkgbWlzbWF0Y2hlcyBhcmUgZHVlIHRvXG4gICAgLy8gICBlaXRoZXIgbmV3IG9yIG1vdmVkIGl0ZW1zOyBpZiBhIG5ldyBrZXkgaXMgaW4gdGhlIHByZXZpb3VzXG4gICAgLy8gICBcIm9sZCBrZXkgdG8gb2xkIGluZGV4XCIgbWFwLCBtb3ZlIHRoZSBvbGQgcGFydCB0byB0aGUgbmV3XG4gICAgLy8gICBsb2NhdGlvbiwgb3RoZXJ3aXNlIGNyZWF0ZSBhbmQgaW5zZXJ0IGEgbmV3IHBhcnQuIE5vdGVcbiAgICAvLyAgIHRoYXQgd2hlbiBtb3ZpbmcgYW4gb2xkIHBhcnQgd2UgbnVsbCBpdHMgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gICBvbGRQYXJ0cyBhcnJheSBpZiBpdCBsaWVzIGJldHdlZW4gdGhlIGhlYWQgYW5kIHRhaWwgc28gd2VcbiAgICAvLyAgIGtub3cgdG8gc2tpcCBpdCB3aGVuIHRoZSBwb2ludGVycyBnZXQgdGhlcmUuXG4gICAgLy9cbiAgICAvLyAqIEV4YW1wbGUgYmVsb3c6IG5laXRoZXIgaGVhZCBub3IgdGFpbCBtYXRjaCwgYW5kIG5laXRoZXJcbiAgICAvLyAgIHdlcmUgcmVtb3ZlZDsgc28gZmluZCB0aGUgYG5ld0hlYWRgIGtleSBpbiB0aGVcbiAgICAvLyAgIGBvbGRLZXlUb0luZGV4TWFwYCwgYW5kIG1vdmUgdGhhdCBvbGQgcGFydCdzIERPTSBpbnRvIHRoZVxuICAgIC8vICAgbmV4dCBoZWFkIHBvc2l0aW9uIChiZWZvcmUgYG9sZFBhcnRzW29sZEhlYWRdYCkuIExhc3QsXG4gICAgLy8gICBudWxsIHRoZSBwYXJ0IGluIHRoZSBgb2xkUGFydGAgYXJyYXkgc2luY2UgaXQgd2FzXG4gICAgLy8gICBzb21ld2hlcmUgaW4gdGhlIHJlbWFpbmluZyBvbGRQYXJ0cyBzdGlsbCB0byBiZSBzY2FubmVkXG4gICAgLy8gICAoYmV0d2VlbiB0aGUgaGVhZCBhbmQgdGFpbCBwb2ludGVycykgc28gdGhhdCB3ZSBrbm93IHRvXG4gICAgLy8gICBza2lwIHRoYXQgb2xkIHBhcnQgb24gZnV0dXJlIGl0ZXJhdGlvbnMuXG4gICAgLy9cbiAgICAvLyAgICAgICAgIG9sZEhlYWQgdiAgICAgICAgdiBvbGRUYWlsXG4gICAgLy8gICBvbGRLZXlzOiAgWzAsIDEsIC0sIDMsIDQsIDUsIDZdXG4gICAgLy8gICBuZXdQYXJ0czogWzAsIDIsICAsICAsICAsICAsIDZdIDwtIHN0dWNrOiB1cGRhdGUgJiBtb3ZlIDJcbiAgICAvLyAgIG5ld0tleXM6ICBbMCwgMiwgMSwgNCwgMywgNywgNl0gICAgaW50byBwbGFjZSBhbmQgYWR2YW5jZVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdIZWFkXG4gICAgLy8gICAgICAgICBuZXdIZWFkIF4gICAgICAgICAgIF4gbmV3VGFpbFxuICAgIC8vXG4gICAgLy8gKiBOb3RlIHRoYXQgZm9yIG1vdmVzL2luc2VydGlvbnMgbGlrZSB0aGUgb25lIGFib3ZlLCBhIHBhcnRcbiAgICAvLyAgIGluc2VydGVkIGF0IHRoZSBoZWFkIHBvaW50ZXIgaXMgaW5zZXJ0ZWQgYmVmb3JlIHRoZVxuICAgIC8vICAgY3VycmVudCBgb2xkUGFydHNbb2xkSGVhZF1gLCBhbmQgYSBwYXJ0IGluc2VydGVkIGF0IHRoZVxuICAgIC8vICAgdGFpbCBwb2ludGVyIGlzIGluc2VydGVkIGJlZm9yZSBgbmV3UGFydHNbbmV3VGFpbCsxXWAuIFRoZVxuICAgIC8vICAgc2VlbWluZyBhc3ltbWV0cnkgbGllcyBpbiB0aGUgZmFjdCB0aGF0IG5ldyBwYXJ0cyBhcmVcbiAgICAvLyAgIG1vdmVkIGludG8gcGxhY2Ugb3V0c2lkZSBpbiwgc28gdG8gdGhlIHJpZ2h0IG9mIHRoZSBoZWFkXG4gICAgLy8gICBwb2ludGVyIGFyZSBvbGQgcGFydHMsIGFuZCB0byB0aGUgcmlnaHQgb2YgdGhlIHRhaWxcbiAgICAvLyAgIHBvaW50ZXIgYXJlIG5ldyBwYXJ0cy5cbiAgICAvL1xuICAgIC8vICogV2UgYWx3YXlzIHJlc3RhcnQgYmFjayBmcm9tIHRoZSB0b3Agb2YgdGhlIGFsZ29yaXRobSxcbiAgICAvLyAgIGFsbG93aW5nIG1hdGNoaW5nIGFuZCBzaW1wbGUgdXBkYXRlcyBpbiBwbGFjZSB0b1xuICAgIC8vICAgY29udGludWUuLi5cbiAgICAvL1xuICAgIC8vICogRXhhbXBsZSBiZWxvdzogdGhlIGhlYWQgcG9pbnRlcnMgb25jZSBhZ2FpbiBtYXRjaCwgc29cbiAgICAvLyAgIHNpbXBseSB1cGRhdGUgcGFydCAxIGFuZCByZWNvcmQgaXQgaW4gdGhlIGBuZXdQYXJ0c2BcbiAgICAvLyAgIGFycmF5LiAgTGFzdCwgYWR2YW5jZSBib3RoIGhlYWQgcG9pbnRlcnMuXG4gICAgLy9cbiAgICAvLyAgICAgICAgIG9sZEhlYWQgdiAgICAgICAgdiBvbGRUYWlsXG4gICAgLy8gICBvbGRLZXlzOiAgWzAsIDEsIC0sIDMsIDQsIDUsIDZdXG4gICAgLy8gICBuZXdQYXJ0czogWzAsIDIsIDEsICAsICAsICAsIDZdIDwtIGhlYWRzIG1hdGNoZWQ6IHVwZGF0ZSAxXG4gICAgLy8gICBuZXdLZXlzOiAgWzAsIDIsIDEsIDQsIDMsIDcsIDZdICAgIGFuZCBhZHZhbmNlIGJvdGggb2xkSGVhZFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmIG5ld0hlYWRcbiAgICAvLyAgICAgICAgICAgIG5ld0hlYWQgXiAgICAgICAgXiBuZXdUYWlsXG4gICAgLy9cbiAgICAvLyAqIEFzIG1lbnRpb25lZCBhYm92ZSwgaXRlbXMgdGhhdCB3ZXJlIG1vdmVkIGFzIGEgcmVzdWx0IG9mXG4gICAgLy8gICBiZWluZyBzdHVjayAodGhlIGZpbmFsIGVsc2UgY2xhdXNlIGluIHRoZSBjb2RlIGJlbG93KSBhcmVcbiAgICAvLyAgIG1hcmtlZCB3aXRoIG51bGwsIHNvIHdlIGFsd2F5cyBhZHZhbmNlIG9sZCBwb2ludGVycyBvdmVyXG4gICAgLy8gICB0aGVzZSBzbyB3ZSdyZSBjb21wYXJpbmcgdGhlIG5leHQgYWN0dWFsIG9sZCB2YWx1ZSBvblxuICAgIC8vICAgZWl0aGVyIGVuZC5cbiAgICAvL1xuICAgIC8vICogRXhhbXBsZSBiZWxvdzogYG9sZEhlYWRgIGlzIG51bGwgKGFscmVhZHkgcGxhY2VkIGluXG4gICAgLy8gICBuZXdQYXJ0cyksIHNvIGFkdmFuY2UgYG9sZEhlYWRgLlxuICAgIC8vXG4gICAgLy8gICAgICAgICAgICBvbGRIZWFkIHYgICAgIHYgb2xkVGFpbFxuICAgIC8vICAgb2xkS2V5czogIFswLCAxLCAtLCAzLCA0LCA1LCA2XSA8LSBvbGQgaGVhZCBhbHJlYWR5IHVzZWQ6XG4gICAgLy8gICBuZXdQYXJ0czogWzAsIDIsIDEsICAsICAsICAsIDZdICAgIGFkdmFuY2Ugb2xkSGVhZFxuICAgIC8vICAgbmV3S2V5czogIFswLCAyLCAxLCA0LCAzLCA3LCA2XVxuICAgIC8vICAgICAgICAgICAgICAgbmV3SGVhZCBeICAgICBeIG5ld1RhaWxcbiAgICAvL1xuICAgIC8vICogTm90ZSBpdCdzIG5vdCBjcml0aWNhbCB0byBtYXJrIG9sZCBwYXJ0cyBhcyBudWxsIHdoZW4gdGhleVxuICAgIC8vICAgYXJlIG1vdmVkIGZyb20gaGVhZCB0byB0YWlsIG9yIHRhaWwgdG8gaGVhZCwgc2luY2UgdGhleVxuICAgIC8vICAgd2lsbCBiZSBvdXRzaWRlIHRoZSBwb2ludGVyIHJhbmdlIGFuZCBuZXZlciB2aXNpdGVkIGFnYWluLlxuICAgIC8vXG4gICAgLy8gKiBFeGFtcGxlIGJlbG93OiBIZXJlIHRoZSBvbGQgdGFpbCBrZXkgbWF0Y2hlcyB0aGUgbmV3IGhlYWRcbiAgICAvLyAgIGtleSwgc28gdGhlIHBhcnQgYXQgdGhlIGBvbGRUYWlsYCBwb3NpdGlvbiBhbmQgbW92ZSBpdHNcbiAgICAvLyAgIERPTSB0byB0aGUgbmV3IGhlYWQgcG9zaXRpb24gKGJlZm9yZSBgb2xkUGFydHNbb2xkSGVhZF1gKS5cbiAgICAvLyAgIExhc3QsIGFkdmFuY2UgYG9sZFRhaWxgIGFuZCBgbmV3SGVhZGAgcG9pbnRlcnMuXG4gICAgLy9cbiAgICAvLyAgICAgICAgICAgICAgIG9sZEhlYWQgdiAgdiBvbGRUYWlsXG4gICAgLy8gICBvbGRLZXlzOiAgWzAsIDEsIC0sIDMsIDQsIDUsIDZdXG4gICAgLy8gICBuZXdQYXJ0czogWzAsIDIsIDEsIDQsICAsICAsIDZdIDwtIG9sZCB0YWlsIG1hdGNoZXMgbmV3XG4gICAgLy8gICBuZXdLZXlzOiAgWzAsIDIsIDEsIDQsIDMsIDcsIDZdICAgaGVhZDogdXBkYXRlICYgbW92ZSA0LFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2Ugb2xkVGFpbCAmIG5ld0hlYWRcbiAgICAvLyAgICAgICAgICAgICAgIG5ld0hlYWQgXiAgICAgXiBuZXdUYWlsXG4gICAgLy9cbiAgICAvLyAqIEV4YW1wbGUgYmVsb3c6IE9sZCBhbmQgbmV3IGhlYWQga2V5cyBtYXRjaCwgc28gdXBkYXRlIHRoZVxuICAgIC8vICAgb2xkIGhlYWQgcGFydCBpbiBwbGFjZSwgYW5kIGFkdmFuY2UgdGhlIGBvbGRIZWFkYCBhbmRcbiAgICAvLyAgIGBuZXdIZWFkYCBwb2ludGVycy5cbiAgICAvL1xuICAgIC8vICAgICAgICAgICAgICAgb2xkSGVhZCB2IG9sZFRhaWxcbiAgICAvLyAgIG9sZEtleXM6ICBbMCwgMSwgLSwgMywgNCwgNSwgNl1cbiAgICAvLyAgIG5ld1BhcnRzOiBbMCwgMiwgMSwgNCwgMywgICAsNl0gPC0gaGVhZHMgbWF0Y2g6IHVwZGF0ZSAzXG4gICAgLy8gICBuZXdLZXlzOiAgWzAsIDIsIDEsIDQsIDMsIDcsIDZdICAgIGFuZCBhZHZhbmNlIG9sZEhlYWQgJlxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdIZWFkXG4gICAgLy8gICAgICAgICAgICAgICAgICBuZXdIZWFkIF4gIF4gbmV3VGFpbFxuICAgIC8vXG4gICAgLy8gKiBPbmNlIHRoZSBuZXcgb3Igb2xkIHBvaW50ZXJzIG1vdmUgcGFzdCBlYWNoIG90aGVyIHRoZW4gYWxsXG4gICAgLy8gICB3ZSBoYXZlIGxlZnQgaXMgYWRkaXRpb25zIChpZiBvbGQgbGlzdCBleGhhdXN0ZWQpIG9yXG4gICAgLy8gICByZW1vdmFscyAoaWYgbmV3IGxpc3QgZXhoYXVzdGVkKS4gVGhvc2UgYXJlIGhhbmRsZWQgaW4gdGhlXG4gICAgLy8gICBmaW5hbCB3aGlsZSBsb29wcyBhdCB0aGUgZW5kLlxuICAgIC8vXG4gICAgLy8gKiBFeGFtcGxlIGJlbG93OiBgb2xkSGVhZGAgZXhjZWVkZWQgYG9sZFRhaWxgLCBzbyB3ZSdyZSBkb25lXG4gICAgLy8gICB3aXRoIHRoZSBtYWluIGxvb3AuICBDcmVhdGUgdGhlIHJlbWFpbmluZyBwYXJ0IGFuZCBpbnNlcnRcbiAgICAvLyAgIGl0IGF0IHRoZSBuZXcgaGVhZCBwb3NpdGlvbiwgYW5kIHRoZSB1cGRhdGUgaXMgY29tcGxldGUuXG4gICAgLy9cbiAgICAvLyAgICAgICAgICAgICAgICAgICAob2xkSGVhZCA+IG9sZFRhaWwpXG4gICAgLy8gICBvbGRLZXlzOiAgWzAsIDEsIC0sIDMsIDQsIDUsIDZdXG4gICAgLy8gICBuZXdQYXJ0czogWzAsIDIsIDEsIDQsIDMsIDcgLDZdIDwtIGNyZWF0ZSBhbmQgaW5zZXJ0IDdcbiAgICAvLyAgIG5ld0tleXM6ICBbMCwgMiwgMSwgNCwgMywgNywgNl1cbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIG5ld0hlYWQgXiBuZXdUYWlsXG4gICAgLy9cbiAgICAvLyAqIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIGlmL2Vsc2UgY2xhdXNlcyBpcyBub3RcbiAgICAvLyAgIGltcG9ydGFudCB0byB0aGUgYWxnb3JpdGhtLCBhcyBsb25nIGFzIHRoZSBudWxsIGNoZWNrc1xuICAgIC8vICAgY29tZSBmaXJzdCAodG8gZW5zdXJlIHdlJ3JlIGFsd2F5cyB3b3JraW5nIG9uIHZhbGlkIG9sZFxuICAgIC8vICAgcGFydHMpIGFuZCB0aGF0IHRoZSBmaW5hbCBlbHNlIGNsYXVzZSBjb21lcyBsYXN0IChzaW5jZVxuICAgIC8vICAgdGhhdCdzIHdoZXJlIHRoZSBleHBlbnNpdmUgbW92ZXMgb2NjdXIpLiBUaGUgb3JkZXIgb2ZcbiAgICAvLyAgIHJlbWFpbmluZyBjbGF1c2VzIGlzIGp1c3QgYSBzaW1wbGUgZ3Vlc3MgYXQgd2hpY2ggY2FzZXNcbiAgICAvLyAgIHdpbGwgYmUgbW9zdCBjb21tb24uXG4gICAgLy9cbiAgICAvLyAqIE5vdGUsIHdlIGNvdWxkIGNhbGN1bGF0ZSB0aGUgbG9uZ2VzdFxuICAgIC8vICAgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSAoTElTKSBvZiBvbGQgaXRlbXMgaW4gbmV3IHBvc2l0aW9uLFxuICAgIC8vICAgYW5kIG9ubHkgbW92ZSB0aG9zZSBub3QgaW4gdGhlIExJUyBzZXQuIEhvd2V2ZXIgdGhhdCBjb3N0c1xuICAgIC8vICAgTyhubG9nbikgdGltZSBhbmQgYWRkcyBhIGJpdCBtb3JlIGNvZGUsIGFuZCBvbmx5IGhlbHBzXG4gICAgLy8gICBtYWtlIHJhcmUgdHlwZXMgb2YgbXV0YXRpb25zIHJlcXVpcmUgZmV3ZXIgbW92ZXMuIFRoZVxuICAgIC8vICAgYWJvdmUgaGFuZGxlcyByZW1vdmVzLCBhZGRzLCByZXZlcnNhbCwgc3dhcHMsIGFuZCBzaW5nbGVcbiAgICAvLyAgIG1vdmVzIG9mIGNvbnRpZ3VvdXMgaXRlbXMgaW4gbGluZWFyIHRpbWUsIGluIHRoZSBtaW5pbXVtXG4gICAgLy8gICBudW1iZXIgb2YgbW92ZXMuIEFzIHRoZSBudW1iZXIgb2YgbXVsdGlwbGUgbW92ZXMgd2hlcmUgTElTXG4gICAgLy8gICBtaWdodCBoZWxwIGFwcHJvYWNoZXMgYSByYW5kb20gc2h1ZmZsZSwgdGhlIExJU1xuICAgIC8vICAgb3B0aW1pemF0aW9uIGJlY29tZXMgbGVzcyBoZWxwZnVsLCBzbyBpdCBzZWVtcyBub3Qgd29ydGhcbiAgICAvLyAgIHRoZSBjb2RlIGF0IHRoaXMgcG9pbnQuIENvdWxkIHJlY29uc2lkZXIgaWYgYSBjb21wZWxsaW5nXG4gICAgLy8gICBjYXNlIGFyaXNlcy5cblxuICAgIHdoaWxlIChvbGRIZWFkIDw9IG9sZFRhaWwgJiYgbmV3SGVhZCA8PSBuZXdUYWlsKSB7XG4gICAgICBpZiAob2xkUGFydHNbb2xkSGVhZF0gPT09IG51bGwpIHtcbiAgICAgICAgLy8gYG51bGxgIG1lYW5zIG9sZCBwYXJ0IGF0IGhlYWQgaGFzIGFscmVhZHkgYmVlbiB1c2VkXG4gICAgICAgIC8vIGJlbG93OyBza2lwXG4gICAgICAgIG9sZEhlYWQrKztcbiAgICAgIH0gZWxzZSBpZiAob2xkUGFydHNbb2xkVGFpbF0gPT09IG51bGwpIHtcbiAgICAgICAgLy8gYG51bGxgIG1lYW5zIG9sZCBwYXJ0IGF0IHRhaWwgaGFzIGFscmVhZHkgYmVlbiB1c2VkXG4gICAgICAgIC8vIGJlbG93OyBza2lwXG4gICAgICAgIG9sZFRhaWwtLTtcbiAgICAgIH0gZWxzZSBpZiAob2xkS2V5c1tvbGRIZWFkXSA9PT0gbmV3S2V5c1tuZXdIZWFkXSkge1xuICAgICAgICAvLyBPbGQgaGVhZCBtYXRjaGVzIG5ldyBoZWFkOyB1cGRhdGUgaW4gcGxhY2VcbiAgICAgICAgbmV3UGFydHNbbmV3SGVhZF0gPSBzZXRDaGlsZFBhcnRWYWx1ZShcbiAgICAgICAgICBvbGRQYXJ0c1tvbGRIZWFkXSEsXG4gICAgICAgICAgbmV3VmFsdWVzW25ld0hlYWRdXG4gICAgICAgICk7XG4gICAgICAgIG9sZEhlYWQrKztcbiAgICAgICAgbmV3SGVhZCsrO1xuICAgICAgfSBlbHNlIGlmIChvbGRLZXlzW29sZFRhaWxdID09PSBuZXdLZXlzW25ld1RhaWxdKSB7XG4gICAgICAgIC8vIE9sZCB0YWlsIG1hdGNoZXMgbmV3IHRhaWw7IHVwZGF0ZSBpbiBwbGFjZVxuICAgICAgICBuZXdQYXJ0c1tuZXdUYWlsXSA9IHNldENoaWxkUGFydFZhbHVlKFxuICAgICAgICAgIG9sZFBhcnRzW29sZFRhaWxdISxcbiAgICAgICAgICBuZXdWYWx1ZXNbbmV3VGFpbF1cbiAgICAgICAgKTtcbiAgICAgICAgb2xkVGFpbC0tO1xuICAgICAgICBuZXdUYWlsLS07XG4gICAgICB9IGVsc2UgaWYgKG9sZEtleXNbb2xkSGVhZF0gPT09IG5ld0tleXNbbmV3VGFpbF0pIHtcbiAgICAgICAgLy8gT2xkIGhlYWQgbWF0Y2hlcyBuZXcgdGFpbDsgdXBkYXRlIGFuZCBtb3ZlIHRvIG5ldyB0YWlsXG4gICAgICAgIG5ld1BhcnRzW25ld1RhaWxdID0gc2V0Q2hpbGRQYXJ0VmFsdWUoXG4gICAgICAgICAgb2xkUGFydHNbb2xkSGVhZF0hLFxuICAgICAgICAgIG5ld1ZhbHVlc1tuZXdUYWlsXVxuICAgICAgICApO1xuICAgICAgICBpbnNlcnRQYXJ0KGNvbnRhaW5lclBhcnQsIG5ld1BhcnRzW25ld1RhaWwgKyAxXSwgb2xkUGFydHNbb2xkSGVhZF0hKTtcbiAgICAgICAgb2xkSGVhZCsrO1xuICAgICAgICBuZXdUYWlsLS07XG4gICAgICB9IGVsc2UgaWYgKG9sZEtleXNbb2xkVGFpbF0gPT09IG5ld0tleXNbbmV3SGVhZF0pIHtcbiAgICAgICAgLy8gT2xkIHRhaWwgbWF0Y2hlcyBuZXcgaGVhZDsgdXBkYXRlIGFuZCBtb3ZlIHRvIG5ldyBoZWFkXG4gICAgICAgIG5ld1BhcnRzW25ld0hlYWRdID0gc2V0Q2hpbGRQYXJ0VmFsdWUoXG4gICAgICAgICAgb2xkUGFydHNbb2xkVGFpbF0hLFxuICAgICAgICAgIG5ld1ZhbHVlc1tuZXdIZWFkXVxuICAgICAgICApO1xuICAgICAgICBpbnNlcnRQYXJ0KGNvbnRhaW5lclBhcnQsIG9sZFBhcnRzW29sZEhlYWRdISwgb2xkUGFydHNbb2xkVGFpbF0hKTtcbiAgICAgICAgb2xkVGFpbC0tO1xuICAgICAgICBuZXdIZWFkKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmV3S2V5VG9JbmRleE1hcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gTGF6aWx5IGdlbmVyYXRlIGtleS10by1pbmRleCBtYXBzLCB1c2VkIGZvciByZW1vdmFscyAmXG4gICAgICAgICAgLy8gbW92ZXMgYmVsb3dcbiAgICAgICAgICBuZXdLZXlUb0luZGV4TWFwID0gZ2VuZXJhdGVNYXAobmV3S2V5cywgbmV3SGVhZCwgbmV3VGFpbCk7XG4gICAgICAgICAgb2xkS2V5VG9JbmRleE1hcCA9IGdlbmVyYXRlTWFwKG9sZEtleXMsIG9sZEhlYWQsIG9sZFRhaWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV3S2V5VG9JbmRleE1hcC5oYXMob2xkS2V5c1tvbGRIZWFkXSkpIHtcbiAgICAgICAgICAvLyBPbGQgaGVhZCBpcyBubyBsb25nZXIgaW4gbmV3IGxpc3Q7IHJlbW92ZVxuICAgICAgICAgIHJlbW92ZVBhcnQob2xkUGFydHNbb2xkSGVhZF0hKTtcbiAgICAgICAgICBvbGRIZWFkKys7XG4gICAgICAgIH0gZWxzZSBpZiAoIW5ld0tleVRvSW5kZXhNYXAuaGFzKG9sZEtleXNbb2xkVGFpbF0pKSB7XG4gICAgICAgICAgLy8gT2xkIHRhaWwgaXMgbm8gbG9uZ2VyIGluIG5ldyBsaXN0OyByZW1vdmVcbiAgICAgICAgICByZW1vdmVQYXJ0KG9sZFBhcnRzW29sZFRhaWxdISk7XG4gICAgICAgICAgb2xkVGFpbC0tO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEFueSBtaXNtYXRjaGVzIGF0IHRoaXMgcG9pbnQgYXJlIGR1ZSB0byBhZGRpdGlvbnMgb3JcbiAgICAgICAgICAvLyBtb3Zlczsgc2VlIGlmIHdlIGhhdmUgYW4gb2xkIHBhcnQgd2UgY2FuIHJldXNlIGFuZCBtb3ZlXG4gICAgICAgICAgLy8gaW50byBwbGFjZVxuICAgICAgICAgIGNvbnN0IG9sZEluZGV4ID0gb2xkS2V5VG9JbmRleE1hcC5nZXQobmV3S2V5c1tuZXdIZWFkXSk7XG4gICAgICAgICAgY29uc3Qgb2xkUGFydCA9IG9sZEluZGV4ICE9PSB1bmRlZmluZWQgPyBvbGRQYXJ0c1tvbGRJbmRleF0gOiBudWxsO1xuICAgICAgICAgIGlmIChvbGRQYXJ0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBObyBvbGQgcGFydCBmb3IgdGhpcyB2YWx1ZTsgY3JlYXRlIGEgbmV3IG9uZSBhbmRcbiAgICAgICAgICAgIC8vIGluc2VydCBpdFxuICAgICAgICAgICAgY29uc3QgbmV3UGFydCA9IGluc2VydFBhcnQoY29udGFpbmVyUGFydCwgb2xkUGFydHNbb2xkSGVhZF0hKTtcbiAgICAgICAgICAgIHNldENoaWxkUGFydFZhbHVlKG5ld1BhcnQsIG5ld1ZhbHVlc1tuZXdIZWFkXSk7XG4gICAgICAgICAgICBuZXdQYXJ0c1tuZXdIZWFkXSA9IG5ld1BhcnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJldXNlIG9sZCBwYXJ0XG4gICAgICAgICAgICBuZXdQYXJ0c1tuZXdIZWFkXSA9IHNldENoaWxkUGFydFZhbHVlKG9sZFBhcnQsIG5ld1ZhbHVlc1tuZXdIZWFkXSk7XG4gICAgICAgICAgICBpbnNlcnRQYXJ0KGNvbnRhaW5lclBhcnQsIG9sZFBhcnRzW29sZEhlYWRdISwgb2xkUGFydCk7XG4gICAgICAgICAgICAvLyBUaGlzIG1hcmtzIHRoZSBvbGQgcGFydCBhcyBoYXZpbmcgYmVlbiB1c2VkLCBzbyB0aGF0XG4gICAgICAgICAgICAvLyBpdCB3aWxsIGJlIHNraXBwZWQgaW4gdGhlIGZpcnN0IHR3byBjaGVja3MgYWJvdmVcbiAgICAgICAgICAgIG9sZFBhcnRzW29sZEluZGV4IGFzIG51bWJlcl0gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdIZWFkKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQWRkIHBhcnRzIGZvciBhbnkgcmVtYWluaW5nIG5ldyB2YWx1ZXNcbiAgICB3aGlsZSAobmV3SGVhZCA8PSBuZXdUYWlsKSB7XG4gICAgICAvLyBGb3IgYWxsIHJlbWFpbmluZyBhZGRpdGlvbnMsIHdlIGluc2VydCBiZWZvcmUgbGFzdCBuZXdcbiAgICAgIC8vIHRhaWwsIHNpbmNlIG9sZCBwb2ludGVycyBhcmUgbm8gbG9uZ2VyIHZhbGlkXG4gICAgICBjb25zdCBuZXdQYXJ0ID0gaW5zZXJ0UGFydChjb250YWluZXJQYXJ0LCBuZXdQYXJ0c1tuZXdUYWlsICsgMV0pO1xuICAgICAgc2V0Q2hpbGRQYXJ0VmFsdWUobmV3UGFydCwgbmV3VmFsdWVzW25ld0hlYWRdKTtcbiAgICAgIG5ld1BhcnRzW25ld0hlYWQrK10gPSBuZXdQYXJ0O1xuICAgIH1cbiAgICAvLyBSZW1vdmUgYW55IHJlbWFpbmluZyB1bnVzZWQgb2xkIHBhcnRzXG4gICAgd2hpbGUgKG9sZEhlYWQgPD0gb2xkVGFpbCkge1xuICAgICAgY29uc3Qgb2xkUGFydCA9IG9sZFBhcnRzW29sZEhlYWQrK107XG4gICAgICBpZiAob2xkUGFydCAhPT0gbnVsbCkge1xuICAgICAgICByZW1vdmVQYXJ0KG9sZFBhcnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNhdmUgb3JkZXIgb2YgbmV3IHBhcnRzIGZvciBuZXh0IHJvdW5kXG4gICAgdGhpcy5faXRlbUtleXMgPSBuZXdLZXlzO1xuICAgIC8vIERpcmVjdGx5IHNldCBwYXJ0IHZhbHVlLCBieXBhc3NpbmcgaXQncyBkaXJ0eS1jaGVja2luZ1xuICAgIHNldENvbW1pdHRlZFZhbHVlKGNvbnRhaW5lclBhcnQsIG5ld1BhcnRzKTtcbiAgICByZXR1cm4gbm9DaGFuZ2U7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXBlYXREaXJlY3RpdmVGbiB7XG4gIDxUPihcbiAgICBpdGVtczogSXRlcmFibGU8VD4sXG4gICAga2V5Rm5PclRlbXBsYXRlOiBLZXlGbjxUPiB8IEl0ZW1UZW1wbGF0ZTxUPixcbiAgICB0ZW1wbGF0ZT86IEl0ZW1UZW1wbGF0ZTxUPlxuICApOiB1bmtub3duO1xuICA8VD4oaXRlbXM6IEl0ZXJhYmxlPFQ+LCB0ZW1wbGF0ZTogSXRlbVRlbXBsYXRlPFQ+KTogdW5rbm93bjtcbiAgPFQ+KFxuICAgIGl0ZW1zOiBJdGVyYWJsZTxUPixcbiAgICBrZXlGbjogS2V5Rm48VD4gfCBJdGVtVGVtcGxhdGU8VD4sXG4gICAgdGVtcGxhdGU6IEl0ZW1UZW1wbGF0ZTxUPlxuICApOiB1bmtub3duO1xufVxuXG4vKipcbiAqIEEgZGlyZWN0aXZlIHRoYXQgcmVwZWF0cyBhIHNlcmllcyBvZiB2YWx1ZXMgKHVzdWFsbHkgYFRlbXBsYXRlUmVzdWx0c2ApXG4gKiBnZW5lcmF0ZWQgZnJvbSBhbiBpdGVyYWJsZSwgYW5kIHVwZGF0ZXMgdGhvc2UgaXRlbXMgZWZmaWNpZW50bHkgd2hlbiB0aGVcbiAqIGl0ZXJhYmxlIGNoYW5nZXMgYmFzZWQgb24gdXNlci1wcm92aWRlZCBga2V5c2AgYXNzb2NpYXRlZCB3aXRoIGVhY2ggaXRlbS5cbiAqXG4gKiBOb3RlIHRoYXQgaWYgYSBga2V5Rm5gIGlzIHByb3ZpZGVkLCBzdHJpY3Qga2V5LXRvLURPTSBtYXBwaW5nIGlzIG1haW50YWluZWQsXG4gKiBtZWFuaW5nIHByZXZpb3VzIERPTSBmb3IgYSBnaXZlbiBrZXkgaXMgbW92ZWQgaW50byB0aGUgbmV3IHBvc2l0aW9uIGlmXG4gKiBuZWVkZWQsIGFuZCBET00gd2lsbCBuZXZlciBiZSByZXVzZWQgd2l0aCB2YWx1ZXMgZm9yIGRpZmZlcmVudCBrZXlzIChuZXcgRE9NXG4gKiB3aWxsIGFsd2F5cyBiZSBjcmVhdGVkIGZvciBuZXcga2V5cykuIFRoaXMgaXMgZ2VuZXJhbGx5IHRoZSBtb3N0IGVmZmljaWVudFxuICogd2F5IHRvIHVzZSBgcmVwZWF0YCBzaW5jZSBpdCBwZXJmb3JtcyBtaW5pbXVtIHVubmVjZXNzYXJ5IHdvcmsgZm9yIGluc2VydGlvbnNcbiAqIGFuZCByZW1vdmFscy5cbiAqXG4gKiBUaGUgYGtleUZuYCB0YWtlcyB0d28gcGFyYW1ldGVycywgdGhlIGl0ZW0gYW5kIGl0cyBpbmRleCwgYW5kIHJldHVybnMgYSB1bmlxdWUga2V5IHZhbHVlLlxuICpcbiAqIGBgYGpzXG4gKiBodG1sYFxuICogICA8b2w+XG4gKiAgICAgJHtyZXBlYXQodGhpcy5pdGVtcywgKGl0ZW0pID0+IGl0ZW0uaWQsIChpdGVtLCBpbmRleCkgPT4ge1xuICogICAgICAgcmV0dXJuIGh0bWxgPGxpPiR7aW5kZXh9OiAke2l0ZW0ubmFtZX08L2xpPmA7XG4gKiAgICAgfSl9XG4gKiAgIDwvb2w+XG4gKiBgXG4gKiBgYGBcbiAqXG4gKiAqKkltcG9ydGFudCoqOiBJZiBwcm92aWRpbmcgYSBga2V5Rm5gLCBrZXlzICptdXN0KiBiZSB1bmlxdWUgZm9yIGFsbCBpdGVtcyBpbiBhXG4gKiBnaXZlbiBjYWxsIHRvIGByZXBlYXRgLiBUaGUgYmVoYXZpb3Igd2hlbiB0d28gb3IgbW9yZSBpdGVtcyBoYXZlIHRoZSBzYW1lIGtleVxuICogaXMgdW5kZWZpbmVkLlxuICpcbiAqIElmIG5vIGBrZXlGbmAgaXMgcHJvdmlkZWQsIHRoaXMgZGlyZWN0aXZlIHdpbGwgcGVyZm9ybSBzaW1pbGFyIHRvIG1hcHBpbmdcbiAqIGl0ZW1zIHRvIHZhbHVlcywgYW5kIERPTSB3aWxsIGJlIHJldXNlZCBhZ2FpbnN0IHBvdGVudGlhbGx5IGRpZmZlcmVudCBpdGVtcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlcGVhdCA9IGRpcmVjdGl2ZShSZXBlYXREaXJlY3RpdmUpIGFzIFJlcGVhdERpcmVjdGl2ZUZuO1xuXG4vKipcbiAqIFRoZSB0eXBlIG9mIHRoZSBjbGFzcyB0aGF0IHBvd2VycyB0aGlzIGRpcmVjdGl2ZS4gTmVjZXNzYXJ5IGZvciBuYW1pbmcgdGhlXG4gKiBkaXJlY3RpdmUncyByZXR1cm4gdHlwZS5cbiAqL1xuZXhwb3J0IHR5cGUge1JlcGVhdERpcmVjdGl2ZX07XG4iLCJpbXBvcnR7XyRMSCBhcyBvfWZyb21cIi4vbGl0LWh0bWwuanNcIjtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL2NvbnN0e0k6dH09byxpPW89Pm51bGw9PT1vfHxcIm9iamVjdFwiIT10eXBlb2YgbyYmXCJmdW5jdGlvblwiIT10eXBlb2YgbyxuPXtIVE1MOjEsU1ZHOjIsTUFUSE1MOjN9LGU9KG8sdCk9PnZvaWQgMD09PXQ/dm9pZCAwIT09bz8uXyRsaXRUeXBlJDpvPy5fJGxpdFR5cGUkPT09dCxsPW89Pm51bGwhPW8/Ll8kbGl0VHlwZSQ/LmgsYz1vPT52b2lkIDAhPT1vPy5fJGxpdERpcmVjdGl2ZSQsZD1vPT5vPy5fJGxpdERpcmVjdGl2ZSQsZj1vPT52b2lkIDA9PT1vLnN0cmluZ3Mscz0oKT0+ZG9jdW1lbnQuY3JlYXRlQ29tbWVudChcIlwiKSxyPShvLGksbik9Pntjb25zdCBlPW8uXyRBQS5wYXJlbnROb2RlLGw9dm9pZCAwPT09aT9vLl8kQUI6aS5fJEFBO2lmKHZvaWQgMD09PW4pe2NvbnN0IGk9ZS5pbnNlcnRCZWZvcmUocygpLGwpLGM9ZS5pbnNlcnRCZWZvcmUocygpLGwpO249bmV3IHQoaSxjLG8sby5vcHRpb25zKX1lbHNle2NvbnN0IHQ9bi5fJEFCLm5leHRTaWJsaW5nLGk9bi5fJEFNLGM9aSE9PW87aWYoYyl7bGV0IHQ7bi5fJEFRPy4obyksbi5fJEFNPW8sdm9pZCAwIT09bi5fJEFQJiYodD1vLl8kQVUpIT09aS5fJEFVJiZuLl8kQVAodCl9aWYodCE9PWx8fGMpe2xldCBvPW4uXyRBQTtmb3IoO28hPT10Oyl7Y29uc3QgdD1vLm5leHRTaWJsaW5nO2UuaW5zZXJ0QmVmb3JlKG8sbCksbz10fX19cmV0dXJuIG59LHY9KG8sdCxpPW8pPT4oby5fJEFJKHQsaSksbyksdT17fSxtPShvLHQ9dSk9Pm8uXyRBSD10LHA9bz0+by5fJEFILE09bz0+e28uXyRBUD8uKCExLCEwKTtsZXQgdD1vLl8kQUE7Y29uc3QgaT1vLl8kQUIubmV4dFNpYmxpbmc7Zm9yKDt0IT09aTspe2NvbnN0IG89dC5uZXh0U2libGluZzt0LnJlbW92ZSgpLHQ9b319LGg9bz0+e28uXyRBUigpfTtleHBvcnR7biBhcyBUZW1wbGF0ZVJlc3VsdFR5cGUsaCBhcyBjbGVhclBhcnQscCBhcyBnZXRDb21taXR0ZWRWYWx1ZSxkIGFzIGdldERpcmVjdGl2ZUNsYXNzLHIgYXMgaW5zZXJ0UGFydCxsIGFzIGlzQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdCxjIGFzIGlzRGlyZWN0aXZlUmVzdWx0LGkgYXMgaXNQcmltaXRpdmUsZiBhcyBpc1NpbmdsZUV4cHJlc3Npb24sZSBhcyBpc1RlbXBsYXRlUmVzdWx0LE0gYXMgcmVtb3ZlUGFydCx2IGFzIHNldENoaWxkUGFydFZhbHVlLG0gYXMgc2V0Q29tbWl0dGVkVmFsdWV9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlyZWN0aXZlLWhlbHBlcnMuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuaW1wb3J0IHtcbiAgXyRMSCxcbiAgUGFydCxcbiAgRGlyZWN0aXZlUGFyZW50LFxuICBDb21waWxlZFRlbXBsYXRlUmVzdWx0LFxuICBNYXliZUNvbXBpbGVkVGVtcGxhdGVSZXN1bHQsXG4gIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCxcbn0gZnJvbSAnLi9saXQtaHRtbC5qcyc7XG5pbXBvcnQge1xuICBEaXJlY3RpdmVSZXN1bHQsXG4gIERpcmVjdGl2ZUNsYXNzLFxuICBQYXJ0SW5mbyxcbiAgQXR0cmlidXRlUGFydEluZm8sXG59IGZyb20gJy4vZGlyZWN0aXZlLmpzJztcbnR5cGUgUHJpbWl0aXZlID0gbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4gfCBudW1iZXIgfCBzdHJpbmcgfCBzeW1ib2wgfCBiaWdpbnQ7XG5cbmNvbnN0IHtfQ2hpbGRQYXJ0OiBDaGlsZFBhcnR9ID0gXyRMSDtcblxudHlwZSBDaGlsZFBhcnQgPSBJbnN0YW5jZVR5cGU8dHlwZW9mIENoaWxkUGFydD47XG5cbmNvbnN0IEVOQUJMRV9TSEFEWURPTV9OT1BBVENIID0gdHJ1ZTtcblxuY29uc3Qgd3JhcCA9XG4gIEVOQUJMRV9TSEFEWURPTV9OT1BBVENIICYmXG4gIHdpbmRvdy5TaGFkeURPTT8uaW5Vc2UgJiZcbiAgd2luZG93LlNoYWR5RE9NPy5ub1BhdGNoID09PSB0cnVlXG4gICAgPyB3aW5kb3cuU2hhZHlET00hLndyYXBcbiAgICA6IChub2RlOiBOb2RlKSA9PiBub2RlO1xuXG4vKipcbiAqIFRlc3RzIGlmIGEgdmFsdWUgaXMgYSBwcmltaXRpdmUgdmFsdWUuXG4gKlxuICogU2VlIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXR5cGVvZi1vcGVyYXRvclxuICovXG5leHBvcnQgY29uc3QgaXNQcmltaXRpdmUgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBQcmltaXRpdmUgPT5cbiAgdmFsdWUgPT09IG51bGwgfHwgKHR5cGVvZiB2YWx1ZSAhPSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUgIT0gJ2Z1bmN0aW9uJyk7XG5cbmV4cG9ydCBjb25zdCBUZW1wbGF0ZVJlc3VsdFR5cGUgPSB7XG4gIEhUTUw6IDEsXG4gIFNWRzogMixcbiAgTUFUSE1MOiAzLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgVGVtcGxhdGVSZXN1bHRUeXBlID1cbiAgKHR5cGVvZiBUZW1wbGF0ZVJlc3VsdFR5cGUpW2tleW9mIHR5cGVvZiBUZW1wbGF0ZVJlc3VsdFR5cGVdO1xuXG50eXBlIElzVGVtcGxhdGVSZXN1bHQgPSB7XG4gICh2YWw6IHVua25vd24pOiB2YWwgaXMgTWF5YmVDb21waWxlZFRlbXBsYXRlUmVzdWx0O1xuICA8VCBleHRlbmRzIFRlbXBsYXRlUmVzdWx0VHlwZT4oXG4gICAgdmFsOiB1bmtub3duLFxuICAgIHR5cGU6IFRcbiAgKTogdmFsIGlzIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPjtcbn07XG5cbi8qKlxuICogVGVzdHMgaWYgYSB2YWx1ZSBpcyBhIFRlbXBsYXRlUmVzdWx0IG9yIGEgQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzVGVtcGxhdGVSZXN1bHQ6IElzVGVtcGxhdGVSZXN1bHQgPSAoXG4gIHZhbHVlOiB1bmtub3duLFxuICB0eXBlPzogVGVtcGxhdGVSZXN1bHRUeXBlXG4pOiB2YWx1ZSBpcyBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHQgPT5cbiAgdHlwZSA9PT0gdW5kZWZpbmVkXG4gICAgPyAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgICAgKHZhbHVlIGFzIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCk/LlsnXyRsaXRUeXBlJCddICE9PSB1bmRlZmluZWRcbiAgICA6ICh2YWx1ZSBhcyBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHQpPy5bJ18kbGl0VHlwZSQnXSA9PT0gdHlwZTtcblxuLyoqXG4gKiBUZXN0cyBpZiBhIHZhbHVlIGlzIGEgQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdCA9IChcbiAgdmFsdWU6IHVua25vd25cbik6IHZhbHVlIGlzIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQgPT4ge1xuICByZXR1cm4gKHZhbHVlIGFzIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQpPy5bJ18kbGl0VHlwZSQnXT8uaCAhPSBudWxsO1xufTtcblxuLyoqXG4gKiBUZXN0cyBpZiBhIHZhbHVlIGlzIGEgRGlyZWN0aXZlUmVzdWx0LlxuICovXG5leHBvcnQgY29uc3QgaXNEaXJlY3RpdmVSZXN1bHQgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBEaXJlY3RpdmVSZXN1bHQgPT5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdCk/LlsnXyRsaXREaXJlY3RpdmUkJ10gIT09IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIERpcmVjdGl2ZSBjbGFzcyBmb3IgYSBEaXJlY3RpdmVSZXN1bHRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpcmVjdGl2ZUNsYXNzID0gKHZhbHVlOiB1bmtub3duKTogRGlyZWN0aXZlQ2xhc3MgfCB1bmRlZmluZWQgPT5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdCk/LlsnXyRsaXREaXJlY3RpdmUkJ107XG5cbi8qKlxuICogVGVzdHMgd2hldGhlciBhIHBhcnQgaGFzIG9ubHkgYSBzaW5nbGUtZXhwcmVzc2lvbiB3aXRoIG5vIHN0cmluZ3MgdG9cbiAqIGludGVycG9sYXRlIGJldHdlZW4uXG4gKlxuICogT25seSBBdHRyaWJ1dGVQYXJ0IGFuZCBQcm9wZXJ0eVBhcnQgY2FuIGhhdmUgbXVsdGlwbGUgZXhwcmVzc2lvbnMuXG4gKiBNdWx0aS1leHByZXNzaW9uIHBhcnRzIGhhdmUgYSBgc3RyaW5nc2AgcHJvcGVydHkgYW5kIHNpbmdsZS1leHByZXNzaW9uXG4gKiBwYXJ0cyBkbyBub3QuXG4gKi9cbmV4cG9ydCBjb25zdCBpc1NpbmdsZUV4cHJlc3Npb24gPSAocGFydDogUGFydEluZm8pID0+XG4gIChwYXJ0IGFzIEF0dHJpYnV0ZVBhcnRJbmZvKS5zdHJpbmdzID09PSB1bmRlZmluZWQ7XG5cbmNvbnN0IGNyZWF0ZU1hcmtlciA9ICgpID0+IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpO1xuXG4vKipcbiAqIEluc2VydHMgYSBDaGlsZFBhcnQgaW50byB0aGUgZ2l2ZW4gY29udGFpbmVyIENoaWxkUGFydCdzIERPTSwgZWl0aGVyIGF0IHRoZVxuICogZW5kIG9mIHRoZSBjb250YWluZXIgQ2hpbGRQYXJ0LCBvciBiZWZvcmUgdGhlIG9wdGlvbmFsIGByZWZQYXJ0YC5cbiAqXG4gKiBUaGlzIGRvZXMgbm90IGFkZCB0aGUgcGFydCB0byB0aGUgY29udGFpbmVyUGFydCdzIGNvbW1pdHRlZCB2YWx1ZS4gVGhhdCBtdXN0XG4gKiBiZSBkb25lIGJ5IGNhbGxlcnMuXG4gKlxuICogQHBhcmFtIGNvbnRhaW5lclBhcnQgUGFydCB3aXRoaW4gd2hpY2ggdG8gYWRkIHRoZSBuZXcgQ2hpbGRQYXJ0XG4gKiBAcGFyYW0gcmVmUGFydCBQYXJ0IGJlZm9yZSB3aGljaCB0byBhZGQgdGhlIG5ldyBDaGlsZFBhcnQ7IHdoZW4gb21pdHRlZCB0aGVcbiAqICAgICBwYXJ0IGFkZGVkIHRvIHRoZSBlbmQgb2YgdGhlIGBjb250YWluZXJQYXJ0YFxuICogQHBhcmFtIHBhcnQgUGFydCB0byBpbnNlcnQsIG9yIHVuZGVmaW5lZCB0byBjcmVhdGUgYSBuZXcgcGFydFxuICovXG5leHBvcnQgY29uc3QgaW5zZXJ0UGFydCA9IChcbiAgY29udGFpbmVyUGFydDogQ2hpbGRQYXJ0LFxuICByZWZQYXJ0PzogQ2hpbGRQYXJ0LFxuICBwYXJ0PzogQ2hpbGRQYXJ0XG4pOiBDaGlsZFBhcnQgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSB3cmFwKGNvbnRhaW5lclBhcnQuXyRzdGFydE5vZGUpLnBhcmVudE5vZGUhO1xuXG4gIGNvbnN0IHJlZk5vZGUgPVxuICAgIHJlZlBhcnQgPT09IHVuZGVmaW5lZCA/IGNvbnRhaW5lclBhcnQuXyRlbmROb2RlIDogcmVmUGFydC5fJHN0YXJ0Tm9kZTtcblxuICBpZiAocGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3Qgc3RhcnROb2RlID0gd3JhcChjb250YWluZXIpLmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgcmVmTm9kZSk7XG4gICAgY29uc3QgZW5kTm9kZSA9IHdyYXAoY29udGFpbmVyKS5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIHJlZk5vZGUpO1xuICAgIHBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgc3RhcnROb2RlLFxuICAgICAgZW5kTm9kZSxcbiAgICAgIGNvbnRhaW5lclBhcnQsXG4gICAgICBjb250YWluZXJQYXJ0Lm9wdGlvbnNcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGVuZE5vZGUgPSB3cmFwKHBhcnQuXyRlbmROb2RlISkubmV4dFNpYmxpbmc7XG4gICAgY29uc3Qgb2xkUGFyZW50ID0gcGFydC5fJHBhcmVudDtcbiAgICBjb25zdCBwYXJlbnRDaGFuZ2VkID0gb2xkUGFyZW50ICE9PSBjb250YWluZXJQYXJ0O1xuICAgIGlmIChwYXJlbnRDaGFuZ2VkKSB7XG4gICAgICBwYXJ0Ll8kcmVwYXJlbnREaXNjb25uZWN0YWJsZXM/Lihjb250YWluZXJQYXJ0KTtcbiAgICAgIC8vIE5vdGUgdGhhdCBhbHRob3VnaCBgXyRyZXBhcmVudERpc2Nvbm5lY3RhYmxlc2AgdXBkYXRlcyB0aGUgcGFydCdzXG4gICAgICAvLyBgXyRwYXJlbnRgIHJlZmVyZW5jZSBhZnRlciB1bmxpbmtpbmcgZnJvbSBpdHMgY3VycmVudCBwYXJlbnQsIHRoYXRcbiAgICAgIC8vIG1ldGhvZCBvbmx5IGV4aXN0cyBpZiBEaXNjb25uZWN0YWJsZXMgYXJlIHByZXNlbnQsIHNvIHdlIG5lZWQgdG9cbiAgICAgIC8vIHVuY29uZGl0aW9uYWxseSBzZXQgaXQgaGVyZVxuICAgICAgcGFydC5fJHBhcmVudCA9IGNvbnRhaW5lclBhcnQ7XG4gICAgICAvLyBTaW5jZSB0aGUgXyRpc0Nvbm5lY3RlZCBnZXR0ZXIgaXMgc29tZXdoYXQgY29zdGx5LCBvbmx5XG4gICAgICAvLyByZWFkIGl0IG9uY2Ugd2Uga25vdyB0aGUgc3VidHJlZSBoYXMgZGlyZWN0aXZlcyB0aGF0IG5lZWRcbiAgICAgIC8vIHRvIGJlIG5vdGlmaWVkXG4gICAgICBsZXQgbmV3Q29ubmVjdGlvblN0YXRlO1xuICAgICAgaWYgKFxuICAgICAgICBwYXJ0Ll8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAobmV3Q29ubmVjdGlvblN0YXRlID0gY29udGFpbmVyUGFydC5fJGlzQ29ubmVjdGVkKSAhPT1cbiAgICAgICAgICBvbGRQYXJlbnQhLl8kaXNDb25uZWN0ZWRcbiAgICAgICkge1xuICAgICAgICBwYXJ0Ll8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQobmV3Q29ubmVjdGlvblN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuZE5vZGUgIT09IHJlZk5vZGUgfHwgcGFyZW50Q2hhbmdlZCkge1xuICAgICAgbGV0IHN0YXJ0OiBOb2RlIHwgbnVsbCA9IHBhcnQuXyRzdGFydE5vZGU7XG4gICAgICB3aGlsZSAoc3RhcnQgIT09IGVuZE5vZGUpIHtcbiAgICAgICAgY29uc3QgbjogTm9kZSB8IG51bGwgPSB3cmFwKHN0YXJ0ISkubmV4dFNpYmxpbmc7XG4gICAgICAgIHdyYXAoY29udGFpbmVyKS5pbnNlcnRCZWZvcmUoc3RhcnQhLCByZWZOb2RlKTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0O1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiBhIFBhcnQuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCB0byBzZXQvdXBkYXRlIHRoZSB2YWx1ZSBvZiB1c2VyLWNyZWF0ZWRcbiAqIHBhcnRzIChpLmUuIHRob3NlIGNyZWF0ZWQgdXNpbmcgYGluc2VydFBhcnRgKTsgaXQgc2hvdWxkIG5vdCBiZSB1c2VkXG4gKiBieSBkaXJlY3RpdmVzIHRvIHNldCB0aGUgdmFsdWUgb2YgdGhlIGRpcmVjdGl2ZSdzIGNvbnRhaW5lciBwYXJ0LiBEaXJlY3RpdmVzXG4gKiBzaG91bGQgcmV0dXJuIGEgdmFsdWUgZnJvbSBgdXBkYXRlYC9gcmVuZGVyYCB0byB1cGRhdGUgdGhlaXIgcGFydCBzdGF0ZS5cbiAqXG4gKiBGb3IgZGlyZWN0aXZlcyB0aGF0IHJlcXVpcmUgc2V0dGluZyB0aGVpciBwYXJ0IHZhbHVlIGFzeW5jaHJvbm91c2x5LCB0aGV5XG4gKiBzaG91bGQgZXh0ZW5kIGBBc3luY0RpcmVjdGl2ZWAgYW5kIGNhbGwgYHRoaXMuc2V0VmFsdWUoKWAuXG4gKlxuICogQHBhcmFtIHBhcnQgUGFydCB0byBzZXRcbiAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSB0byBzZXRcbiAqIEBwYXJhbSBpbmRleCBGb3IgYEF0dHJpYnV0ZVBhcnRgcywgdGhlIGluZGV4IHRvIHNldFxuICogQHBhcmFtIGRpcmVjdGl2ZVBhcmVudCBVc2VkIGludGVybmFsbHk7IHNob3VsZCBub3QgYmUgc2V0IGJ5IHVzZXJcbiAqL1xuZXhwb3J0IGNvbnN0IHNldENoaWxkUGFydFZhbHVlID0gPFQgZXh0ZW5kcyBDaGlsZFBhcnQ+KFxuICBwYXJ0OiBULFxuICB2YWx1ZTogdW5rbm93bixcbiAgZGlyZWN0aXZlUGFyZW50OiBEaXJlY3RpdmVQYXJlbnQgPSBwYXJ0XG4pOiBUID0+IHtcbiAgcGFydC5fJHNldFZhbHVlKHZhbHVlLCBkaXJlY3RpdmVQYXJlbnQpO1xuICByZXR1cm4gcGFydDtcbn07XG5cbi8vIEEgc2VudGluZWwgdmFsdWUgdGhhdCBjYW4gbmV2ZXIgYXBwZWFyIGFzIGEgcGFydCB2YWx1ZSBleGNlcHQgd2hlbiBzZXQgYnlcbi8vIGxpdmUoKS4gVXNlZCB0byBmb3JjZSBhIGRpcnR5LWNoZWNrIHRvIGZhaWwgYW5kIGNhdXNlIGEgcmUtcmVuZGVyLlxuY29uc3QgUkVTRVRfVkFMVUUgPSB7fTtcblxuLyoqXG4gKiBTZXRzIHRoZSBjb21taXR0ZWQgdmFsdWUgb2YgYSBDaGlsZFBhcnQgZGlyZWN0bHkgd2l0aG91dCB0cmlnZ2VyaW5nIHRoZVxuICogY29tbWl0IHN0YWdlIG9mIHRoZSBwYXJ0LlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGluIGNhc2VzIHdoZXJlIGEgZGlyZWN0aXZlIG5lZWRzIHRvIHVwZGF0ZSB0aGUgcGFydCBzdWNoXG4gKiB0aGF0IHRoZSBuZXh0IHVwZGF0ZSBkZXRlY3RzIGEgdmFsdWUgY2hhbmdlIG9yIG5vdC4gV2hlbiB2YWx1ZSBpcyBvbWl0dGVkLFxuICogdGhlIG5leHQgdXBkYXRlIHdpbGwgYmUgZ3VhcmFudGVlZCB0byBiZSBkZXRlY3RlZCBhcyBhIGNoYW5nZS5cbiAqXG4gKiBAcGFyYW0gcGFydFxuICogQHBhcmFtIHZhbHVlXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRDb21taXR0ZWRWYWx1ZSA9IChwYXJ0OiBQYXJ0LCB2YWx1ZTogdW5rbm93biA9IFJFU0VUX1ZBTFVFKSA9PlxuICAocGFydC5fJGNvbW1pdHRlZFZhbHVlID0gdmFsdWUpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGNvbW1pdHRlZCB2YWx1ZSBvZiBhIENoaWxkUGFydC5cbiAqXG4gKiBUaGUgY29tbWl0dGVkIHZhbHVlIGlzIHVzZWQgZm9yIGNoYW5nZSBkZXRlY3Rpb24gYW5kIGVmZmljaWVudCB1cGRhdGVzIG9mXG4gKiB0aGUgcGFydC4gSXQgY2FuIGRpZmZlciBmcm9tIHRoZSB2YWx1ZSBzZXQgYnkgdGhlIHRlbXBsYXRlIG9yIGRpcmVjdGl2ZSBpblxuICogY2FzZXMgd2hlcmUgdGhlIHRlbXBsYXRlIHZhbHVlIGlzIHRyYW5zZm9ybWVkIGJlZm9yZSBiZWluZyBjb21taXR0ZWQuXG4gKlxuICogLSBgVGVtcGxhdGVSZXN1bHRgcyBhcmUgY29tbWl0dGVkIGFzIGEgYFRlbXBsYXRlSW5zdGFuY2VgXG4gKiAtIEl0ZXJhYmxlcyBhcmUgY29tbWl0dGVkIGFzIGBBcnJheTxDaGlsZFBhcnQ+YFxuICogLSBBbGwgb3RoZXIgdHlwZXMgYXJlIGNvbW1pdHRlZCBhcyB0aGUgdGVtcGxhdGUgdmFsdWUgb3IgdmFsdWUgcmV0dXJuZWQgb3JcbiAqICAgc2V0IGJ5IGEgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSBwYXJ0XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDb21taXR0ZWRWYWx1ZSA9IChwYXJ0OiBDaGlsZFBhcnQpID0+IHBhcnQuXyRjb21taXR0ZWRWYWx1ZTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgQ2hpbGRQYXJ0IGZyb20gdGhlIERPTSwgaW5jbHVkaW5nIGFueSBvZiBpdHMgY29udGVudC5cbiAqXG4gKiBAcGFyYW0gcGFydCBUaGUgUGFydCB0byByZW1vdmVcbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZVBhcnQgPSAocGFydDogQ2hpbGRQYXJ0KSA9PiB7XG4gIHBhcnQuXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZD8uKGZhbHNlLCB0cnVlKTtcbiAgbGV0IHN0YXJ0OiBDaGlsZE5vZGUgfCBudWxsID0gcGFydC5fJHN0YXJ0Tm9kZTtcbiAgY29uc3QgZW5kOiBDaGlsZE5vZGUgfCBudWxsID0gd3JhcChwYXJ0Ll8kZW5kTm9kZSEpLm5leHRTaWJsaW5nO1xuICB3aGlsZSAoc3RhcnQgIT09IGVuZCkge1xuICAgIGNvbnN0IG46IENoaWxkTm9kZSB8IG51bGwgPSB3cmFwKHN0YXJ0ISkubmV4dFNpYmxpbmc7XG4gICAgKHdyYXAoc3RhcnQhKSBhcyBDaGlsZE5vZGUpLnJlbW92ZSgpO1xuICAgIHN0YXJ0ID0gbjtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNsZWFyUGFydCA9IChwYXJ0OiBDaGlsZFBhcnQpID0+IHtcbiAgcGFydC5fJGNsZWFyKCk7XG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5mdW5jdGlvbiBuKG4scix0KXtyZXR1cm4gbj9yKG4pOnQ/LihuKX1leHBvcnR7biBhcyB3aGVufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdoZW4uanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxudHlwZSBGYWxzeSA9IG51bGwgfCB1bmRlZmluZWQgfCBmYWxzZSB8IDAgfCAtMCB8IDBuIHwgJyc7XG5cbi8qKlxuICogV2hlbiBgY29uZGl0aW9uYCBpcyB0cnVlLCByZXR1cm5zIHRoZSByZXN1bHQgb2YgY2FsbGluZyBgdHJ1ZUNhc2UoKWAsIGVsc2VcbiAqIHJldHVybnMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBmYWxzZUNhc2UoKWAgaWYgYGZhbHNlQ2FzZWAgaXMgZGVmaW5lZC5cbiAqXG4gKiBUaGlzIGlzIGEgY29udmVuaWVuY2Ugd3JhcHBlciBhcm91bmQgYSB0ZXJuYXJ5IGV4cHJlc3Npb24gdGhhdCBtYWtlcyBpdCBhXG4gKiBsaXR0bGUgbmljZXIgdG8gd3JpdGUgYW4gaW5saW5lIGNvbmRpdGlvbmFsIHdpdGhvdXQgYW4gZWxzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiByZW5kZXIoKSB7XG4gKiAgIHJldHVybiBodG1sYFxuICogICAgICR7d2hlbih0aGlzLnVzZXIsICgpID0+IGh0bWxgVXNlcjogJHt0aGlzLnVzZXIudXNlcm5hbWV9YCwgKCkgPT4gaHRtbGBTaWduIEluLi4uYCl9XG4gKiAgIGA7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW48QyBleHRlbmRzIEZhbHN5LCBULCBGID0gdW5kZWZpbmVkPihcbiAgY29uZGl0aW9uOiBDLFxuICB0cnVlQ2FzZTogKGM6IEMpID0+IFQsXG4gIGZhbHNlQ2FzZT86IChjOiBDKSA9PiBGXG4pOiBGO1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW48QywgVCwgRj4oXG4gIGNvbmRpdGlvbjogQyBleHRlbmRzIEZhbHN5ID8gbmV2ZXIgOiBDLFxuICB0cnVlQ2FzZTogKGM6IEMpID0+IFQsXG4gIGZhbHNlQ2FzZT86IChjOiBDKSA9PiBGXG4pOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW48QywgVCwgRiA9IHVuZGVmaW5lZD4oXG4gIGNvbmRpdGlvbjogQyxcbiAgdHJ1ZUNhc2U6IChjOiBFeGNsdWRlPEMsIEZhbHN5PikgPT4gVCxcbiAgZmFsc2VDYXNlPzogKGM6IEV4dHJhY3Q8QywgRmFsc3k+KSA9PiBGXG4pOiBDIGV4dGVuZHMgRmFsc3kgPyBGIDogVDtcbmV4cG9ydCBmdW5jdGlvbiB3aGVuKFxuICBjb25kaXRpb246IHVua25vd24sXG4gIHRydWVDYXNlOiAoYzogdW5rbm93bikgPT4gdW5rbm93bixcbiAgZmFsc2VDYXNlPzogKGM6IHVua25vd24pID0+IHVua25vd25cbik6IHVua25vd24ge1xuICByZXR1cm4gY29uZGl0aW9uID8gdHJ1ZUNhc2UoY29uZGl0aW9uKSA6IGZhbHNlQ2FzZT8uKGNvbmRpdGlvbik7XG59XG4iLCJpbXBvcnQge0JJTkRfQVRUUklCVVRFfSBmcm9tIFwiI2N1c3RvbWFyeS9iaW5kL0F0dHJpYnV0ZV9iaW5kLmpzXCI7XG5pbXBvcnQge0FkZEV2ZW50TGlzdGVuZXJ9IGZyb20gXCIjY3VzdG9tYXJ5L2V2ZW50cy9BZGRFdmVudExpc3RlbmVyLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlCaW5kIHtcblx0Y29uc3RydWN0b3IoY3VzdG9tRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcblx0XHR0aGlzLmN1c3RvbUVsZW1lbnQgPSBjdXN0b21FbGVtZW50O1xuXHR9XG5cdHByaXZhdGUgcmVhZG9ubHkgY3VzdG9tRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cblx0aW5zdGFsbEV2ZW50TGlzdGVuZXJzRm9yQmluZGluZ3MoYXR0cmlidXRlczogc3RyaW5nW10pIHtcblx0XHRmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG5cdFx0XHQgbmV3IEFkZEV2ZW50TGlzdGVuZXIoe1xuXHRcdFx0XHQgY3VzdG9tRWxlbWVudDogdGhpcy5jdXN0b21FbGVtZW50LFxuXHRcdFx0XHQgc2VsZWN0b3I6IGBbJHtCSU5EX0FUVFJJQlVURX09XCIke2F0dHJpYnV0ZX1cIl1gLFxuXHRcdFx0XHQgdHlwZTogJ2lucHV0Jyxcblx0XHRcdFx0IGxpc3RlbmVyOiAoZWw6IEhUTUxFbGVtZW50LCBlOiBFdmVudCkgPT5cblx0XHRcdFx0XHQgdGhpcy5tYXRjaEF0dHJpYnV0ZVRvSW5wdXQoZWwsIGF0dHJpYnV0ZSwgZSksXG5cdFx0XHQgfSkuZXhlY3V0ZSgpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgbWF0Y2hBdHRyaWJ1dGVUb0lucHV0KFxuXHRcdGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuXHRcdGF0dHJpYnV0ZTogc3RyaW5nLFxuXHRcdGU6IEV2ZW50LFxuXHQpIHtcblx0XHRjb25zdCBpbnB1dDogSFRNTElucHV0RWxlbWVudCA9IDxIVE1MSW5wdXRFbGVtZW50PmUuY29tcG9zZWRQYXRoKClbMF07XG5cdFx0KDxhbnk+ZWxlbWVudClbYXR0cmlidXRlXSA9IGlucHV0LnR5cGUgPT09ICdjaGVja2JveCcgPyAoaW5wdXQuY2hlY2tlZCA/ICd0cnVlJyA6ICdmYWxzZScpIDogaW5wdXQudmFsdWU7XG5cdH1cbn1cbiIsImV4cG9ydCBjbGFzcyBBZGRFdmVudExpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3RvclxuICAgIChcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiB7XG4gICAgICAgICAgICBjdXN0b21FbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIHNlbGVjdG9yPzogc3RyaW5nLFxuICAgICAgICAgICAgdHlwZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGlzdGVuZXI6IChlbDogSFRNTEVsZW1lbnQsIGU6IEV2ZW50LCB0OiBFdmVudFRhcmdldCkgPT4gdm9pZCxcbiAgICAgICAgfVxuICAgICkge31cblxuICAgIGV4ZWN1dGUoKSB7XG4gICAgICAgIGNvbnN0IHtjdXN0b21FbGVtZW50LCBsaXN0ZW5lcn0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLm9wdGlvbnMuc2VsZWN0b3I7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLm9wdGlvbnMudHlwZSA/PyBERUZBVUxUX0VWRU5UX1RZUEU7XG5cbiAgICAgICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICAgICAgY3VzdG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgKGV2ZW50OiBFdmVudCkgPT4gbGlzdGVuZXIoY3VzdG9tRWxlbWVudCwgZXZlbnQsIGV2ZW50LnRhcmdldCEpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VzdG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIChldmVudDogRXZlbnQpID0+IHRoaXMuZG9JZkV2ZW50RGVsZWdhdGlvbk1hdGNoZXMoZXZlbnQsIHNlbGVjdG9yLCBsaXN0ZW5lciwgY3VzdG9tRWxlbWVudClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRvSWZFdmVudERlbGVnYXRpb25NYXRjaGVzKFxuICAgICAgICBldmVudDogRXZlbnQsXG4gICAgICAgIHNlbGVjdG9yOiBzdHJpbmcsXG4gICAgICAgIGxpc3RlbmVyOiAoZWw6IEhUTUxFbGVtZW50LCBlOiBFdmVudCwgdGFyZ2V0OiBFdmVudFRhcmdldCkgPT4gdm9pZCxcbiAgICAgICAgY3VzdG9tRWxlbWVudDogSFRNTEVsZW1lbnRcbiAgICApIHtcbiAgICAgICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gY29tcG9zZWRQYXRoWzBdO1xuXG4gICAgICAgIGNvbnN0IG1hdGNoZXNFdmVudERlbGVnYXRpb24gPVxuICAgICAgICAgICAgdGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudFxuICAgICAgICAgICAgICAgID8gISF0YXJnZXQuY2xvc2VzdChzZWxlY3RvcilcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuXG4gICAgICAgIGlmIChtYXRjaGVzRXZlbnREZWxlZ2F0aW9uKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihjdXN0b21FbGVtZW50LCBldmVudCwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgREVGQVVMVF9FVkVOVF9UWVBFID0gJ2NsaWNrJztcbiIsImltcG9ydCB7UHJvcGVydHlWYWx1ZXN9IGZyb20gXCIjY3VzdG9tYXJ5L2xpZmVjeWNsZS9jaGFuZ2VkUHJvcGVydGllcy9Qcm9wZXJ0eVZhbHVlc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlIb29rc30gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5SG9va3NcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeUNoYW5nZXNfZmlyc3RVcGRhdGVkIHtcblx0Y29uc3RydWN0b3IoXG5cdFx0ZWxlbWVudDogSFRNTEVsZW1lbnQsXG5cdFx0aG9va3M6IEN1c3RvbWFyeUhvb2tzPGFueT4gfCB1bmRlZmluZWRcblx0KSB7XG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0XHR0aGlzLmhvb2tzID0gaG9va3M7XG5cdH1cblx0cHJpdmF0ZSByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSByZWFkb25seSBob29rczogQ3VzdG9tYXJ5SG9va3M8YW55PiB8IHVuZGVmaW5lZDtcblxuXHRleGVjdXRlX2hvb2tzX2NoYW5nZXNfZmlyc3RVcGRhdGVkKFxuXHRcdGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlc1xuXHQpIHtcblx0XHRjb25zdCBjaGFuZ2VzID0gdGhpcy5ob29rcz8uY2hhbmdlcztcblx0XHRpZiAoIShjaGFuZ2VzIGluc3RhbmNlb2YgQXJyYXkpKSByZXR1cm47XG5cdFx0Zm9yIChjb25zdCBjaGFuZ2Ugb2YgY2hhbmdlcykge1xuXHRcdFx0Y29uc3Qge25hbWUsIGZpcnN0VXBkYXRlZH0gPSBjaGFuZ2U7XG5cdFx0XHRpZiAoZmlyc3RVcGRhdGVkICYmIGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuXHRcdFx0XHRmaXJzdFVwZGF0ZWQoXG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50LFxuXHRcdFx0XHRcdCh0aGlzLmVsZW1lbnQgYXMgYW55KVtuYW1lXSxcblx0XHRcdFx0XHRjaGFuZ2VkUHJvcGVydGllcy5nZXQobmFtZSlcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0iLCJpbXBvcnQge1Byb3BlcnR5VmFsdWVzfSBmcm9tIFwiI2N1c3RvbWFyeS9saWZlY3ljbGUvY2hhbmdlZFByb3BlcnRpZXMvUHJvcGVydHlWYWx1ZXMuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5SG9va3N9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeUhvb2tzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlDaGFuZ2VzX3VwZGF0ZWQge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRlbGVtZW50OiBIVE1MRWxlbWVudCxcblx0XHRob29rczogQ3VzdG9tYXJ5SG9va3M8YW55PiB8IHVuZGVmaW5lZFxuXHQpIHtcblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXHRcdHRoaXMuaG9va3MgPSBob29rcztcblx0fVxuXHRwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIHJlYWRvbmx5IGhvb2tzOiBDdXN0b21hcnlIb29rczxhbnk+IHwgdW5kZWZpbmVkO1xuXG5cdGV4ZWN1dGVfaG9va3NfY2hhbmdlc191cGRhdGVkKFxuXHRcdGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlc1xuXHQpIHtcblx0XHRjb25zdCBjaGFuZ2VzID0gdGhpcy5ob29rcz8uY2hhbmdlcztcblx0XHRpZiAoIShjaGFuZ2VzIGluc3RhbmNlb2YgQXJyYXkpKSByZXR1cm47XG5cblx0XHRmb3IgKGNvbnN0IGNoYW5nZSBvZiBjaGFuZ2VzKSB7XG5cdFx0XHRjb25zdCB7bmFtZSwgdXBkYXRlZH0gPSBjaGFuZ2U7XG5cdFx0XHRpZiAodXBkYXRlZCAmJiBjaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcblx0XHRcdFx0dXBkYXRlZChcblx0XHRcdFx0XHR0aGlzLmVsZW1lbnQsXG5cdFx0XHRcdFx0KHRoaXMuZWxlbWVudCBhcyBhbnkpW25hbWVdLFxuXHRcdFx0XHRcdGNoYW5nZWRQcm9wZXJ0aWVzLmdldChuYW1lKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSIsImltcG9ydCB7UHJvcGVydHlWYWx1ZXN9IGZyb20gXCIjY3VzdG9tYXJ5L2xpZmVjeWNsZS9jaGFuZ2VkUHJvcGVydGllcy9Qcm9wZXJ0eVZhbHVlc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlIb29rc30gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5SG9va3NcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeUNoYW5nZXNfd2lsbFVwZGF0ZSB7XG5cdGNvbnN0cnVjdG9yKFxuXHRcdGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuXHRcdGhvb2tzOiBDdXN0b21hcnlIb29rczxhbnk+IHwgdW5kZWZpbmVkXG5cdCkge1xuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFx0dGhpcy5ob29rcyA9IGhvb2tzO1xuXHR9XG5cdHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgcmVhZG9ubHkgaG9va3M6IEN1c3RvbWFyeUhvb2tzPGFueT4gfCB1bmRlZmluZWQ7XG5cblx0ZXhlY3V0ZV9ob29rc19jaGFuZ2VzX3dpbGxVcGRhdGUoXG5cdFx0Y2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzXG5cdCkge1xuXHRcdGNvbnN0IGNoYW5nZXMgPSB0aGlzLmhvb2tzPy5jaGFuZ2VzO1xuXHRcdGlmICghY2hhbmdlcykgcmV0dXJuO1xuXG5cdFx0Y29uc3QgY2hhbmdlc0FycmF5ID0gY2hhbmdlcyBpbnN0YW5jZW9mIEFycmF5ID9cblx0XHRcdGNoYW5nZXNcblx0XHRcdDogT2JqZWN0LmVudHJpZXMoY2hhbmdlcykubWFwKFxuXHRcdFx0XHQoW25hbWUsIHdpbGxVcGRhdGVdKSA9PlxuXHRcdFx0XHRcdCh7bmFtZSwgd2lsbFVwZGF0ZX0pXG5cdFx0XHQpO1xuXG5cdFx0Zm9yIChjb25zdCBjaGFuZ2Ugb2YgY2hhbmdlc0FycmF5KSB7XG5cdFx0XHRjb25zdCB7bmFtZSwgd2lsbFVwZGF0ZX0gPSBjaGFuZ2U7XG5cdFx0XHRpZiAod2lsbFVwZGF0ZSAmJiBjaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcblx0XHRcdFx0d2lsbFVwZGF0ZShcblx0XHRcdFx0XHR0aGlzLmVsZW1lbnQsXG5cdFx0XHRcdFx0KHRoaXMuZWxlbWVudCBhcyBhbnkpW25hbWVdLFxuXHRcdFx0XHRcdGNoYW5nZWRQcm9wZXJ0aWVzLmdldChuYW1lKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSIsImltcG9ydCB7Q3VzdG9tYXJ5SG9va3N9IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeUhvb2tzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlEZXJpdmUge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRlbGVtZW50OiBIVE1MRWxlbWVudCxcblx0XHRob29rczogQ3VzdG9tYXJ5SG9va3M8YW55PiB8IHVuZGVmaW5lZFxuXHQpIHtcblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXHRcdHRoaXMuaG9va3MgPSBob29rcztcblx0fVxuXHRwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIHJlYWRvbmx5IGhvb2tzOiBDdXN0b21hcnlIb29rczxhbnk+IHwgdW5kZWZpbmVkO1xuXG5cdGV4ZWN1dGVfaG9va3NfZGVyaXZlKCkge1xuXHRcdGNvbnN0IGRlcml2ZSA9IHRoaXMuaG9va3M/LmRlcml2ZTtcblx0XHRpZiAoIWRlcml2ZSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgZGVyaXZlQXJyYXkgPSBkZXJpdmUgaW5zdGFuY2VvZiBBcnJheSA/XG5cdFx0XHRkZXJpdmVcblx0XHRcdDogT2JqZWN0LmVudHJpZXMoZGVyaXZlKS5tYXAoXG5cdFx0XHRcdChbbmFtZSwgd2lsbFVwZGF0ZV0pID0+XG5cdFx0XHRcdFx0KHtuYW1lLCB3aWxsVXBkYXRlfSlcblx0XHRcdCk7XG5cblx0XHRmb3IgKGNvbnN0IHtuYW1lLCB3aWxsVXBkYXRlfSBvZiBkZXJpdmVBcnJheSkge1xuXHRcdFx0KHRoaXMuZWxlbWVudCBhcyBhbnkpW25hbWVdID0gd2lsbFVwZGF0ZSh0aGlzLmVsZW1lbnQpO1xuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IHtBZGRFdmVudExpc3RlbmVyfSBmcm9tIFwiI2N1c3RvbWFyeS9ldmVudHMvQWRkRXZlbnRMaXN0ZW5lci5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlIb29rc30gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5SG9va3NcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeUV2ZW50cyB7XG5cdGNvbnN0cnVjdG9yKFxuXHRcdGN1c3RvbUVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuXHRcdGhvb2tzOiBDdXN0b21hcnlIb29rczxhbnk+IHwgdW5kZWZpbmVkXG5cdCkge1xuXHRcdHRoaXMuY3VzdG9tRWxlbWVudCA9IGN1c3RvbUVsZW1lbnQ7XG5cdFx0dGhpcy5ob29rcyA9IGhvb2tzO1xuXHR9XG5cdHByaXZhdGUgcmVhZG9ubHkgY3VzdG9tRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgcmVhZG9ubHkgaG9va3M6IEN1c3RvbWFyeUhvb2tzPGFueT4gfCB1bmRlZmluZWQ7XG5cblx0aW5zdGFsbEV2ZW50TGlzdGVuZXJzKFxuXHQpIHtcblx0XHRjb25zdCBldmVudHMgPSB0aGlzLmhvb2tzPy5ldmVudHM7XG5cdFx0aWYgKCFldmVudHMpIHJldHVybjtcblxuXHRcdGNvbnN0IG9wczogQXJyYXk8QWRkRXZlbnRMaXN0ZW5lcj4gPVxuXHRcdFx0ZXZlbnRzIGluc3RhbmNlb2YgQXJyYXlcblx0XHRcdFx0PyB0aGlzLmV2ZW50c0FycmF5VG9PcHMoZXZlbnRzKVxuXHRcdFx0XHQ6IHRoaXMuZXZlbnRzUmVjb3JkVG9PcHMoZXZlbnRzKTtcblxuXHRcdGZvciAoY29uc3Qgb3Agb2Ygb3BzKSB7XG5cdFx0XHRvcC5leGVjdXRlKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBldmVudHNBcnJheVRvT3BzKFxuXHRcdGV2ZW50czogQXJyYXk8XG5cdFx0XHR7XG5cdFx0XHRcdHNlbGVjdG9yPzogc3RyaW5nO1xuXHRcdFx0XHR0eXBlPzogc3RyaW5nO1xuXHRcdFx0XHRsaXN0ZW5lcjogKGVsOiBIVE1MRWxlbWVudCwgZXZlbnQ6IEV2ZW50LCB0OiBFdmVudFRhcmdldCkgPT4gdm9pZDtcblx0XHRcdH1cblx0XHQ+XG5cdCk6IEFycmF5PEFkZEV2ZW50TGlzdGVuZXI+IHtcblx0XHRyZXR1cm4gZXZlbnRzXG5cdFx0XHQubWFwKGN1c3RvbWFyeUV2ZW50ID0+XG5cdFx0XHRcdG5ldyBBZGRFdmVudExpc3RlbmVyKHtcblx0XHRcdFx0XHRjdXN0b21FbGVtZW50OiB0aGlzLmN1c3RvbUVsZW1lbnQsXG5cdFx0XHRcdFx0c2VsZWN0b3I6IGN1c3RvbWFyeUV2ZW50LnNlbGVjdG9yLFxuXHRcdFx0XHRcdHR5cGU6IGN1c3RvbWFyeUV2ZW50LnR5cGUsXG5cdFx0XHRcdFx0bGlzdGVuZXI6IGN1c3RvbWFyeUV2ZW50Lmxpc3RlbmVyLFxuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgZXZlbnRzUmVjb3JkVG9PcHMoXG5cdFx0ZXZlbnRzOiBSZWNvcmQ8XG5cdFx0XHRzdHJpbmcsXG5cdFx0XHQoZWw6IEhUTUxFbGVtZW50LCBldmVudDogRXZlbnQsIHQ6IEV2ZW50VGFyZ2V0KSA9PiB2b2lkXG5cdFx0PlxuXHQpOiBBcnJheTxBZGRFdmVudExpc3RlbmVyPiB7XG5cdFx0cmV0dXJuIE9iamVjdC5lbnRyaWVzKGV2ZW50cylcblx0XHRcdC5tYXAoKFtzZWxlY3RvciwgbGlzdGVuZXJdKSA9PlxuXHRcdFx0XHRuZXcgQWRkRXZlbnRMaXN0ZW5lcih7XG5cdFx0XHRcdFx0Y3VzdG9tRWxlbWVudDogdGhpcy5jdXN0b21FbGVtZW50LFxuXHRcdFx0XHRcdHNlbGVjdG9yLFxuXHRcdFx0XHRcdHR5cGU6IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRsaXN0ZW5lcixcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn0iLCJpbXBvcnQge1VuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdH0gZnJvbSBcImxpdC1odG1sXCI7XG5pbXBvcnQge2Nob29zZSwgY2xhc3NNYXAsIGh0bWwsIG1hcCwgcmVwZWF0LCBzdHlsZU1hcCwgd2hlbn0gZnJvbSBcIiNjdXN0b21hcnkvbGl0XCI7XG5pbXBvcnQge3JldXNlX2ltbXV0YWJsZV9UZW1wbGF0ZVN0cmluZ3NBcnJheX0gZnJvbSBcIiNjdXN0b21hcnkvcmVuZGVyL3JldXNlX2ltbXV0YWJsZV9UZW1wbGF0ZVN0cmluZ3NBcnJheS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tYXJ5UmVuZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZWxlbWVudDogSFRNTEVsZW1lbnRcbiAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIHJlbmRlcl9saXRfaHRtbF9UZW1wbGF0ZVJlc3VsdChcbiAgICAgICAge2h0bWxTdHJpbmd9OiB7aHRtbFN0cmluZzogc3RyaW5nfVxuICAgICkge1xuICAgICAgICByZXR1cm4gcmVuZGVyX2xpdF9odG1sX1RlbXBsYXRlUmVzdWx0KHRoaXMuZWxlbWVudCwgaHRtbFN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiBsaXQgXCJodG1sXCIgaXMgYSB0YWcgZnVuY3Rpb24uXG4gYXQgcnVudGltZSwgdGhlIHRhZ2dlZCB0ZW1wbGF0ZSBjb21lcyBmcm9tIGh0bWxTdHJpbmcuXG4gb25seSBKUyBjb21waWxhdGlvbiBjYW4gcGFyc2UgdGhlIHRhZ2dlZCB0ZW1wbGF0ZSBpbnRvIGEgcHJvcGVyIGZ1bmN0aW9uIGNhbGwsXG4gc28gd2UgbmVlZCBKUyBjb21waWxhdGlvbiB0byBoYXBwZW4gYXQgcnVudGltZS5cbiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9UZW1wbGF0ZV9saXRlcmFscyN0YWdnZWRfdGVtcGxhdGVzXG4gKi9cbmZ1bmN0aW9uIHJlbmRlcl9saXRfaHRtbF9UZW1wbGF0ZVJlc3VsdChcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBodG1sU3RyaW5nOiBzdHJpbmcsXG4pOiBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHRcbntcbiAgICBmdW5jdGlvbiBjdXN0b21hcnlfbGl0X2h0bWxfdHJhY2soaHRtbF9vdXRwdXQ6IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCk6IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdCB7XG4gICAgICAgIHJldXNlX2ltbXV0YWJsZV9UZW1wbGF0ZVN0cmluZ3NBcnJheShlbGVtZW50LCBodG1sX291dHB1dCk7XG4gICAgICAgIHJldHVybiBodG1sX291dHB1dDtcbiAgICB9XG5cbiAgICBjb25zdCB0aGlzQXJnOiBIVE1MRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oXG4gICAgICAgICdjdXN0b21hcnlfbGl0X2h0bWxfdHJhY2snLFxuICAgICAgICAnaHRtbCcsICdjaG9vc2UnLCAnY2xhc3NNYXAnLCAnbWFwJywgJ3JlcGVhdCcsICdzdHlsZU1hcCcsICd3aGVuJyxcbiAgICAgICAgJ1widXNlIHN0cmljdFwiOyByZXR1cm4gY3VzdG9tYXJ5X2xpdF9odG1sX3RyYWNrKCBodG1sXFxgJyArIGh0bWxTdHJpbmcgKyAnXFxgJyArICcgKSdcbiAgICApO1xuICAgIHJldHVybiBmbi5jYWxsKFxuICAgICAgICB0aGlzQXJnLFxuICAgICAgICBjdXN0b21hcnlfbGl0X2h0bWxfdHJhY2ssXG4gICAgICAgIGh0bWwsIGNob29zZSwgY2xhc3NNYXAsIG1hcCwgcmVwZWF0LCBzdHlsZU1hcCwgd2hlblxuICAgICk7XG59XG4iLCJpbXBvcnQge1VuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdH0gZnJvbSBcImxpdC1odG1sXCI7XG5cbi8qKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2xpdC9saXQvYmxvYi80M2M2MTY4YWNjNGEzMGQ3MDA5MWVlMzBjMzA3ZjY5MmEwMjM4N2Q1L3BhY2thZ2VzL2xpdC1odG1sL3NyYy9saXQtaHRtbC50cyNMNjg4XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGl0L2xpdC9ibG9iLzQzYzYxNjhhY2M0YTMwZDcwMDkxZWUzMGMzMDdmNjkyYTAyMzg3ZDUvcGFja2FnZXMvbGl0LWh0bWwvc3JjL3Rlc3QvbGl0LWh0bWxfdGVzdC50cyNMMzIwMC1MMzIxOFxuICogaHR0cHM6Ly9naXRodWIuY29tL2xpdC9saXQvcHVsbC8zOTg3L2ZpbGVzI2RpZmYtYmVhZDQ1YmI0M2NkYTQ3NGQ5MTY3MDQ1NTBhMWIyNjMyMjY2N2FhNDJiODE0YzQ4MzAwYjA1YmU3OWI5YTdlYlI1OTVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L3B1bGwvMjMwNy9maWxlcyNkaWZmLTkxZDgyNzg2ZDk5ZGExNzE2YjhiMmUwMjUzNGYwZTk2N2U5YjdmMmY1MzlhY2I3YjcxMmY2OTAwMDk0YjYyNjNcbiAqL1xuY29uc3QgS0VZID1cdCdfX2N1c3RvbWFyeV9faW1tdXRhYmxlX1RlbXBsYXRlU3RyaW5nc0FycmF5X2luc3RhbmNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXVzZV9pbW11dGFibGVfVGVtcGxhdGVTdHJpbmdzQXJyYXkoXG4gICAgZWxlbWVudDogYW55LFxuICAgIHRlbXBsYXRlOiBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHRcbilcbntcbiAgICBjb25zdCBpbW11dGFibGVzOiBBcnJheTxUZW1wbGF0ZVN0cmluZ3NBcnJheT4gfCB1bmRlZmluZWQgPSAoPGFueT5lbGVtZW50KVtLRVldO1xuXG4gICAgaWYgKCFpbW11dGFibGVzKSB7XG4gICAgICAgICg8YW55PmVsZW1lbnQpW0tFWV0gPSBbdGVtcGxhdGUuc3RyaW5nc107XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBleGlzdGluZzogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQgPSBpbW11dGFibGVzLmZpbmQoXG4gICAgICAgIHN0cmluZ3MgPT4gYXJlUmVhZG9ubHlBcnJheXNFcXVhbChzdHJpbmdzLCB0ZW1wbGF0ZS5zdHJpbmdzKVxuICAgICk7XG5cbiAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgIGltbXV0YWJsZXMucHVzaCh0ZW1wbGF0ZS5zdHJpbmdzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHJldXNlIHRoZSBvcmlnaW5hbCBhcnJheSBpbnN0YW5jZSwgb3RoZXJ3aXNlIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcmVuZGVyXG4gICAgICAgIHRlbXBsYXRlLnN0cmluZ3MgPSBleGlzdGluZztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFyZVJlYWRvbmx5QXJyYXlzRXF1YWw8VD4oYTogUmVhZG9ubHlBcnJheTxUPiwgYjogUmVhZG9ubHlBcnJheTxUPik6IGJvb2xlYW4ge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4iLCJpbXBvcnQge0N1c3RvbWFyeUhvb2tzfSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlIb29rc1wiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tYXJ5U2xvdHMge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRlbGVtZW50OiBIVE1MRWxlbWVudCxcblx0XHRob29rczogQ3VzdG9tYXJ5SG9va3M8YW55PiB8IHVuZGVmaW5lZFxuXHQpIHtcblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXHRcdHRoaXMuaG9va3MgPSBob29rcztcblx0fVxuXHRwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIHJlYWRvbmx5IGhvb2tzOiBDdXN0b21hcnlIb29rczxhbnk+IHwgdW5kZWZpbmVkO1xuXG5cdGluc3RhbGxfc2xvdGNoYW5nZSgpIHtcblx0XHRjb25zdCBzbG90Y2hhbmdlID1cblx0XHRcdHRoaXMuaG9va3M/LnNsb3RzPy5zbG90Y2hhbmdlO1xuXHRcdGlmICghc2xvdGNoYW5nZSkgcmV0dXJuO1xuXG5cdFx0Ly8gb24gdGhlIGZpcnN0IHJlbmRlciwgZXhlY3V0ZSBvbmNlIGZvciB0aGUgZmlyc3QgdGltZSB3aXRob3V0IGFuIGV2ZW50XG5cdFx0c2xvdGNoYW5nZSh0aGlzLmVsZW1lbnQpO1xuXG5cdFx0LypcbiAgICAgICAgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjczMzI2MzUvc2xvdHMtZG9lcy1ub3Qtd29yay1vbi1hLWh0bWwtd2ViLWNvbXBvbmVudC13aXRob3V0LXNoYWRvdy1kb21cbiAgICAgICAgKi9cblx0XHR0aGlzLmVsZW1lbnQuc2hhZG93Um9vdCEuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdCdzbG90Y2hhbmdlJywgZXZlbnQgPT4gc2xvdGNoYW5nZSh0aGlzLmVsZW1lbnQsIGV2ZW50KVxuXHRcdCk7XG5cdH1cbn0iLCJpbXBvcnQge0N1c3RvbWFyeURlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcbmltcG9ydCB7Y29sbGVjdF9mb250X2xvY2F0aW9ucywgZ2V0X2ltcG9ydF9tZXRhfSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbmUuanNcIjtcbmltcG9ydCB7cmVzb2x2ZUxvY2F0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9leHRlcm5hbC9FeHRlcm5hbExvYWRlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tYXJ5U3R5bGVzaGVldHMge1xuXHRjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdH1cblx0cHJpdmF0ZSByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuXHRsaW5rX2V4dGVybmFsX2Nzc19hbmRfbGlua19mb250cyhcblx0XHRkZWZpbml0aW9uOiBDdXN0b21hcnlEZWZpbml0aW9uPGFueT5cblx0KSB7XG5cdFx0bGlua19leHRlcm5hbF9jc3MoZGVmaW5pdGlvbiwgdGhpcy5lbGVtZW50KTtcblxuXHRcdGxpbmtfZm9udHMoZGVmaW5pdGlvbik7XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlua19leHRlcm5hbF9jc3MoXG5cdGRlZmluaXRpb246IEN1c3RvbWFyeURlZmluaXRpb248YW55PiwgZWxlbWVudDogSFRNTEVsZW1lbnRcbikge1xuXHRpZiAoZGVmaW5pdGlvbi50ZW1wbGF0ZUluRG9jdW1lbnQpIHJldHVybjtcblxuXHRjb25zdCBkZWNsYXJhdGlvbiA9IGRlZmluaXRpb24uZGVjbGFyYXRpb247XG5cblx0aWYgKGRlY2xhcmF0aW9uLmhvb2tzPy5leHRlcm5hbExvYWRlcj8uY3NzX2RvbnQpIHJldHVybjtcblxuXHRjb25zdCBpbXBvcnRfbWV0YSA9IGdldF9pbXBvcnRfbWV0YShkZWNsYXJhdGlvbik7XG5cdGNvbnN0IG5hbWUgPSBkZWNsYXJhdGlvbi5uYW1lITtcblxuXHRjb25zdCBsb2NhdGlvbjogc3RyaW5nID0gcmVzb2x2ZUxvY2F0aW9uKHtcblx0XHRpbXBvcnRfbWV0YSxcblx0XHRuYW1lLFxuXHRcdGV4dGVuc2lvbjogJ2NzcycsXG5cdH0pO1xuXG5cdGNvbnN0IHNoYWRvd1Jvb3Q6IFNoYWRvd1Jvb3QgfCBudWxsID0gZmluZE5lYXJlc3RTaGFkb3dSb290KGVsZW1lbnQpO1xuXG5cdGFwcGVuZExpbmtFbGVtZW50KHNoYWRvd1Jvb3QgfHwgZG9jdW1lbnQsIHtocmVmOiBsb2NhdGlvbiwgaWQ6IG5hbWV9KTtcbn1cblxuLyoqXG4gKiBhZG9wdGVyIG9mIGZvbnQgc3R5bGVzaGVldHMgY2FuIG9ubHkgYmUgdGhlIHJvb3QgZG9jdW1lbnQgZG9tLCBub3QgdGhlIHNoYWRvdyBkb20uXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy8xNTk4NzcjaXNzdWVjb21tZW50LTEyNjI4NDM5NTJcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21kbi9pbnRlcmFjdGl2ZS1leGFtcGxlcy9pc3N1ZXMvODg3I2lzc3VlY29tbWVudC00MzI2MDY5MjVcbiAqL1xuZnVuY3Rpb24gbGlua19mb250cyhkZWZpbml0aW9uOiBDdXN0b21hcnlEZWZpbml0aW9uPGFueT4pIHtcblx0Y29uc3QgZGVjbGFyYXRpb24gPSBkZWZpbml0aW9uLmRlY2xhcmF0aW9uO1xuXG5cdGNvbnN0IGxvY2F0aW9ucyA9IGNvbGxlY3RfZm9udF9sb2NhdGlvbnMoZGVjbGFyYXRpb24pO1xuXG5cdGlmICghbG9jYXRpb25zKSByZXR1cm47XG5cblx0Zm9yIChjb25zdCBsb2NhdGlvbiBvZiBsb2NhdGlvbnMpIHtcblx0XHRhcHBlbmRMaW5rRWxlbWVudChkb2N1bWVudCwge2hyZWY6IGxvY2F0aW9uLCBpZDogYGN1c3RvbWFyeS1mb250TG9jYXRpb24tJHtsb2NhdGlvbn1gfSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwZW5kTGlua0VsZW1lbnQoXG5cdGhvc3Q6IFNoYWRvd1Jvb3QgfCBEb2N1bWVudCxcblx0b3B0aW9uczoge1xuXHRcdGhyZWY6IHN0cmluZyxcblx0XHRpZDogc3RyaW5nLFxuXHR9XG4pXG57XG5cdGNvbnN0IGlkID0gb3B0aW9ucy5pZDtcblxuXHRjb25zdCBleGlzdHMgPSBob3N0IGluc3RhbmNlb2YgU2hhZG93Um9vdCA/IGhvc3QuZ2V0RWxlbWVudEJ5SWQoaWQpIDogaG9zdC5nZXRFbGVtZW50QnlJZChpZCk7XG5cblx0aWYgKGV4aXN0cykgcmV0dXJuO1xuXG5cdGNvbnN0IG5vZGUgPSBob3N0IGluc3RhbmNlb2YgU2hhZG93Um9vdCA/IGhvc3QgOiBob3N0LmhlYWQ7XG5cblx0Y29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cdGxpbmtFbGVtZW50LmhyZWYgPSBvcHRpb25zLmhyZWY7XG5cdGxpbmtFbGVtZW50LmlkID0gaWQ7XG5cdGxpbmtFbGVtZW50LnJlbCA9ICdzdHlsZXNoZWV0Jztcblx0bGlua0VsZW1lbnQudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cblx0bm9kZS5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGZpbmROZWFyZXN0U2hhZG93Um9vdChlbGVtZW50OiBFbGVtZW50KTogU2hhZG93Um9vdCB8IG51bGwge1xuXHRpZiAoZWxlbWVudC5zaGFkb3dSb290KSByZXR1cm4gZWxlbWVudC5zaGFkb3dSb290O1xuXHRsZXQgcGFyZW50Tm9kZSA9IGVsZW1lbnQucGFyZW50Tm9kZTtcblx0d2hpbGUgKHBhcmVudE5vZGUpIHtcblx0XHRpZiAocGFyZW50Tm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcblx0XHRcdHJldHVybiBwYXJlbnROb2RlO1xuXHRcdH1cblx0XHRwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuIiwiaW1wb3J0IHtDdXN0b21hcnlEZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlWYWx1ZXMge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIGluc3RhbGxfdmFsdWVzKFxuICAgICAgICAgZGVmaW5pdGlvbjogQ3VzdG9tYXJ5RGVmaW5pdGlvbjxhbnk+XG4gICAgKSB7XG4gICAgICAgIGlmIChkZWZpbml0aW9uLmRlY2xhcmF0aW9uLnZhbHVlcykge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmVsZW1lbnQsIGRlZmluaXRpb24uZGVjbGFyYXRpb24udmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH1cbn0iXSwibmFtZXMiOlsiZ2xvYmFsIiwiZ2xvYmFsVGhpcyIsIkxpdEVsZW1lbnQiLCJSZWFjdGl2ZUVsZW1lbnQiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJyZW5kZXJPcHRpb25zIiwiaG9zdCIsIl9fY2hpbGRQYXJ0IiwidW5kZWZpbmVkIiwiY3JlYXRlUmVuZGVyUm9vdCIsInJlbmRlclJvb3QiLCJzdXBlciIsInJlbmRlckJlZm9yZSIsImZpcnN0Q2hpbGQiLCJ1cGRhdGUiLCJjaGFuZ2VkUHJvcGVydGllcyIsInZhbHVlIiwicmVuZGVyIiwiaGFzVXBkYXRlZCIsImlzQ29ubmVjdGVkIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJzZXRDb25uZWN0ZWQiLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsIm5vQ2hhbmdlIiwibGl0RWxlbWVudEh5ZHJhdGVTdXBwb3J0IiwicG9seWZpbGxTdXBwb3J0IiwibGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydCIsIl8kTEUiLCJfJGF0dHJpYnV0ZVRvUHJvcGVydHkiLCJlbCIsIm5hbWUiLCJfJGNoYW5nZWRQcm9wZXJ0aWVzIiwibGl0RWxlbWVudFZlcnNpb25zIiwicHVzaCIsImlzIiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0UHJvdG90eXBlT2YiLCJPYmplY3QiLCJ0cnVzdGVkVHlwZXMiLCJlbXB0eVN0cmluZ0ZvckJvb2xlYW5BdHRyaWJ1dGUiLCJlbXB0eVNjcmlwdCIsInJlYWN0aXZlRWxlbWVudFBvbHlmaWxsU3VwcG9ydCIsIkpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkiLCJwcm9wIiwiX29iaiIsImRlZmF1bHRDb252ZXJ0ZXIiLCJ0b0F0dHJpYnV0ZSIsInR5cGUiLCJCb29sZWFuIiwiQXJyYXkiLCJKU09OIiwic3RyaW5naWZ5IiwiZnJvbUF0dHJpYnV0ZSIsImZyb21WYWx1ZSIsIk51bWJlciIsInBhcnNlIiwiZSIsIm5vdEVxdWFsIiwib2xkIiwiZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24iLCJhdHRyaWJ1dGUiLCJTdHJpbmciLCJjb252ZXJ0ZXIiLCJyZWZsZWN0IiwidXNlRGVmYXVsdCIsImhhc0NoYW5nZWQiLCJTeW1ib2wiLCJtZXRhZGF0YSIsImxpdFByb3BlcnR5TWV0YWRhdGEiLCJXZWFrTWFwIiwiSFRNTEVsZW1lbnQiLCJhZGRJbml0aWFsaXplciIsImluaXRpYWxpemVyIiwiX19wcmVwYXJlIiwiX2luaXRpYWxpemVycyIsIm9ic2VydmVkQXR0cmlidXRlcyIsImZpbmFsaXplIiwiX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIiwia2V5cyIsImNyZWF0ZVByb3BlcnR5Iiwib3B0aW9ucyIsInN0YXRlIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGUiLCJ3cmFwcGVkIiwiZWxlbWVudFByb3BlcnRpZXMiLCJzZXQiLCJub0FjY2Vzc29yIiwia2V5IiwiZGVzY3JpcHRvciIsImdldFByb3BlcnR5RGVzY3JpcHRvciIsImdldCIsInYiLCJvbGRWYWx1ZSIsImNhbGwiLCJyZXF1ZXN0VXBkYXRlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldFByb3BlcnR5T3B0aW9ucyIsInN1cGVyQ3RvciIsIk1hcCIsImZpbmFsaXplZCIsInByb3BzIiwicHJvcGVydGllcyIsInByb3BLZXlzIiwicCIsImF0dHIiLCJfX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eSIsImVsZW1lbnRTdHlsZXMiLCJmaW5hbGl6ZVN0eWxlcyIsInN0eWxlcyIsImlzQXJyYXkiLCJTZXQiLCJmbGF0IiwiSW5maW5pdHkiLCJyZXZlcnNlIiwicyIsInVuc2hpZnQiLCJnZXRDb21wYXRpYmxlU3R5bGUiLCJ0b0xvd2VyQ2FzZSIsIl9faW5zdGFuY2VQcm9wZXJ0aWVzIiwiaXNVcGRhdGVQZW5kaW5nIiwiX19yZWZsZWN0aW5nUHJvcGVydHkiLCJfX2luaXRpYWxpemUiLCJfX3VwZGF0ZVByb21pc2UiLCJQcm9taXNlIiwicmVzIiwiZW5hYmxlVXBkYXRpbmciLCJfX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMiLCJmb3JFYWNoIiwiaSIsImFkZENvbnRyb2xsZXIiLCJjb250cm9sbGVyIiwiX19jb250cm9sbGVycyIsImFkZCIsImhvc3RDb25uZWN0ZWQiLCJyZW1vdmVDb250cm9sbGVyIiwiZGVsZXRlIiwiaW5zdGFuY2VQcm9wZXJ0aWVzIiwic2l6ZSIsInNoYWRvd1Jvb3QiLCJhdHRhY2hTaGFkb3ciLCJzaGFkb3dSb290T3B0aW9ucyIsImFkb3B0U3R5bGVzIiwiYyIsIl9yZXF1ZXN0ZWRVcGRhdGUiLCJob3N0RGlzY29ubmVjdGVkIiwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIiwiX29sZCIsIl9fcHJvcGVydHlUb0F0dHJpYnV0ZSIsImF0dHJWYWx1ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImN0b3IiLCJwcm9wTmFtZSIsIl9fZGVmYXVsdFZhbHVlcyIsIm5ld1ZhbHVlIiwiaGFzQXR0cmlidXRlIiwiXyRjaGFuZ2VQcm9wZXJ0eSIsIl9fZW5xdWV1ZVVwZGF0ZSIsImluaXRpYWxpemVWYWx1ZSIsImhhcyIsIl9fcmVmbGVjdGluZ1Byb3BlcnRpZXMiLCJyZWplY3QiLCJyZXN1bHQiLCJzY2hlZHVsZVVwZGF0ZSIsInBlcmZvcm1VcGRhdGUiLCJzaG91bGRVcGRhdGUiLCJ3aWxsVXBkYXRlIiwiaG9zdFVwZGF0ZSIsIl9fbWFya1VwZGF0ZWQiLCJfJGRpZFVwZGF0ZSIsIl9jaGFuZ2VkUHJvcGVydGllcyIsImhvc3RVcGRhdGVkIiwiZmlyc3RVcGRhdGVkIiwidXBkYXRlZCIsInVwZGF0ZUNvbXBsZXRlIiwiZ2V0VXBkYXRlQ29tcGxldGUiLCJtb2RlIiwicmVhY3RpdmVFbGVtZW50VmVyc2lvbnMiLCJzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMiLCJTaGFkb3dSb290IiwiU2hhZHlDU1MiLCJuYXRpdmVTaGFkb3ciLCJEb2N1bWVudCIsIkNTU1N0eWxlU2hlZXQiLCJjb25zdHJ1Y3Rpb25Ub2tlbiIsImNzc1RhZ0NhY2hlIiwiQ1NTUmVzdWx0IiwiY3NzVGV4dCIsInN0cmluZ3MiLCJzYWZlVG9rZW4iLCJFcnJvciIsIl9zdHJpbmdzIiwic3R5bGVTaGVldCIsIl9zdHlsZVNoZWV0IiwiY2FjaGVhYmxlIiwibGVuZ3RoIiwicmVwbGFjZVN5bmMiLCJ0b1N0cmluZyIsInVuc2FmZUNTUyIsImNzcyIsInZhbHVlcyIsInJlZHVjZSIsImFjYyIsImlkeCIsInRleHRGcm9tQ1NTUmVzdWx0IiwiYWRvcHRlZFN0eWxlU2hlZXRzIiwibWFwIiwic3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJub25jZSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJzaGVldCIsInJ1bGUiLCJjc3NSdWxlcyIsImNzc1Jlc3VsdEZyb21TdHlsZVNoZWV0IiwicG9saWN5IiwiY3JlYXRlUG9saWN5IiwiY3JlYXRlSFRNTCIsImJvdW5kQXR0cmlidXRlU3VmZml4IiwibWFya2VyIiwiTWF0aCIsInJhbmRvbSIsInRvRml4ZWQiLCJzbGljZSIsIm1hcmtlck1hdGNoIiwibm9kZU1hcmtlciIsImQiLCJjcmVhdGVNYXJrZXIiLCJjcmVhdGVDb21tZW50IiwiaXNQcmltaXRpdmUiLCJpc0l0ZXJhYmxlIiwiaXRlcmF0b3IiLCJTUEFDRV9DSEFSIiwidGV4dEVuZFJlZ2V4IiwiY29tbWVudEVuZFJlZ2V4IiwiY29tbWVudDJFbmRSZWdleCIsInRhZ0VuZFJlZ2V4IiwiUmVnRXhwIiwic2luZ2xlUXVvdGVBdHRyRW5kUmVnZXgiLCJkb3VibGVRdW90ZUF0dHJFbmRSZWdleCIsInJhd1RleHRFbGVtZW50IiwidGFnIiwiXyRsaXRUeXBlJCIsImh0bWwiLCJzdmciLCJtYXRobWwiLCJmb3IiLCJub3RoaW5nIiwidGVtcGxhdGVDYWNoZSIsIndhbGtlciIsImNyZWF0ZVRyZWVXYWxrZXIiLCJ0cnVzdEZyb21UZW1wbGF0ZVN0cmluZyIsInRzYSIsInN0cmluZ0Zyb21UU0EiLCJnZXRUZW1wbGF0ZUh0bWwiLCJsIiwiYXR0ck5hbWVzIiwicmF3VGV4dEVuZFJlZ2V4IiwicmVnZXgiLCJhdHRyTmFtZSIsIm1hdGNoIiwiYXR0ck5hbWVFbmRJbmRleCIsImxhc3RJbmRleCIsImV4ZWMiLCJ0ZXN0IiwiZW5kIiwic3RhcnRzV2l0aCIsIlRlbXBsYXRlIiwibm9kZSIsInBhcnRzIiwibm9kZUluZGV4IiwiYXR0ck5hbWVJbmRleCIsInBhcnRDb3VudCIsImN1cnJlbnROb2RlIiwiY29udGVudCIsIndyYXBwZXIiLCJyZXBsYWNlV2l0aCIsImNoaWxkTm9kZXMiLCJuZXh0Tm9kZSIsIm5vZGVUeXBlIiwiaGFzQXR0cmlidXRlcyIsImdldEF0dHJpYnV0ZU5hbWVzIiwiZW5kc1dpdGgiLCJyZWFsTmFtZSIsInN0YXRpY3MiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsIm0iLCJpbmRleCIsIlByb3BlcnR5UGFydCIsIkJvb2xlYW5BdHRyaWJ1dGVQYXJ0IiwiRXZlbnRQYXJ0IiwiQXR0cmlidXRlUGFydCIsInRhZ05hbWUiLCJhcHBlbmQiLCJkYXRhIiwiaW5kZXhPZiIsIl9vcHRpb25zIiwiaW5uZXJIVE1MIiwicmVzb2x2ZURpcmVjdGl2ZSIsInBhcnQiLCJwYXJlbnQiLCJhdHRyaWJ1dGVJbmRleCIsImN1cnJlbnREaXJlY3RpdmUiLCJfX2RpcmVjdGl2ZXMiLCJfX2RpcmVjdGl2ZSIsIm5leHREaXJlY3RpdmVDb25zdHJ1Y3RvciIsIl8kaW5pdGlhbGl6ZSIsIl8kcmVzb2x2ZSIsIlRlbXBsYXRlSW5zdGFuY2UiLCJ0ZW1wbGF0ZSIsIl8kcGFydHMiLCJfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4iLCJfJHRlbXBsYXRlIiwiXyRwYXJlbnQiLCJwYXJlbnROb2RlIiwiXyRpc0Nvbm5lY3RlZCIsIl9jbG9uZSIsImZyYWdtZW50IiwiY3JlYXRpb25TY29wZSIsImltcG9ydE5vZGUiLCJwYXJ0SW5kZXgiLCJ0ZW1wbGF0ZVBhcnQiLCJDaGlsZFBhcnQiLCJuZXh0U2libGluZyIsIkVsZW1lbnRQYXJ0IiwiX3VwZGF0ZSIsIl8kc2V0VmFsdWUiLCJfX2lzQ29ubmVjdGVkIiwic3RhcnROb2RlIiwiZW5kTm9kZSIsIl8kY29tbWl0dGVkVmFsdWUiLCJfJHN0YXJ0Tm9kZSIsIl8kZW5kTm9kZSIsImRpcmVjdGl2ZVBhcmVudCIsIl8kY2xlYXIiLCJfY29tbWl0VGV4dCIsIl9jb21taXRUZW1wbGF0ZVJlc3VsdCIsIl9jb21taXROb2RlIiwiX2NvbW1pdEl0ZXJhYmxlIiwiX2luc2VydCIsImluc2VydEJlZm9yZSIsImNyZWF0ZVRleHROb2RlIiwiXyRnZXRUZW1wbGF0ZSIsImgiLCJpbnN0YW5jZSIsIml0ZW1QYXJ0cyIsIml0ZW1QYXJ0IiwiaXRlbSIsInN0YXJ0IiwiZnJvbSIsIl8kbm90aWZ5Q29ubmVjdGlvbkNoYW5nZWQiLCJuIiwicmVtb3ZlIiwiZWxlbWVudCIsImZpbGwiLCJ2YWx1ZUluZGV4Iiwibm9Db21taXQiLCJjaGFuZ2UiLCJfY29tbWl0VmFsdWUiLCJ0b2dnbGVBdHRyaWJ1dGUiLCJuZXdMaXN0ZW5lciIsIm9sZExpc3RlbmVyIiwic2hvdWxkUmVtb3ZlTGlzdGVuZXIiLCJjYXB0dXJlIiwib25jZSIsInBhc3NpdmUiLCJzaG91bGRBZGRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRXZlbnQiLCJldmVudCIsIl8kTEgiLCJfYm91bmRBdHRyaWJ1dGVTdWZmaXgiLCJfbWFya2VyIiwiX21hcmtlck1hdGNoIiwiX0hUTUxfUkVTVUxUIiwiX2dldFRlbXBsYXRlSHRtbCIsIl9UZW1wbGF0ZUluc3RhbmNlIiwiX2lzSXRlcmFibGUiLCJfcmVzb2x2ZURpcmVjdGl2ZSIsIl9DaGlsZFBhcnQiLCJfQXR0cmlidXRlUGFydCIsIl9Cb29sZWFuQXR0cmlidXRlUGFydCIsIl9FdmVudFBhcnQiLCJfUHJvcGVydHlQYXJ0IiwiX0VsZW1lbnRQYXJ0IiwibGl0SHRtbFBvbHlmaWxsU3VwcG9ydCIsImxpdEh0bWxWZXJzaW9ucyIsImNvbnRhaW5lciIsInBhcnRPd25lck5vZGUiLCJjaG9vc2UiLCJjYXNlcyIsImRlZmF1bHRDYXNlIiwiZm4iLCJjbGFzc01hcCIsImRpcmVjdGl2ZSIsIkRpcmVjdGl2ZSIsInBhcnRJbmZvIiwiUGFydFR5cGUiLCJBVFRSSUJVVEUiLCJjbGFzc0luZm8iLCJmaWx0ZXIiLCJqb2luIiwiX3ByZXZpb3VzQ2xhc3NlcyIsIl9zdGF0aWNDbGFzc2VzIiwiY2xhc3NMaXN0IiwiQ0hJTEQiLCJQUk9QRVJUWSIsIkJPT0xFQU5fQVRUUklCVVRFIiwiRVZFTlQiLCJFTEVNRU5UIiwiXyRsaXREaXJlY3RpdmUkIiwiX3BhcnRJbmZvIiwiX19wYXJ0IiwiX19hdHRyaWJ1dGVJbmRleCIsIl9wYXJ0IiwiaW1wb3J0YW50IiwiaW1wb3J0YW50RmxhZyIsInN0eWxlTWFwIiwic3R5bGVJbmZvIiwiaW5jbHVkZXMiLCJyZXBsYWNlIiwiX3ByZXZpb3VzU3R5bGVQcm9wZXJ0aWVzIiwicmVtb3ZlUHJvcGVydHkiLCJpc0ltcG9ydGFudCIsInNldFByb3BlcnR5IiwiaXRlbXMiLCJmIiwiZ2VuZXJhdGVNYXAiLCJsaXN0IiwicmVwZWF0IiwiX2dldFZhbHVlc0FuZEtleXMiLCJrZXlGbk9yVGVtcGxhdGUiLCJrZXlGbiIsImNvbnRhaW5lclBhcnQiLCJvbGRQYXJ0cyIsImdldENvbW1pdHRlZFZhbHVlIiwibmV3VmFsdWVzIiwibmV3S2V5cyIsIl9pdGVtS2V5cyIsIm9sZEtleXMiLCJuZXdQYXJ0cyIsIm5ld0tleVRvSW5kZXhNYXAiLCJvbGRLZXlUb0luZGV4TWFwIiwib2xkSGVhZCIsIm9sZFRhaWwiLCJuZXdIZWFkIiwibmV3VGFpbCIsInNldENoaWxkUGFydFZhbHVlIiwiaW5zZXJ0UGFydCIsIm9sZEluZGV4Iiwib2xkUGFydCIsIm5ld1BhcnQiLCJyZW1vdmVQYXJ0Iiwic2V0Q29tbWl0dGVkVmFsdWUiLCJUZW1wbGF0ZVJlc3VsdFR5cGUiLCJIVE1MIiwiU1ZHIiwiTUFUSE1MIiwiaXNUZW1wbGF0ZVJlc3VsdCIsImlzQ29tcGlsZWRUZW1wbGF0ZVJlc3VsdCIsImlzRGlyZWN0aXZlUmVzdWx0IiwiZ2V0RGlyZWN0aXZlQ2xhc3MiLCJpc1NpbmdsZUV4cHJlc3Npb24iLCJyZWZQYXJ0IiwicmVmTm9kZSIsIm9sZFBhcmVudCIsInBhcmVudENoYW5nZWQiLCJuZXdDb25uZWN0aW9uU3RhdGUiLCJfJHJlcGFyZW50RGlzY29ubmVjdGFibGVzIiwiUkVTRVRfVkFMVUUiLCJjbGVhclBhcnQiLCJ3aGVuIiwiY29uZGl0aW9uIiwidHJ1ZUNhc2UiLCJmYWxzZUNhc2UiXSwidmVyc2lvbiI6MywiZmlsZSI6ImN1c3RvbWFyeS5tanMubWFwIn0=
